(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K1={exports:{}},bd={},Q1={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),YC=Symbol.for("react.portal"),XC=Symbol.for("react.fragment"),JC=Symbol.for("react.strict_mode"),ZC=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),nx=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),ix=Symbol.for("react.memo"),sx=Symbol.for("react.lazy"),Dw=Symbol.iterator;function ox(t){return t===null||typeof t!="object"?null:(t=Dw&&t[Dw]||t["@@iterator"],typeof t=="function"?t:null)}var Y1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X1=Object.assign,J1={};function ca(t,e,n){this.props=t,this.context=e,this.refs=J1,this.updater=n||Y1}ca.prototype.isReactComponent={};ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z1(){}Z1.prototype=ca.prototype;function Fg(t,e,n){this.props=t,this.context=e,this.refs=J1,this.updater=n||Y1}var Ug=Fg.prototype=new Z1;Ug.constructor=Fg;X1(Ug,ca.prototype);Ug.isPureReactComponent=!0;var Cw=Array.isArray,eS=Object.prototype.hasOwnProperty,Bg={current:null},tS={key:!0,ref:!0,__self:!0,__source:!0};function nS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eS.call(e,r)&&!tS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Du,type:t,key:s,ref:o,props:i,_owner:Bg.current}}function ax(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function lx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xw=/\/+/g;function sp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lx(""+t.key):e.toString(36)}function Zc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Du:case YC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+sp(o,0):r,Cw(i)?(n="",t!=null&&(n=t.replace(xw,"$&/")+"/"),Zc(i,e,n,"",function(c){return c})):i!=null&&(zg(i)&&(i=ax(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Cw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+sp(s,a);o+=Zc(s,e,n,l,i)}else if(l=ox(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+sp(s,a++),o+=Zc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(t,e,n){if(t==null)return t;var r=[],i=0;return Zc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ux(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},eh={transition:null},cx={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:eh,ReactCurrentOwner:Bg};function rS(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Tc,forEach:function(t,e,n){Tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tc(t,function(){e++}),e},toArray:function(t){return Tc(t,function(e){return e})||[]},only:function(t){if(!zg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=ca;fe.Fragment=XC;fe.Profiler=ZC;fe.PureComponent=Fg;fe.StrictMode=JC;fe.Suspense=rx;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cx;fe.act=rS;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=X1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Bg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eS.call(e,l)&&!tS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Du,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:tx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ex,_context:t},t.Consumer=t};fe.createElement=nS;fe.createFactory=function(t){var e=nS.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:nx,render:t}};fe.isValidElement=zg;fe.lazy=function(t){return{$$typeof:sx,_payload:{_status:-1,_result:t},_init:ux}};fe.memo=function(t,e){return{$$typeof:ix,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=eh.transition;eh.transition={};try{t()}finally{eh.transition=e}};fe.unstable_act=rS;fe.useCallback=function(t,e){return Xt.current.useCallback(t,e)};fe.useContext=function(t){return Xt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Xt.current.useEffect(t,e)};fe.useId=function(){return Xt.current.useId()};fe.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Xt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};fe.useRef=function(t){return Xt.current.useRef(t)};fe.useState=function(t){return Xt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Xt.current.useTransition()};fe.version="18.3.1";Q1.exports=fe;var le=Q1.exports;const V=nt(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=le,dx=Symbol.for("react.element"),fx=Symbol.for("react.fragment"),px=Object.prototype.hasOwnProperty,mx=hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gx={key:!0,ref:!0,__self:!0,__source:!0};function iS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)px.call(e,r)&&!gx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dx,type:t,key:s,ref:o,props:i,_owner:mx.current}}bd.Fragment=fx;bd.jsx=iS;bd.jsxs=iS;K1.exports=bd;var mr=K1.exports,sS={exports:{}},Tn={},oS={exports:{}},aS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var Q=$.length;$.push(G);e:for(;0<Q;){var oe=Q-1>>>1,L=$[oe];if(0<i(L,G))$[oe]=G,$[Q]=L,Q=oe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],Q=$.pop();if(Q!==G){$[0]=Q;e:for(var oe=0,L=$.length,B=L>>>1;oe<B;){var H=2*(oe+1)-1,J=$[H],re=H+1,ce=$[re];if(0>i(J,Q))re<L&&0>i(ce,J)?($[oe]=ce,$[re]=Q,oe=re):($[oe]=J,$[H]=Q,oe=H);else if(re<L&&0>i(ce,Q))$[oe]=ce,$[re]=Q,oe=re;else break e}}return G}function i($,G){var Q=$.sortIndex-G.sortIndex;return Q!==0?Q:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,_=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=$)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function P($){if(v=!1,T($),!_)if(n(l)!==null)_=!0,z(x);else{var G=n(c);G!==null&&Y(P,G.startTime-$)}}function x($,G){_=!1,v&&(v=!1,w(E),E=-1),m=!0;var Q=f;try{for(T(G),d=n(l);d!==null&&(!(d.expirationTime>G)||$&&!D());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,f=d.priorityLevel;var L=oe(d.expirationTime<=G);G=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),T(G)}else r(l);d=n(l)}if(d!==null)var B=!0;else{var H=n(c);H!==null&&Y(P,H.startTime-G),B=!1}return B}finally{d=null,f=Q,m=!1}}var O=!1,I=null,E=-1,A=5,b=-1;function D(){return!(t.unstable_now()-b<A)}function k(){if(I!==null){var $=t.unstable_now();b=$;var G=!0;try{G=I(!0,$)}finally{G?C():(O=!1,I=null)}}else O=!1}var C;if(typeof y=="function")C=function(){y(k)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=k,C=function(){q.postMessage(null)}}else C=function(){S(k,0)};function z($){I=$,O||(O=!0,C())}function Y($,G){E=S(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,z(x))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var Q=f;f=G;try{return $()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=f;f=$;try{return G()}finally{f=Q}},t.unstable_scheduleCallback=function($,G,Q){var oe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,$){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Q+L,$={id:h++,callback:G,priorityLevel:$,startTime:Q,expirationTime:L,sortIndex:-1},Q>oe?($.sortIndex=Q,e(c,$),n(l)===null&&$===n(c)&&(v?(w(E),E=-1):v=!0,Y(P,Q-oe))):($.sortIndex=L,e(l,$),_||m||(_=!0,z(x))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var G=f;return function(){var Q=f;f=G;try{return $.apply(this,arguments)}finally{f=Q}}}})(aS);oS.exports=aS;var vx=oS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=le,_n=vx;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lS=new Set,Ll={};function zs(t,e){Vo(t,e),Vo(t+"Capture",e)}function Vo(t,e){for(Ll[t]=e,t=0;t<e.length;t++)lS.add(e[t])}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tm=Object.prototype.hasOwnProperty,_x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kw={},Ow={};function wx(t){return tm.call(Ow,t)?!0:tm.call(kw,t)?!1:_x.test(t)?Ow[t]=!0:(kw[t]=!0,!1)}function Ex(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tx(t,e,n,r){if(e===null||typeof e>"u"||Ex(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var jg=/[\-:]([a-z])/g;function qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jg,qg);Rt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jg,qg);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jg,qg);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wg(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tx(e,n,i,r)&&(n=null),r||i===null?wx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),po=Symbol.for("react.portal"),mo=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),cS=Symbol.for("react.context"),Hg=Symbol.for("react.forward_ref"),rm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),hS=Symbol.for("react.offscreen"),Nw=Symbol.iterator;function Ka(t){return t===null||typeof t!="object"?null:(t=Nw&&t[Nw]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,op;function hl(t){if(op===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);op=e&&e[1]||""}return`
`+op+t}var ap=!1;function lp(t,e){if(!t||ap)return"";ap=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ap=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hl(t):""}function Sx(t){switch(t.tag){case 5:return hl(t.type);case 16:return hl("Lazy");case 13:return hl("Suspense");case 19:return hl("SuspenseList");case 0:case 2:case 15:return t=lp(t.type,!1),t;case 11:return t=lp(t.type.render,!1),t;case 1:return t=lp(t.type,!0),t;default:return""}}function sm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mo:return"Fragment";case po:return"Portal";case nm:return"Profiler";case Gg:return"StrictMode";case rm:return"Suspense";case im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cS:return(t.displayName||"Context")+".Consumer";case uS:return(t._context.displayName||"Context")+".Provider";case Hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kg:return e=t.displayName||null,e!==null?e:sm(t.type)||"Memo";case Yr:e=t._payload,t=t._init;try{return sm(t(e))}catch{}}return null}function Ix(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sm(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ax(t){var e=dS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ic(t){t._valueTracker||(t._valueTracker=Ax(t))}function fS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function om(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pS(t,e){e=e.checked,e!=null&&Wg(t,"checked",e,!1)}function am(t,e){pS(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lm(t,e.type,n):e.hasOwnProperty("defaultValue")&&lm(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lm(t,e,n){(e!=="number"||Ah(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dl=Array.isArray;function Ro(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function um(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $w(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(dl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function mS(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ac,vS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bx=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){bx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function yS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function _S(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Rx=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hm(t,e){if(e){if(Rx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function dm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function Qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pm=null,Po=null,Do=null;function Fw(t){if(t=ku(t)){if(typeof pm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=xd(e),pm(t.stateNode,t.type,e))}}function wS(t){Po?Do?Do.push(t):Do=[t]:Po=t}function ES(){if(Po){var t=Po,e=Do;if(Do=Po=null,Fw(t),e)for(t=0;t<e.length;t++)Fw(e[t])}}function TS(t,e){return t(e)}function SS(){}var up=!1;function IS(t,e,n){if(up)return t(e,n);up=!0;try{return TS(t,e,n)}finally{up=!1,(Po!==null||Do!==null)&&(SS(),ES())}}function Ul(t,e){var n=t.stateNode;if(n===null)return null;var r=xd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var mm=!1;if(br)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){mm=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{mm=!1}function Px(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var El=!1,bh=null,Rh=!1,gm=null,Dx={onError:function(t){El=!0,bh=t}};function Cx(t,e,n,r,i,s,o,a,l){El=!1,bh=null,Px.apply(Dx,arguments)}function xx(t,e,n,r,i,s,o,a,l){if(Cx.apply(this,arguments),El){if(El){var c=bh;El=!1,bh=null}else throw Error(X(198));Rh||(Rh=!0,gm=c)}}function js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uw(t){if(js(t)!==t)throw Error(X(188))}function kx(t){var e=t.alternate;if(!e){if(e=js(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Uw(i),t;if(s===r)return Uw(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function bS(t){return t=kx(t),t!==null?RS(t):null}function RS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RS(t);if(e!==null)return e;t=t.sibling}return null}var PS=_n.unstable_scheduleCallback,Bw=_n.unstable_cancelCallback,Ox=_n.unstable_shouldYield,Nx=_n.unstable_requestPaint,rt=_n.unstable_now,Mx=_n.unstable_getCurrentPriorityLevel,Yg=_n.unstable_ImmediatePriority,DS=_n.unstable_UserBlockingPriority,Ph=_n.unstable_NormalPriority,Vx=_n.unstable_LowPriority,CS=_n.unstable_IdlePriority,Rd=null,tr=null;function $x(t){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Ux,Lx=Math.log,Fx=Math.LN2;function Ux(t){return t>>>=0,t===0?32:31-(Lx(t)/Fx|0)|0}var bc=64,Rc=4194304;function fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=fl(a):(s&=o,s!==0&&(r=fl(s)))}else o=n&~i,o!==0?r=fl(o):s!==0&&(r=fl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function Bx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Bx(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xS(){var t=bc;return bc<<=1,!(bc&4194240)&&(bc=64),t}function cp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function jx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function kS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var OS,Jg,NS,MS,VS,ym=!1,Pc=[],si=null,oi=null,ai=null,Bl=new Map,zl=new Map,Jr=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zw(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(e.pointerId)}}function Ya(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ku(e),e!==null&&Jg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Wx(t,e,n,r,i){switch(e){case"focusin":return si=Ya(si,t,e,n,r,i),!0;case"dragenter":return oi=Ya(oi,t,e,n,r,i),!0;case"mouseover":return ai=Ya(ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bl.set(s,Ya(Bl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zl.set(s,Ya(zl.get(s)||null,t,e,n,r,i)),!0}return!1}function $S(t){var e=ls(t.target);if(e!==null){var n=js(e);if(n!==null){if(e=n.tag,e===13){if(e=AS(n),e!==null){t.blockedOn=e,VS(t.priority,function(){NS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fm=r,n.target.dispatchEvent(r),fm=null}else return e=ku(n),e!==null&&Jg(e),t.blockedOn=n,!1;e.shift()}return!0}function jw(t,e,n){th(t)&&n.delete(e)}function Gx(){ym=!1,si!==null&&th(si)&&(si=null),oi!==null&&th(oi)&&(oi=null),ai!==null&&th(ai)&&(ai=null),Bl.forEach(jw),zl.forEach(jw)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,ym||(ym=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,Gx)))}function jl(t){function e(i){return Xa(i,t)}if(0<Pc.length){Xa(Pc[0],t);for(var n=1;n<Pc.length;n++){var r=Pc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(si!==null&&Xa(si,t),oi!==null&&Xa(oi,t),ai!==null&&Xa(ai,t),Bl.forEach(e),zl.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)$S(n),n.blockedOn===null&&Jr.shift()}var Co=Vr.ReactCurrentBatchConfig,Ch=!0;function Hx(t,e,n,r){var i=Ie,s=Co.transition;Co.transition=null;try{Ie=1,Zg(t,e,n,r)}finally{Ie=i,Co.transition=s}}function Kx(t,e,n,r){var i=Ie,s=Co.transition;Co.transition=null;try{Ie=4,Zg(t,e,n,r)}finally{Ie=i,Co.transition=s}}function Zg(t,e,n,r){if(Ch){var i=_m(t,e,n,r);if(i===null)wp(t,e,r,xh,n),zw(t,r);else if(Wx(i,t,e,n,r))r.stopPropagation();else if(zw(t,r),e&4&&-1<qx.indexOf(t)){for(;i!==null;){var s=ku(i);if(s!==null&&OS(s),s=_m(t,e,n,r),s===null&&wp(t,e,r,xh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wp(t,e,r,null,n)}}var xh=null;function _m(t,e,n,r){if(xh=null,t=Qg(r),t=ls(t),t!==null)if(e=js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xh=t,null}function LS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mx()){case Yg:return 1;case DS:return 4;case Ph:case Vx:return 16;case CS:return 536870912;default:return 16}default:return 16}}var ni=null,ev=null,nh=null;function FS(){if(nh)return nh;var t,e=ev,n=e.length,r,i="value"in ni?ni.value:ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nh=i.slice(t,1<r?1-r:void 0)}function rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dc(){return!0}function qw(){return!1}function Sn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dc:qw,this.isPropagationStopped=qw,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dc)},persist:function(){},isPersistent:Dc}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tv=Sn(ha),xu=Ke({},ha,{view:0,detail:0}),Qx=Sn(xu),hp,dp,Ja,Pd=Ke({},xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(hp=t.screenX-Ja.screenX,dp=t.screenY-Ja.screenY):dp=hp=0,Ja=t),hp)},movementY:function(t){return"movementY"in t?t.movementY:dp}}),Ww=Sn(Pd),Yx=Ke({},Pd,{dataTransfer:0}),Xx=Sn(Yx),Jx=Ke({},xu,{relatedTarget:0}),fp=Sn(Jx),Zx=Ke({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=Sn(Zx),tk=Ke({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nk=Sn(tk),rk=Ke({},ha,{data:0}),Gw=Sn(rk),ik={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ak(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ok[t])?!!e[t]:!1}function nv(){return ak}var lk=Ke({},xu,{key:function(t){if(t.key){var e=ik[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nv,charCode:function(t){return t.type==="keypress"?rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uk=Sn(lk),ck=Ke({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hw=Sn(ck),hk=Ke({},xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nv}),dk=Sn(hk),fk=Ke({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=Sn(fk),mk=Ke({},Pd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gk=Sn(mk),vk=[9,13,27,32],rv=br&&"CompositionEvent"in window,Tl=null;br&&"documentMode"in document&&(Tl=document.documentMode);var yk=br&&"TextEvent"in window&&!Tl,US=br&&(!rv||Tl&&8<Tl&&11>=Tl),Kw=" ",Qw=!1;function BS(t,e){switch(t){case"keyup":return vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function _k(t,e){switch(t){case"compositionend":return zS(e);case"keypress":return e.which!==32?null:(Qw=!0,Kw);case"textInput":return t=e.data,t===Kw&&Qw?null:t;default:return null}}function wk(t,e){if(go)return t==="compositionend"||!rv&&BS(t,e)?(t=FS(),nh=ev=ni=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return US&&e.locale!=="ko"?null:e.data;default:return null}}var Ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ek[t.type]:e==="textarea"}function jS(t,e,n,r){wS(r),e=kh(e,"onChange"),0<e.length&&(n=new tv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sl=null,ql=null;function Tk(t){eI(t,0)}function Dd(t){var e=_o(t);if(fS(e))return t}function Sk(t,e){if(t==="change")return e}var qS=!1;if(br){var pp;if(br){var mp="oninput"in document;if(!mp){var Xw=document.createElement("div");Xw.setAttribute("oninput","return;"),mp=typeof Xw.oninput=="function"}pp=mp}else pp=!1;qS=pp&&(!document.documentMode||9<document.documentMode)}function Jw(){Sl&&(Sl.detachEvent("onpropertychange",WS),ql=Sl=null)}function WS(t){if(t.propertyName==="value"&&Dd(ql)){var e=[];jS(e,ql,t,Qg(t)),IS(Tk,e)}}function Ik(t,e,n){t==="focusin"?(Jw(),Sl=e,ql=n,Sl.attachEvent("onpropertychange",WS)):t==="focusout"&&Jw()}function Ak(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dd(ql)}function bk(t,e){if(t==="click")return Dd(e)}function Rk(t,e){if(t==="input"||t==="change")return Dd(e)}function Pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:Pk;function Wl(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tm.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function Zw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e0(t,e){var n=Zw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zw(n)}}function GS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HS(){for(var t=window,e=Ah();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ah(t.document)}return e}function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dk(t){var e=HS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GS(n.ownerDocument.documentElement,n)){if(r!==null&&iv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=e0(n,s);var o=e0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ck=br&&"documentMode"in document&&11>=document.documentMode,vo=null,wm=null,Il=null,Em=!1;function t0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Em||vo==null||vo!==Ah(r)||(r=vo,"selectionStart"in r&&iv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&Wl(Il,r)||(Il=r,r=kh(wm,"onSelect"),0<r.length&&(e=new tv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vo)))}function Cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yo={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},gp={},KS={};br&&(KS=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Cd(t){if(gp[t])return gp[t];if(!yo[t])return t;var e=yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KS)return gp[t]=e[n];return t}var QS=Cd("animationend"),YS=Cd("animationiteration"),XS=Cd("animationstart"),JS=Cd("transitionend"),ZS=new Map,n0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,e){ZS.set(t,e),zs(e,[t])}for(var vp=0;vp<n0.length;vp++){var yp=n0[vp],xk=yp.toLowerCase(),kk=yp[0].toUpperCase()+yp.slice(1);Di(xk,"on"+kk)}Di(QS,"onAnimationEnd");Di(YS,"onAnimationIteration");Di(XS,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(JS,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function r0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xx(r,e,void 0,t),t.currentTarget=null}function eI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;r0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;r0(i,a,c),s=l}}}if(Rh)throw t=gm,Rh=!1,gm=null,t}function Ne(t,e){var n=e[bm];n===void 0&&(n=e[bm]=new Set);var r=t+"__bubble";n.has(r)||(tI(e,t,2,!1),n.add(r))}function _p(t,e,n){var r=0;e&&(r|=4),tI(n,t,r,e)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Gl(t){if(!t[xc]){t[xc]=!0,lS.forEach(function(n){n!=="selectionchange"&&(Ok.has(n)||_p(n,!1,t),_p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xc]||(e[xc]=!0,_p("selectionchange",!1,e))}}function tI(t,e,n,r){switch(LS(e)){case 1:var i=Hx;break;case 4:i=Kx;break;default:i=Zg}n=i.bind(null,e,n,t),i=void 0,!mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}IS(function(){var c=s,h=Qg(n),d=[];e:{var f=ZS.get(t);if(f!==void 0){var m=tv,_=t;switch(t){case"keypress":if(rh(n)===0)break e;case"keydown":case"keyup":m=uk;break;case"focusin":_="focus",m=fp;break;case"focusout":_="blur",m=fp;break;case"beforeblur":case"afterblur":m=fp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Xx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dk;break;case QS:case YS:case XS:m=ek;break;case JS:m=pk;break;case"scroll":m=Qx;break;case"wheel":m=gk;break;case"copy":case"cut":case"paste":m=nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Hw}var v=(e&4)!==0,S=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var y=c,T;y!==null;){T=y;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,w!==null&&(P=Ul(y,w),P!=null&&v.push(Hl(y,P,T)))),S)break;y=y.return}0<v.length&&(f=new m(f,_,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==fm&&(_=n.relatedTarget||n.fromElement)&&(ls(_)||_[Rr]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=c,_=_?ls(_):null,_!==null&&(S=js(_),_!==S||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(v=Ww,P="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Hw,P="onPointerLeave",w="onPointerEnter",y="pointer"),S=m==null?f:_o(m),T=_==null?f:_o(_),f=new v(P,y+"leave",m,n,h),f.target=S,f.relatedTarget=T,P=null,ls(h)===c&&(v=new v(w,y+"enter",_,n,h),v.target=T,v.relatedTarget=S,P=v),S=P,m&&_)t:{for(v=m,w=_,y=0,T=v;T;T=to(T))y++;for(T=0,P=w;P;P=to(P))T++;for(;0<y-T;)v=to(v),y--;for(;0<T-y;)w=to(w),T--;for(;y--;){if(v===w||w!==null&&v===w.alternate)break t;v=to(v),w=to(w)}v=null}else v=null;m!==null&&i0(d,f,m,v,!1),_!==null&&S!==null&&i0(d,S,_,v,!0)}}e:{if(f=c?_o(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=Sk;else if(Yw(f))if(qS)x=Rk;else{x=Ak;var O=Ik}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=bk);if(x&&(x=x(t,c))){jS(d,x,n,h);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&lm(f,"number",f.value)}switch(O=c?_o(c):window,t){case"focusin":(Yw(O)||O.contentEditable==="true")&&(vo=O,wm=c,Il=null);break;case"focusout":Il=wm=vo=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,t0(d,n,h);break;case"selectionchange":if(Ck)break;case"keydown":case"keyup":t0(d,n,h)}var I;if(rv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else go?BS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(US&&n.locale!=="ko"&&(go||E!=="onCompositionStart"?E==="onCompositionEnd"&&go&&(I=FS()):(ni=h,ev="value"in ni?ni.value:ni.textContent,go=!0)),O=kh(c,E),0<O.length&&(E=new Gw(E,t,null,n,h),d.push({event:E,listeners:O}),I?E.data=I:(I=zS(n),I!==null&&(E.data=I)))),(I=yk?_k(t,n):wk(t,n))&&(c=kh(c,"onBeforeInput"),0<c.length&&(h=new Gw("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}eI(d,e)})}function Hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ul(t,n),s!=null&&r.unshift(Hl(t,s,i)),s=Ul(t,e),s!=null&&r.push(Hl(t,s,i))),t=t.return}return r}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ul(n,s),l!=null&&o.unshift(Hl(n,l,a))):i||(l=Ul(n,s),l!=null&&o.push(Hl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nk=/\r\n?/g,Mk=/\u0000|\uFFFD/g;function s0(t){return(typeof t=="string"?t:""+t).replace(Nk,`
`).replace(Mk,"")}function kc(t,e,n){if(e=s0(e),s0(t)!==e&&n)throw Error(X(425))}function Oh(){}var Tm=null,Sm=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(t){return o0.resolve(null).then(t).catch(Lk)}:Am;function Lk(t){setTimeout(function(){throw t})}function Ep(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jl(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var da=Math.random().toString(36).slice(2),Yn="__reactFiber$"+da,Kl="__reactProps$"+da,Rr="__reactContainer$"+da,bm="__reactEvents$"+da,Fk="__reactListeners$"+da,Uk="__reactHandles$"+da;function ls(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a0(t);t!==null;){if(n=t[Yn])return n;t=a0(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[Yn]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function xd(t){return t[Kl]||null}var Rm=[],wo=-1;function Ci(t){return{current:t}}function $e(t){0>wo||(t.current=Rm[wo],Rm[wo]=null,wo--)}function xe(t,e){wo++,Rm[wo]=t.current,t.current=e}var gi={},$t=Ci(gi),ln=Ci(!1),_s=gi;function $o(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function un(t){return t=t.childContextTypes,t!=null}function Nh(){$e(ln),$e($t)}function l0(t,e,n){if($t.current!==gi)throw Error(X(168));xe($t,e),xe(ln,n)}function nI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,Ix(t)||"Unknown",i));return Ke({},n,r)}function Mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,_s=$t.current,xe($t,t),xe(ln,ln.current),!0}function u0(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=nI(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,$e(ln),$e($t),xe($t,t)):$e(ln),xe(ln,n)}var yr=null,kd=!1,Tp=!1;function rI(t){yr===null?yr=[t]:yr.push(t)}function Bk(t){kd=!0,rI(t)}function xi(){if(!Tp&&yr!==null){Tp=!0;var t=0,e=Ie;try{var n=yr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,kd=!1}catch(i){throw yr!==null&&(yr=yr.slice(t+1)),PS(Yg,xi),i}finally{Ie=e,Tp=!1}}return null}var Eo=[],To=0,Vh=null,$h=0,In=[],An=0,ws=null,Er=1,Tr="";function Xi(t,e){Eo[To++]=$h,Eo[To++]=Vh,Vh=t,$h=e}function iI(t,e,n){In[An++]=Er,In[An++]=Tr,In[An++]=ws,ws=t;var r=Er;t=Tr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var s=32-zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-zn(e)+i|n<<i|r,Tr=s+t}else Er=1<<s|n<<i|r,Tr=t}function sv(t){t.return!==null&&(Xi(t,1),iI(t,1,0))}function ov(t){for(;t===Vh;)Vh=Eo[--To],Eo[To]=null,$h=Eo[--To],Eo[To]=null;for(;t===ws;)ws=In[--An],In[An]=null,Tr=In[--An],In[An]=null,Er=In[--An],In[An]=null}var yn=null,vn=null,Be=!1,Bn=null;function sI(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,vn=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Er,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,vn=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(Be){var e=vn;if(e){var n=e;if(!c0(t,e)){if(Pm(t))throw Error(X(418));e=li(n.nextSibling);var r=yn;e&&c0(t,e)?sI(r,n):(t.flags=t.flags&-4097|2,Be=!1,yn=t)}}else{if(Pm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Be=!1,yn=t}}}function h0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Oc(t){if(t!==yn)return!1;if(!Be)return h0(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=vn)){if(Pm(t))throw oI(),Error(X(418));for(;e;)sI(t,e),e=li(e.nextSibling)}if(h0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=yn?li(t.stateNode.nextSibling):null;return!0}function oI(){for(var t=vn;t;)t=li(t.nextSibling)}function Lo(){vn=yn=null,Be=!1}function av(t){Bn===null?Bn=[t]:Bn.push(t)}var zk=Vr.ReactCurrentBatchConfig;function Za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Nc(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d0(t){var e=t._init;return e(t._payload)}function aI(t){function e(w,y){if(t){var T=w.deletions;T===null?(w.deletions=[y],w.flags|=16):T.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=di(w,y),w.index=0,w.sibling=null,w}function s(w,y,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<y?(w.flags|=2,y):T):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,y,T,P){return y===null||y.tag!==6?(y=Dp(T,w.mode,P),y.return=w,y):(y=i(y,T),y.return=w,y)}function l(w,y,T,P){var x=T.type;return x===mo?h(w,y,T.props.children,P,T.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Yr&&d0(x)===y.type)?(P=i(y,T.props),P.ref=Za(w,y,T),P.return=w,P):(P=ch(T.type,T.key,T.props,null,w.mode,P),P.ref=Za(w,y,T),P.return=w,P)}function c(w,y,T,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=Cp(T,w.mode,P),y.return=w,y):(y=i(y,T.children||[]),y.return=w,y)}function h(w,y,T,P,x){return y===null||y.tag!==7?(y=ps(T,w.mode,P,x),y.return=w,y):(y=i(y,T),y.return=w,y)}function d(w,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Dp(""+y,w.mode,T),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sc:return T=ch(y.type,y.key,y.props,null,w.mode,T),T.ref=Za(w,null,y),T.return=w,T;case po:return y=Cp(y,w.mode,T),y.return=w,y;case Yr:var P=y._init;return d(w,P(y._payload),T)}if(dl(y)||Ka(y))return y=ps(y,w.mode,T,null),y.return=w,y;Nc(w,y)}return null}function f(w,y,T,P){var x=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return x!==null?null:a(w,y,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Sc:return T.key===x?l(w,y,T,P):null;case po:return T.key===x?c(w,y,T,P):null;case Yr:return x=T._init,f(w,y,x(T._payload),P)}if(dl(T)||Ka(T))return x!==null?null:h(w,y,T,P,null);Nc(w,T)}return null}function m(w,y,T,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(T)||null,a(y,w,""+P,x);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Sc:return w=w.get(P.key===null?T:P.key)||null,l(y,w,P,x);case po:return w=w.get(P.key===null?T:P.key)||null,c(y,w,P,x);case Yr:var O=P._init;return m(w,y,T,O(P._payload),x)}if(dl(P)||Ka(P))return w=w.get(T)||null,h(y,w,P,x,null);Nc(y,P)}return null}function _(w,y,T,P){for(var x=null,O=null,I=y,E=y=0,A=null;I!==null&&E<T.length;E++){I.index>E?(A=I,I=null):A=I.sibling;var b=f(w,I,T[E],P);if(b===null){I===null&&(I=A);break}t&&I&&b.alternate===null&&e(w,I),y=s(b,y,E),O===null?x=b:O.sibling=b,O=b,I=A}if(E===T.length)return n(w,I),Be&&Xi(w,E),x;if(I===null){for(;E<T.length;E++)I=d(w,T[E],P),I!==null&&(y=s(I,y,E),O===null?x=I:O.sibling=I,O=I);return Be&&Xi(w,E),x}for(I=r(w,I);E<T.length;E++)A=m(I,w,E,T[E],P),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?E:A.key),y=s(A,y,E),O===null?x=A:O.sibling=A,O=A);return t&&I.forEach(function(D){return e(w,D)}),Be&&Xi(w,E),x}function v(w,y,T,P){var x=Ka(T);if(typeof x!="function")throw Error(X(150));if(T=x.call(T),T==null)throw Error(X(151));for(var O=x=null,I=y,E=y=0,A=null,b=T.next();I!==null&&!b.done;E++,b=T.next()){I.index>E?(A=I,I=null):A=I.sibling;var D=f(w,I,b.value,P);if(D===null){I===null&&(I=A);break}t&&I&&D.alternate===null&&e(w,I),y=s(D,y,E),O===null?x=D:O.sibling=D,O=D,I=A}if(b.done)return n(w,I),Be&&Xi(w,E),x;if(I===null){for(;!b.done;E++,b=T.next())b=d(w,b.value,P),b!==null&&(y=s(b,y,E),O===null?x=b:O.sibling=b,O=b);return Be&&Xi(w,E),x}for(I=r(w,I);!b.done;E++,b=T.next())b=m(I,w,E,b.value,P),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?E:b.key),y=s(b,y,E),O===null?x=b:O.sibling=b,O=b);return t&&I.forEach(function(k){return e(w,k)}),Be&&Xi(w,E),x}function S(w,y,T,P){if(typeof T=="object"&&T!==null&&T.type===mo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Sc:e:{for(var x=T.key,O=y;O!==null;){if(O.key===x){if(x=T.type,x===mo){if(O.tag===7){n(w,O.sibling),y=i(O,T.props.children),y.return=w,w=y;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Yr&&d0(x)===O.type){n(w,O.sibling),y=i(O,T.props),y.ref=Za(w,O,T),y.return=w,w=y;break e}n(w,O);break}else e(w,O);O=O.sibling}T.type===mo?(y=ps(T.props.children,w.mode,P,T.key),y.return=w,w=y):(P=ch(T.type,T.key,T.props,null,w.mode,P),P.ref=Za(w,y,T),P.return=w,w=P)}return o(w);case po:e:{for(O=T.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(w,y.sibling),y=i(y,T.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Cp(T,w.mode,P),y.return=w,w=y}return o(w);case Yr:return O=T._init,S(w,y,O(T._payload),P)}if(dl(T))return _(w,y,T,P);if(Ka(T))return v(w,y,T,P);Nc(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,T),y.return=w,w=y):(n(w,y),y=Dp(T,w.mode,P),y.return=w,w=y),o(w)):n(w,y)}return S}var Fo=aI(!0),lI=aI(!1),Lh=Ci(null),Fh=null,So=null,lv=null;function uv(){lv=So=Fh=null}function cv(t){var e=Lh.current;$e(Lh),t._currentValue=e}function Cm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){Fh=t,lv=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(lv!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(Fh===null)throw Error(X(308));So=t,Fh.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var us=null;function hv(t){us===null?us=[t]:us.push(t)}function uI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function dv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,hv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function ih(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xg(t,n)}}function f0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uh(t,e,n,r){var i=t.updateQueue;Xr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(f=e,m=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(m,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,f=typeof _=="function"?_.call(m,d,f):_,f==null)break e;d=Ke({},d,f);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ts|=o,t.lanes=o,t.memoizedState=d}}function p0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ou={},nr=Ci(Ou),Ql=Ci(Ou),Yl=Ci(Ou);function cs(t){if(t===Ou)throw Error(X(174));return t}function fv(t,e){switch(xe(Yl,e),xe(Ql,t),xe(nr,Ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cm(e,t)}$e(nr),xe(nr,e)}function Uo(){$e(nr),$e(Ql),$e(Yl)}function hI(t){cs(Yl.current);var e=cs(nr.current),n=cm(e,t.type);e!==n&&(xe(Ql,t),xe(nr,n))}function pv(t){Ql.current===t&&($e(nr),$e(Ql))}var We=Ci(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sp=[];function mv(){for(var t=0;t<Sp.length;t++)Sp[t]._workInProgressVersionPrimary=null;Sp.length=0}var sh=Vr.ReactCurrentDispatcher,Ip=Vr.ReactCurrentBatchConfig,Es=0,Ge=null,ut=null,mt=null,zh=!1,Al=!1,Xl=0,jk=0;function xt(){throw Error(X(321))}function gv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function vv(t,e,n,r,i,s){if(Es=s,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sh.current=t===null||t.memoizedState===null?Hk:Kk,t=n(r,i),Al){s=0;do{if(Al=!1,Xl=0,25<=s)throw Error(X(301));s+=1,mt=ut=null,e.updateQueue=null,sh.current=Qk,t=n(r,i)}while(Al)}if(sh.current=jh,e=ut!==null&&ut.next!==null,Es=0,mt=ut=Ge=null,zh=!1,e)throw Error(X(300));return t}function yv(){var t=Xl!==0;return Xl=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ge.memoizedState=mt=t:mt=mt.next=t,mt}function kn(){if(ut===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=mt===null?Ge.memoizedState:mt.next;if(e!==null)mt=e,ut=t;else{if(t===null)throw Error(X(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},mt===null?Ge.memoizedState=mt=t:mt=mt.next=t}return mt}function Jl(t,e){return typeof e=="function"?e(t):e}function Ap(t){var e=kn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Es&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ge.lanes|=h,Ts|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Wn(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ge.lanes|=s,Ts|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bp(t){var e=kn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wn(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dI(){}function fI(t,e){var n=Ge,r=kn(),i=e(),s=!Wn(r.memoizedState,i);if(s&&(r.memoizedState=i,rn=!0),r=r.queue,_v(gI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Zl(9,mI.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(X(349));Es&30||pI(n,e,i)}return i}function pI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mI(t,e,n,r){e.value=n,e.getSnapshot=r,vI(e)&&yI(t)}function gI(t,e,n){return n(function(){vI(e)&&yI(t)})}function vI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function yI(t){var e=Pr(t,1);e!==null&&jn(e,t,1,-1)}function m0(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:t},e.queue=t,t=t.dispatch=Gk.bind(null,Ge,t),[e.memoizedState,t]}function Zl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _I(){return kn().memoizedState}function oh(t,e,n,r){var i=Qn();Ge.flags|=t,i.memoizedState=Zl(1|e,n,void 0,r===void 0?null:r)}function Od(t,e,n,r){var i=kn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&gv(r,o.deps)){i.memoizedState=Zl(e,n,s,r);return}}Ge.flags|=t,i.memoizedState=Zl(1|e,n,s,r)}function g0(t,e){return oh(8390656,8,t,e)}function _v(t,e){return Od(2048,8,t,e)}function wI(t,e){return Od(4,2,t,e)}function EI(t,e){return Od(4,4,t,e)}function TI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SI(t,e,n){return n=n!=null?n.concat([t]):null,Od(4,4,TI.bind(null,e,t),n)}function wv(){}function II(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AI(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bI(t,e,n){return Es&21?(Wn(n,e)||(n=xS(),Ge.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function qk(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Ip.transition;Ip.transition={};try{t(!1),e()}finally{Ie=n,Ip.transition=r}}function RI(){return kn().memoizedState}function Wk(t,e,n){var r=hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PI(t))DI(e,n);else if(n=uI(t,e,n,r),n!==null){var i=Ht();jn(n,t,r,i),CI(n,e,r)}}function Gk(t,e,n){var r=hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PI(t))DI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wn(a,o)){var l=e.interleaved;l===null?(i.next=i,hv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uI(t,e,i,r),n!==null&&(i=Ht(),jn(n,t,r,i),CI(n,e,r))}}function PI(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function DI(t,e){Al=zh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xg(t,n)}}var jh={readContext:xn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Hk={readContext:xn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:g0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oh(4194308,4,TI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oh(4194308,4,t,e)},useInsertionEffect:function(t,e){return oh(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Wk.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:m0,useDebugValue:wv,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=m0(!1),e=t[0];return t=qk.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=Qn();if(Be){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),vt===null)throw Error(X(349));Es&30||pI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,g0(gI.bind(null,r,s,t),[t]),r.flags|=2048,Zl(9,mI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qn(),e=vt.identifierPrefix;if(Be){var n=Tr,r=Er;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kk={readContext:xn,useCallback:II,useContext:xn,useEffect:_v,useImperativeHandle:SI,useInsertionEffect:wI,useLayoutEffect:EI,useMemo:AI,useReducer:Ap,useRef:_I,useState:function(){return Ap(Jl)},useDebugValue:wv,useDeferredValue:function(t){var e=kn();return bI(e,ut.memoizedState,t)},useTransition:function(){var t=Ap(Jl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:dI,useSyncExternalStore:fI,useId:RI,unstable_isNewReconciler:!1},Qk={readContext:xn,useCallback:II,useContext:xn,useEffect:_v,useImperativeHandle:SI,useInsertionEffect:wI,useLayoutEffect:EI,useMemo:AI,useReducer:bp,useRef:_I,useState:function(){return bp(Jl)},useDebugValue:wv,useDeferredValue:function(t){var e=kn();return ut===null?e.memoizedState=t:bI(e,ut.memoizedState,t)},useTransition:function(){var t=bp(Jl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:dI,useSyncExternalStore:fI,useId:RI,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nd={isMounted:function(t){return(t=t._reactInternals)?js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=hi(t),s=Ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(jn(e,t,i,r),ih(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=hi(t),s=Ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(jn(e,t,i,r),ih(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=hi(t),i=Ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,r),e!==null&&(jn(e,t,r,n),ih(e,t,r))}};function v0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wl(n,r)||!Wl(i,s):!0}function xI(t,e,n){var r=!1,i=gi,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(i=un(e)?_s:$t.current,r=e.contextTypes,s=(r=r!=null)?$o(t,i):gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function y0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nd.enqueueReplaceState(e,e.state,null)}function km(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xn(s):(s=un(e)?_s:$t.current,i.context=$o(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nd.enqueueReplaceState(i,i.state,null),Uh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",r=e;do n+=Sx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Om(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yk=typeof WeakMap=="function"?WeakMap:Map;function kI(t,e,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wh||(Wh=!0,jm=r),Om(t,e)},n}function OI(t,e,n){n=Ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Om(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Om(t,e),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cO.bind(null,t,e,n),e.then(t,t))}function w0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ir(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var Xk=Vr.ReactCurrentOwner,rn=!1;function zt(t,e,n,r){e.child=t===null?lI(e,null,n,r):Fo(e,t.child,n,r)}function T0(t,e,n,r,i){n=n.render;var s=e.ref;return xo(e,i),r=vv(t,e,n,r,s,i),n=yv(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(Be&&n&&sv(e),e.flags|=1,zt(t,e,r,i),e.child)}function S0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,NI(t,e,s,r,i)):(t=ch(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wl,n(o,r)&&t.ref===e.ref)return Dr(t,e,i)}return e.flags|=1,t=di(s,r),t.ref=e.ref,t.return=e,e.child=t}function NI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wl(s,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,Dr(t,e,i)}return Nm(t,e,n,r,i)}function MI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Ao,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Ao,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Ao,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(Ao,mn),mn|=r;return zt(t,e,i,n),e.child}function VI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nm(t,e,n,r,i){var s=un(n)?_s:$t.current;return s=$o(e,s),xo(e,i),n=vv(t,e,n,r,s,i),r=yv(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dr(t,e,i)):(Be&&r&&sv(e),e.flags|=1,zt(t,e,n,i),e.child)}function I0(t,e,n,r,i){if(un(n)){var s=!0;Mh(e)}else s=!1;if(xo(e,i),e.stateNode===null)ah(t,e),xI(e,n,r),km(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=un(n)?_s:$t.current,c=$o(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&y0(e,o,r,c),Xr=!1;var f=e.memoizedState;o.state=f,Uh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||ln.current||Xr?(typeof h=="function"&&(xm(e,n,h,r),l=e.memoizedState),(a=Xr||v0(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=un(n)?_s:$t.current,l=$o(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&y0(e,o,r,l),Xr=!1,f=e.memoizedState,o.state=f,Uh(e,r,o,i);var _=e.memoizedState;a!==d||f!==_||ln.current||Xr?(typeof m=="function"&&(xm(e,n,m,r),_=e.memoizedState),(c=Xr||v0(e,n,c,r,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Mm(t,e,n,r,s,i)}function Mm(t,e,n,r,i,s){VI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&u0(e,n,!1),Dr(t,e,s);r=e.stateNode,Xk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fo(e,t.child,null,s),e.child=Fo(e,null,a,s)):zt(t,e,a,s),e.memoizedState=r.state,i&&u0(e,n,!0),e.child}function $I(t){var e=t.stateNode;e.pendingContext?l0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l0(t,e.context,!1),fv(t,e.containerInfo)}function A0(t,e,n,r,i){return Lo(),av(i),e.flags|=256,zt(t,e,n,r),e.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function $m(t){return{baseLanes:t,cachePool:null,transitions:null}}function LI(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(We,i&1),t===null)return Dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$d(o,r,0,null),t=ps(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$m(n),e.memoizedState=Vm,t):Ev(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Jk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=di(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=di(a,s):(s=ps(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?$m(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vm,r}return s=t.child,t=s.sibling,r=di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ev(t,e){return e=$d({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,n,r){return r!==null&&av(r),Fo(e,t.child,null,n),t=Ev(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rp(Error(X(422))),Mc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$d({mode:"visible",children:r.children},i,0,null),s=ps(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fo(e,t.child,null,o),e.child.memoizedState=$m(o),e.memoizedState=Vm,s);if(!(e.mode&1))return Mc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=Rp(s,r,void 0),Mc(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),jn(r,t,i,-1))}return Rv(),r=Rp(Error(X(421))),Mc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vn=li(i.nextSibling),yn=e,Be=!0,Bn=null,t!==null&&(In[An++]=Er,In[An++]=Tr,In[An++]=ws,Er=t.id,Tr=t.overflow,ws=e),e=Ev(e,r.children),e.flags|=4096,e)}function b0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cm(t.return,e,n)}function Pp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,n,e);else if(t.tag===19)b0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pp(e,!0,n,null,s);break;case"together":Pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zk(t,e,n){switch(e.tag){case 3:$I(e),Lo();break;case 5:hI(e);break;case 1:un(e.type)&&Mh(e);break;case 4:fv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(Lh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?LI(t,e,n):(xe(We,We.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);xe(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,MI(t,e,n)}return Dr(t,e,n)}var UI,Lm,BI,zI;UI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lm=function(){};BI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,cs(nr.current);var s=null;switch(n){case"input":i=om(t,i),r=om(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=um(t,i),r=um(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oh)}hm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zI=function(t,e,n,r){n!==r&&(e.flags|=4)};function el(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eO(t,e,n){var r=e.pendingProps;switch(ov(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return un(e.type)&&Nh(),kt(e),null;case 3:return r=e.stateNode,Uo(),$e(ln),$e($t),mv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bn!==null&&(Gm(Bn),Bn=null))),Lm(t,e),kt(e),null;case 5:pv(e);var i=cs(Yl.current);if(n=e.type,t!==null&&e.stateNode!=null)BI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return kt(e),null}if(t=cs(nr.current),Oc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yn]=e,r[Kl]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<pl.length;i++)Ne(pl[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Mw(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":$w(r,s),Ne("invalid",r)}hm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kc(r.textContent,a,t),i=["children",""+a]):Ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ic(r),Vw(r,s,!0);break;case"textarea":Ic(r),Lw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Oh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yn]=e,t[Kl]=r,UI(t,e,!1,!1),e.stateNode=t;e:{switch(o=dm(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<pl.length;i++)Ne(pl[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":Mw(t,r),i=om(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":$w(t,r),i=um(t,r),Ne("invalid",t);break;default:i=r}hm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_S(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fl(t,l):typeof l=="number"&&Fl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&Wg(t,s,l,o))}switch(n){case"input":Ic(t),Vw(t,r,!1);break;case"textarea":Ic(t),Lw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ro(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ro(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)zI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=cs(Yl.current),cs(nr.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yn]=e,(s=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:kc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yn]=e,e.stateNode=r}return kt(e),null;case 13:if($e(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&vn!==null&&e.mode&1&&!(e.flags&128))oI(),Lo(),e.flags|=98560,s=!1;else if(s=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Yn]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Bn!==null&&(Gm(Bn),Bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ct===0&&(ct=3):Rv())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Uo(),Lm(t,e),t===null&&Gl(e.stateNode.containerInfo),kt(e),null;case 10:return cv(e.type._context),kt(e),null;case 17:return un(e.type)&&Nh(),kt(e),null;case 19:if($e(We),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)el(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bh(t),o!==null){for(e.flags|=128,el(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>zo&&(e.flags|=128,r=!0,el(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),el(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return kt(e),null}else 2*rt()-s.renderingStartTime>zo&&n!==1073741824&&(e.flags|=128,r=!0,el(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=We.current,xe(We,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function tO(t,e){switch(ov(e),e.tag){case 1:return un(e.type)&&Nh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uo(),$e(ln),$e($t),mv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pv(e),null;case 13:if($e(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(We),null;case 4:return Uo(),null;case 10:return cv(e.type._context),null;case 22:case 23:return bv(),null;case 24:return null;default:return null}}var Vc=!1,Mt=!1,nO=typeof WeakSet=="function"?WeakSet:Set,se=null;function Io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Fm(t,e,n){try{n()}catch(r){Je(t,e,r)}}var R0=!1;function rO(t,e){if(Tm=Ch,t=HS(),iv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sm={focusedElem:t,selectionRange:n},Ch=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,S=_.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Fn(e.type,v),S);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(P){Je(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return _=R0,R0=!1,_}function bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fm(e,n,s)}i=i.next}while(i!==r)}}function Md(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Um(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jI(t){var e=t.alternate;e!==null&&(t.alternate=null,jI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[Kl],delete e[bm],delete e[Fk],delete e[Uk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qI(t){return t.tag===5||t.tag===3||t.tag===4}function P0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(t=t.child,t!==null))for(Bm(t,e,n),t=t.sibling;t!==null;)Bm(t,e,n),t=t.sibling}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}var St=null,Un=!1;function Wr(t,e,n){for(n=n.child;n!==null;)WI(t,e,n),n=n.sibling}function WI(t,e,n){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 5:Mt||Io(n,e);case 6:var r=St,i=Un;St=null,Wr(t,e,n),St=r,Un=i,St!==null&&(Un?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Un?(t=St,n=n.stateNode,t.nodeType===8?Ep(t.parentNode,n):t.nodeType===1&&Ep(t,n),jl(t)):Ep(St,n.stateNode));break;case 4:r=St,i=Un,St=n.stateNode.containerInfo,Un=!0,Wr(t,e,n),St=r,Un=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fm(n,e,o),i=i.next}while(i!==r)}Wr(t,e,n);break;case 1:if(!Mt&&(Io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}Wr(t,e,n);break;case 21:Wr(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,Wr(t,e,n),Mt=r):Wr(t,e,n);break;default:Wr(t,e,n)}}function D0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nO),e.forEach(function(r){var i=dO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Un=!1;break e;case 3:St=a.stateNode.containerInfo,Un=!0;break e;case 4:St=a.stateNode.containerInfo,Un=!0;break e}a=a.return}if(St===null)throw Error(X(160));WI(s,o,i),St=null,Un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GI(e,t),e=e.sibling}function GI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Kn(t),r&4){try{bl(3,t,t.return),Md(3,t)}catch(v){Je(t,t.return,v)}try{bl(5,t,t.return)}catch(v){Je(t,t.return,v)}}break;case 1:Ln(e,t),Kn(t),r&512&&n!==null&&Io(n,n.return);break;case 5:if(Ln(e,t),Kn(t),r&512&&n!==null&&Io(n,n.return),t.flags&32){var i=t.stateNode;try{Fl(i,"")}catch(v){Je(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pS(i,s),dm(a,o);var c=dm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?_S(i,d):h==="dangerouslySetInnerHTML"?vS(i,d):h==="children"?Fl(i,d):Wg(i,h,d,c)}switch(a){case"input":am(i,s);break;case"textarea":mS(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ro(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ro(i,!!s.multiple,s.defaultValue,!0):Ro(i,!!s.multiple,s.multiple?[]:"",!1))}i[Kl]=s}catch(v){Je(t,t.return,v)}}break;case 6:if(Ln(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Je(t,t.return,v)}}break;case 3:if(Ln(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(v){Je(t,t.return,v)}break;case 4:Ln(e,t),Kn(t);break;case 13:Ln(e,t),Kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Iv=rt())),r&4&&D0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||h,Ln(e,t),Mt=c):Ln(e,t),Kn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(se=t,h=t.child;h!==null;){for(d=se=h;se!==null;){switch(f=se,m=f.child,f.tag){case 0:case 11:case 14:case 15:bl(4,f,f.return);break;case 1:Io(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){Je(r,n,v)}}break;case 5:Io(f,f.return);break;case 22:if(f.memoizedState!==null){x0(d);continue}}m!==null?(m.return=f,se=m):x0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yS("display",o))}catch(v){Je(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Je(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),Kn(t),r&4&&D0(t);break;case 21:break;default:Ln(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qI(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fl(i,""),r.flags&=-33);var s=P0(t);zm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=P0(t);Bm(t,a,o);break;default:throw Error(X(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iO(t,e,n){se=t,HI(t)}function HI(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=Vc;var c=Mt;if(Vc=o,(Mt=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?k0(i):l!==null?(l.return=o,se=l):k0(i);for(;s!==null;)se=s,HI(s),s=s.sibling;se=i,Vc=a,Mt=c}C0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):C0(t)}}function C0(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Md(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&p0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Mt||e.flags&512&&Um(e)}catch(f){Je(e,e.return,f)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function x0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function k0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Md(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{Um(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{Um(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var sO=Math.ceil,qh=Vr.ReactCurrentDispatcher,Tv=Vr.ReactCurrentOwner,Dn=Vr.ReactCurrentBatchConfig,we=0,vt=null,at=null,bt=0,mn=0,Ao=Ci(0),ct=0,eu=null,Ts=0,Vd=0,Sv=0,Rl=null,nn=null,Iv=0,zo=1/0,gr=null,Wh=!1,jm=null,ci=null,$c=!1,ri=null,Gh=0,Pl=0,qm=null,lh=-1,uh=0;function Ht(){return we&6?rt():lh!==-1?lh:lh=rt()}function hi(t){return t.mode&1?we&2&&bt!==0?bt&-bt:zk.transition!==null?(uh===0&&(uh=xS()),uh):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:LS(t.type)),t):1}function jn(t,e,n,r){if(50<Pl)throw Pl=0,qm=null,Error(X(185));Cu(t,n,r),(!(we&2)||t!==vt)&&(t===vt&&(!(we&2)&&(Vd|=n),ct===4&&Zr(t,bt)),cn(t,r),n===1&&we===0&&!(e.mode&1)&&(zo=rt()+500,kd&&xi()))}function cn(t,e){var n=t.callbackNode;zx(t,e);var r=Dh(t,t===vt?bt:0);if(r===0)n!==null&&Bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bw(n),e===1)t.tag===0?Bk(O0.bind(null,t)):rI(O0.bind(null,t)),$k(function(){!(we&6)&&xi()}),n=null;else{switch(kS(r)){case 1:n=Yg;break;case 4:n=DS;break;case 16:n=Ph;break;case 536870912:n=CS;break;default:n=Ph}n=tA(n,KI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KI(t,e){if(lh=-1,uh=0,we&6)throw Error(X(327));var n=t.callbackNode;if(ko()&&t.callbackNode!==n)return null;var r=Dh(t,t===vt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hh(t,r);else{e=r;var i=we;we|=2;var s=YI();(vt!==t||bt!==e)&&(gr=null,zo=rt()+500,fs(t,e));do try{lO();break}catch(a){QI(t,a)}while(!0);uv(),qh.current=s,we=i,at!==null?e=0:(vt=null,bt=0,e=ct)}if(e!==0){if(e===2&&(i=vm(t),i!==0&&(r=i,e=Wm(t,i))),e===1)throw n=eu,fs(t,0),Zr(t,r),cn(t,rt()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!oO(i)&&(e=Hh(t,r),e===2&&(s=vm(t),s!==0&&(r=s,e=Wm(t,s))),e===1))throw n=eu,fs(t,0),Zr(t,r),cn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ji(t,nn,gr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=Iv+500-rt(),10<e)){if(Dh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Am(Ji.bind(null,t,nn,gr),e);break}Ji(t,nn,gr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sO(r/1960))-r,10<r){t.timeoutHandle=Am(Ji.bind(null,t,nn,gr),r);break}Ji(t,nn,gr);break;case 5:Ji(t,nn,gr);break;default:throw Error(X(329))}}}return cn(t,rt()),t.callbackNode===n?KI.bind(null,t):null}function Wm(t,e){var n=Rl;return t.current.memoizedState.isDehydrated&&(fs(t,e).flags|=256),t=Hh(t,e),t!==2&&(e=nn,nn=n,e!==null&&Gm(e)),t}function Gm(t){nn===null?nn=t:nn.push.apply(nn,t)}function oO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~Sv,e&=~Vd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function O0(t){if(we&6)throw Error(X(327));ko();var e=Dh(t,0);if(!(e&1))return cn(t,rt()),null;var n=Hh(t,e);if(t.tag!==0&&n===2){var r=vm(t);r!==0&&(e=r,n=Wm(t,r))}if(n===1)throw n=eu,fs(t,0),Zr(t,e),cn(t,rt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t,nn,gr),cn(t,rt()),null}function Av(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(zo=rt()+500,kd&&xi())}}function Ss(t){ri!==null&&ri.tag===0&&!(we&6)&&ko();var e=we;we|=1;var n=Dn.transition,r=Ie;try{if(Dn.transition=null,Ie=1,t)return t()}finally{Ie=r,Dn.transition=n,we=e,!(we&6)&&xi()}}function bv(){mn=Ao.current,$e(Ao)}function fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vk(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(ov(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nh();break;case 3:Uo(),$e(ln),$e($t),mv();break;case 5:pv(r);break;case 4:Uo();break;case 13:$e(We);break;case 19:$e(We);break;case 10:cv(r.type._context);break;case 22:case 23:bv()}n=n.return}if(vt=t,at=t=di(t.current,null),bt=mn=e,ct=0,eu=null,Sv=Vd=Ts=0,nn=Rl=null,us!==null){for(e=0;e<us.length;e++)if(n=us[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}us=null}return t}function QI(t,e){do{var n=at;try{if(uv(),sh.current=jh,zh){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zh=!1}if(Es=0,mt=ut=Ge=null,Al=!1,Xl=0,Tv.current=null,n===null||n.return===null){ct=1,eu=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=w0(o);if(m!==null){m.flags&=-257,E0(m,o,a,s,e),m.mode&1&&_0(s,c,e),e=m,l=c;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){_0(s,c,e),Rv();break e}l=Error(X(426))}}else if(Be&&a.mode&1){var S=w0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),E0(S,o,a,s,e),av(Bo(l,a));break e}}s=l=Bo(l,a),ct!==4&&(ct=2),Rl===null?Rl=[s]:Rl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=kI(s,l,e);f0(s,w);break e;case 1:a=l;var y=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ci===null||!ci.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=OI(s,a,e);f0(s,P);break e}}s=s.return}while(s!==null)}JI(n)}catch(x){e=x,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function YI(){var t=qh.current;return qh.current=jh,t===null?jh:t}function Rv(){(ct===0||ct===3||ct===2)&&(ct=4),vt===null||!(Ts&268435455)&&!(Vd&268435455)||Zr(vt,bt)}function Hh(t,e){var n=we;we|=2;var r=YI();(vt!==t||bt!==e)&&(gr=null,fs(t,e));do try{aO();break}catch(i){QI(t,i)}while(!0);if(uv(),we=n,qh.current=r,at!==null)throw Error(X(261));return vt=null,bt=0,ct}function aO(){for(;at!==null;)XI(at)}function lO(){for(;at!==null&&!Ox();)XI(at)}function XI(t){var e=eA(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?JI(t):at=e,Tv.current=null}function JI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tO(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,at=null;return}}else if(n=eO(n,e,mn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ct===0&&(ct=5)}function Ji(t,e,n){var r=Ie,i=Dn.transition;try{Dn.transition=null,Ie=1,uO(t,e,n,r)}finally{Dn.transition=i,Ie=r}return null}function uO(t,e,n,r){do ko();while(ri!==null);if(we&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jx(t,s),t===vt&&(at=vt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,tA(Ph,function(){return ko(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var o=Ie;Ie=1;var a=we;we|=4,Tv.current=null,rO(t,n),GI(n,t),Dk(Sm),Ch=!!Tm,Sm=Tm=null,t.current=n,iO(n),Nx(),we=a,Ie=o,Dn.transition=s}else t.current=n;if($c&&($c=!1,ri=t,Gh=i),s=t.pendingLanes,s===0&&(ci=null),$x(n.stateNode),cn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wh)throw Wh=!1,t=jm,jm=null,t;return Gh&1&&t.tag!==0&&ko(),s=t.pendingLanes,s&1?t===qm?Pl++:(Pl=0,qm=t):Pl=0,xi(),null}function ko(){if(ri!==null){var t=kS(Gh),e=Dn.transition,n=Ie;try{if(Dn.transition=null,Ie=16>t?16:t,ri===null)var r=!1;else{if(t=ri,ri=null,Gh=0,we&6)throw Error(X(331));var i=we;for(we|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var h=se;switch(h.tag){case 0:case 11:case 15:bl(8,h,s)}var d=h.child;if(d!==null)d.return=h,se=d;else for(;se!==null;){h=se;var f=h.sibling,m=h.return;if(jI(h),h===c){se=null;break}if(f!==null){f.return=m,se=f;break}se=m}}}var _=s.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bl(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,se=w;break e}se=s.return}}var y=t.current;for(se=y;se!==null;){o=se;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,se=T;else e:for(o=y;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Md(9,a)}}catch(x){Je(a,a.return,x)}if(a===o){se=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,se=P;break e}se=a.return}}if(we=i,xi(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Rd,t)}catch{}r=!0}return r}finally{Ie=n,Dn.transition=e}}return!1}function N0(t,e,n){e=Bo(n,e),e=kI(t,e,1),t=ui(t,e,1),e=Ht(),t!==null&&(Cu(t,1,e),cn(t,e))}function Je(t,e,n){if(t.tag===3)N0(t,t,n);else for(;e!==null;){if(e.tag===3){N0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){t=Bo(n,t),t=OI(e,t,1),e=ui(e,t,1),t=Ht(),e!==null&&(Cu(e,1,t),cn(e,t));break}}e=e.return}}function cO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(bt&n)===n&&(ct===4||ct===3&&(bt&130023424)===bt&&500>rt()-Iv?fs(t,0):Sv|=n),cn(t,e)}function ZI(t,e){e===0&&(t.mode&1?(e=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):e=1);var n=Ht();t=Pr(t,e),t!==null&&(Cu(t,e,n),cn(t,n))}function hO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZI(t,n)}function dO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),ZI(t,n)}var eA;eA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,Zk(t,e,n);rn=!!(t.flags&131072)}else rn=!1,Be&&e.flags&1048576&&iI(e,$h,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ah(t,e),t=e.pendingProps;var i=$o(e,$t.current);xo(e,n),i=vv(null,e,r,t,i,n);var s=yv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(s=!0,Mh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dv(e),i.updater=Nd,e.stateNode=i,i._reactInternals=e,km(e,r,t,n),e=Mm(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&sv(e),zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ah(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pO(r),t=Fn(r,t),i){case 0:e=Nm(null,e,r,t,n);break e;case 1:e=I0(null,e,r,t,n);break e;case 11:e=T0(null,e,r,t,n);break e;case 14:e=S0(null,e,r,Fn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Nm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),I0(t,e,r,i,n);case 3:e:{if($I(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cI(t,e),Uh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bo(Error(X(423)),e),e=A0(t,e,r,n,i);break e}else if(r!==i){i=Bo(Error(X(424)),e),e=A0(t,e,r,n,i);break e}else for(vn=li(e.stateNode.containerInfo.firstChild),yn=e,Be=!0,Bn=null,n=lI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===i){e=Dr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return hI(e),t===null&&Dm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Im(r,i)?o=null:s!==null&&Im(r,s)&&(e.flags|=32),VI(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&Dm(e),null;case 13:return LI(t,e,n);case 4:return fv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fo(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),T0(t,e,r,i,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(Lh,r._currentValue),r._currentValue=o,s!==null)if(Wn(s.value,o)){if(s.children===i.children&&!ln.current){e=Dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ir(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Cm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xo(e,n),i=xn(i),r=r(i),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),S0(t,e,r,i,n);case 15:return NI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),ah(t,e),e.tag=1,un(r)?(t=!0,Mh(e)):t=!1,xo(e,n),xI(e,r,i),km(e,r,i,n),Mm(null,e,r,!0,t,n);case 19:return FI(t,e,n);case 22:return MI(t,e,n)}throw Error(X(156,e.tag))};function tA(t,e){return PS(t,e)}function fO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new fO(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pO(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hg)return 11;if(t===Kg)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ch(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mo:return ps(n.children,i,s,e);case Gg:o=8,i|=8;break;case nm:return t=bn(12,n,e,i|2),t.elementType=nm,t.lanes=s,t;case rm:return t=bn(13,n,e,i),t.elementType=rm,t.lanes=s,t;case im:return t=bn(19,n,e,i),t.elementType=im,t.lanes=s,t;case hS:return $d(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uS:o=10;break e;case cS:o=9;break e;case Hg:o=11;break e;case Kg:o=14;break e;case Yr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ps(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function $d(t,e,n,r){return t=bn(22,t,r,e),t.elementType=hS,t.lanes=n,t.stateNode={isHidden:!1},t}function Dp(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function Cp(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cp(0),this.expirationTimes=cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dv(t,e,n,r,i,s,o,a,l){return t=new mO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dv(s),t}function gO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:po,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nA(t){if(!t)return gi;t=t._reactInternals;e:{if(js(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(un(n))return nI(t,n,e)}return e}function rA(t,e,n,r,i,s,o,a,l){return t=Dv(n,r,!0,t,i,s,o,a,l),t.context=nA(null),n=t.current,r=Ht(),i=hi(n),s=Ir(r,i),s.callback=e??null,ui(n,s,i),t.current.lanes=i,Cu(t,i,r),cn(t,r),t}function Ld(t,e,n,r){var i=e.current,s=Ht(),o=hi(i);return n=nA(n),e.context===null?e.context=n:e.pendingContext=n,e=Ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(i,e,o),t!==null&&(jn(t,i,o,s),ih(t,i,o)),o}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function M0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cv(t,e){M0(t,e),(t=t.alternate)&&M0(t,e)}function vO(){return null}var iA=typeof reportError=="function"?reportError:function(t){console.error(t)};function xv(t){this._internalRoot=t}Fd.prototype.render=xv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Ld(t,e,null,null)};Fd.prototype.unmount=xv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){Ld(null,t,null,null)}),e[Rr]=null}};function Fd(t){this._internalRoot=t}Fd.prototype.unstable_scheduleHydration=function(t){if(t){var e=MS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&$S(t)}};function kv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V0(){}function yO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Kh(o);s.call(c)}}var o=rA(e,r,t,0,null,!1,!1,"",V0);return t._reactRootContainer=o,t[Rr]=o.current,Gl(t.nodeType===8?t.parentNode:t),Ss(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Kh(l);a.call(c)}}var l=Dv(t,0,!1,null,null,!1,!1,"",V0);return t._reactRootContainer=l,t[Rr]=l.current,Gl(t.nodeType===8?t.parentNode:t),Ss(function(){Ld(e,l,n,r)}),l}function Bd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Kh(o);a.call(l)}}Ld(e,o,t,i)}else o=yO(n,e,t,i,r);return Kh(o)}OS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fl(e.pendingLanes);n!==0&&(Xg(e,n|1),cn(e,rt()),!(we&6)&&(zo=rt()+500,xi()))}break;case 13:Ss(function(){var r=Pr(t,1);if(r!==null){var i=Ht();jn(r,t,1,i)}}),Cv(t,1)}};Jg=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=Ht();jn(e,t,134217728,n)}Cv(t,134217728)}};NS=function(t){if(t.tag===13){var e=hi(t),n=Pr(t,e);if(n!==null){var r=Ht();jn(n,t,e,r)}Cv(t,e)}};MS=function(){return Ie};VS=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};pm=function(t,e,n){switch(e){case"input":if(am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xd(r);if(!i)throw Error(X(90));fS(r),am(r,i)}}}break;case"textarea":mS(t,n);break;case"select":e=n.value,e!=null&&Ro(t,!!n.multiple,e,!1)}};TS=Av;SS=Ss;var _O={usingClientEntryPoint:!1,Events:[ku,_o,xd,wS,ES,Av]},tl={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wO={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bS(t),t===null?null:t.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||vO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{Rd=Lc.inject(wO),tr=Lc}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_O;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(e))throw Error(X(200));return gO(t,e,null,n)};Tn.createRoot=function(t,e){if(!kv(t))throw Error(X(299));var n=!1,r="",i=iA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dv(t,1,!1,null,null,n,!1,r,i),t[Rr]=e.current,Gl(t.nodeType===8?t.parentNode:t),new xv(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=bS(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return Ss(t)};Tn.hydrate=function(t,e,n){if(!Ud(e))throw Error(X(200));return Bd(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!kv(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=iA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rA(e,null,t,1,n??null,i,!1,s,o),t[Rr]=e.current,Gl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fd(e)};Tn.render=function(t,e,n){if(!Ud(e))throw Error(X(200));return Bd(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!Ud(t))throw Error(X(40));return t._reactRootContainer?(Ss(function(){Bd(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};Tn.unstable_batchedUpdates=Av;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ud(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Bd(t,e,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function sA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sA)}catch(t){console.error(t)}}sA(),sS.exports=Tn;var oA=sS.exports;const aA=nt(oA);var lA,$0=oA;lA=$0.createRoot,$0.hydrateRoot;const Ov=!!(typeof window<"u"&&window.document&&window.document.createElement);var Hm=!1,Km=!1;try{var xp={get passive(){return Hm=!0},get once(){return Km=Hm=!0}};Ov&&(window.addEventListener("test",xp,xp),window.removeEventListener("test",xp,!0))}catch{}function EO(t,e,n,r){if(r&&typeof r!="boolean"&&!Km){var i=r.once,s=r.capture,o=n;!Km&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,Hm?r:s)}t.addEventListener(e,n,r)}function Nu(t){return t&&t.ownerDocument||document}function TO(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}var Fc;function uA(t){if((!Fc&&Fc!==0||t)&&Ov){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Fc=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Fc}function L0(){return le.useState(null)}function SO(t){const e=le.useRef(t);return le.useEffect(()=>{e.current=t},[t]),e}function F0(t){const e=SO(t);return le.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const U0=t=>!t||typeof t=="function"?t:e=>{t.current=e};function IO(t,e){const n=U0(t),r=U0(e);return i=>{n&&n(i),r&&r(i)}}function AO(t,e){return le.useMemo(()=>IO(t,e),[t,e])}function bO(t){var e=Nu(t);return e&&e.defaultView||window}function RO(t,e){return bO(t).getComputedStyle(t,e)}var PO=/([A-Z])/g;function DO(t){return t.replace(PO,"-$1").toLowerCase()}var CO=/^ms-/;function Uc(t){return DO(t).replace(CO,"-ms-")}var xO=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function kO(t){return!!(t&&xO.test(t))}function ao(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Uc(e))||RO(t).getPropertyValue(Uc(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(Uc(i)):kO(i)?r+=i+"("+s+") ":n+=Uc(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function ml(t,e,n,r){return EO(t,e,n,r),function(){TO(t,e,n,r)}}function tu(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function OO(){const t=le.useRef(!0),e=le.useRef(()=>t.current);return le.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function NO(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function MO(t,e){t.classList?t.classList.add(e):NO(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var VO=Function.prototype.bind.call(Function.prototype.call,[].slice);function $O(t,e){return VO(t.querySelectorAll(e))}function B0(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function LO(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=B0(t.className,e):t.setAttribute("class",B0(t.className&&t.className.baseVal||"",e))}function zd(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Qh(t,e){return Qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Qh(t,e)}function FO(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Qh(t,e)}var cA={exports:{}},UO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BO=UO,zO=BO;function hA(){}function dA(){}dA.resetWarningCache=hA;var jO=function(){function t(r,i,s,o,a,l){if(l!==zO){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:dA,resetWarningCache:hA};return n.PropTypes=n,n};cA.exports=jO();var qO=cA.exports;const Z=nt(qO);var WO=function(){},GO=WO;const HO=nt(GO);function Cr(t){"@babel/helpers - typeof";return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(t)}function KO(t,e){if(Cr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fA(t){var e=KO(t,"string");return Cr(e)=="symbol"?e:e+""}function ns(t,e,n){return(e=fA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z0(Object(n),!0).forEach(function(r){ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lr(t,e){if(t==null)return{};var n,r,i=zd(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fA(r.key),r)}}function wt(t,e,n){return e&&j0(t.prototype,e),n&&j0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yh(t){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yh(t)}function pA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pA=function(){return!!t})()}function QO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YO(t,e){if(e&&(Cr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QO(t)}function Zt(t,e,n){return e=Yh(e),YO(t,pA()?Reflect.construct(e,n||[],Yh(t).constructor):e.apply(t,n))}function en(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qh(t,e)}function mA(t){if(Array.isArray(t))return t}function XO(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Qm(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Nv(t,e){if(t){if(typeof t=="string")return Qm(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qm(t,e):void 0}}function gA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t,e){return mA(t)||XO(t,e)||Nv(t,e)||gA()}function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ze.apply(null,arguments)}var JO=function(t,e,n,r,i,s,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],h=0;l=new Error(e.replace(/%s/g,function(){return c[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},ZO=JO;const nu=nt(ZO);var eN=function(){};function tN(t,e){var n={};return Object.keys(t).forEach(function(r){n[hh(r)]=eN}),n}function q0(t,e){return t[e]!==void 0}function hh(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function nN(t){return!!t&&(typeof t!="function"||t.prototype&&t.prototype.isReactComponent)}function vA(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function yA(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function _A(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}vA.__suppressDeprecationWarning=!0;yA.__suppressDeprecationWarning=!0;_A.__suppressDeprecationWarning=!0;function rN(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=vA,e.componentWillReceiveProps=yA),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=_A;var a=e.componentDidUpdate;e.componentDidUpdate=function(c,h,d){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,c,h,f)}}return t}var iN="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function wA(t,e,n){n===void 0&&(n=[]);var r=t.displayName||t.name||"Component",i=nN(t),s=Object.keys(e),o=s.map(hh);i||!n.length||nu(!1);var a=function(c){FO(h,c);function h(){for(var f,m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];f=c.call.apply(c,[this].concat(_))||this,f.handlers=Object.create(null),s.forEach(function(w){var y=e[w],T=function(x){if(f.props[y]){var O;f._notifying=!0;for(var I=arguments.length,E=new Array(I>1?I-1:0),A=1;A<I;A++)E[A-1]=arguments[A];(O=f.props)[y].apply(O,[x].concat(E)),f._notifying=!1}f.unmounted||f.setState(function(b){var D,k=b.values;return{values:Ze(Object.create(null),k,(D={},D[w]=x,D))}})};f.handlers[y]=T}),n.length&&(f.attachRef=function(w){f.inner=w});var S=Object.create(null);return s.forEach(function(w){S[w]=f.props[hh(w)]}),f.state={values:S,prevProps:{}},f}var d=h.prototype;return d.shouldComponentUpdate=function(){return!this._notifying},h.getDerivedStateFromProps=function(m,_){var v=_.values,S=_.prevProps,w={values:Ze(Object.create(null),v),prevProps:{}};return s.forEach(function(y){w.prevProps[y]=m[y],!q0(m,y)&&q0(S,y)&&(w.values[y]=m[hh(y)])}),w},d.componentWillUnmount=function(){this.unmounted=!0},d.render=function(){var m=this,_=this.props,v=_.innerRef,S=zd(_,["innerRef"]);o.forEach(function(y){delete S[y]});var w={};return s.forEach(function(y){var T=m.props[y];w[y]=T!==void 0?T:m.state.values[y]}),V.createElement(t,Ze({},S,w,this.handlers,{ref:v||this.attachRef}))},h}(V.Component);rN(a),a.displayName="Uncontrolled("+r+")",a.propTypes=Ze({innerRef:function(){}},tN(e)),n.forEach(function(c){a.prototype[c]=function(){var d;return(d=this.inner)[c].apply(d,arguments)}});var l=a;return V.forwardRef&&(l=V.forwardRef(function(c,h){return V.createElement(a,Ze({},c,{innerRef:h,__source:{fileName:iN,lineNumber:128},__self:this}))}),l.propTypes=a.propTypes),l.ControlledComponent=t,l.deferControlTo=function(c,h,d){return h===void 0&&(h={}),wA(c,Ze({},e,h),d)},l}function EA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=EA(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ht(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=EA(t))&&(r&&(r+=" "),r+=e);return r}var Xh="milliseconds",ru="seconds",iu="minutes",su="hours",Is="day",jo="week",ou="month",As="year",bs="decade",Rs="century",TA={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},sN={month:1,year:12,decade:10*12,century:100*12};function oN(t){return[31,aN(t),31,30,31,30,31,31,30,31,30,31]}function aN(t){return t%4===0&&t%100!==0||t%400===0?29:28}function Gn(t,e,n){switch(t=new Date(t),n){case Xh:case ru:case iu:case su:case Is:case jo:return lN(t,e*TA[n]);case ou:case As:case bs:case Rs:return uN(t,e*sN[n])}throw new TypeError('Invalid units: "'+n+'"')}function lN(t,e){var n=new Date(+t+e);return cN(t,n)}function uN(t,e){var n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),s=n*12+r+e,o=Math.trunc(s/12),a=s%12,l=Math.min(i,oN(o)[a]),c=new Date(t);return c.setFullYear(o),c.setDate(1),c.setMonth(a),c.setDate(l),c}function cN(t,e){var n=t.getTimezoneOffset(),r=e.getTimezoneOffset(),i=r-n;return new Date(+e+i*TA.minutes)}function au(t,e,n){return Gn(t,-e,n)}function Pt(t,e,n){switch(t=new Date(t),e){case Rs:case bs:case As:t=Zh(t,0);case ou:t=RA(t,1);case jo:case Is:t=cu(t,0);case su:t=qo(t,0);case iu:t=uu(t,0);case ru:t=lu(t,0)}return e===bs&&(t=au(t,Ps(t)%10,"year")),e===Rs&&(t=au(t,Ps(t)%100,"year")),e===jo&&(t=PA(t,0,n)),t}function Jh(t,e,n){switch(t=new Date(t),t=Pt(t,e,n),e){case Rs:case bs:case As:case ou:case jo:t=Gn(t,1,e),t=au(t,1,Is),t.setHours(23,59,59,999);break;case Is:t.setHours(23,59,59,999);break;case su:case iu:case ru:t=Gn(t,1,e),t=au(t,1,Xh)}return t}var Mu=pa(function(t,e){return t===e}),Mv=pa(function(t,e){return t!==e}),jd=pa(function(t,e){return t>e}),Vu=pa(function(t,e){return t>=e}),Vv=pa(function(t,e){return t<e}),fa=pa(function(t,e){return t<=e});function SA(){return new Date(Math.min.apply(Math,arguments))}function IA(){return new Date(Math.max.apply(Math,arguments))}function AA(t,e,n,r){return r=r||"day",(!e||Vu(t,e,r))&&(!n||fa(t,n,r))}var lu=ki("Milliseconds"),uu=ki("Seconds"),qo=ki("Minutes"),cu=ki("Hours"),bA=ki("Day"),RA=ki("Date"),Zh=ki("Month"),Ps=ki("FullYear");function hN(t,e){return e===void 0?Ps(Pt(t,bs)):Gn(t,e+10,As)}function dN(t,e){return e===void 0?Ps(Pt(t,Rs)):Gn(t,e+100,As)}function PA(t,e,n){var r=(bA(t)+7-(n||0))%7;return e===void 0?r:Gn(t,e-r,Is)}function fN(t,e,n,r){var i,s,o;switch(n){case Xh:case ru:case iu:case su:case Is:case jo:i=e.getTime()-t.getTime();break;case ou:case As:case bs:case Rs:i=(Ps(e)-Ps(t))*12+Zh(e)-Zh(t);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case Xh:s=1;break;case ru:s=1e3;break;case iu:s=1e3*60;break;case su:s=1e3*60*60;break;case Is:s=1e3*60*60*24;break;case jo:s=1e3*60*60*24*7;break;case ou:s=1;break;case As:s=12;break;case bs:s=120;break;case Rs:s=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return o=i/s,r?o:Math.round(o)}function ki(t){var e=function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(t);return function(n,r){if(r===void 0)return n["get"+t]();var i=new Date(n);return i["set"+t](r),e&&i["get"+t]()!=r&&(t==="Hours"||r>=e&&i.getHours()-n.getHours()<Math.floor(r/e))&&i["set"+t](r+e),i}}function pa(t){return function(e,n,r){return t(+Pt(e,r),+Pt(n,r))}}const W0=Object.freeze(Object.defineProperty({__proto__:null,add:Gn,century:dN,date:RA,day:bA,decade:hN,diff:fN,endOf:Jh,eq:Mu,gt:jd,gte:Vu,hours:cu,inRange:AA,lt:Vv,lte:fa,max:IA,milliseconds:lu,min:SA,minutes:qo,month:Zh,neq:Mv,seconds:uu,startOf:Pt,subtract:au,weekday:PA,year:Ps},Symbol.toStringTag,{value:"Module"}));function pN(t){if(Array.isArray(t))return Qm(t)}function DA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dh(t){return pN(t)||DA(t)||Nv(t)||mN()}function gN(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var CA=gN;function vN(t,e){return t===e||t!==t&&e!==e}var $u=vN,yN=typeof gn=="object"&&gn&&gn.Object===Object&&gn,xA=yN,_N=xA,wN=typeof self=="object"&&self&&self.Object===Object&&self,EN=_N||wN||Function("return this")(),hr=EN,TN=hr,SN=TN.Symbol,ma=SN,G0=ma,kA=Object.prototype,IN=kA.hasOwnProperty,AN=kA.toString,nl=G0?G0.toStringTag:void 0;function bN(t){var e=IN.call(t,nl),n=t[nl];try{t[nl]=void 0;var r=!0}catch{}var i=AN.call(t);return r&&(e?t[nl]=n:delete t[nl]),i}var RN=bN,PN=Object.prototype,DN=PN.toString;function CN(t){return DN.call(t)}var xN=CN,H0=ma,kN=RN,ON=xN,NN="[object Null]",MN="[object Undefined]",K0=H0?H0.toStringTag:void 0;function VN(t){return t==null?t===void 0?MN:NN:K0&&K0 in Object(t)?kN(t):ON(t)}var ga=VN;function $N(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $r=$N,LN=ga,FN=$r,UN="[object AsyncFunction]",BN="[object Function]",zN="[object GeneratorFunction]",jN="[object Proxy]";function qN(t){if(!FN(t))return!1;var e=LN(t);return e==BN||e==zN||e==UN||e==jN}var $v=qN,WN=9007199254740991;function GN(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=WN}var Lv=GN,HN=$v,KN=Lv;function QN(t){return t!=null&&KN(t.length)&&!HN(t)}var Lu=QN,YN=9007199254740991,XN=/^(?:0|[1-9]\d*)$/;function JN(t,e){var n=typeof t;return e=e??YN,!!e&&(n=="number"||n!="symbol"&&XN.test(t))&&t>-1&&t%1==0&&t<e}var Fv=JN,ZN=$u,e2=Lu,t2=Fv,n2=$r;function r2(t,e,n){if(!n2(n))return!1;var r=typeof e;return(r=="number"?e2(n)&&t2(e,n.length):r=="string"&&e in n)?ZN(n[e],t):!1}var qd=r2,i2=/\s/;function s2(t){for(var e=t.length;e--&&i2.test(t.charAt(e)););return e}var o2=s2,a2=o2,l2=/^\s+/;function u2(t){return t&&t.slice(0,a2(t)+1).replace(l2,"")}var c2=u2;function h2(t){return t!=null&&typeof t=="object"}var Oi=h2,d2=ga,f2=Oi,p2="[object Symbol]";function m2(t){return typeof t=="symbol"||f2(t)&&d2(t)==p2}var Fu=m2,g2=c2,Q0=$r,v2=Fu,Y0=NaN,y2=/^[-+]0x[0-9a-f]+$/i,_2=/^0b[01]+$/i,w2=/^0o[0-7]+$/i,E2=parseInt;function T2(t){if(typeof t=="number")return t;if(v2(t))return Y0;if(Q0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Q0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=g2(t);var n=_2.test(t);return n||w2.test(t)?E2(t.slice(2),n?2:8):y2.test(t)?Y0:+t}var S2=T2,I2=S2,X0=1/0,A2=17976931348623157e292;function b2(t){if(!t)return t===0?t:0;if(t=I2(t),t===X0||t===-X0){var e=t<0?-1:1;return e*A2}return t===t?t:0}var OA=b2,R2=OA;function P2(t){var e=R2(t),n=e%1;return e===e?n?e-n:e:0}var NA=P2,D2=CA,C2=qd,x2=NA,k2=Math.ceil,O2=Math.max;function N2(t,e,n){(n?C2(t,e,n):e===void 0)?e=1:e=O2(x2(e),0);var r=t==null?0:t.length;if(!r||e<1)return[];for(var i=0,s=0,o=Array(k2(r/e));i<r;)o[s++]=D2(t,i,i+=e);return o}var M2=N2;const V2=nt(M2);function $2(t){return"nodeType"in t&&t.nodeType===document.DOCUMENT_NODE}function Uv(t){return"window"in t&&t.window===t?t:$2(t)&&t.defaultView||!1}function MA(t){var e=t==="pageXOffset"?"scrollLeft":"scrollTop";function n(r,i){var s=Uv(r);if(i===void 0)return s?s[t]:r[e];s?s.scrollTo(s[t],i):r[e]=i}return n}const VA=MA("pageXOffset"),$A=MA("pageYOffset");function ms(t){var e=Nu(t),n={top:0,left:0,height:0,width:0},r=e&&e.documentElement;return!r||!tu(r,t)||(t.getBoundingClientRect!==void 0&&(n=t.getBoundingClientRect()),n={top:n.top+$A(r)-(r.clientTop||0),left:n.left+VA(r)-(r.clientLeft||0),width:n.width,height:n.height}),n}var L2=function(e){return!!e&&"offsetParent"in e};function F2(t){for(var e=Nu(t),n=t&&t.offsetParent;L2(n)&&n.nodeName!=="HTML"&&ao(n,"position")==="static";)n=n.offsetParent;return n||e.documentElement}var U2=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function LA(t,e){var n={top:0,left:0},r;if(ao(t,"position")==="fixed")r=t.getBoundingClientRect();else{var i=e||F2(t);r=ms(t),U2(i)!=="html"&&(n=ms(i));var s=String(ao(i,"borderTopWidth")||0);n.top+=parseInt(s,10)-$A(i)||0;var o=String(ao(i,"borderLeftWidth")||0);n.left+=parseInt(o,10)-VA(i)||0}var a=String(ao(t,"marginTop")||0),l=String(ao(t,"marginLeft")||0);return Ze({},r,{top:r.top-n.top-(parseInt(a,10)||0),left:r.left-n.left-(parseInt(l,10)||0)})}var J0=new Date().getTime();function B2(t){var e=new Date().getTime(),n=Math.max(0,16-(e-J0)),r=setTimeout(t,n);return J0=e,r}var z2=["","webkit","moz","o","ms"],Ym="clearTimeout",Xm=B2,Z0=function(e,n){return e+(e?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};Ov&&z2.some(function(t){var e=Z0(t,"request");return e in window&&(Ym=Z0(t,"cancel"),Xm=function(r){return window[e](r)}),!!Xm});var eE=function(e){typeof window[Ym]=="function"&&window[Ym](e)},FA=Xm,kp;function j2(t,e){if(!kp){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;kp=function(s,o){return r.call(s,o)}}return kp(t,e)}function q2(t){const e=OO();return[t[0],le.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var hn="top",On="bottom",Nn="right",dn="left",Bv="auto",Uu=[hn,On,Nn,dn],Wo="start",hu="end",W2="clippingParents",UA="viewport",rl="popper",G2="reference",tE=Uu.reduce(function(t,e){return t.concat([e+"-"+Wo,e+"-"+hu])},[]),zv=[].concat(Uu,[Bv]).reduce(function(t,e){return t.concat([e,e+"-"+Wo,e+"-"+hu])},[]),H2="beforeRead",K2="read",Q2="afterRead",Y2="beforeMain",X2="main",J2="afterMain",Z2="beforeWrite",eM="write",tM="afterWrite",nM=[H2,K2,Q2,Y2,X2,J2,Z2,eM,tM];function rr(t){return t.split("-")[0]}function wn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ds(t){var e=wn(t).Element;return t instanceof e||t instanceof Element}function ir(t){var e=wn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jv(t){if(typeof ShadowRoot>"u")return!1;var e=wn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var gs=Math.max,ed=Math.min,Go=Math.round;function Jm(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function BA(){return!/^((?!chrome|android).)*safari/i.test(Jm())}function Ho(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&ir(t)&&(i=t.offsetWidth>0&&Go(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Go(r.height)/t.offsetHeight||1);var o=Ds(t)?wn(t):window,a=o.visualViewport,l=!BA()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,h=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:h,right:c+d,bottom:h+f,left:c,x:c,y:h}}function qv(t){var e=Ho(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function zA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vi(t){return t?(t.nodeName||"").toLowerCase():null}function xr(t){return wn(t).getComputedStyle(t)}function rM(t){return["table","td","th"].indexOf(vi(t))>=0}function Ni(t){return((Ds(t)?t.ownerDocument:t.document)||window.document).documentElement}function Wd(t){return vi(t)==="html"?t:t.assignedSlot||t.parentNode||(jv(t)?t.host:null)||Ni(t)}function nE(t){return!ir(t)||xr(t).position==="fixed"?null:t.offsetParent}function iM(t){var e=/firefox/i.test(Jm()),n=/Trident/i.test(Jm());if(n&&ir(t)){var r=xr(t);if(r.position==="fixed")return null}var i=Wd(t);for(jv(i)&&(i=i.host);ir(i)&&["html","body"].indexOf(vi(i))<0;){var s=xr(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Bu(t){for(var e=wn(t),n=nE(t);n&&rM(n)&&xr(n).position==="static";)n=nE(n);return n&&(vi(n)==="html"||vi(n)==="body"&&xr(n).position==="static")?e:n||iM(t)||e}function Wv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Dl(t,e,n){return gs(t,ed(e,n))}function sM(t,e,n){var r=Dl(t,e,n);return r>n?n:r}function jA(){return{top:0,right:0,bottom:0,left:0}}function qA(t){return Object.assign({},jA(),t)}function WA(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var oM=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,qA(typeof e!="number"?e:WA(e,Uu))};function aM(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=rr(n.placement),l=Wv(a),c=[dn,Nn].indexOf(a)>=0,h=c?"height":"width";if(!(!s||!o)){var d=oM(i.padding,n),f=qv(s),m=l==="y"?hn:dn,_=l==="y"?On:Nn,v=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],S=o[l]-n.rects.reference[l],w=Bu(s),y=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,T=v/2-S/2,P=d[m],x=y-f[h]-d[_],O=y/2-f[h]/2+T,I=Dl(P,O,x),E=l;n.modifiersData[r]=(e={},e[E]=I,e.centerOffset=I-O,e)}}function lM(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||zA(e.elements.popper,i)&&(e.elements.arrow=i))}const uM={name:"arrow",enabled:!0,phase:"main",fn:aM,effect:lM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ko(t){return t.split("-")[1]}var cM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hM(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Go(n*i)/i||0,y:Go(r*i)/i||0}}function rE(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,f=o.x,m=f===void 0?0:f,_=o.y,v=_===void 0?0:_,S=typeof h=="function"?h({x:m,y:v}):{x:m,y:v};m=S.x,v=S.y;var w=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),T=dn,P=hn,x=window;if(c){var O=Bu(n),I="clientHeight",E="clientWidth";if(O===wn(n)&&(O=Ni(n),xr(O).position!=="static"&&a==="absolute"&&(I="scrollHeight",E="scrollWidth")),O=O,i===hn||(i===dn||i===Nn)&&s===hu){P=On;var A=d&&O===x&&x.visualViewport?x.visualViewport.height:O[I];v-=A-r.height,v*=l?1:-1}if(i===dn||(i===hn||i===On)&&s===hu){T=Nn;var b=d&&O===x&&x.visualViewport?x.visualViewport.width:O[E];m-=b-r.width,m*=l?1:-1}}var D=Object.assign({position:a},c&&cM),k=h===!0?hM({x:m,y:v},wn(n)):{x:m,y:v};if(m=k.x,v=k.y,l){var C;return Object.assign({},D,(C={},C[P]=y?"0":"",C[T]=w?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",C))}return Object.assign({},D,(e={},e[P]=y?v+"px":"",e[T]=w?m+"px":"",e.transform="",e))}function dM(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:rr(e.placement),variation:Ko(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rE(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rE(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const fM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dM,data:{}};var Bc={passive:!0};function pM(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=wn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",n.update,Bc)}),a&&l.addEventListener("resize",n.update,Bc),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",n.update,Bc)}),a&&l.removeEventListener("resize",n.update,Bc)}}const mM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pM,data:{}};var gM={left:"right",right:"left",bottom:"top",top:"bottom"};function fh(t){return t.replace(/left|right|bottom|top/g,function(e){return gM[e]})}var vM={start:"end",end:"start"};function iE(t){return t.replace(/start|end/g,function(e){return vM[e]})}function Gv(t){var e=wn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Hv(t){return Ho(Ni(t)).left+Gv(t).scrollLeft}function yM(t,e){var n=wn(t),r=Ni(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=BA();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Hv(t),y:l}}function _M(t){var e,n=Ni(t),r=Gv(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=gs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=gs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Hv(t),l=-r.scrollTop;return xr(i||n).direction==="rtl"&&(a+=gs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Kv(t){var e=xr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function GA(t){return["html","body","#document"].indexOf(vi(t))>=0?t.ownerDocument.body:ir(t)&&Kv(t)?t:GA(Wd(t))}function Cl(t,e){var n;e===void 0&&(e=[]);var r=GA(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=wn(r),o=i?[s].concat(s.visualViewport||[],Kv(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Cl(Wd(o)))}function Zm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function wM(t,e){var n=Ho(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function sE(t,e,n){return e===UA?Zm(yM(t,n)):Ds(e)?wM(e,n):Zm(_M(Ni(t)))}function EM(t){var e=Cl(Wd(t)),n=["absolute","fixed"].indexOf(xr(t).position)>=0,r=n&&ir(t)?Bu(t):t;return Ds(r)?e.filter(function(i){return Ds(i)&&zA(i,r)&&vi(i)!=="body"}):[]}function TM(t,e,n,r){var i=e==="clippingParents"?EM(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var h=sE(t,c,r);return l.top=gs(h.top,l.top),l.right=ed(h.right,l.right),l.bottom=ed(h.bottom,l.bottom),l.left=gs(h.left,l.left),l},sE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function HA(t){var e=t.reference,n=t.element,r=t.placement,i=r?rr(r):null,s=r?Ko(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case hn:l={x:o,y:e.y-n.height};break;case On:l={x:o,y:e.y+e.height};break;case Nn:l={x:e.x+e.width,y:a};break;case dn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Wv(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case Wo:l[c]=l[c]-(e[h]/2-n[h]/2);break;case hu:l[c]=l[c]+(e[h]/2-n[h]/2);break}}return l}function du(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?W2:a,c=n.rootBoundary,h=c===void 0?UA:c,d=n.elementContext,f=d===void 0?rl:d,m=n.altBoundary,_=m===void 0?!1:m,v=n.padding,S=v===void 0?0:v,w=qA(typeof S!="number"?S:WA(S,Uu)),y=f===rl?G2:rl,T=t.rects.popper,P=t.elements[_?y:f],x=TM(Ds(P)?P:P.contextElement||Ni(t.elements.popper),l,h,o),O=Ho(t.elements.reference),I=HA({reference:O,element:T,strategy:"absolute",placement:i}),E=Zm(Object.assign({},T,I)),A=f===rl?E:O,b={top:x.top-A.top+w.top,bottom:A.bottom-x.bottom+w.bottom,left:x.left-A.left+w.left,right:A.right-x.right+w.right},D=t.modifiersData.offset;if(f===rl&&D){var k=D[i];Object.keys(b).forEach(function(C){var K=[Nn,On].indexOf(C)>=0?1:-1,q=[hn,On].indexOf(C)>=0?"y":"x";b[C]+=k[q]*K})}return b}function SM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?zv:l,h=Ko(r),d=h?a?tE:tE.filter(function(_){return Ko(_)===h}):Uu,f=d.filter(function(_){return c.indexOf(_)>=0});f.length===0&&(f=d);var m=f.reduce(function(_,v){return _[v]=du(t,{placement:v,boundary:i,rootBoundary:s,padding:o})[rr(v)],_},{});return Object.keys(m).sort(function(_,v){return m[_]-m[v]})}function IM(t){if(rr(t)===Bv)return[];var e=fh(t);return[iE(t),e,iE(e)]}function AM(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,_=m===void 0?!0:m,v=n.allowedAutoPlacements,S=e.options.placement,w=rr(S),y=w===S,T=l||(y||!_?[fh(S)]:IM(S)),P=[S].concat(T).reduce(function(H,J){return H.concat(rr(J)===Bv?SM(e,{placement:J,boundary:h,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:v}):J)},[]),x=e.rects.reference,O=e.rects.popper,I=new Map,E=!0,A=P[0],b=0;b<P.length;b++){var D=P[b],k=rr(D),C=Ko(D)===Wo,K=[hn,On].indexOf(k)>=0,q=K?"width":"height",z=du(e,{placement:D,boundary:h,rootBoundary:d,altBoundary:f,padding:c}),Y=K?C?Nn:dn:C?On:hn;x[q]>O[q]&&(Y=fh(Y));var $=fh(Y),G=[];if(s&&G.push(z[k]<=0),a&&G.push(z[Y]<=0,z[$]<=0),G.every(function(H){return H})){A=D,E=!1;break}I.set(D,G)}if(E)for(var Q=_?3:1,oe=function(J){var re=P.find(function(ce){var ge=I.get(ce);if(ge)return ge.slice(0,J).every(function(_e){return _e})});if(re)return A=re,"break"},L=Q;L>0;L--){var B=oe(L);if(B==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}const bM={name:"flip",enabled:!0,phase:"main",fn:AM,requiresIfExists:["offset"],data:{_skip:!1}};function oE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function aE(t){return[hn,Nn,On,dn].some(function(e){return t[e]>=0})}function RM(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=du(e,{elementContext:"reference"}),a=du(e,{altBoundary:!0}),l=oE(o,r),c=oE(a,i,s),h=aE(l),d=aE(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const PM={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:RM};function DM(t,e,n){var r=rr(t),i=[dn,hn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[dn,Nn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function CM(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=zv.reduce(function(h,d){return h[d]=DM(d,e.rects,s),h},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const xM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:CM};function kM(t){var e=t.state,n=t.name;e.modifiersData[n]=HA({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const OM={name:"popperOffsets",enabled:!0,phase:"read",fn:kM,data:{}};function NM(t){return t==="x"?"y":"x"}function MM(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,_=n.tetherOffset,v=_===void 0?0:_,S=du(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),w=rr(e.placement),y=Ko(e.placement),T=!y,P=Wv(w),x=NM(P),O=e.modifiersData.popperOffsets,I=e.rects.reference,E=e.rects.popper,A=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,b=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(O){if(s){var C,K=P==="y"?hn:dn,q=P==="y"?On:Nn,z=P==="y"?"height":"width",Y=O[P],$=Y+S[K],G=Y-S[q],Q=m?-E[z]/2:0,oe=y===Wo?I[z]:E[z],L=y===Wo?-E[z]:-I[z],B=e.elements.arrow,H=m&&B?qv(B):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jA(),re=J[K],ce=J[q],ge=Dl(0,I[z],H[z]),_e=T?I[z]/2-Q-ge-re-b.mainAxis:oe-ge-re-b.mainAxis,Re=T?-I[z]/2+Q+ge+ce+b.mainAxis:L+ge+ce+b.mainAxis,Ye=e.elements.arrow&&Bu(e.elements.arrow),Lt=Ye?P==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,Ft=(C=D==null?void 0:D[P])!=null?C:0,Bi=Y+_e-Ft-Lt,zi=Y+Re-Ft,ka=Dl(m?ed($,Bi):$,Y,m?gs(G,zi):G);O[P]=ka,k[P]=ka-Y}if(a){var sc,zf=P==="x"?hn:dn,oc=P==="x"?On:Nn,Vn=O[x],ji=x==="y"?"height":"width",ac=Vn+S[zf],Ys=Vn-S[oc],qi=[hn,dn].indexOf(w)!==-1,Oa=(sc=D==null?void 0:D[x])!=null?sc:0,lt=qi?ac:Vn-I[ji]-E[ji]-Oa+b.altAxis,ft=qi?Vn+I[ji]+E[ji]-Oa-b.altAxis:Ys,Wi=m&&qi?sM(lt,Vn,ft):Dl(m?lt:ac,Vn,m?ft:Ys);O[x]=Wi,k[x]=Wi-Vn}e.modifiersData[r]=k}}const VM={name:"preventOverflow",enabled:!0,phase:"main",fn:MM,requiresIfExists:["offset"]};function $M(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function LM(t){return t===wn(t)||!ir(t)?Gv(t):$M(t)}function FM(t){var e=t.getBoundingClientRect(),n=Go(e.width)/t.offsetWidth||1,r=Go(e.height)/t.offsetHeight||1;return n!==1||r!==1}function UM(t,e,n){n===void 0&&(n=!1);var r=ir(e),i=ir(e)&&FM(e),s=Ni(e),o=Ho(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((vi(e)!=="body"||Kv(s))&&(a=LM(e)),ir(e)?(l=Ho(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Hv(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function BM(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function zM(t){var e=BM(t);return nM.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function jM(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function qM(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var lE={placement:"bottom",modifiers:[],strategy:"absolute"};function uE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function WM(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?lE:i;return function(a,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},lE,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:h,setOptions:function(w){var y=typeof w=="function"?w(h.options):w;v(),h.options=Object.assign({},s,h.options,y),h.scrollParents={reference:Ds(a)?Cl(a):a.contextElement?Cl(a.contextElement):[],popper:Cl(l)};var T=zM(qM([].concat(r,h.options.modifiers)));return h.orderedModifiers=T.filter(function(P){return P.enabled}),_(),m.update()},forceUpdate:function(){if(!f){var w=h.elements,y=w.reference,T=w.popper;if(uE(y,T)){h.rects={reference:UM(y,Bu(T),h.options.strategy==="fixed"),popper:qv(T)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(b){return h.modifiersData[b.name]=Object.assign({},b.data)});for(var P=0;P<h.orderedModifiers.length;P++){if(h.reset===!0){h.reset=!1,P=-1;continue}var x=h.orderedModifiers[P],O=x.fn,I=x.options,E=I===void 0?{}:I,A=x.name;typeof O=="function"&&(h=O({state:h,options:E,name:A,instance:m})||h)}}}},update:jM(function(){return new Promise(function(S){m.forceUpdate(),S(h)})}),destroy:function(){v(),f=!0}};if(!uE(a,l))return m;m.setOptions(c).then(function(S){!f&&c.onFirstUpdate&&c.onFirstUpdate(S)});function _(){h.orderedModifiers.forEach(function(S){var w=S.name,y=S.options,T=y===void 0?{}:y,P=S.effect;if(typeof P=="function"){var x=P({state:h,name:w,instance:m,options:T}),O=function(){};d.push(x||O)}})}function v(){d.forEach(function(S){return S()}),d=[]}return m}}var GM=WM({defaultModifiers:[PM,OM,fM,mM,xM,bM,VM,uM]}),cE=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},HM={name:"applyStyles",enabled:!1},KM={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var n=e.state;return function(){var r=n.elements,i=r.reference,s=r.popper;if("removeAttribute"in i){var o=(i.getAttribute("aria-describedby")||"").split(",").filter(function(a){return a.trim()!==s.id});o.length?i.setAttribute("aria-describedby",o.join(",")):i.removeAttribute("aria-describedby")}}},fn:function(e){var n,r=e.state,i=r.elements,s=i.popper,o=i.reference,a=(n=s.getAttribute("role"))==null?void 0:n.toLowerCase();if(s.id&&a==="tooltip"&&"setAttribute"in o){var l=o.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(s.id)!==-1)return;o.setAttribute("aria-describedby",l?l+","+s.id:s.id)}}},QM=[];function YM(t,e,n){var r=n===void 0?{}:n,i=r.enabled,s=i===void 0?!0:i,o=r.placement,a=o===void 0?"bottom":o,l=r.strategy,c=l===void 0?"absolute":l,h=r.modifiers,d=h===void 0?QM:h,f=zd(r,["enabled","placement","strategy","modifiers"]),m=le.useRef(),_=le.useCallback(function(){var P;(P=m.current)==null||P.update()},[]),v=le.useCallback(function(){var P;(P=m.current)==null||P.forceUpdate()},[]),S=q2(le.useState({placement:a,update:_,forceUpdate:v,attributes:{},styles:{popper:cE(c),arrow:{}}})),w=S[0],y=S[1],T=le.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(x){var O=x.state,I={},E={};Object.keys(O.elements).forEach(function(A){I[A]=O.styles[A],E[A]=O.attributes[A]}),y({state:O,styles:I,attributes:E,update:_,forceUpdate:v,placement:O.placement})}}},[_,v,y]);return le.useEffect(function(){!m.current||!s||m.current.setOptions({placement:a,strategy:c,modifiers:[].concat(d,[T,HM])})},[c,a,T,s]),le.useEffect(function(){if(!(!s||t==null||e==null))return m.current=GM(t,e,Ze({},f,{placement:a,strategy:c,modifiers:[].concat(d,[KM,T])})),function(){m.current!=null&&(m.current.destroy(),m.current=void 0,y(function(P){return Ze({},P,{attributes:{},styles:{popper:cE(c)}})}))}},[s,t,e]),w}function XM(t){return t&&"setState"in t?aA.findDOMNode(t):t??null}const JM=function(t){return Nu(XM(t))};var ZM=27,hE=function(){};function eV(t){return t.button===0}function tV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var dE=function(e){return e&&("current"in e?e.current:e)};function nV(t,e,n){var r=n===void 0?{}:n,i=r.disabled,s=r.clickTrigger,o=s===void 0?"click":s,a=le.useRef(!1),l=e||hE,c=le.useCallback(function(f){var m,_=dE(t);HO(!!_,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),a.current=!_||tV(f)||!eV(f)||!!tu(_,(m=f.composedPath==null?void 0:f.composedPath()[0])!=null?m:f.target)},[t]),h=F0(function(f){a.current||l(f)}),d=F0(function(f){f.keyCode===ZM&&l(f)});le.useEffect(function(){if(!(i||t==null)){var f=window.event,m=JM(dE(t)),_=ml(m,o,c,!0),v=ml(m,o,function(y){if(y===f){f=void 0;return}h(y)}),S=ml(m,"keyup",function(y){if(y===f){f=void 0;return}d(y)}),w=[];return"ontouchstart"in m.documentElement&&(w=[].slice.call(m.body.children).map(function(y){return ml(y,"mousemove",hE)})),function(){_(),v(),S(),w.forEach(function(y){return y()})}}},[t,i,o,c,h,d])}function rV(t){var e={};return Array.isArray(t)?(t==null||t.forEach(function(n){e[n.name]=n}),e):t||e}function iV(t){return t===void 0&&(t={}),Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e].name=e,t[e]})}function sV(t){var e,n,r,i,s=t.enabled,o=t.enableEvents,a=t.placement,l=t.flip,c=t.offset,h=t.fixed,d=t.containerPadding,f=t.arrowElement,m=t.popperConfig,_=m===void 0?{}:m,v=rV(_.modifiers);return Ze({},_,{placement:a,enabled:s,strategy:h?"fixed":_.strategy,modifiers:iV(Ze({},v,{eventListeners:{enabled:o},preventOverflow:Ze({},v.preventOverflow,{options:d?Ze({padding:d},(e=v.preventOverflow)==null?void 0:e.options):(n=v.preventOverflow)==null?void 0:n.options}),offset:{options:Ze({offset:c},(r=v.offset)==null?void 0:r.options)},arrow:Ze({},v.arrow,{enabled:!!f,options:Ze({},(i=v.arrow)==null?void 0:i.options,{element:f})}),flip:Ze({enabled:!!l},v.flip)}))})}var Op=function(e){var n;return typeof document>"u"?null:e==null?Nu().body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),(n=e)!=null&&n.nodeType&&e||null)};function fE(t,e){var n=le.useState(function(){return Op(t)}),r=n[0],i=n[1];if(!r){var s=Op(t);s&&i(s)}return le.useEffect(function(){},[e,r]),le.useEffect(function(){var o=Op(t);o!==r&&i(o)},[t,r]),r}var Qv=V.forwardRef(function(t,e){var n=t.flip,r=t.offset,i=t.placement,s=t.containerPadding,o=s===void 0?5:s,a=t.popperConfig,l=a===void 0?{}:a,c=t.transition,h=L0(),d=h[0],f=h[1],m=L0(),_=m[0],v=m[1],S=AO(f,e),w=fE(t.container),y=fE(t.target),T=le.useState(!t.show),P=T[0],x=T[1],O=YM(y,d,sV({placement:i,enableEvents:!!t.show,containerPadding:o||5,flip:n,offset:r,arrowElement:_,popperConfig:l})),I=O.styles,E=O.attributes,A=zd(O,["styles","attributes"]);t.show?P&&x(!1):!t.transition&&!P&&x(!0);var b=function(){x(!0),t.onExited&&t.onExited.apply(t,arguments)},D=t.show||c&&!P;if(nV(d,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!D)return null;var k=t.children(Ze({},A,{show:!!t.show,props:Ze({},E.popper,{style:I.popper,ref:S}),arrowProps:Ze({},E.arrow,{style:I.arrow,ref:v})}));if(c){var C=t.onExit,K=t.onExiting,q=t.onEnter,z=t.onEntering,Y=t.onEntered;k=V.createElement(c,{in:t.show,appear:!0,onExit:C,onExiting:K,onExited:b,onEnter:q,onEntering:z,onEntered:Y},k)}return w?aA.createPortal(k,w):null});Qv.displayName="Overlay";Qv.propTypes={show:Z.bool,placement:Z.oneOf(zv),target:Z.any,container:Z.any,flip:Z.bool,children:Z.func.isRequired,containerPadding:Z.number,popperConfig:Z.object,rootClose:Z.bool,rootCloseEvent:Z.oneOf(["click","mousedown"]),rootCloseDisabled:Z.bool,onHide:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e.rootClose){var s;return(s=Z.func).isRequired.apply(s,[e].concat(r))}return Z.func.apply(Z,[e].concat(r))},transition:Z.elementType,onEnter:Z.func,onEntering:Z.func,onEntered:Z.func,onExit:Z.func,onExiting:Z.func,onExited:Z.func};function oV(){this.__data__=[],this.size=0}var aV=oV,lV=$u;function uV(t,e){for(var n=t.length;n--;)if(lV(t[n][0],e))return n;return-1}var Gd=uV,cV=Gd,hV=Array.prototype,dV=hV.splice;function fV(t){var e=this.__data__,n=cV(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dV.call(e,n,1),--this.size,!0}var pV=fV,mV=Gd;function gV(t){var e=this.__data__,n=mV(e,t);return n<0?void 0:e[n][1]}var vV=gV,yV=Gd;function _V(t){return yV(this.__data__,t)>-1}var wV=_V,EV=Gd;function TV(t,e){var n=this.__data__,r=EV(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var SV=TV,IV=aV,AV=pV,bV=vV,RV=wV,PV=SV;function va(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}va.prototype.clear=IV;va.prototype.delete=AV;va.prototype.get=bV;va.prototype.has=RV;va.prototype.set=PV;var Hd=va,DV=Hd;function CV(){this.__data__=new DV,this.size=0}var xV=CV;function kV(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var OV=kV;function NV(t){return this.__data__.get(t)}var MV=NV;function VV(t){return this.__data__.has(t)}var $V=VV,LV=hr,FV=LV["__core-js_shared__"],UV=FV,Np=UV,pE=function(){var t=/[^.]+$/.exec(Np&&Np.keys&&Np.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function BV(t){return!!pE&&pE in t}var zV=BV,jV=Function.prototype,qV=jV.toString;function WV(t){if(t!=null){try{return qV.call(t)}catch{}try{return t+""}catch{}}return""}var KA=WV,GV=$v,HV=zV,KV=$r,QV=KA,YV=/[\\^$.*+?()[\]{}|]/g,XV=/^\[object .+?Constructor\]$/,JV=Function.prototype,ZV=Object.prototype,e$=JV.toString,t$=ZV.hasOwnProperty,n$=RegExp("^"+e$.call(t$).replace(YV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function r$(t){if(!KV(t)||HV(t))return!1;var e=GV(t)?n$:XV;return e.test(QV(t))}var i$=r$;function s$(t,e){return t==null?void 0:t[e]}var o$=s$,a$=i$,l$=o$;function u$(t,e){var n=l$(t,e);return a$(n)?n:void 0}var qs=u$,c$=qs,h$=hr,d$=c$(h$,"Map"),Yv=d$,f$=qs,p$=f$(Object,"create"),Kd=p$,mE=Kd;function m$(){this.__data__=mE?mE(null):{},this.size=0}var g$=m$;function v$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var y$=v$,_$=Kd,w$="__lodash_hash_undefined__",E$=Object.prototype,T$=E$.hasOwnProperty;function S$(t){var e=this.__data__;if(_$){var n=e[t];return n===w$?void 0:n}return T$.call(e,t)?e[t]:void 0}var I$=S$,A$=Kd,b$=Object.prototype,R$=b$.hasOwnProperty;function P$(t){var e=this.__data__;return A$?e[t]!==void 0:R$.call(e,t)}var D$=P$,C$=Kd,x$="__lodash_hash_undefined__";function k$(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=C$&&e===void 0?x$:e,this}var O$=k$,N$=g$,M$=y$,V$=I$,$$=D$,L$=O$;function ya(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ya.prototype.clear=N$;ya.prototype.delete=M$;ya.prototype.get=V$;ya.prototype.has=$$;ya.prototype.set=L$;var F$=ya,gE=F$,U$=Hd,B$=Yv;function z$(){this.size=0,this.__data__={hash:new gE,map:new(B$||U$),string:new gE}}var j$=z$;function q$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var W$=q$,G$=W$;function H$(t,e){var n=t.__data__;return G$(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Qd=H$,K$=Qd;function Q$(t){var e=K$(this,t).delete(t);return this.size-=e?1:0,e}var Y$=Q$,X$=Qd;function J$(t){return X$(this,t).get(t)}var Z$=J$,eL=Qd;function tL(t){return eL(this,t).has(t)}var nL=tL,rL=Qd;function iL(t,e){var n=rL(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var sL=iL,oL=j$,aL=Y$,lL=Z$,uL=nL,cL=sL;function _a(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_a.prototype.clear=oL;_a.prototype.delete=aL;_a.prototype.get=lL;_a.prototype.has=uL;_a.prototype.set=cL;var Xv=_a,hL=Hd,dL=Yv,fL=Xv,pL=200;function mL(t,e){var n=this.__data__;if(n instanceof hL){var r=n.__data__;if(!dL||r.length<pL-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fL(r)}return n.set(t,e),this.size=n.size,this}var gL=mL,vL=Hd,yL=xV,_L=OV,wL=MV,EL=$V,TL=gL;function wa(t){var e=this.__data__=new vL(t);this.size=e.size}wa.prototype.clear=yL;wa.prototype.delete=_L;wa.prototype.get=wL;wa.prototype.has=EL;wa.prototype.set=TL;var Jv=wa,SL="__lodash_hash_undefined__";function IL(t){return this.__data__.set(t,SL),this}var AL=IL;function bL(t){return this.__data__.has(t)}var RL=bL,PL=Xv,DL=AL,CL=RL;function td(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new PL;++e<n;)this.add(t[e])}td.prototype.add=td.prototype.push=DL;td.prototype.has=CL;var xL=td;function kL(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var OL=kL;function NL(t,e){return t.has(e)}var ML=NL,VL=xL,$L=OL,LL=ML,FL=1,UL=2;function BL(t,e,n,r,i,s){var o=n&FL,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,m=n&UL?new VL:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var _=t[d],v=e[d];if(r)var S=o?r(v,_,d,e,t,s):r(_,v,d,t,e,s);if(S!==void 0){if(S)continue;f=!1;break}if(m){if(!$L(e,function(w,y){if(!LL(m,y)&&(_===w||i(_,w,n,r,s)))return m.push(y)})){f=!1;break}}else if(!(_===v||i(_,v,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var QA=BL,zL=hr,jL=zL.Uint8Array,YA=jL;function qL(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var WL=qL;function GL(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var HL=GL,vE=ma,yE=YA,KL=$u,QL=QA,YL=WL,XL=HL,JL=1,ZL=2,eF="[object Boolean]",tF="[object Date]",nF="[object Error]",rF="[object Map]",iF="[object Number]",sF="[object RegExp]",oF="[object Set]",aF="[object String]",lF="[object Symbol]",uF="[object ArrayBuffer]",cF="[object DataView]",_E=vE?vE.prototype:void 0,Mp=_E?_E.valueOf:void 0;function hF(t,e,n,r,i,s,o){switch(n){case cF:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uF:return!(t.byteLength!=e.byteLength||!s(new yE(t),new yE(e)));case eF:case tF:case iF:return KL(+t,+e);case nF:return t.name==e.name&&t.message==e.message;case sF:case aF:return t==e+"";case rF:var a=YL;case oF:var l=r&JL;if(a||(a=XL),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=ZL,o.set(t,e);var h=QL(a(t),a(e),r,i,s,o);return o.delete(t),h;case lF:if(Mp)return Mp.call(t)==Mp.call(e)}return!1}var dF=hF;function fF(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Zv=fF,pF=Array.isArray,Mn=pF,mF=Zv,gF=Mn;function vF(t,e,n){var r=e(t);return gF(t)?r:mF(r,n(t))}var XA=vF;function yF(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var _F=yF;function wF(){return[]}var JA=wF,EF=_F,TF=JA,SF=Object.prototype,IF=SF.propertyIsEnumerable,wE=Object.getOwnPropertySymbols,AF=wE?function(t){return t==null?[]:(t=Object(t),EF(wE(t),function(e){return IF.call(t,e)}))}:TF,ey=AF;function bF(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var RF=bF,PF=ga,DF=Oi,CF="[object Arguments]";function xF(t){return DF(t)&&PF(t)==CF}var kF=xF,EE=kF,OF=Oi,ZA=Object.prototype,NF=ZA.hasOwnProperty,MF=ZA.propertyIsEnumerable,VF=EE(function(){return arguments}())?EE:function(t){return OF(t)&&NF.call(t,"callee")&&!MF.call(t,"callee")},ty=VF,nd={exports:{}};function $F(){return!1}var LF=$F;nd.exports;(function(t,e){var n=hr,r=LF,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(nd,nd.exports);var Yd=nd.exports,FF=ga,UF=Lv,BF=Oi,zF="[object Arguments]",jF="[object Array]",qF="[object Boolean]",WF="[object Date]",GF="[object Error]",HF="[object Function]",KF="[object Map]",QF="[object Number]",YF="[object Object]",XF="[object RegExp]",JF="[object Set]",ZF="[object String]",eU="[object WeakMap]",tU="[object ArrayBuffer]",nU="[object DataView]",rU="[object Float32Array]",iU="[object Float64Array]",sU="[object Int8Array]",oU="[object Int16Array]",aU="[object Int32Array]",lU="[object Uint8Array]",uU="[object Uint8ClampedArray]",cU="[object Uint16Array]",hU="[object Uint32Array]",Me={};Me[rU]=Me[iU]=Me[sU]=Me[oU]=Me[aU]=Me[lU]=Me[uU]=Me[cU]=Me[hU]=!0;Me[zF]=Me[jF]=Me[tU]=Me[qF]=Me[nU]=Me[WF]=Me[GF]=Me[HF]=Me[KF]=Me[QF]=Me[YF]=Me[XF]=Me[JF]=Me[ZF]=Me[eU]=!1;function dU(t){return BF(t)&&UF(t.length)&&!!Me[FF(t)]}var fU=dU;function pU(t){return function(e){return t(e)}}var Xd=pU,rd={exports:{}};rd.exports;(function(t,e){var n=xA,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(rd,rd.exports);var ny=rd.exports,mU=fU,gU=Xd,TE=ny,SE=TE&&TE.isTypedArray,vU=SE?gU(SE):mU,ry=vU,yU=RF,_U=ty,wU=Mn,EU=Yd,TU=Fv,SU=ry,IU=Object.prototype,AU=IU.hasOwnProperty;function bU(t,e){var n=wU(t),r=!n&&_U(t),i=!n&&!r&&EU(t),s=!n&&!r&&!i&&SU(t),o=n||r||i||s,a=o?yU(t.length,String):[],l=a.length;for(var c in t)(e||AU.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||TU(c,l)))&&a.push(c);return a}var eb=bU,RU=Object.prototype;function PU(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||RU;return t===n}var iy=PU;function DU(t,e){return function(n){return t(e(n))}}var tb=DU,CU=tb,xU=CU(Object.keys,Object),kU=xU,OU=iy,NU=kU,MU=Object.prototype,VU=MU.hasOwnProperty;function $U(t){if(!OU(t))return NU(t);var e=[];for(var n in Object(t))VU.call(t,n)&&n!="constructor"&&e.push(n);return e}var LU=$U,FU=eb,UU=LU,BU=Lu;function zU(t){return BU(t)?FU(t):UU(t)}var zu=zU,jU=XA,qU=ey,WU=zu;function GU(t){return jU(t,WU,qU)}var nb=GU,IE=nb,HU=1,KU=Object.prototype,QU=KU.hasOwnProperty;function YU(t,e,n,r,i,s){var o=n&HU,a=IE(t),l=a.length,c=IE(e),h=c.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:QU.call(e,f)))return!1}var m=s.get(t),_=s.get(e);if(m&&_)return m==e&&_==t;var v=!0;s.set(t,e),s.set(e,t);for(var S=o;++d<l;){f=a[d];var w=t[f],y=e[f];if(r)var T=o?r(y,w,f,e,t,s):r(w,y,f,t,e,s);if(!(T===void 0?w===y||i(w,y,n,r,s):T)){v=!1;break}S||(S=f=="constructor")}if(v&&!S){var P=t.constructor,x=e.constructor;P!=x&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof x=="function"&&x instanceof x)&&(v=!1)}return s.delete(t),s.delete(e),v}var XU=YU,JU=qs,ZU=hr,e4=JU(ZU,"DataView"),t4=e4,n4=qs,r4=hr,i4=n4(r4,"Promise"),s4=i4,o4=qs,a4=hr,l4=o4(a4,"Set"),u4=l4,c4=qs,h4=hr,d4=c4(h4,"WeakMap"),f4=d4,eg=t4,tg=Yv,ng=s4,rg=u4,ig=f4,rb=ga,Ea=KA,AE="[object Map]",p4="[object Object]",bE="[object Promise]",RE="[object Set]",PE="[object WeakMap]",DE="[object DataView]",m4=Ea(eg),g4=Ea(tg),v4=Ea(ng),y4=Ea(rg),_4=Ea(ig),Zi=rb;(eg&&Zi(new eg(new ArrayBuffer(1)))!=DE||tg&&Zi(new tg)!=AE||ng&&Zi(ng.resolve())!=bE||rg&&Zi(new rg)!=RE||ig&&Zi(new ig)!=PE)&&(Zi=function(t){var e=rb(t),n=e==p4?t.constructor:void 0,r=n?Ea(n):"";if(r)switch(r){case m4:return DE;case g4:return AE;case v4:return bE;case y4:return RE;case _4:return PE}return e});var Jd=Zi,Vp=Jv,w4=QA,E4=dF,T4=XU,CE=Jd,xE=Mn,kE=Yd,S4=ry,I4=1,OE="[object Arguments]",NE="[object Array]",zc="[object Object]",A4=Object.prototype,ME=A4.hasOwnProperty;function b4(t,e,n,r,i,s){var o=xE(t),a=xE(e),l=o?NE:CE(t),c=a?NE:CE(e);l=l==OE?zc:l,c=c==OE?zc:c;var h=l==zc,d=c==zc,f=l==c;if(f&&kE(t)){if(!kE(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new Vp),o||S4(t)?w4(t,e,n,r,i,s):E4(t,e,l,n,r,i,s);if(!(n&I4)){var m=h&&ME.call(t,"__wrapped__"),_=d&&ME.call(e,"__wrapped__");if(m||_){var v=m?t.value():t,S=_?e.value():e;return s||(s=new Vp),i(v,S,n,r,s)}}return f?(s||(s=new Vp),T4(t,e,n,r,i,s)):!1}var R4=b4,P4=R4,VE=Oi;function ib(t,e,n,r,i){return t===e?!0:t==null||e==null||!VE(t)&&!VE(e)?t!==t&&e!==e:P4(t,e,n,r,ib,i)}var sy=ib,D4=sy;function C4(t,e){return D4(t,e)}var x4=C4;const k4=nt(x4);function $p(t,e){var n=Uv(t);return n?n.innerHeight:ms(t).height}function sb(t,e,n){t.closest&&!n&&t.closest(e);var r=t;do{if(j2(r,e))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}function O4(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var N4=O4,M4=Jv,V4=sy,$4=1,L4=2;function F4(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new M4;if(r)var f=r(c,h,l,t,e,d);if(!(f===void 0?V4(h,c,$4|L4,r,d):f))return!1}}return!0}var U4=F4,B4=$r;function z4(t){return t===t&&!B4(t)}var ob=z4,j4=ob,q4=zu;function W4(t){for(var e=q4(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,j4(i)]}return e}var G4=W4;function H4(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var ab=H4,K4=U4,Q4=G4,Y4=ab;function X4(t){var e=Q4(t);return e.length==1&&e[0][2]?Y4(e[0][0],e[0][1]):function(n){return n===t||K4(n,t,e)}}var J4=X4,Z4=Mn,eB=Fu,tB=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nB=/^\w*$/;function rB(t,e){if(Z4(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||eB(t)?!0:nB.test(t)||!tB.test(t)||e!=null&&t in Object(e)}var oy=rB,lb=Xv,iB="Expected a function";function ay(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(iB);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(ay.Cache||lb),n}ay.Cache=lb;var sB=ay,oB=sB,aB=500;function lB(t){var e=oB(t,function(r){return n.size===aB&&n.clear(),r}),n=e.cache;return e}var uB=lB,cB=uB,hB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dB=/\\(\\)?/g,fB=cB(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(hB,function(n,r,i,s){e.push(i?s.replace(dB,"$1"):r||n)}),e}),pB=fB;function mB(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var ly=mB,$E=ma,gB=ly,vB=Mn,yB=Fu,_B=1/0,LE=$E?$E.prototype:void 0,FE=LE?LE.toString:void 0;function ub(t){if(typeof t=="string")return t;if(vB(t))return gB(t,ub)+"";if(yB(t))return FE?FE.call(t):"";var e=t+"";return e=="0"&&1/t==-_B?"-0":e}var wB=ub,EB=wB;function TB(t){return t==null?"":EB(t)}var SB=TB,IB=Mn,AB=oy,bB=pB,RB=SB;function PB(t,e){return IB(t)?t:AB(t,e)?[t]:bB(RB(t))}var Zd=PB,DB=Fu,CB=1/0;function xB(t){if(typeof t=="string"||DB(t))return t;var e=t+"";return e=="0"&&1/t==-CB?"-0":e}var ju=xB,kB=Zd,OB=ju;function NB(t,e){e=kB(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[OB(e[n++])];return n&&n==r?t:void 0}var ef=NB,MB=ef;function VB(t,e,n){var r=t==null?void 0:MB(t,e);return r===void 0?n:r}var $B=VB;function LB(t,e){return t!=null&&e in Object(t)}var FB=LB,UB=Zd,BB=ty,zB=Mn,jB=Fv,qB=Lv,WB=ju;function GB(t,e,n){e=UB(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=WB(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&qB(i)&&jB(o,i)&&(zB(t)||BB(t)))}var HB=GB,KB=FB,QB=HB;function YB(t,e){return t!=null&&QB(t,e,KB)}var XB=YB,JB=sy,ZB=$B,ez=XB,tz=oy,nz=ob,rz=ab,iz=ju,sz=1,oz=2;function az(t,e){return tz(t)&&nz(e)?rz(iz(t),e):function(n){var r=ZB(n,t);return r===void 0&&r===e?ez(n,t):JB(e,r,sz|oz)}}var lz=az;function uz(t){return t}var tf=uz;function cz(t){return function(e){return e==null?void 0:e[t]}}var hz=cz,dz=ef;function fz(t){return function(e){return dz(e,t)}}var pz=fz,mz=hz,gz=pz,vz=oy,yz=ju;function _z(t){return vz(t)?mz(yz(t)):gz(t)}var wz=_z,Ez=J4,Tz=lz,Sz=tf,Iz=Mn,Az=wz;function bz(t){return typeof t=="function"?t:t==null?Sz:typeof t=="object"?Iz(t)?Tz(t[0],t[1]):Ez(t):Az(t)}var nf=bz,Rz=N4,Pz=nf,Dz=NA,Cz=Math.max;function xz(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Dz(n);return i<0&&(i=Cz(r+i,0)),Rz(t,Pz(e),i)}var kz=xz;const Oz=nt(kz);var Nz=Math.ceil,Mz=Math.max;function Vz(t,e,n,r){for(var i=-1,s=Mz(Nz((e-t)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=t,t+=n;return o}var $z=Vz,Lz=$z,Fz=qd,Lp=OA;function Uz(t){return function(e,n,r){return r&&typeof r!="number"&&Fz(e,n,r)&&(n=r=void 0),e=Lp(e),n===void 0?(n=e,e=0):n=Lp(n),r=r===void 0?e<n?1:-1:Lp(r),Lz(e,n,r,t)}}var Bz=Uz,zz=Bz,jz=zz(),qz=jz;const Wz=nt(qz);var UE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Gz(t,e){return!!(t===e||UE(t)&&UE(e))}function Hz(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Gz(t[n],e[n]))return!1;return!0}function cb(t,e){e===void 0&&(e=Hz);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var BE=ma,Kz=ty,Qz=Mn,zE=BE?BE.isConcatSpreadable:void 0;function Yz(t){return Qz(t)||Kz(t)||!!(zE&&t&&t[zE])}var Xz=Yz,Jz=Zv,Zz=Xz;function hb(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Zz),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?hb(a,e-1,n,r,i):Jz(i,a):r||(i[i.length]=a)}return i}var db=hb;function ej(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var tj=ej,nj=tj,rj=nj(),ij=rj,sj=ij,oj=zu;function aj(t,e){return t&&sj(t,e,oj)}var uy=aj,lj=Lu;function uj(t,e){return function(n,r){if(n==null)return n;if(!lj(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var cj=uj,hj=uy,dj=cj,fj=dj(hj),pj=fj,mj=pj,gj=Lu;function vj(t,e){var n=-1,r=gj(t)?Array(t.length):[];return mj(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var yj=vj;function _j(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var wj=_j,jE=Fu;function Ej(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=jE(t),o=e!==void 0,a=e===null,l=e===e,c=jE(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var Tj=Ej,Sj=Tj;function Ij(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=Sj(i[r],s[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var Aj=Ij,Fp=ly,bj=ef,Rj=nf,Pj=yj,Dj=wj,Cj=Xd,xj=Aj,kj=tf,Oj=Mn;function Nj(t,e,n){e.length?e=Fp(e,function(s){return Oj(s)?function(o){return bj(o,s.length===1?s[0]:s)}:s}):e=[kj];var r=-1;e=Fp(e,Cj(Rj));var i=Pj(t,function(s,o,a){var l=Fp(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return Dj(i,function(s,o){return xj(s,o,n)})}var Mj=Nj;function Vj(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var $j=Vj,Lj=$j,qE=Math.max;function Fj(t,e,n){return e=qE(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=qE(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),Lj(t,this,a)}}var fb=Fj;function Uj(t){return function(){return t}}var Bj=Uj,zj=qs,jj=function(){try{var t=zj(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pb=jj,qj=Bj,WE=pb,Wj=tf,Gj=WE?function(t,e){return WE(t,"toString",{configurable:!0,enumerable:!1,value:qj(e),writable:!0})}:Wj,Hj=Gj,Kj=800,Qj=16,Yj=Date.now;function Xj(t){var e=0,n=0;return function(){var r=Yj(),i=Qj-(r-n);if(n=r,i>0){if(++e>=Kj)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Jj=Xj,Zj=Hj,e3=Jj,t3=e3(Zj),mb=t3,n3=tf,r3=fb,i3=mb;function s3(t,e){return i3(r3(t,e,n3),t+"")}var gb=s3,o3=db,a3=Mj,l3=gb,GE=qd,u3=l3(function(t,e){if(t==null)return[];var n=e.length;return n>1&&GE(t,e[0],e[1])?e=[]:n>2&&GE(e[0],e[1],e[2])&&(e=[e[0]]),a3(t,o3(e,1),[])}),c3=u3;const h3=nt(c3);function sg(t,e){var n=Uv(t);return n?n.innerWidth:ms(t).width}function vb(t){return mA(t)||DA(t)||Nv(t)||gA()}function d3(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var yb=d3,HE=pb;function f3(t,e,n){e=="__proto__"&&HE?HE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var cy=f3,p3=cy,m3=$u,g3=Object.prototype,v3=g3.hasOwnProperty;function y3(t,e,n){var r=t[e];(!(v3.call(t,e)&&m3(r,n))||n===void 0&&!(e in t))&&p3(t,e,n)}var _b=y3,_3=_b,w3=cy;function E3(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?w3(n,a,l):_3(n,a,l)}return n}var qu=E3,T3=qu,S3=zu;function I3(t,e){return t&&T3(e,S3(e),t)}var A3=I3;function b3(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var R3=b3,P3=$r,D3=iy,C3=R3,x3=Object.prototype,k3=x3.hasOwnProperty;function O3(t){if(!P3(t))return C3(t);var e=D3(t),n=[];for(var r in t)r=="constructor"&&(e||!k3.call(t,r))||n.push(r);return n}var N3=O3,M3=eb,V3=N3,$3=Lu;function L3(t){return $3(t)?M3(t,!0):V3(t)}var rf=L3,F3=qu,U3=rf;function B3(t,e){return t&&F3(e,U3(e),t)}var z3=B3,id={exports:{}};id.exports;(function(t,e){var n=hr,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,h){if(h)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(id,id.exports);var j3=id.exports;function q3(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var W3=q3,G3=qu,H3=ey;function K3(t,e){return G3(t,H3(t),e)}var Q3=K3,Y3=tb,X3=Y3(Object.getPrototypeOf,Object),sf=X3,J3=Zv,Z3=sf,e6=ey,t6=JA,n6=Object.getOwnPropertySymbols,r6=n6?function(t){for(var e=[];t;)J3(e,e6(t)),t=Z3(t);return e}:t6,wb=r6,i6=qu,s6=wb;function o6(t,e){return i6(t,s6(t),e)}var a6=o6,l6=XA,u6=wb,c6=rf;function h6(t){return l6(t,c6,u6)}var Eb=h6,d6=Object.prototype,f6=d6.hasOwnProperty;function p6(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&f6.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var m6=p6,KE=YA;function g6(t){var e=new t.constructor(t.byteLength);return new KE(e).set(new KE(t)),e}var hy=g6,v6=hy;function y6(t,e){var n=e?v6(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var _6=y6,w6=/\w*$/;function E6(t){var e=new t.constructor(t.source,w6.exec(t));return e.lastIndex=t.lastIndex,e}var T6=E6,QE=ma,YE=QE?QE.prototype:void 0,XE=YE?YE.valueOf:void 0;function S6(t){return XE?Object(XE.call(t)):{}}var I6=S6,A6=hy;function b6(t,e){var n=e?A6(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var R6=b6,P6=hy,D6=_6,C6=T6,x6=I6,k6=R6,O6="[object Boolean]",N6="[object Date]",M6="[object Map]",V6="[object Number]",$6="[object RegExp]",L6="[object Set]",F6="[object String]",U6="[object Symbol]",B6="[object ArrayBuffer]",z6="[object DataView]",j6="[object Float32Array]",q6="[object Float64Array]",W6="[object Int8Array]",G6="[object Int16Array]",H6="[object Int32Array]",K6="[object Uint8Array]",Q6="[object Uint8ClampedArray]",Y6="[object Uint16Array]",X6="[object Uint32Array]";function J6(t,e,n){var r=t.constructor;switch(e){case B6:return P6(t);case O6:case N6:return new r(+t);case z6:return D6(t,n);case j6:case q6:case W6:case G6:case H6:case K6:case Q6:case Y6:case X6:return k6(t,n);case M6:return new r;case V6:case F6:return new r(t);case $6:return C6(t);case L6:return new r;case U6:return x6(t)}}var Z6=J6,e9=$r,JE=Object.create,t9=function(){function t(){}return function(e){if(!e9(e))return{};if(JE)return JE(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Tb=t9,n9=Tb,r9=sf,i9=iy;function s9(t){return typeof t.constructor=="function"&&!i9(t)?n9(r9(t)):{}}var o9=s9,a9=Jd,l9=Oi,u9="[object Map]";function c9(t){return l9(t)&&a9(t)==u9}var h9=c9,d9=h9,f9=Xd,ZE=ny,eT=ZE&&ZE.isMap,p9=eT?f9(eT):d9,m9=p9,g9=Jd,v9=Oi,y9="[object Set]";function _9(t){return v9(t)&&g9(t)==y9}var w9=_9,E9=w9,T9=Xd,tT=ny,nT=tT&&tT.isSet,S9=nT?T9(nT):E9,I9=S9,A9=Jv,b9=yb,R9=_b,P9=A3,D9=z3,C9=j3,x9=W3,k9=Q3,O9=a6,N9=nb,M9=Eb,V9=Jd,$9=m6,L9=Z6,F9=o9,U9=Mn,B9=Yd,z9=m9,j9=$r,q9=I9,W9=zu,G9=rf,H9=1,K9=2,Q9=4,Sb="[object Arguments]",Y9="[object Array]",X9="[object Boolean]",J9="[object Date]",Z9="[object Error]",Ib="[object Function]",e5="[object GeneratorFunction]",t5="[object Map]",n5="[object Number]",Ab="[object Object]",r5="[object RegExp]",i5="[object Set]",s5="[object String]",o5="[object Symbol]",a5="[object WeakMap]",l5="[object ArrayBuffer]",u5="[object DataView]",c5="[object Float32Array]",h5="[object Float64Array]",d5="[object Int8Array]",f5="[object Int16Array]",p5="[object Int32Array]",m5="[object Uint8Array]",g5="[object Uint8ClampedArray]",v5="[object Uint16Array]",y5="[object Uint32Array]",Ce={};Ce[Sb]=Ce[Y9]=Ce[l5]=Ce[u5]=Ce[X9]=Ce[J9]=Ce[c5]=Ce[h5]=Ce[d5]=Ce[f5]=Ce[p5]=Ce[t5]=Ce[n5]=Ce[Ab]=Ce[r5]=Ce[i5]=Ce[s5]=Ce[o5]=Ce[m5]=Ce[g5]=Ce[v5]=Ce[y5]=!0;Ce[Z9]=Ce[Ib]=Ce[a5]=!1;function ph(t,e,n,r,i,s){var o,a=e&H9,l=e&K9,c=e&Q9;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!j9(t))return t;var h=U9(t);if(h){if(o=$9(t),!a)return x9(t,o)}else{var d=V9(t),f=d==Ib||d==e5;if(B9(t))return C9(t,a);if(d==Ab||d==Sb||f&&!i){if(o=l||f?{}:F9(t),!a)return l?O9(t,D9(o,t)):k9(t,P9(o,t))}else{if(!Ce[d])return i?t:{};o=L9(t,d,a)}}s||(s=new A9);var m=s.get(t);if(m)return m;s.set(t,o),q9(t)?t.forEach(function(S){o.add(ph(S,e,n,S,t,s))}):z9(t)&&t.forEach(function(S,w){o.set(w,ph(S,e,n,w,t,s))});var _=c?l?M9:N9:l?G9:W9,v=h?void 0:_(t);return b9(v||t,function(S,w){v&&(w=S,S=t[w]),R9(o,w,ph(S,e,n,w,t,s))}),o}var _5=ph;function w5(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var E5=w5,T5=ef,S5=CA;function I5(t,e){return e.length<2?t:T5(t,S5(e,0,-1))}var A5=I5,b5=Zd,R5=E5,P5=A5,D5=ju;function C5(t,e){return e=b5(e,t),t=P5(t,e),t==null||delete t[D5(R5(e))]}var x5=C5,k5=ga,O5=sf,N5=Oi,M5="[object Object]",V5=Function.prototype,$5=Object.prototype,bb=V5.toString,L5=$5.hasOwnProperty,F5=bb.call(Object);function U5(t){if(!N5(t)||k5(t)!=M5)return!1;var e=O5(t);if(e===null)return!0;var n=L5.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&bb.call(n)==F5}var B5=U5,z5=B5;function j5(t){return z5(t)?void 0:t}var q5=j5,W5=db;function G5(t){var e=t==null?0:t.length;return e?W5(t,1):[]}var H5=G5,K5=H5,Q5=fb,Y5=mb;function X5(t){return Y5(Q5(t,void 0,K5),t+"")}var J5=X5,Z5=ly,eq=_5,tq=x5,nq=Zd,rq=qu,iq=q5,sq=J5,oq=Eb,aq=1,lq=2,uq=4,cq=sq(function(t,e){var n={};if(t==null)return n;var r=!1;e=Z5(e,function(s){return s=nq(s,t),r||(r=s.length>1),s}),rq(t,oq(t),n),r&&(n=eq(n,aq|lq|uq,iq));for(var i=e.length;i--;)tq(n,e[i]);return n}),hq=cq;const dq=nt(hq);var fq=gb,pq=$u,mq=qd,gq=rf,Rb=Object.prototype,vq=Rb.hasOwnProperty,yq=fq(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&mq(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=gq(s),a=-1,l=o.length;++a<l;){var c=o[a],h=t[c];(h===void 0||pq(h,Rb[c])&&!vq.call(t,c))&&(t[c]=s[c])}return t}),_q=yq;const wq=nt(_q);var Eq=yb,Tq=Tb,Sq=uy,Iq=nf,Aq=sf,bq=Mn,Rq=Yd,Pq=$v,Dq=$r,Cq=ry;function xq(t,e,n){var r=bq(t),i=r||Rq(t)||Cq(t);if(e=Iq(e),n==null){var s=t&&t.constructor;i?n=r?new s:[]:Dq(t)?n=Pq(s)?Tq(Aq(t)):{}:n={}}return(i?Eq:Sq)(t,function(o,a,l){return e(n,o,a,l)}),n}var kq=xq;const Oq=nt(kq);var Nq=cy,Mq=uy,Vq=nf;function $q(t,e){var n={};return e=Vq(e),Mq(t,function(r,i,s){Nq(n,i,e(r,i,s))}),n}var Lq=$q;const Fq=nt(Lq);var Pb={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){return function(n,r,i){r.prototype.isBetween=function(s,o,a,l){var c=i(s),h=i(o),d=(l=l||"()")[0]==="(",f=l[1]===")";return(d?this.isAfter(c,a):!this.isBefore(c,a))&&(f?this.isBefore(h,a):!this.isAfter(h,a))||(d?this.isBefore(c,a):!this.isAfter(c,a))&&(f?this.isAfter(h,a):!this.isBefore(h,a))}}})})(Pb);var Uq=Pb.exports;const Bq=nt(Uq);var Db={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){return function(n,r){r.prototype.isSameOrAfter=function(i,s){return this.isSame(i,s)||this.isAfter(i,s)}}})})(Db);var zq=Db.exports;const jq=nt(zq);var Cb={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){return function(n,r){r.prototype.isSameOrBefore=function(i,s){return this.isSame(i,s)||this.isBefore(i,s)}}})})(Cb);var qq=Cb.exports;const Wq=nt(qq);var xb={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){return function(n,r,i){var s=r.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,m,_,v){var S=d.name?d:d.$locale(),w=o(S[f]),y=o(S[m]),T=w||y.map(function(x){return x.slice(0,_)});if(!v)return T;var P=S.weekStart;return T.map(function(x,O){return T[(O+(P||0))%7]})},l=function(){return i.Ls[i.locale()]},c=function(d,f){return d.formats[f]||function(m){return m.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(_,v,S){return v||S.slice(1)})}(d.formats[f.toUpperCase()])},h=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return c(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return h.bind(this)()},i.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(f){return c(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},i.months=function(){return a(l(),"months")},i.monthsShort=function(){return a(l(),"monthsShort","months",3)},i.weekdays=function(d){return a(l(),"weekdays",null,null,d)},i.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},i.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(xb);var Gq=xb.exports;const Hq=nt(Gq);var kb={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var o=i.prototype,a=o.format;s.en.formats=n,o.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,h=function(d,f){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,_,v){var S=v&&v.toUpperCase();return _||f[v]||n[v]||f[S].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,y,T){return y||T.slice(1)})})}(l,c===void 0?{}:c);return a.call(this,h)}}})})(kb);var Kq=kb.exports;const Qq=nt(Kq);var Ob={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){return function(n,r,i){var s=function(o,a){if(!a||!a.length||a.length===1&&!a[0]||a.length===1&&Array.isArray(a[0])&&!a[0].length)return null;var l;a.length===1&&a[0].length>0&&(a=a[0]),l=(a=a.filter(function(h){return h}))[0];for(var c=1;c<a.length;c+=1)a[c].isValid()&&!a[c][o](l)||(l=a[c]);return l};i.max=function(){var o=[].slice.call(arguments,0);return s("isAfter",o)},i.min=function(){var o=[].slice.call(arguments,0);return s("isBefore",o)}}})})(Ob);var Yq=Ob.exports;const Xq=nt(Yq);var Nb={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(v){var S={date:v,utc:!0,args:arguments};return new o(S)},l.utc=function(v){var S=a(this.toDate(),{locale:this.$L,utc:!0});return v?S.add(this.utcOffset(),n):S},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=l.parse;l.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),c.call(this,v)};var h=l.init;l.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else h.call(this)};var d=l.utcOffset;l.utcOffset=function(v,S){var w=this.$utils().u;if(w(v))return this.$u?0:w(this.$offset)?d.call(this):this.$offset;if(typeof v=="string"&&(v=function(x){x===void 0&&(x="");var O=x.match(r);if(!O)return null;var I=(""+O[0]).match(i)||["-",0,0],E=I[0],A=60*+I[1]+ +I[2];return A===0?0:E==="+"?A:-A}(v),v===null))return this;var y=Math.abs(v)<=16?60*v:v,T=this;if(S)return T.$offset=y,T.$u=v===0,T;if(v!==0){var P=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(y+P,n)).$offset=y,T.$x.$localOffset=P}else T=this.utc();return T};var f=l.format;l.format=function(v){var S=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,S)},l.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var m=l.toDate;l.toDate=function(v){return v==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var _=l.diff;l.diff=function(v,S,w){if(v&&this.$u===v.$u)return _.call(this,v,S,w);var y=this.local(),T=a(v).local();return _.call(y,T,S,w)}}})})(Nb);var Jq=Nb.exports;const Zq=nt(Jq);function vr(t){return t.children}var fn={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Gt={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},rT=Object.keys(Gt).map(function(t){return Gt[t]});Z.oneOfType([Z.string,Z.func]);Z.any;Z.func;Z.oneOfType([Z.arrayOf(Z.oneOf(rT)),Z.objectOf(function(t,e){var n=rT.indexOf(e)!==-1&&typeof t[e]=="boolean";if(n)return null;for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return Z.elementType.apply(Z,[t,e].concat(i))})]);Z.oneOfType([Z.oneOf(["overlap","no-overlap"]),Z.func]);function Ue(t,e){t&&t.apply(null,[].concat(e))}var iT={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function Mb(t,e){var n=Pt(t,"month");return Pt(n,"week",e.startOfWeek())}function Vb(t,e){var n=Jh(t,"month");return Jh(n,"week",e.startOfWeek())}function eW(t,e){for(var n=Mb(t,e),r=Vb(t,e),i=[];fa(n,r,"day");)i.push(n),n=Gn(n,1,"day");return i}function tW(t,e){var n=Pt(t,e);return Mu(n,t)?n:Gn(n,1,e)}function nW(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",r=t,i=[];fa(r,e,n);)i.push(r),r=Gn(r,1,n);return i}function rW(t,e){return e==null&&t==null?null:(e==null&&(e=new Date),t==null&&(t=new Date),t=Pt(t,"day"),t=cu(t,cu(e)),t=qo(t,qo(e)),t=uu(t,uu(e)),lu(t,lu(e)))}function sT(t){return cu(t)===0&&qo(t)===0&&uu(t)===0&&lu(t)===0}function iW(t,e,n,r){return n==="day"&&(n="date"),Math.abs(W0[n](t,void 0,r)-W0[n](e,void 0,r))}function dy(t,e,n){return!n||n==="milliseconds"?Math.abs(+t-+e):Math.round(Math.abs(+Pt(t,n)/iT[n]-+Pt(e,n)/iT[n]))}var sW=Z.oneOfType([Z.string,Z.func]);function oW(t,e,n,r,i){var s=typeof r=="function"?r(n,i,t):e.call(t,n,r,i);return nu(s==null||typeof s=="string","`localizer format(..)` must return a string, null, or undefined"),s}function aW(t,e,n){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,e+n,0,0)}function fy(t,e){return t.getTimezoneOffset()-e.getTimezoneOffset()}function lW(t,e){return dy(t,e,"minutes")+fy(t,e)}function uW(t){var e=Pt(t,"day");return dy(e,t,"minutes")+fy(e,t)}function cW(t,e){return Vv(t,e,"day")}function hW(t,e,n){var r=Mu(t,e,"minutes");return r?Vu(e,n,"minutes"):jd(e,n,"minutes")}function og(t,e){return iW(t,e,"day")}function dW(t){var e=t.evtA,n=e.start,r=e.end,i=e.allDay,s=t.evtB,o=s.start,a=s.end,l=s.allDay,c=+Pt(n,"day")-+Pt(o,"day"),h=og(n,r),d=og(o,a);return c||d-h||!!l-!!i||+n-+o||+r-+a}function fW(t){var e=t.event,n=e.start,r=e.end,i=t.range,s=i.start,o=i.end,a=Pt(n,"day"),l=fa(a,o,"day"),c=Mv(a,r,"minutes"),h=c?jd(r,s,"minutes"):Vu(r,s,"minutes");return l&&h}function pW(t,e){return Mu(t,e,"day")}function mW(t,e){return sT(t)&&sT(e)}var gW=wt(function t(e){var n=this;_t(this,t),nu(typeof e.format=="function","date localizer `format(..)` must be a function"),nu(typeof e.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=e.propType||sW,this.formats=e.formats,this.format=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return oW.apply(void 0,[n,e.format].concat(i))},this.startOfWeek=e.firstOfWeek,this.merge=e.merge||rW,this.inRange=e.inRange||AA,this.lt=e.lt||Vv,this.lte=e.lte||fa,this.gt=e.gt||jd,this.gte=e.gte||Vu,this.eq=e.eq||Mu,this.neq=e.neq||Mv,this.startOf=e.startOf||Pt,this.endOf=e.endOf||Jh,this.add=e.add||Gn,this.range=e.range||nW,this.diff=e.diff||dy,this.ceil=e.ceil||tW,this.min=e.min||SA,this.max=e.max||IA,this.minutes=e.minutes||qo,this.daySpan=e.daySpan||og,this.firstVisibleDay=e.firstVisibleDay||Mb,this.lastVisibleDay=e.lastVisibleDay||Vb,this.visibleDays=e.visibleDays||eW,this.getSlotDate=e.getSlotDate||aW,this.getTimezoneOffset=e.getTimezoneOffset||function(r){return r.getTimezoneOffset()},this.getDstOffset=e.getDstOffset||fy,this.getTotalMin=e.getTotalMin||lW,this.getMinutesFromMidnight=e.getMinutesFromMidnight||uW,this.continuesPrior=e.continuesPrior||cW,this.continuesAfter=e.continuesAfter||hW,this.sortEvents=e.sortEvents||dW,this.inEventRange=e.inEventRange||fW,this.isSameDate=e.isSameDate||pW,this.startAndEndAreDateOnly=e.startAndEndAreDateOnly||mW,this.segmentOffset=e.browserTZOffset?e.browserTZOffset():0});function vW(t,e,n,r){var i=De(De({},t.formats),n);return De(De({},t),{},{messages:r,startOfWeek:function(){return t.startOfWeek(e)},format:function(o,a){return t.format(o,i[a]||a,e)}})}var yW={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};function _W(t){return De(De({},yW),t)}function wW(t){var e=t.ref,n=t.callback;le.useEffect(function(){var r=function(s){e.current&&!e.current.contains(s.target)&&n()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[e,n])}var EW=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],$b=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.style,s=r.className,o=r.event,a=r.selected,l=r.isAllDay,c=r.onSelect,h=r.onDoubleClick,d=r.onKeyPress,f=r.localizer,m=r.continuesPrior,_=r.continuesAfter,v=r.accessors,S=r.getters,w=r.children,y=r.components,T=y.event,P=y.eventWrapper,x=r.slotStart,O=r.slotEnd,I=lr(r,EW);delete I.resizable;var E=v.title(o),A=v.tooltip(o),b=v.end(o),D=v.start(o),k=v.allDay(o),C=l||k||f.diff(D,f.ceil(b,"day"),"day")>1,K=S.eventProp(o,D,b,a),q=V.createElement("div",{className:"rbc-event-content",title:A||void 0},T?V.createElement(T,{event:o,continuesPrior:m,continuesAfter:_,title:E,isAllDay:k,localizer:f,slotStart:x,slotEnd:O}):E);return V.createElement(P,Object.assign({},this.props,{type:"date"}),V.createElement("div",Object.assign({},I,{style:De(De({},K.style),i),className:ht("rbc-event",s,K.className,{"rbc-selected":a,"rbc-event-allday":C,"rbc-event-continues-prior":m,"rbc-event-continues-after":_}),onClick:function(Y){return c&&c(o,Y)},onDoubleClick:function(Y){return h&&h(o,Y)},onKeyDown:function(Y){return d&&d(o,Y)}}),typeof w=="function"?w(q):q))}}])}(V.Component);function of(t,e){return!t||e==null?!1:k4(t,e)}function Lb(t,e){var n=t.right-t.left,r=n/e;return r}function Fb(t,e,n,r){var i=Lb(t,r);return n?r-1-Math.floor((e-t.left)/i):Math.floor((e-t.left)/i)}function TW(t,e){var n=e.x,r=e.y;return r>=t.top&&r<=t.bottom&&n>=t.left&&n<=t.right}function SW(t,e,n,r,i){var s=-1,o=-1,a=r-1,l=Lb(e,r),c=Fb(e,n.x,i,r),h=e.top<n.y&&e.bottom>n.y,d=e.top<t.y&&e.bottom>t.y,f=t.y>e.bottom,m=e.top>t.y,_=n.top<e.top&&n.bottom>e.bottom;return _&&(s=0,o=a),h&&(m?(s=0,o=c):f&&(s=c,o=a)),d&&(s=o=i?a-Math.floor((t.x-e.left)/l):Math.floor((t.x-e.left)/l),h?c<s?s=c:o=c:t.y<n.y?o=a:s=0),{startIdx:s,endIdx:o}}function IW(t){var e=t.target,n=t.offset,r=t.container,i=t.box,s=ms(e),o=s.top,a=s.left,l=s.width,c=s.height,h=ms(r),d=h.top,f=h.left,m=h.width,_=h.height,v=ms(i),S=v.width,w=v.height,y=d+_,T=f+m,P=o+w,x=a+S,O=n.x,I=n.y,E=P>y?o-w-I:o+I+c,A=x>T?a+O-S+l:a+O;return{topOffset:E,leftOffset:A}}function AW(t){var e=t.containerRef,n=t.accessors,r=t.getters,i=t.selected,s=t.components,o=t.localizer,a=t.position,l=t.show,c=t.events,h=t.slotStart,d=t.slotEnd,f=t.onSelect,m=t.onDoubleClick,_=t.onKeyPress,v=t.handleDragStart,S=t.popperRef,w=t.target,y=t.offset;wW({ref:S,callback:l}),le.useLayoutEffect(function(){var x=IW({target:w,offset:y,container:e.current,box:S.current}),O=x.topOffset,I=x.leftOffset;S.current.style.top="".concat(O,"px"),S.current.style.left="".concat(I,"px")},[y.x,y.y,w]);var T=a.width,P={minWidth:T+T/2};return V.createElement("div",{style:P,className:"rbc-overlay",ref:S},V.createElement("div",{className:"rbc-overlay-header"},o.format(h,"dayHeaderFormat")),c.map(function(x,O){return V.createElement($b,{key:O,type:"popup",localizer:o,event:x,getters:r,onSelect:f,accessors:n,components:s,onDoubleClick:m,onKeyPress:_,continuesPrior:o.lt(n.end(x),h,"day"),continuesAfter:o.gte(n.start(x),d,"day"),slotStart:h,slotEnd:d,selected:of(x,i),draggable:!0,onDragStart:function(){return v(x)},onDragEnd:function(){return l()}})}))}var Ub=V.forwardRef(function(t,e){return V.createElement(AW,Object.assign({},t,{popperRef:e}))});Ub.propTypes={accessors:Z.object.isRequired,getters:Z.object.isRequired,selected:Z.object,components:Z.object.isRequired,localizer:Z.object.isRequired,position:Z.object.isRequired,show:Z.func.isRequired,events:Z.array.isRequired,slotStart:Z.instanceOf(Date).isRequired,slotEnd:Z.instanceOf(Date),onSelect:Z.func,onDoubleClick:Z.func,onKeyPress:Z.func,handleDragStart:Z.func,style:Z.object,offset:Z.shape({x:Z.number,y:Z.number})};function bW(t){var e=t.containerRef,n=t.popupOffset,r=n===void 0?5:n,i=t.overlay,s=t.accessors,o=t.localizer,a=t.components,l=t.getters,c=t.selected,h=t.handleSelectEvent,d=t.handleDoubleClickEvent,f=t.handleKeyPressEvent,m=t.handleDragStart,_=t.onHide,v=t.overlayDisplay,S=le.useRef(null);if(!i.position)return null;var w=r;isNaN(r)||(w={x:r,y:r});var y=i.position,T=i.events,P=i.date,x=i.end;return V.createElement(Qv,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:_,target:i.target},function(O){var I=O.props;return V.createElement(Ub,Object.assign({},I,{containerRef:e,ref:S,target:i.target,offset:w,accessors:s,getters:l,selected:c,components:a,localizer:o,position:y,show:v,events:T,slotStart:P,slotEnd:x,onSelect:h,onDoubleClick:d,onKeyPress:f,handleDragStart:m}))})}var py=V.forwardRef(function(t,e){return V.createElement(bW,Object.assign({},t,{containerRef:e}))});py.propTypes={popupOffset:Z.oneOfType([Z.number,Z.shape({x:Z.number,y:Z.number})]),overlay:Z.shape({position:Z.object,events:Z.array,date:Z.instanceOf(Date),end:Z.instanceOf(Date)}),accessors:Z.object.isRequired,localizer:Z.object.isRequired,components:Z.object.isRequired,getters:Z.object.isRequired,selected:Z.object,handleSelectEvent:Z.func,handleDoubleClickEvent:Z.func,handleKeyPressEvent:Z.func,handleDragStart:Z.func,onHide:Z.func,overlayDisplay:Z.func};function Ot(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return ml(n,t,e,{passive:!1})}function RW(t,e,n){return!t||tu(t,document.elementFromPoint(e,n))}function PW(t,e){var n=e.clientX,r=e.clientY,i=document.elementFromPoint(n,r);return sb(i,".rbc-event",t)}function DW(t,e){var n=e.clientX,r=e.clientY,i=document.elementFromPoint(n,r);return sb(i,".rbc-show-more",t)}function sd(t,e){return!!PW(t,e)}function CW(t,e){return!!DW(t,e)}function il(t){var e=t;return t.touches&&t.touches.length&&(e=t.touches[0]),{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var oT=5,xW=250,Bb=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,i=r===void 0?!1:r,s=n.longPressThreshold,o=s===void 0?250:s,a=n.validContainers,l=a===void 0?[]:a;_t(this,t),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=e,this.globalMouse=!e||i,this.longPressThreshold=o,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ot("touchmove",function(){},window),this._removeKeyDownListener=Ot("keydown",this._keyListener),this._removeKeyUpListener=Ot("keyup",this._keyListener),this._removeDropFromOutsideListener=Ot("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ot("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return wt(t,[{key:"on",value:function(n,r){var i=this._listeners[n]||(this._listeners[n]=[]);return i.push(r),{remove:function(){var o=i.indexOf(r);o!==-1&&i.splice(o,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var o,a=this._listeners[n]||[];return a.forEach(function(l){o===void 0&&(o=l.apply(void 0,i))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:aT(r,Cs(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var i=this,s=null,o=null,a=null,l=function(f){s=setTimeout(function(){h(),n(f)},i.longPressThreshold),o=Ot("touchmove",function(){return h()}),a=Ot("touchend",function(){return h()})},c=Ot("touchstart",l),h=function(){s&&clearTimeout(s),o&&o(),a&&a(),s=null,o=null,a=null};return r&&l(r),function(){h(),c()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=Ot("mousedown",function(s){n._removeInitialEventListener(),n._handleInitialEvent(s),n._removeInitialEventListener=Ot("mousedown",n._handleInitialEvent)}),i=Ot("touchstart",function(s){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,s)});this._removeInitialEventListener=function(){r(),i()}}},{key:"_dropFromOutsideListener",value:function(n){var r=il(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY;this.emit("dropFromOutside",{x:i,y:s,clientX:o,clientY:a}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=il(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY;this.emit("dragOverFromOutside",{x:i,y:s,clientX:o,clientY:a}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=il(n),i=r.clientX,s=r.clientY,o=r.pageX,a=r.pageY,l=this.container(),c,h;if(!(n.which===3||n.button===2||!RW(l,i,s))){if(!this.globalMouse&&l&&!tu(l,n.target)){var d=kW(0),f=d.top,m=d.left,_=d.bottom,v=d.right;if(h=Cs(l),c=aT({top:h.top-f,left:h.left-m,bottom:h.bottom+_,right:h.right+v},{top:a,left:o}),!c)return}var S=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:o,y:a,clientX:i,clientY:s});if(S!==!1)switch(n.type){case"mousedown":this._removeEndListener=Ot("mouseup",this._handleTerminatingEvent),this._onEscListener=Ot("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ot("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=Ot("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ot("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,i=this.validContainers;return!i||!i.length||!r?!0:i.some(function(s){return!!r.closest(s)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,i=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var s=!this.container||tu(this.container(),n.target),o=this._isWithinValidContainer(n);return n.key==="Escape"||!o?this.emit("reset"):!r&&s?this._handleClickEvent(n):r?this.emit("select",i):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=il(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY,l=new Date().getTime();return this._lastClickData&&l-this._lastClickData.timestamp<xW?(this._lastClickData=null,this.emit("doubleClick",{x:i,y:s,clientX:o,clientY:a})):(this._lastClickData={timestamp:l},this.emit("click",{x:i,y:s,clientX:o,clientY:a}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,i=r.x,s=r.y,o=il(n),a=o.pageX,l=o.pageY,c=Math.abs(i-a),h=Math.abs(s-l),d=Math.min(a,i),f=Math.min(l,s),m=this.selecting,_=this.isClick(a,l);_&&!m&&!(c||h)||(!m&&!_&&this.emit("selectStart",this._initialEventData),_||(this.selecting=!0,this._selectRect={top:f,left:d,x:a,y:l,right:d+c,bottom:f+h},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var i=this._initialEventData,s=i.x,o=i.y,a=i.isTouch;return!a&&Math.abs(n-s)<=oT&&Math.abs(r-o)<=oT}}])}();function kW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Cr(t)!=="object"&&(t={top:t,left:t,right:t,bottom:t}),t}function aT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Cs(t),i=r.top,s=r.left,o=r.right,a=o===void 0?s:o,l=r.bottom,c=l===void 0?i:l,h=Cs(e),d=h.top,f=h.left,m=h.right,_=m===void 0?f:m,v=h.bottom,S=v===void 0?d:v;return!(c-n<d||i+n>S||a-n<f||s+n>_)}function Cs(t){if(!t.getBoundingClientRect)return t;var e=t.getBoundingClientRect(),n=e.left+lT("left"),r=e.top+lT("top");return{top:r,left:n,right:(t.offsetWidth||0)+n,bottom:(t.offsetHeight||0)+r}}function lT(t){if(t==="left")return window.pageXOffset||document.body.scrollLeft||0;if(t==="top")return window.pageYOffset||document.body.scrollTop||0}var OW=function(t){function e(n,r){var i;return _t(this,e),i=Zt(this,e,[n,r]),i.state={selecting:!1},i.containerRef=le.createRef(),i}return en(e,t),wt(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,i=r.range,s=r.getNow,o=r.getters,a=r.date,l=r.components.dateCellWrapper,c=r.localizer,h=this.state,d=h.selecting,f=h.startIdx,m=h.endIdx,_=s();return V.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},i.map(function(v,S){var w=d&&S>=f&&S<=m,y=o.dayProp(v),T=y.className,P=y.style;return V.createElement(l,{key:S,value:v,range:i},V.createElement("div",{style:P,className:ht("rbc-day-bg",T,w&&"rbc-selected-cell",c.isSameDate(v,_)&&"rbc-today",a&&c.neq(a,v,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,i=this.containerRef.current,s=this._selector=new Bb(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(l,c){if(!sd(i,l)&&!CW(i,l)){var h=Cs(i),d=r.props,f=d.range,m=d.rtl;if(TW(h,l)){var _=Fb(h,l.x,m,f.length);r._selectSlot({startIdx:_,endIdx:_,action:c,box:l})}}r._initial={},r.setState({selecting:!1})};s.on("selecting",function(a){var l=r.props,c=l.range,h=l.rtl,d=-1,f=-1;if(r.state.selecting||(Ue(r.props.onSelectStart,[a]),r._initial={x:a.x,y:a.y}),s.isSelected(i)){var m=Cs(i),_=SW(r._initial,m,a,c.length,h);d=_.startIdx,f=_.endIdx}r.setState({selecting:!0,startIdx:d,endIdx:f})}),s.on("beforeSelect",function(a){if(r.props.selectable==="ignoreEvents")return!sd(r.containerRef.current,a)}),s.on("click",function(a){return o(a,"click")}),s.on("doubleClick",function(a){return o(a,"doubleClick")}),s.on("select",function(a){r._selectSlot(De(De({},r.state),{},{action:"select",bounds:a})),r._initial={},r.setState({selecting:!1}),Ue(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var i=r.endIdx,s=r.startIdx,o=r.action,a=r.bounds,l=r.box;i!==-1&&s!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:s,end:i,action:o,bounds:a,box:l,resourceId:this.props.resourceId})}}])}(V.Component),Xn={propTypes:{slotMetrics:Z.object.isRequired,selected:Z.object,isAllDay:Z.bool,accessors:Z.object.isRequired,localizer:Z.object.isRequired,components:Z.object.isRequired,getters:Z.object.isRequired,onSelect:Z.func,onDoubleClick:Z.func,onKeyPress:Z.func},defaultProps:{segments:[],selected:{}},renderEvent:function(e,n){var r=e.selected;e.isAllDay;var i=e.accessors,s=e.getters,o=e.onSelect,a=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,h=e.slotMetrics,d=e.components,f=e.resizable,m=h.continuesPrior(n),_=h.continuesAfter(n);return V.createElement($b,{event:n,getters:s,localizer:c,accessors:i,components:d,onSelect:o,onDoubleClick:a,onKeyPress:l,continuesPrior:m,continuesAfter:_,slotStart:h.first,slotEnd:h.last,selected:of(n,r),resizable:f})},renderSpan:function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",s=Math.abs(n)/e*100+"%";return V.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},i)}},zb=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.segments,o=i.slotMetrics.slots,a=i.className,l=1;return V.createElement("div",{className:ht(a,"rbc-row")},s.reduce(function(c,h,d){var f=h.event,m=h.left,_=h.right,v=h.span,S="_lvl_"+d,w=m-l,y=Xn.renderEvent(r.props,f);return w&&c.push(Xn.renderSpan(o,w,"".concat(S,"_gap"))),c.push(Xn.renderSpan(o,v,S,y)),l=_+1,c},[]))}}])}(V.Component);zb.defaultProps=De({},Xn.defaultProps);function jb(t){var e=t.dateRange,n=t.unit,r=n===void 0?"day":n,i=t.localizer;return{first:e[0],last:i.add(e[e.length-1],1,r)}}function NW(t,e,n,r){var i=jb({dateRange:e,localizer:r}),s=i.first,o=i.last,a=r.diff(s,o,"day"),l=r.max(r.startOf(n.start(t),"day"),s),c=r.min(r.ceil(n.end(t),"day"),o),h=Oz(e,function(f){return r.isSameDate(f,l)}),d=r.diff(l,c,"day");return d=Math.min(d,a),d=Math.max(d-r.segmentOffset,1),{event:t,span:d,left:h+1,right:Math.max(h+d,1)}}function qb(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,i,s=[],o=[];for(n=0;n<t.length;n++){for(i=t[n],r=0;r<s.length&&MW(i,s[r]);r++);r>=e?o.push(i):(s[r]||(s[r]=[])).push(i)}for(n=0;n<s.length;n++)s[n].sort(function(a,l){return a.left-l.left});return{levels:s,extra:o}}function fu(t,e,n,r,i){var s={start:r.start(t),end:r.end(t)},o={start:e,end:n};return i.inEventRange({event:s,range:o})}function MW(t,e){return e.some(function(n){return n.left<=t.right&&n.right>=t.left})}function VW(t,e,n){var r=dh(t),i=[],s=[];r.forEach(function(l){var c=e.start(l),h=e.end(l);n.daySpan(c,h)>1?i.push(l):s.push(l)});var o=i.sort(function(l,c){return ag(l,c,e,n)}),a=s.sort(function(l,c){return ag(l,c,e,n)});return[].concat(dh(o),dh(a))}function ag(t,e,n,r){var i={start:n.start(t),end:n.end(t),allDay:n.allDay(t)},s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)};return r.sortEvents({evtA:i,evtB:s})}var Wb=function(e,n){return e.left<=n&&e.right>=n},uT=function(e,n){return e.filter(function(r){return Wb(r,n)}).map(function(r){return r.event})},Gb=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){for(var r=this.props,i=r.segments,s=r.slotMetrics.slots,o=qb(i).levels[0],a=1,l=1,c=[];a<=s;){var h="_lvl_"+a,d=o.filter(function(y){return Wb(y,a)})[0]||{},f=d.event,m=d.left,_=d.right,v=d.span;if(!f){a++;continue}var S=Math.max(0,m-l);if(this.canRenderSlotEvent(m,v)){var w=Xn.renderEvent(this.props,f);S&&c.push(Xn.renderSpan(s,S,h+"_gap")),c.push(Xn.renderSpan(s,v,h,w)),l=a=_+1}else S&&c.push(Xn.renderSpan(s,S,h+"_gap")),c.push(Xn.renderSpan(s,1,h,this.renderShowMore(i,a))),l=a=a+1}return V.createElement("div",{className:"rbc-row"},c)}},{key:"canRenderSlotEvent",value:function(r,i){var s=this.props.segments;return Wz(r,r+i).every(function(o){var a=uT(s,o).length;return a===1})}},{key:"renderShowMore",value:function(r,i){var s=this,o=this.props,a=o.localizer,l=o.slotMetrics,c=o.components,h=l.getEventsForSlot(i),d=uT(r,i),f=d.length;if(c!=null&&c.showMore){var m=c.showMore,_=l.getDateForSlot(i-1);return f?V.createElement(m,{localizer:a,slotDate:_,slot:i,count:f,events:h,remainingEvents:d}):!1}return f?V.createElement("button",{type:"button",key:"sm_"+i,className:ht("rbc-button-link","rbc-show-more"),onClick:function(S){return s.showMore(i,S)}},a.messages.showMore(f,d,h)):!1}},{key:"showMore",value:function(r,i){i.preventDefault(),i.stopPropagation(),this.props.onShowMore(r,i.target)}}])}(V.Component);Gb.defaultProps=De({},Xn.defaultProps);var $W=function(e){var n=e.children;return V.createElement("div",{className:"rbc-row-content-scroll-container"},n)},LW=function(e,n){return e.left<=n&&e.right>=n},FW=function(e,n){return e[0].range===n[0].range&&e[0].events===n[0].events};function Hb(){return cb(function(t){for(var e=t.range,n=t.events,r=t.maxRows,i=t.minRows,s=t.accessors,o=t.localizer,a=jb({dateRange:e,localizer:o}),l=a.first,c=a.last,h=n.map(function(v){return NW(v,e,s,o)}),d=qb(h,Math.max(r-1,1)),f=d.levels,m=d.extra,_=m.length>0?i-1:i;f.length<_;)f.push([]);return{first:l,last:c,levels:f,extra:m,range:e,slots:e.length,clone:function(S){var w=Hb();return w(De(De({},t),S))},getDateForSlot:function(S){return e[S]},getSlotForDate:function(S){return e.find(function(w){return o.isSameDate(w,S)})},getEventsForSlot:function(S){return h.filter(function(w){return LW(w,S)}).map(function(w){return w.event})},continuesPrior:function(S){return o.continuesPrior(s.start(S),l)},continuesAfter:function(S){var w=s.start(S),y=s.end(S);return o.continuesAfter(w,y,c)}}},FW)}var od=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.handleSelectSlot=function(o){var a=n.props,l=a.range,c=a.onSelectSlot;c(l.slice(o.start,o.end+1),o)},n.handleShowMore=function(o,a){var l=n.props,c=l.range,h=l.onShowMore,d=n.slotMetrics(n.props),f=$O(n.containerRef.current,".rbc-row-bg")[0],m;f&&(m=f.children[o-1]);var _=d.getEventsForSlot(o);h(_,c[o-1],m,o,a)},n.getContainer=function(){var o=n.props.container;return o?o():n.containerRef.current},n.renderHeadingCell=function(o,a){var l=n.props,c=l.renderHeader,h=l.getNow,d=l.localizer;return c({date:o,key:"header_".concat(a),className:ht("rbc-date-cell",d.isSameDate(o,h())&&"rbc-now")})},n.renderDummy=function(){var o=n.props,a=o.className,l=o.range,c=o.renderHeader,h=o.showAllEvents;return V.createElement("div",{className:a,ref:n.containerRef},V.createElement("div",{className:ht("rbc-row-content",h&&"rbc-row-content-scrollable")},c&&V.createElement("div",{className:"rbc-row",ref:n.headingRowRef},l.map(n.renderHeadingCell)),V.createElement("div",{className:"rbc-row",ref:n.eventRowRef},V.createElement("div",{className:"rbc-row-segment"},V.createElement("div",{className:"rbc-event"},V.createElement("div",{className:"rbc-event-content"},""))))))},n.containerRef=le.createRef(),n.headingRowRef=le.createRef(),n.eventRowRef=le.createRef(),n.slotMetrics=Hb(),n}return en(e,t),wt(e,[{key:"getRowLimit",value:function(){var r,i=$p(this.eventRowRef.current),s=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?$p(this.headingRowRef.current):0,o=$p(this.containerRef.current)-s;return Math.max(Math.floor(o/i),1)}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.rtl,o=r.range,a=r.className,l=r.selected,c=r.selectable,h=r.renderForMeasure,d=r.accessors,f=r.getters,m=r.components,_=r.getNow,v=r.renderHeader,S=r.onSelect,w=r.localizer,y=r.onSelectStart,T=r.onSelectEnd,P=r.onDoubleClick,x=r.onKeyPress,O=r.resourceId,I=r.longPressThreshold,E=r.isAllDay,A=r.resizable,b=r.showAllEvents;if(h)return this.renderDummy();var D=this.slotMetrics(this.props),k=D.levels,C=D.extra,K=b?$W:vr,q=m.weekWrapper,z={selected:l,accessors:d,getters:f,localizer:w,components:m,onSelect:S,onDoubleClick:P,onKeyPress:x,resourceId:O,slotMetrics:D,resizable:A};return V.createElement("div",{className:a,role:"rowgroup",ref:this.containerRef},V.createElement(OW,{localizer:w,date:i,getNow:_,rtl:s,range:o,selectable:c,container:this.getContainer,getters:f,onSelectStart:y,onSelectEnd:T,onSelectSlot:this.handleSelectSlot,components:m,longPressThreshold:I,resourceId:O}),V.createElement("div",{className:ht("rbc-row-content",b&&"rbc-row-content-scrollable"),role:"row"},v&&V.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),V.createElement(K,null,V.createElement(q,Object.assign({isAllDay:E},z,{rtl:this.props.rtl}),k.map(function(Y,$){return V.createElement(zb,Object.assign({key:$,segments:Y},z))}),!!C.length&&V.createElement(Gb,Object.assign({segments:C,onShowMore:this.handleShowMore},z))))))}}])}(V.Component);od.defaultProps={minRows:0,maxRows:1/0};var Kb=function(e){var n=e.label;return V.createElement("span",{role:"columnheader","aria-sort":"none"},n)},UW=function(e){var n=e.label,r=e.drilldownView,i=e.onDrillDown;return r?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:i,role:"cell"},n):V.createElement("span",null,n)},BW=["date","className"],zW=function(e,n,r,i,s){return e.filter(function(o){return fu(o,n,r,i,s)})},af=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(o,a){var l=n.props,c=l.events,h=l.components,d=l.selectable,f=l.getNow,m=l.selected,_=l.date,v=l.localizer,S=l.longPressThreshold,w=l.accessors,y=l.getters,T=l.showAllEvents,P=n.state,x=P.needLimitMeasure,O=P.rowLimit,I=zW(dh(c),o[0],o[o.length-1],w,v),E=VW(I,w,v);return V.createElement(od,{key:a,ref:a===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:f,date:_,range:o,events:E,maxRows:T?1/0:O,selected:m,selectable:d,components:h,accessors:w,getters:y,localizer:v,renderHeader:n.readerDateHeading,renderForMeasure:x,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:S,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:T})},n.readerDateHeading=function(o){var a=o.date,l=o.className,c=lr(o,BW),h=n.props,d=h.date,f=h.getDrilldownView,m=h.localizer,_=m.neq(a,d,"month"),v=m.isSameDate(a,d),S=f(a),w=m.format(a,"dateFormat"),y=n.props.components.dateHeader||UW;return V.createElement("div",Object.assign({},c,{className:ht(l,_&&"rbc-off-range",v&&"rbc-current"),role:"cell"}),V.createElement(y,{label:w,date:a,drilldownView:S,isOffRange:_,onDrillDown:function(P){return n.handleHeadingClick(a,S,P)}}))},n.handleSelectSlot=function(o,a){n._pendingSelection=n._pendingSelection.concat(o),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(a)})},n.handleHeadingClick=function(o,a,l){l.preventDefault(),n.clearSelection(),Ue(n.props.onDrillDown,[o,a])},n.handleSelectEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onSelectEvent,a)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onDoubleClickEvent,a)},n.handleKeyPressEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onKeyPressEvent,a)},n.handleShowMore=function(o,a,l,c,h){var d=n.props,f=d.popup,m=d.onDrillDown,_=d.onShowMore,v=d.getDrilldownView,S=d.doShowMoreDrillDown;if(n.clearSelection(),f){var w=LA(l,n.containerRef.current);n.setState({overlay:{date:a,events:o,position:w,target:h}})}else S&&Ue(m,[a,v(a)||Gt.DAY]);Ue(_,[o,a,c])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=le.createRef(),n.slotRowRef=le.createRef(),n._bgRows=[],n._pendingSelection=[],n}return en(e,t),wt(e,[{key:"componentDidMount",value:function(){var r=this,i;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){i||FA(function(){i=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.className,a=s.visibleDays(i,s),l=V2(a,7);return this._weekCount=l.length,V.createElement("div",{className:ht("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},V.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var i=this.props,s=i.localizer,o=i.components,a=r[0],l=r[r.length-1],c=o.header||Kb;return s.range(a,l,"day").map(function(h,d){return V.createElement("div",{key:"header_"+d,className:"rbc-header"},V.createElement(c,{date:h,localizer:s,label:s.format(h,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,i,s=this,o=(r=(i=this.state)===null||i===void 0?void 0:i.overlay)!==null&&r!==void 0?r:{},a=this.props,l=a.accessors,c=a.localizer,h=a.components,d=a.getters,f=a.selected,m=a.popupOffset,_=a.handleDragStart,v=function(){return s.setState({overlay:null})};return V.createElement(py,{overlay:o,accessors:l,localizer:c,components:h,getters:d,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:_,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var i=this._pendingSelection.slice();this._pendingSelection=[],i.sort(function(a,l){return+a-+l});var s=new Date(i[0]),o=new Date(i[i.length-1]);o.setDate(i[i.length-1].getDate()+1),Ue(this.props.onSelectSlot,{slots:i,start:s,end:o,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,i){var s=r.date,o=r.localizer;return{date:s,needLimitMeasure:o.neq(s,i.date,"month")}}}])}(V.Component);af.range=function(t,e){var n=e.localizer,r=n.firstVisibleDay(t,n),i=n.lastVisibleDay(t,n);return{start:r,end:i}};af.navigate=function(t,e,n){var r=n.localizer;switch(e){case fn.PREVIOUS:return r.add(t,-1,"month");case fn.NEXT:return r.add(t,1,"month");default:return t}};af.title=function(t,e){var n=e.localizer;return n.format(t,"monthHeaderFormat")};var cT=function(e){var n=e.min,r=e.max,i=e.step,s=e.slots,o=e.localizer;return"".concat(+o.startOf(n,"minutes"))+"".concat(+o.startOf(r,"minutes"))+"".concat(i,"-").concat(s)};function my(t){for(var e=t.min,n=t.max,r=t.step,i=t.timeslots,s=t.localizer,o=cT({start:e,end:n,step:r,timeslots:i,localizer:s}),a=1+s.getTotalMin(e,n),l=s.getMinutesFromMidnight(e),c=Math.ceil((a-1)/(r*i)),h=c*i,d=new Array(c),f=new Array(h),m=0;m<c;m++){d[m]=new Array(i);for(var _=0;_<i;_++){var v=m*i+_,S=v*r;f[v]=d[m][_]=s.getSlotDate(e,l,S)}}var w=f.length*r;f.push(s.getSlotDate(e,l,w));function y(T){var P=s.diff(e,T,"minutes")+s.getDstOffset(e,T);return Math.min(P,a)}return{groups:d,update:function(P){return cT(P)!==o?my(P):this},dateIsInGroup:function(P,x){var O=d[x+1];return s.inRange(P,d[x][0],O?O[0]:n,"minutes")},nextSlot:function(P){var x=f[Math.min(f.findIndex(function(O){return O===P||s.eq(O,P)})+1,f.length-1)];return s.eq(x,P)&&(x=s.add(P,r,"minutes")),x},closestSlotToPosition:function(P){var x=Math.min(f.length-1,Math.max(0,Math.floor(P*h)));return f[x]},closestSlotFromPoint:function(P,x){var O=Math.abs(x.top-x.bottom);return this.closestSlotToPosition((P.y-x.top)/O)},closestSlotFromDate:function(P){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(s.lt(P,e,"minutes"))return f[0];if(s.gt(P,n,"minutes"))return f[f.length-1];var O=s.diff(e,P,"minutes");return f[(O-O%r)/r+x]},startsBeforeDay:function(P){return s.lt(P,e,"day")},startsAfterDay:function(P){return s.gt(P,n,"day")},startsBefore:function(P){return s.lt(s.merge(e,P),e,"minutes")},startsAfter:function(P){return s.gt(s.merge(n,P),n,"minutes")},getRange:function(P,x,O,I){O||(P=s.min(n,s.max(e,P))),I||(x=s.min(n,s.max(e,x)));var E=y(P),A=y(x),b=A>r*h&&!s.eq(n,x)?(E-r)/(r*h)*100:E/(r*h)*100;return{top:b,height:A/(r*h)*100-b,start:y(P),startDate:P,end:y(x),endDate:x}},getCurrentTimePosition:function(P){var x=y(P),O=x/(r*h)*100;return O}}}var jW=function(){function t(e,n){var r=n.accessors,i=n.slotMetrics;_t(this,t);var s=i.getRange(r.start(e),r.end(e)),o=s.start,a=s.startDate,l=s.end,c=s.endDate,h=s.top,d=s.height;this.start=o,this.end=l,this.startMs=+a,this.endMs=+c,this.top=h,this.height=d,this.data=e}return wt(t,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(i,s){return Math.max(i,s.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:n;var i=this.row.leaves,s=i.indexOf(this);return s===i.length-1?n:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,r=n.leaves,i=n.xOffset,s=n._width,o=r.indexOf(this)+1;return i+o*s}}])}();function qW(t,e,n){return Math.abs(e.start-t.start)<n||e.start>t.start&&e.start<t.end}function WW(t){for(var e=h3(t,["startMs",function(a){return-a.endMs}]),n=[];e.length>0;){var r=e.shift();n.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(!(r.endMs>s.startMs)){if(i>0){var o=e.splice(i,1)[0];n.push(o)}break}}}return n}function Qb(t){for(var e=t.events,n=t.minimumStartDifference,r=t.slotMetrics,i=t.accessors,s=e.map(function(h){return new jW(h,{slotMetrics:r,accessors:i})}),o=WW(s),a=[],l=function(){var d=o[c],f=a.find(function(v){return v.end>d.start||Math.abs(d.start-v.start)<n});if(!f)return d.rows=[],a.push(d),1;d.container=f;for(var m=null,_=f.rows.length-1;!m&&_>=0;_--)qW(f.rows[_],d,n)&&(m=f.rows[_]);m?(m.leaves.push(d),d.row=m):(d.leaves=[],f.rows.push(d))},c=0;c<o.length;c++)l();return o.map(function(h){return{event:h.data,style:{top:h.top,height:h.height,width:h.width,xOffset:Math.max(0,h.xOffset)}}})}function Yb(t,e,n){for(var r=0;r<t.friends.length;++r)if(!(n.indexOf(t.friends[r])>-1)){e=e>t.friends[r].idx?e:t.friends[r].idx,n.push(t.friends[r]);var i=Yb(t.friends[r],e,n);e=e>i?e:i}return e}function GW(t){var e=t.events,n=t.minimumStartDifference,r=t.slotMetrics,i=t.accessors,s=Qb({events:e,minimumStartDifference:n,slotMetrics:r,accessors:i});s.sort(function(q,z){return q=q.style,z=z.style,q.top!==z.top?q.top>z.top?1:-1:q.height!==z.height?q.top+q.height<z.top+z.height?1:-1:0});for(var o=0;o<s.length;++o)s[o].friends=[],delete s[o].style.left,delete s[o].style.left,delete s[o].idx,delete s[o].size;for(var a=0;a<s.length-1;++a)for(var l=s[a],c=l.style.top,h=l.style.top+l.style.height,d=a+1;d<s.length;++d){var f=s[d],m=f.style.top,_=f.style.top+f.style.height;(m>=c&&_<=h||_>c&&_<=h||m>=c&&m<h)&&(l.friends.push(f),f.friends.push(l))}for(var v=0;v<s.length;++v){for(var S=s[v],w=[],y=0;y<100;++y)w.push(1);for(var T=0;T<S.friends.length;++T)S.friends[T].idx!==void 0&&(w[S.friends[T].idx]=0);S.idx=w.indexOf(1)}for(var P=0;P<s.length;++P){var x=0;if(!s[P].size){var O=[],I=Yb(s[P],0,O);x=100/(I+1),s[P].size=x;for(var E=0;E<O.length;++E)O[E].size=x}}for(var A=0;A<s.length;++A){var b=s[A];b.style.left=b.idx*b.size;for(var D=0,k=0;k<b.friends.length;++k){var C=b.friends[k].idx;D=D>C?D:C}D<=b.idx&&(b.size=100-b.idx*b.size);var K=b.idx===0?0:3;b.style.width="calc(".concat(b.size,"% - ").concat(K,"px)"),b.style.height="calc(".concat(b.style.height,"% - 2px)"),b.style.xOffset="calc(".concat(b.style.left,"% + ").concat(K,"px)")}return s}var hT={overlap:Qb,"no-overlap":GW};function HW(t){return!!(t&&t.constructor&&t.call&&t.apply)}function KW(t){t.events,t.minimumStartDifference,t.slotMetrics,t.accessors;var e=t.dayLayoutAlgorithm,n=e;return e in hT&&(n=hT[e]),HW(n)?n.apply(this,arguments):[]}var Xb=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.renderSlot,s=r.resource,o=r.group,a=r.getters,l=r.components,c=l===void 0?{}:l,h=c.timeSlotWrapper,d=h===void 0?vr:h,f=a?a.slotGroupProp(o):{};return V.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),o.map(function(m,_){var v=a?a.slotProp(m,s):{};return V.createElement(d,{key:_,value:m,resource:s},V.createElement("div",Object.assign({},v,{className:ht("rbc-time-slot",v.className)}),i&&i(m,_)))}))}}])}(le.Component);function jc(t){return typeof t=="string"?t:t+"%"}function QW(t){var e=t.style,n=t.className,r=t.event,i=t.accessors,s=t.rtl,o=t.selected,a=t.label,l=t.continuesPrior,c=t.continuesAfter,h=t.getters,d=t.onClick,f=t.onDoubleClick,m=t.isBackgroundEvent,_=t.onKeyPress,v=t.components,S=v.event,w=v.eventWrapper,y=i.title(r),T=i.tooltip(r),P=i.end(r),x=i.start(r),O=h.eventProp(r,x,P,o),I=[V.createElement("div",{key:"1",className:"rbc-event-label"},a),V.createElement("div",{key:"2",className:"rbc-event-content"},S?V.createElement(S,{event:r,title:y}):y)],E=e.height,A=e.top,b=e.width,D=e.xOffset,k=De(De({},O.style),{},ns({top:jc(A),height:jc(E),width:jc(b)},s?"right":"left",jc(D)));return V.createElement(w,Object.assign({type:"time"},t),V.createElement("div",{role:"button",tabIndex:0,onClick:d,onDoubleClick:f,style:k,onKeyDown:_,title:T?(typeof a=="string"?a+": ":"")+T:void 0,className:ht(m?"rbc-background-event":"rbc-event",n,O.className,{"rbc-selected":o,"rbc-event-continues-earlier":l,"rbc-event-continues-later":c})},I))}var YW=function(e){var n=e.children,r=e.className,i=e.style,s=e.innerRef;return V.createElement("div",{className:r,style:i,ref:s},n)},XW=V.forwardRef(function(t,e){return V.createElement(YW,Object.assign({},t,{innerRef:e}))}),JW=["dayProp"],ZW=["eventContainerWrapper"],Jb=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(o){var a=o.events,l=o.isBackgroundEvent,c=n.props,h=c.rtl,d=c.selected,f=c.accessors,m=c.localizer,_=c.getters,v=c.components,S=c.step,w=c.timeslots,y=c.dayLayoutAlgorithm,T=c.resizable,P=n,x=P.slotMetrics,O=m.messages,I=KW({events:a,accessors:f,slotMetrics:x,minimumStartDifference:Math.ceil(S*w/2),dayLayoutAlgorithm:y});return I.map(function(E,A){var b=E.event,D=E.style,k=f.end(b),C=f.start(b),K="eventTimeRangeFormat",q,z=x.startsBeforeDay(C),Y=x.startsAfterDay(k);z?K="eventTimeRangeEndFormat":Y&&(K="eventTimeRangeStartFormat"),z&&Y?q=O.allDay:q=m.format({start:C,end:k},K);var $=z||x.startsBefore(C),G=Y||x.startsAfter(k);return V.createElement(QW,{style:D,event:b,label:q,key:"evt_"+A,getters:_,rtl:h,components:v,continuesPrior:$,continuesAfter:G,accessors:f,resource:n.props.resource,selected:of(b,d),onClick:function(oe){return n._select(De(De(De({},b),n.props.resource&&{sourceResource:n.props.resource}),l&&{isBackgroundEvent:!0}),oe)},onDoubleClick:function(oe){return n._doubleClick(b,oe)},isBackgroundEvent:l,onKeyPress:function(oe){return n._keyPress(b,oe)},resizable:T})})},n._selectable=function(){var o=n.containerRef.current,a=n.props,l=a.longPressThreshold,c=a.localizer,h=n._selector=new Bb(function(){return o},{longPressThreshold:l}),d=function(v){var S=n.props.onSelecting,w=n.state||{},y=f(v),T=y.startDate,P=y.endDate;S&&(c.eq(w.startDate,T,"minutes")&&c.eq(w.endDate,P,"minutes")||S({start:T,end:P,resourceId:n.props.resource})===!1)||(n.state.start!==y.start||n.state.end!==y.end||n.state.selecting!==y.selecting)&&n.setState(y)},f=function(v){var S=n.slotMetrics.closestSlotFromPoint(v,Cs(o));n.state.selecting||(n._initialSlot=S);var w=n._initialSlot;c.lte(w,S)?S=n.slotMetrics.nextSlot(S):c.gt(w,S)&&(w=n.slotMetrics.nextSlot(w));var y=n.slotMetrics.getRange(c.min(w,S),c.max(w,S));return De(De({},y),{},{selecting:!0,top:"".concat(y.top,"%"),height:"".concat(y.height,"%")})},m=function(v,S){if(!sd(n.containerRef.current,v)){var w=f(v),y=w.startDate,T=w.endDate;n._selectSlot({startDate:y,endDate:T,action:S,box:v})}n.setState({selecting:!1})};h.on("selecting",d),h.on("selectStart",d),h.on("beforeSelect",function(_){if(n.props.selectable==="ignoreEvents")return!sd(n.containerRef.current,_)}),h.on("click",function(_){return m(_,"click")}),h.on("doubleClick",function(_){return m(_,"doubleClick")}),h.on("select",function(_){n.state.selecting&&(n._selectSlot(De(De({},n.state),{},{action:"select",bounds:_})),n.setState({selecting:!1}))}),h.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(o){for(var a=o.startDate,l=o.endDate,c=o.action,h=o.bounds,d=o.box,f=a,m=[];n.props.localizer.lte(f,l);)m.push(f),f=new Date(+f+n.props.step*60*1e3);Ue(n.props.onSelectSlot,{slots:m,start:a,end:l,resourceId:n.props.resource,action:c,bounds:h,box:d})},n._select=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onSelectEvent,a)},n._doubleClick=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onDoubleClickEvent,a)},n._keyPress=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onKeyPressEvent,a)},n.slotMetrics=my(n.props),n.containerRef=le.createRef(),n}return en(e,t),wt(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,i){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var s=this.props,o=s.getNow,a=s.isNow,l=s.localizer,c=s.date,h=s.min,d=s.max,f=l.neq(r.getNow(),o(),"minutes");if(r.isNow!==a||f){if(this.clearTimeIndicatorInterval(),a){var m=!f&&l.eq(r.date,c,"minutes")&&i.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(m)}}else a&&(l.neq(r.min,h,"minutes")||l.neq(r.max,d,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!i&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,i=r.min,s=r.max,o=r.getNow,a=o();if(a>=i&&a<=s){var l=this.slotMetrics.getCurrentTimePosition(a);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:l})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.max,o=r.rtl,a=r.isNow,l=r.resource,c=r.accessors,h=r.localizer,d=r.getters,f=d.dayProp,m=lr(d,JW),_=r.components,v=_.eventContainerWrapper,S=lr(_,ZW);this.slotMetrics=this.slotMetrics.update(this.props);var w=this.slotMetrics,y=this.state,T=y.selecting,P=y.top,x=y.height,O=y.startDate,I=y.endDate,E={start:O,end:I},A=f(s,l),b=A.className,D=A.style,k=S.dayColumnWrapper||XW;return V.createElement(k,{ref:this.containerRef,date:i,style:D,className:ht(b,"rbc-day-slot","rbc-time-column",a&&"rbc-now",a&&"rbc-today",T&&"rbc-slot-selecting"),slotMetrics:w,resource:l},w.groups.map(function(C,K){return V.createElement(Xb,{key:K,group:C,resource:l,getters:m,components:S})}),V.createElement(v,{localizer:h,resource:l,accessors:c,getters:m,components:S,slotMetrics:w},V.createElement("div",{className:ht("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),T&&V.createElement("div",{className:"rbc-slot-selection",style:{top:P,height:x}},V.createElement("span",null,h.format(E,"selectRangeFormat"))),a&&this.intervalTriggered&&V.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}(V.Component);Jb.defaultProps={dragThroughEvents:!0,timeslots:2};function eG(t){var e=t.min,n=t.max,r=t.localizer;return r.getTimezoneOffset(e)!==r.getTimezoneOffset(n)?{start:r.add(e,-1,"day"),end:r.add(n,-1,"day")}:{start:e,end:n}}var tG=function(e){var n=e.min,r=e.max,i=e.timeslots,s=e.step,o=e.localizer,a=e.getNow,l=e.resource,c=e.components,h=e.getters,d=e.gutterRef,f=c.timeGutterWrapper,m=le.useMemo(function(){return eG({min:n,max:r,localizer:o})},[n==null?void 0:n.toISOString(),r==null?void 0:r.toISOString(),o]),_=m.start,v=m.end,S=le.useState(my({min:_,max:v,timeslots:i,step:s,localizer:o})),w=_r(S,2),y=w[0],T=w[1];le.useEffect(function(){y&&T(y.update({min:_,max:v,timeslots:i,step:s,localizer:o}))},[_==null?void 0:_.toISOString(),v==null?void 0:v.toISOString(),i,s]);var P=le.useCallback(function(x,O){if(O)return null;var I=y.dateIsInGroup(a(),O);return V.createElement("span",{className:ht("rbc-label",I&&"rbc-now")},o.format(x,"timeGutterFormat"))},[y,o,a]);return V.createElement(f,{slotMetrics:y},V.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},y.groups.map(function(x,O){return V.createElement(Xb,{key:O,group:x,resource:l,components:c,renderSlot:P,getters:h})})))},nG=V.forwardRef(function(t,e){return V.createElement(tG,Object.assign({gutterRef:e},t))}),rG=function(e){var n=e.label;return V.createElement(V.Fragment,null,n)},iG=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.handleHeaderClick=function(o,a,l){l.preventDefault(),Ue(n.props.onDrillDown,[o,a])},n.renderRow=function(o){var a=n.props,l=a.events,c=a.rtl,h=a.selectable,d=a.getNow,f=a.range,m=a.getters,_=a.localizer,v=a.accessors,S=a.components,w=a.resizable,y=v.resourceId(o),T=o?l.filter(function(P){return v.resource(P)===y}):l;return V.createElement(od,{isAllDay:!0,rtl:c,getNow:d,minRows:2,maxRows:n.props.allDayMaxRows+1,range:f,events:T,resourceId:y,className:"rbc-allday-cell",selectable:h,selected:n.props.selected,components:S,accessors:v,getters:m,localizer:_,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:w})},n}return en(e,t),wt(e,[{key:"renderHeaderCells",value:function(r){var i=this,s=this.props,o=s.localizer,a=s.getDrilldownView,l=s.getNow,c=s.getters.dayProp,h=s.components.header,d=h===void 0?Kb:h,f=l();return r.map(function(m,_){var v=a(m),S=o.format(m,"dayFormat"),w=c(m),y=w.className,T=w.style,P=V.createElement(d,{date:m,label:S,localizer:o});return V.createElement("div",{key:_,style:T,className:ht("rbc-header",y,o.isSameDate(m,f)&&"rbc-today")},v?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(O){return i.handleHeaderClick(m,v,O)}},P):V.createElement("span",null,P))})}},{key:"render",value:function(){var r=this,i=this.props,s=i.width,o=i.rtl,a=i.resources,l=i.range,c=i.events,h=i.getNow,d=i.accessors,f=i.selectable,m=i.components,_=i.getters,v=i.scrollRef,S=i.localizer,w=i.isOverflowing,y=i.components,T=y.timeGutterHeader,P=y.resourceHeader,x=P===void 0?rG:P,O=i.resizable,I={};w&&(I[o?"marginLeft":"marginRight"]="".concat(uA()-1,"px"));var E=a.groupEvents(c);return V.createElement("div",{style:I,ref:v,className:ht("rbc-time-header",w&&"rbc-overflowing")},V.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},T&&V.createElement(T,null)),a.map(function(A,b){var D=_r(A,2),k=D[0],C=D[1];return V.createElement("div",{className:"rbc-time-header-content",key:k||b},C&&V.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(b)},V.createElement("div",{className:"rbc-header"},V.createElement(x,{index:b,label:d.resourceTitle(C),resource:C}))),V.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(l)),V.createElement(od,{isAllDay:!0,rtl:o,getNow:h,minRows:2,maxRows:r.props.allDayMaxRows+1,range:l,events:E.get(k)||[],resourceId:C&&k,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:m,accessors:d,getters:_,localizer:S,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:O}))}))}}])}(V.Component),Up={};function sG(t,e){return{map:function(r){return t?t.map(function(i,s){return r([e.resourceId(i),i],s)}):[r([Up,null],0)]},groupEvents:function(r){var i=new Map;return t?(r.forEach(function(s){var o=e.resource(s)||Up;if(Array.isArray(o))o.forEach(function(l){var c=i.get(l)||[];c.push(s),i.set(l,c)});else{var a=i.get(o)||[];a.push(s),i.set(o,a)}}),i):(i.set(Up,r),i)}}}var Ta=function(t){function e(n){var r;return _t(this,e),r=Zt(this,e,[n]),r.handleScroll=function(i){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=i.target.scrollLeft)},r.handleResize=function(){eE(r.rafHandle),r.rafHandle=FA(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];Ue(r.props.onKeyPressEvent,s)},r.handleSelectEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];Ue(r.props.onSelectEvent,s)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];Ue(r.props.onDoubleClickEvent,s)},r.handleShowMore=function(i,s,o,a,l){var c=r.props,h=c.popup,d=c.onDrillDown,f=c.onShowMore,m=c.getDrilldownView,_=c.doShowMoreDrillDown;if(r.clearSelection(),h){var v=LA(o,r.containerRef.current);r.setState({overlay:{date:s,events:i,position:De(De({},v),{},{width:"200px"}),target:l}})}else _&&Ue(d,[s,m(s)||Gt.DAY]);Ue(f,[i,s,a])},r.handleSelectAllDaySlot=function(i,s){var o=r.props.onSelectSlot,a=new Date(i[0]),l=new Date(i[i.length-1]);l.setDate(i[i.length-1].getDate()+1),Ue(o,{slots:i,start:a,end:l,action:s.action,resourceId:s.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var i=r.contentRef.current;if(i!=null&&i.scrollHeight){var s=i.scrollHeight>i.clientHeight;r.state.isOverflowing!==s&&(r._updatingOverflow=!0,r.setState({isOverflowing:s},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=cb(function(i,s){return sG(i,s)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=V.createRef(),r.contentRef=V.createRef(),r.containerRef=V.createRef(),r._scrollRatio=null,r.gutterRef=le.createRef(),r}return en(e,t),wt(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),eE(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderEvents",value:function(r,i,s,o){var a=this,l=this.props,c=l.min,h=l.max,d=l.components,f=l.accessors,m=l.localizer,_=l.dayLayoutAlgorithm,v=this.memoizedResources(this.props.resources,f),S=v.groupEvents(i),w=v.groupEvents(s);return v.map(function(y,T){var P=_r(y,2),x=P[0],O=P[1];return r.map(function(I,E){var A=(S.get(x)||[]).filter(function(D){return m.inRange(I,f.start(D),f.end(D),"day")}),b=(w.get(x)||[]).filter(function(D){return m.inRange(I,f.start(D),f.end(D),"day")});return V.createElement(Jb,Object.assign({},a.props,{localizer:m,min:m.merge(I,c),max:m.merge(I,h),resource:O&&x,components:d,isNow:m.isSameDate(I,o),key:T+"-"+E,date:I,events:A,backgroundEvents:b,dayLayoutAlgorithm:_}))})})}},{key:"render",value:function(){var r,i=this.props,s=i.events,o=i.backgroundEvents,a=i.range,l=i.width,c=i.rtl,h=i.selected,d=i.getNow,f=i.resources,m=i.components,_=i.accessors,v=i.getters,S=i.localizer,w=i.min,y=i.max,T=i.showMultiDayTimes,P=i.longPressThreshold,x=i.resizable;l=l||this.state.gutterWidth;var O=a[0],I=a[a.length-1];this.slots=a.length;var E=[],A=[],b=[];return s.forEach(function(D){if(fu(D,O,I,_,S)){var k=_.start(D),C=_.end(D);_.allDay(D)||S.startAndEndAreDateOnly(k,C)||!T&&!S.isSameDate(k,C)?E.push(D):A.push(D)}}),o.forEach(function(D){fu(D,O,I,_,S)&&b.push(D)}),E.sort(function(D,k){return ag(D,k,_,S)}),V.createElement("div",{className:ht("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},V.createElement(iG,{range:a,events:E,width:l,rtl:c,getNow:d,localizer:S,selected:h,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(f,_),selectable:this.props.selectable,accessors:_,getters:v,components:m,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:P,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:x}),this.props.popup&&this.renderOverlay(),V.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},V.createElement(nG,{date:O,ref:this.gutterRef,localizer:S,min:S.merge(O,w),max:S.merge(O,y),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:m,className:"rbc-time-gutter",getters:v}),this.renderEvents(a,A,b,d())))}},{key:"renderOverlay",value:function(){var r,i,s=this,o=(r=(i=this.state)===null||i===void 0?void 0:i.overlay)!==null&&r!==void 0?r:{},a=this.props,l=a.accessors,c=a.localizer,h=a.components,d=a.getters,f=a.selected,m=a.popupOffset,_=a.handleDragStart,v=function(){return s.setState({overlay:null})};return V.createElement(py,{overlay:o,accessors:l,localizer:c,components:h,getters:d,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:_,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var i,s=(i=r.gutterRef)!==null&&i!==void 0&&i.current?sg(r.gutterRef.current):void 0;s&&r.state.gutterWidth!==s&&r.setState({gutterWidth:s})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=r.min,s=r.max,o=r.scrollToTime,a=r.localizer,l=a.diff(a.merge(o,i),o,"milliseconds"),c=a.diff(i,s,"milliseconds");this._scrollRatio=l/c}}])}(le.Component);Ta.defaultProps={step:30,timeslots:2};var oG=["date","localizer","min","max","scrollToTime","enableAutoScroll"],lf=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,_=lr(r,oG),v=e.range(i,{localizer:s});return V.createElement(Ta,Object.assign({},_,{range:v,eventOffset:10,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);lf.range=function(t,e){var n=e.localizer;return[n.startOf(t,"day")]};lf.navigate=function(t,e,n){var r=n.localizer;switch(e){case fn.PREVIOUS:return r.add(t,-1,"day");case fn.NEXT:return r.add(t,1,"day");default:return t}};lf.title=function(t,e){var n=e.localizer;return n.format(t,"dayHeaderFormat")};var aG=["date","localizer","min","max","scrollToTime","enableAutoScroll"],yi=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,_=lr(r,aG),v=e.range(i,this.props);return V.createElement(Ta,Object.assign({},_,{range:v,eventOffset:15,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);yi.defaultProps=Ta.defaultProps;yi.navigate=function(t,e,n){var r=n.localizer;switch(e){case fn.PREVIOUS:return r.add(t,-1,"week");case fn.NEXT:return r.add(t,1,"week");default:return t}};yi.range=function(t,e){var n=e.localizer,r=n.startOfWeek(),i=n.startOf(t,"week",r),s=n.endOf(t,"week",r);return n.range(i,s)};yi.title=function(t,e){var n=e.localizer,r=yi.range(t,{localizer:n}),i=vb(r),s=i[0],o=i.slice(1);return n.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var lG=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function gy(t,e){return yi.range(t,e).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var Wu=function(t){function e(){return _t(this,e),Zt(this,e,arguments)}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,_=lr(r,lG),v=gy(i,this.props);return V.createElement(Ta,Object.assign({},_,{range:v,eventOffset:15,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);Wu.defaultProps=Ta.defaultProps;Wu.range=gy;Wu.navigate=yi.navigate;Wu.title=function(t,e){var n=e.localizer,r=gy(t,{localizer:n}),i=vb(r),s=i[0],o=i.slice(1);return n.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var uf=30;function cf(t){var e=t.accessors,n=t.components,r=t.date,i=t.events,s=t.getters,o=t.length,a=o===void 0?uf:o,l=t.localizer,c=t.onDoubleClickEvent,h=t.onSelectEvent,d=t.selected,f=le.useRef(null),m=le.useRef(null),_=le.useRef(null),v=le.useRef(null),S=le.useRef(null);le.useEffect(function(){T()});var w=function(E,A,b){var D=n.event,k=n.date;return A=A.filter(function(C){return fu(C,l.startOf(E,"day"),l.endOf(E,"day"),e,l)}),A.map(function(C,K){var q=e.title(C),z=e.end(C),Y=e.start(C),$=s.eventProp(C,Y,z,of(C,d)),G=K===0&&l.format(E,"agendaDateFormat"),Q=K===0?V.createElement("td",{rowSpan:A.length,className:"rbc-agenda-date-cell"},k?V.createElement(k,{day:E,label:G}):G):!1;return V.createElement("tr",{key:b+"_"+K,className:$.className,style:$.style},Q,V.createElement("td",{className:"rbc-agenda-time-cell"},y(E,C)),V.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(L){return h&&h(C,L)},onDoubleClick:function(L){return c&&c(C,L)}},D?V.createElement(D,{event:C,title:q}):q))},[])},y=function(E,A){var b="",D=n.time,k=l.messages.allDay,C=e.end(A),K=e.start(A);return e.allDay(A)||(l.eq(K,C)?k=l.format(K,"agendaTimeFormat"):l.isSameDate(K,C)?k=l.format({start:K,end:C},"agendaTimeRangeFormat"):l.isSameDate(E,K)?k=l.format(K,"agendaTimeFormat"):l.isSameDate(E,C)&&(k=l.format(C,"agendaTimeFormat"))),l.gt(E,K,"day")&&(b="rbc-continues-prior"),l.lt(E,C,"day")&&(b+=" rbc-continues-after"),V.createElement("span",{className:b.trim()},D?V.createElement(D,{event:A,day:E,label:k}):k)},T=function(){if(S.current){var E=f.current,A=S.current.firstChild;if(A){var b=v.current.scrollHeight>v.current.clientHeight,D=[],k=D;D=[sg(A.children[0]),sg(A.children[1])],(k[0]!==D[0]||k[1]!==D[1])&&(m.current.style.width=D[0]+"px",_.current.style.width=D[1]+"px"),b?(MO(E,"rbc-header-overflowing"),E.style.marginRight=uA()+"px"):LO(E,"rbc-header-overflowing")}}},P=l.messages,x=l.add(r,a,"day"),O=l.range(r,x,"day");return i=i.filter(function(I){return fu(I,l.startOf(r,"day"),l.endOf(x,"day"),e,l)}),i.sort(function(I,E){return+e.start(I)-+e.start(E)}),V.createElement("div",{className:"rbc-agenda-view"},i.length!==0?V.createElement(V.Fragment,null,V.createElement("table",{ref:f,className:"rbc-agenda-table"},V.createElement("thead",null,V.createElement("tr",null,V.createElement("th",{className:"rbc-header",ref:m},P.date),V.createElement("th",{className:"rbc-header",ref:_},P.time),V.createElement("th",{className:"rbc-header"},P.event)))),V.createElement("div",{className:"rbc-agenda-content",ref:v},V.createElement("table",{className:"rbc-agenda-table"},V.createElement("tbody",{ref:S},O.map(function(I,E){return w(I,i,E)}))))):V.createElement("span",{className:"rbc-agenda-empty"},P.noEventsInRange))}cf.range=function(t,e){var n=e.length,r=n===void 0?uf:n,i=e.localizer,s=i.add(t,r,"day");return{start:t,end:s}};cf.navigate=function(t,e,n){var r=n.length,i=r===void 0?uf:r,s=n.localizer;switch(e){case fn.PREVIOUS:return s.add(t,-i,"day");case fn.NEXT:return s.add(t,i,"day");default:return t}};cf.title=function(t,e){var n=e.length,r=n===void 0?uf:n,i=e.localizer,s=i.add(t,r,"day");return i.format({start:t,end:s},"agendaHeaderFormat")};var mh=ns(ns(ns(ns(ns({},Gt.MONTH,af),Gt.WEEK,yi),Gt.WORK_WEEK,Wu),Gt.DAY,lf),Gt.AGENDA,cf),uG=["action","date","today"];function cG(t,e){var n=e.action,r=e.date,i=e.today,s=lr(e,uG);switch(t=typeof t=="string"?mh[t]:t,n){case fn.TODAY:r=i||new Date;break;case fn.DATE:break;default:nu(t&&typeof t.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),r=t.navigate(r,n,s)}return r}var hG=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.navigate=function(o){n.props.onNavigate(o)},n.view=function(o){n.props.onView(o)},n}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.localizer.messages,s=r.label;return V.createElement("div",{className:"rbc-toolbar"},V.createElement("span",{className:"rbc-btn-group"},V.createElement("button",{type:"button",onClick:this.navigate.bind(null,fn.TODAY)},i.today),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,fn.PREVIOUS)},i.previous),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,fn.NEXT)},i.next)),V.createElement("span",{className:"rbc-toolbar-label"},s),V.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(i)))}},{key:"viewNamesGroup",value:function(r){var i=this,s=this.props.views,o=this.props.view;if(s.length>1)return s.map(function(a){return V.createElement("button",{type:"button",key:a,className:ht({"rbc-active":o===a}),onClick:i.view.bind(null,a)},r[a])})}}])}(V.Component);function dG(t,e){var n=null;return typeof e=="function"?n=e(t):typeof e=="string"&&Cr(t)==="object"&&t!=null&&e in t&&(n=t[e]),n}var Gr=function(e){return function(n){return dG(n,e)}},fG=["view","date","getNow","onNavigate"],pG=["view","toolbar","events","backgroundEvents","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Zb(t){if(Array.isArray(t))return t;for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=_r(r[n],2),s=i[0],o=i[1];o&&e.push(s)}return e}function mG(t,e){var n=e.views,r=Zb(n);return r.indexOf(t)!==-1}var eR=function(t){function e(){var n;_t(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Zt(this,e,[].concat(i)),n.getViews=function(){var o=n.props.views;return Array.isArray(o)?Oq(o,function(a,l){return a[l]=mh[l]},{}):Cr(o)==="object"?Fq(o,function(a,l){return a===!0?mh[l]:a}):mh},n.getView=function(){var o=n.getViews();return o[n.props.view]},n.getDrilldownView=function(o){var a=n.props,l=a.view,c=a.drilldownView,h=a.getDrilldownView;return h?h(o,l,Object.keys(n.getViews())):c},n.handleRangeChange=function(o,a,l){var c=n.props,h=c.onRangeChange,d=c.localizer;h&&a.range&&h(a.range(o,{localizer:d}),l)},n.handleNavigate=function(o,a){var l=n.props,c=l.view,h=l.date,d=l.getNow,f=l.onNavigate,m=lr(l,fG),_=n.getView(),v=d();h=cG(_,De(De({},m),{},{action:o,date:a||h||v,today:v})),f(h,c,o),n.handleRangeChange(h,_)},n.handleViewChange=function(o){o!==n.props.view&&mG(o,n.props)&&n.props.onView(o);var a=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),a[o],o)},n.handleSelectEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onSelectEvent,a)},n.handleDoubleClickEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onDoubleClickEvent,a)},n.handleKeyPressEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];Ue(n.props.onKeyPressEvent,a)},n.handleSelectSlot=function(o){Ue(n.props.onSelectSlot,o)},n.handleDrillDown=function(o,a){var l=n.props.onDrillDown;if(l){l(o,a,n.drilldownView);return}a&&n.handleViewChange(a),n.handleNavigate(fn.DATE,o)},n.state={context:e.getContext(n.props)},n}return en(e,t),wt(e,[{key:"render",value:function(){var r=this.props,i=r.view,s=r.toolbar,o=r.events,a=r.backgroundEvents,l=r.style,c=r.className,h=r.elementProps,d=r.date,f=r.getNow,m=r.length,_=r.showMultiDayTimes,v=r.onShowMore,S=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var w=lr(r,pG);d=d||f();var y=this.getView(),T=this.state.context,P=T.accessors,x=T.components,O=T.getters,I=T.localizer,E=T.viewNames,A=x.toolbar||hG,b=y.title(d,{localizer:I,length:m});return V.createElement("div",Object.assign({},h,{className:ht(c,"rbc-calendar",w.rtl&&"rbc-rtl"),style:l}),s&&V.createElement(A,{date:d,view:i,views:E,label:b,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:I}),V.createElement(y,Object.assign({},w,{events:o,backgroundEvents:a,date:d,getNow:f,length:m,localizer:I,getters:O,components:x,accessors:P,showMultiDayTimes:_,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:S})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:e.getContext(r)}}},{key:"getContext",value:function(r){var i=r.startAccessor,s=r.endAccessor,o=r.allDayAccessor,a=r.tooltipAccessor,l=r.titleAccessor,c=r.resourceAccessor,h=r.resourceIdAccessor,d=r.resourceTitleAccessor,f=r.eventPropGetter,m=r.backgroundEventPropGetter,_=r.slotPropGetter,v=r.slotGroupPropGetter,S=r.dayPropGetter,w=r.view,y=r.views,T=r.localizer,P=r.culture,x=r.messages,O=x===void 0?{}:x,I=r.components,E=I===void 0?{}:I,A=r.formats,b=A===void 0?{}:A,D=Zb(y),k=_W(O);return{viewNames:D,localizer:vW(T,P,b,k),getters:{eventProp:function(){return f&&f.apply(void 0,arguments)||{}},backgroundEventProp:function(){return m&&m.apply(void 0,arguments)||{}},slotProp:function(){return _&&_.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return S&&S.apply(void 0,arguments)||{}}},components:wq(E[w]||{},dq(E,D),{eventWrapper:vr,backgroundEventWrapper:vr,eventContainerWrapper:vr,dateCellWrapper:vr,weekWrapper:vr,timeSlotWrapper:vr,timeGutterWrapper:vr}),accessors:{start:Gr(i),end:Gr(s),allDay:Gr(o),tooltip:Gr(a),title:Gr(l),resource:Gr(c),resourceId:Gr(h),resourceTitle:Gr(d)}}}}])}(V.Component);eR.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Gt.MONTH,views:[Gt.MONTH,Gt.WEEK,Gt.DAY,Gt.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Gt.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var gG=wA(eR,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),vG=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"MMMM DD",n)+"  "+r.format(s,r.eq(i,s,"month")?"DD":"MMMM DD",n)},yG=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"L",n)+"  "+r.format(s,"L",n)},Bp=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"LT",n)+"  "+r.format(s,"LT",n)},_G=function(e,n,r){var i=e.start;return r.format(i,"LT",n)+"  "},wG=function(e,n,r){var i=e.end;return"  "+r.format(i,"LT",n)},EG={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Bp,eventTimeRangeFormat:Bp,eventTimeRangeStartFormat:_G,eventTimeRangeEndFormat:wG,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:vG,agendaHeaderFormat:yG,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Bp};function Hr(t){var e=t&&t.toLowerCase();return e==="FullYear"?e="year":e||(e=void 0),e}function TG(t){t.extend(Bq),t.extend(jq),t.extend(Wq),t.extend(Hq),t.extend(Qq),t.extend(Xq),t.extend(Zq);var e=function(B,H){return H?B.locale(H):B},n=t.tz?t.tz:t;function r(L){return n(L).toDate().getTimezoneOffset()}function i(L,B){var H,J=n(L),re=n(B);if(!n.tz)return J.toDate().getTimezoneOffset()-re.toDate().getTimezoneOffset();var ce=(H=J.tz().$x.$timezone)!==null&&H!==void 0?H:t.tz.guess(),ge=-n.tz(+J,ce).utcOffset(),_e=-n.tz(+re,ce).utcOffset();return ge-_e}function s(L){var B=n(L).startOf("day");return i(B,L)}function o(L,B,H){var J=Hr(H),re=J?n(L).startOf(J):n(L),ce=J?n(B).startOf(J):n(B);return[re,ce,J]}function a(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,H=Hr(B);return H?n(L).startOf(H).toDate():n(L).toDate()}function l(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,H=Hr(B);return H?n(L).endOf(H).toDate():n(L).toDate()}function c(L,B,H){var J=o(L,B,H),re=_r(J,3),ce=re[0],ge=re[1],_e=re[2];return ce.isSame(ge,_e)}function h(L,B,H){return!c(L,B,H)}function d(L,B,H){var J=o(L,B,H),re=_r(J,3),ce=re[0],ge=re[1],_e=re[2];return ce.isAfter(ge,_e)}function f(L,B,H){var J=o(L,B,H),re=_r(J,3),ce=re[0],ge=re[1],_e=re[2];return ce.isBefore(ge,_e)}function m(L,B,H){var J=o(L,B,H),re=_r(J,3),ce=re[0],ge=re[1],_e=re[2];return ce.isSameOrBefore(ge,_e)}function _(L,B,H){var J=o(L,B,H),re=_r(J,3),ce=re[0],ge=re[1],_e=re[2];return ce.isSameOrBefore(ge,_e)}function v(L,B,H){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",re=Hr(J),ce=n(L),ge=n(B),_e=n(H);return ce.isBetween(ge,_e,re,"[]")}function S(L,B){var H=n(L),J=n(B),re=t.min(H,J);return re.toDate()}function w(L,B){var H=n(L),J=n(B),re=t.max(H,J);return re.toDate()}function y(L,B){if(!L&&!B)return null;var H=n(B).format("HH:mm:ss"),J=n(L).startOf("day").format("MM/DD/YYYY");return t("".concat(J," ").concat(H),"MM/DD/YYYY HH:mm:ss").toDate()}function T(L,B,H){var J=Hr(H);return n(L).add(B,J).toDate()}function P(L,B){for(var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",J=Hr(H),re=n(L).toDate(),ce=[];_(re,B);)ce.push(re),re=T(re,1,J);return ce}function x(L,B){var H=Hr(B),J=a(L,H);return c(J,L)?J:T(J,1,H)}function O(L,B){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",J=Hr(H),re=n(L),ce=n(B);return ce.diff(re,J)}function I(L){var B=n(L);return B.minutes()}function E(L){var B=L?t.localeData(L):t.localeData();return B?B.firstDayOfWeek():0}function A(L){return n(L).startOf("month").startOf("week").toDate()}function b(L){return n(L).endOf("month").endOf("week").toDate()}function D(L){for(var B=A(L),H=b(L),J=[];_(B,H);)J.push(B),B=T(B,1,"d");return J}function k(L,B,H){return n(L).startOf("day").minute(B+H).toDate()}function C(L,B){return O(L,B,"minutes")}function K(L){var B=n(L).startOf("day"),H=n(L);return H.diff(B,"minutes")+s(L)}function q(L,B){var H=n(L),J=n(B);return H.isBefore(J,"day")}function z(L,B,H){var J=n(B),re=n(H);return J.isSameOrAfter(re,"minutes")}function Y(L,B){var H=n(L),J=n(B);return J.diff(H,"day")}function $(L){var B=L.evtA,H=B.start,J=B.end,re=B.allDay,ce=L.evtB,ge=ce.start,_e=ce.end,Re=ce.allDay,Ye=+a(H,"day")-+a(ge,"day"),Lt=Y(H,J),Ft=Y(ge,_e);return Ye||Ft-Lt||!!Re-!!re||+H-+ge||+J-+_e}function G(L){var B=L.event,H=B.start,J=B.end,re=L.range,ce=re.start,ge=re.end,_e=n(H).startOf("day"),Re=n(J),Ye=n(ce),Lt=n(ge),Ft=_e.isSameOrBefore(Lt,"day"),Bi=!_e.isSame(Re,"minutes"),zi=Bi?Re.isAfter(Ye,"minutes"):Re.isSameOrAfter(Ye,"minutes");return Ft&&zi}function Q(L,B){var H=n(L),J=n(B);return H.isSame(J,"day")}function oe(){var L=new Date,B=/-/.test(L.toString())?"-":"",H=L.getTimezoneOffset(),J=Number("".concat(B).concat(Math.abs(H))),re=n().utcOffset();return re>J?1:0}return new gW({formats:EG,firstOfWeek:E,firstVisibleDay:A,lastVisibleDay:b,visibleDays:D,format:function(B,H,J){return e(n(B),J).format(H)},lt:f,lte:_,gt:d,gte:m,eq:c,neq:h,merge:y,inRange:v,startOf:a,endOf:l,range:P,add:T,diff:O,ceil:x,min:S,max:w,minutes:I,getSlotDate:k,getTimezoneOffset:r,getDstOffset:i,getTotalMin:C,getMinutesFromMidnight:K,continuesPrior:q,continuesAfter:z,sortEvents:$,inEventRange:G,isSameDate:Q,browserTZOffset:oe})}var tR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",d="month",f="quarter",m="year",_="date",v="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var q=["th","st","nd","rd"],z=K%100;return"["+K+(q[(z-20)%10]||q[z]||q[0])+"]"}},T=function(K,q,z){var Y=String(K);return!Y||Y.length>=q?K:""+Array(q+1-Y.length).join(z)+K},P={s:T,z:function(K){var q=-K.utcOffset(),z=Math.abs(q),Y=Math.floor(z/60),$=z%60;return(q<=0?"+":"-")+T(Y,2,"0")+":"+T($,2,"0")},m:function K(q,z){if(q.date()<z.date())return-K(z,q);var Y=12*(z.year()-q.year())+(z.month()-q.month()),$=q.clone().add(Y,d),G=z-$<0,Q=q.clone().add(Y+(G?-1:1),d);return+(-(Y+(z-$)/(G?$-Q:Q-$))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:d,y:m,w:h,d:c,D:_,h:l,m:a,s:o,ms:s,Q:f}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},x="en",O={};O[x]=y;var I="$isDayjsObject",E=function(K){return K instanceof k||!(!K||!K[I])},A=function K(q,z,Y){var $;if(!q)return x;if(typeof q=="string"){var G=q.toLowerCase();O[G]&&($=G),z&&(O[G]=z,$=G);var Q=q.split("-");if(!$&&Q.length>1)return K(Q[0])}else{var oe=q.name;O[oe]=q,$=oe}return!Y&&$&&(x=$),$||!Y&&x},b=function(K,q){if(E(K))return K.clone();var z=typeof q=="object"?q:{};return z.date=K,z.args=arguments,new k(z)},D=P;D.l=A,D.i=E,D.w=function(K,q){return b(K,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var k=function(){function K(z){this.$L=A(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[I]=!0}var q=K.prototype;return q.parse=function(z){this.$d=function(Y){var $=Y.date,G=Y.utc;if($===null)return new Date(NaN);if(D.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var Q=$.match(S);if(Q){var oe=Q[2]-1||0,L=(Q[7]||"0").substring(0,3);return G?new Date(Date.UTC(Q[1],oe,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,L)):new Date(Q[1],oe,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,L)}}return new Date($)}(z),this.init()},q.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},q.$utils=function(){return D},q.isValid=function(){return this.$d.toString()!==v},q.isSame=function(z,Y){var $=b(z);return this.startOf(Y)<=$&&$<=this.endOf(Y)},q.isAfter=function(z,Y){return b(z)<this.startOf(Y)},q.isBefore=function(z,Y){return this.endOf(Y)<b(z)},q.$g=function(z,Y,$){return D.u(z)?this[Y]:this.set($,z)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(z,Y){var $=this,G=!!D.u(Y)||Y,Q=D.p(z),oe=function(_e,Re){var Ye=D.w($.$u?Date.UTC($.$y,Re,_e):new Date($.$y,Re,_e),$);return G?Ye:Ye.endOf(c)},L=function(_e,Re){return D.w($.toDate()[_e].apply($.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(Re)),$)},B=this.$W,H=this.$M,J=this.$D,re="set"+(this.$u?"UTC":"");switch(Q){case m:return G?oe(1,0):oe(31,11);case d:return G?oe(1,H):oe(0,H+1);case h:var ce=this.$locale().weekStart||0,ge=(B<ce?B+7:B)-ce;return oe(G?J-ge:J+(6-ge),H);case c:case _:return L(re+"Hours",0);case l:return L(re+"Minutes",1);case a:return L(re+"Seconds",2);case o:return L(re+"Milliseconds",3);default:return this.clone()}},q.endOf=function(z){return this.startOf(z,!1)},q.$set=function(z,Y){var $,G=D.p(z),Q="set"+(this.$u?"UTC":""),oe=($={},$[c]=Q+"Date",$[_]=Q+"Date",$[d]=Q+"Month",$[m]=Q+"FullYear",$[l]=Q+"Hours",$[a]=Q+"Minutes",$[o]=Q+"Seconds",$[s]=Q+"Milliseconds",$)[G],L=G===c?this.$D+(Y-this.$W):Y;if(G===d||G===m){var B=this.clone().set(_,1);B.$d[oe](L),B.init(),this.$d=B.set(_,Math.min(this.$D,B.daysInMonth())).$d}else oe&&this.$d[oe](L);return this.init(),this},q.set=function(z,Y){return this.clone().$set(z,Y)},q.get=function(z){return this[D.p(z)]()},q.add=function(z,Y){var $,G=this;z=Number(z);var Q=D.p(Y),oe=function(H){var J=b(G);return D.w(J.date(J.date()+Math.round(H*z)),G)};if(Q===d)return this.set(d,this.$M+z);if(Q===m)return this.set(m,this.$y+z);if(Q===c)return oe(1);if(Q===h)return oe(7);var L=($={},$[a]=r,$[l]=i,$[o]=n,$)[Q]||1,B=this.$d.getTime()+z*L;return D.w(B,this)},q.subtract=function(z,Y){return this.add(-1*z,Y)},q.format=function(z){var Y=this,$=this.$locale();if(!this.isValid())return $.invalidDate||v;var G=z||"YYYY-MM-DDTHH:mm:ssZ",Q=D.z(this),oe=this.$H,L=this.$m,B=this.$M,H=$.weekdays,J=$.months,re=$.meridiem,ce=function(Re,Ye,Lt,Ft){return Re&&(Re[Ye]||Re(Y,G))||Lt[Ye].slice(0,Ft)},ge=function(Re){return D.s(oe%12||12,Re,"0")},_e=re||function(Re,Ye,Lt){var Ft=Re<12?"AM":"PM";return Lt?Ft.toLowerCase():Ft};return G.replace(w,function(Re,Ye){return Ye||function(Lt){switch(Lt){case"YY":return String(Y.$y).slice(-2);case"YYYY":return D.s(Y.$y,4,"0");case"M":return B+1;case"MM":return D.s(B+1,2,"0");case"MMM":return ce($.monthsShort,B,J,3);case"MMMM":return ce(J,B);case"D":return Y.$D;case"DD":return D.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return ce($.weekdaysMin,Y.$W,H,2);case"ddd":return ce($.weekdaysShort,Y.$W,H,3);case"dddd":return H[Y.$W];case"H":return String(oe);case"HH":return D.s(oe,2,"0");case"h":return ge(1);case"hh":return ge(2);case"a":return _e(oe,L,!0);case"A":return _e(oe,L,!1);case"m":return String(L);case"mm":return D.s(L,2,"0");case"s":return String(Y.$s);case"ss":return D.s(Y.$s,2,"0");case"SSS":return D.s(Y.$ms,3,"0");case"Z":return Q}return null}(Re)||Q.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(z,Y,$){var G,Q=this,oe=D.p(Y),L=b(z),B=(L.utcOffset()-this.utcOffset())*r,H=this-L,J=function(){return D.m(Q,L)};switch(oe){case m:G=J()/12;break;case d:G=J();break;case f:G=J()/3;break;case h:G=(H-B)/6048e5;break;case c:G=(H-B)/864e5;break;case l:G=H/i;break;case a:G=H/r;break;case o:G=H/n;break;default:G=H}return $?G:D.a(G)},q.daysInMonth=function(){return this.endOf(d).$D},q.$locale=function(){return O[this.$L]},q.locale=function(z,Y){if(!z)return this.$L;var $=this.clone(),G=A(z,Y,!0);return G&&($.$L=G),$},q.clone=function(){return D.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},K}(),C=k.prototype;return b.prototype=C,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",m],["$D",_]].forEach(function(K){C[K[1]]=function(q){return this.$g(q,K[0],K[1])}}),b.extend=function(K,q){return K.$i||(K(q,k,b),K.$i=!0),b},b.locale=A,b.isDayjs=E,b.unix=function(K){return b(1e3*K)},b.en=O[x],b.Ls=O,b.p={},b})})(tR);var nR=tR.exports;const bo=nt(nR);var SG={exports:{}};(function(t,e){(function(n,r){t.exports=r(nR)})(gn,function(n){function r(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var i=r(n),s={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(o){return o+""}};return i.default.locale(s,null,!0),s})})(SG);var dT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},iR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new AG;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bG=function(t){const e=rR(t);return iR.encodeByteArray(e,!0)},ad=function(t){return bG(t).replace(/\./g,"")},RG=function(t){try{return iR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ld(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!PG(n)||(t[n]=ld(t[n],e[n]));return t}function PG(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=()=>sR().__FIREBASE_DEFAULTS__,CG=()=>{if(typeof process>"u"||typeof dT>"u")return;const t=dT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RG(t[1]);return e&&JSON.parse(e)},vy=()=>{try{return DG()||CG()||xG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kG=t=>{var e,n;return(n=(e=vy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oR=t=>{const e=kG(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aR=()=>{var t;return(t=vy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ad(JSON.stringify(n)),ad(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NG(){var t;const e=(t=vy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MG(){return typeof window<"u"||uR()}function uR(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function cR(){return!NG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hR(){try{return typeof indexedDB=="object"}catch{return!1}}function VG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G="FirebaseError";class Mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$G,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hf.prototype.create)}}class hf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LG(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Mi(i,a,r)}}function LG(t,e){return t.replace(FG,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(pT(s)&&pT(o)){if(!pu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pT(t){return t!==null&&typeof t=="object"}function UG(t,e){const n=new BG(t,e);return n.subscribe.bind(n)}class BG{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=zp),i.error===void 0&&(i.error=zp),i.complete===void 0&&(i.complete=zp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zG(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OG;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WG(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qG(t){return t===es?void 0:t}function WG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=[];var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const fR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},GG=ve.INFO,HG={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},KG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HG[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=GG,this._logHandler=KG,this._userLogHandler=null,yy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}function QG(t){yy.forEach(e=>{e.setLogLevel(t)})}function YG(t,e){for(const n of yy){let r=null;e&&e.level&&(r=fR[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ve[s].toLowerCase(),message:a,args:o,type:i.name})}}}const XG=(t,e)=>e.some(n=>t instanceof n);let mT,gT;function JG(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZG(){return gT||(gT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pR=new WeakMap,lg=new WeakMap,mR=new WeakMap,jp=new WeakMap,wy=new WeakMap;function eH(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pR.set(n,t)}).catch(()=>{}),wy.set(e,t),e}function tH(t){if(lg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lg.set(t,e)}let ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nH(t){ug=t(ug)}function rH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qp(this),e,...n);return mR.set(r,e.sort?e.sort():[e]),fi(r)}:ZG().includes(t)?function(...e){return t.apply(qp(this),e),fi(pR.get(this))}:function(...e){return fi(t.apply(qp(this),e))}}function iH(t){return typeof t=="function"?rH(t):(t instanceof IDBTransaction&&tH(t),XG(t,JG())?new Proxy(t,ug):t)}function fi(t){if(t instanceof IDBRequest)return eH(t);if(jp.has(t))return jp.get(t);const e=iH(t);return e!==t&&(jp.set(t,e),wy.set(e,t)),e}const qp=t=>wy.get(t);function sH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fi(o.result),l.oldVersion,l.newVersion,fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const oH=["get","getKey","getAll","getAllKeys","count"],aH=["put","add","delete","clear"],Wp=new Map;function vT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oH.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Wp.set(e,s),s}nH(t=>({...t,get:(e,n,r)=>vT(e,n)||t.get(e,n,r),has:(e,n)=>!!vT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cd="@firebase/app",cg="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new _y("@firebase/app"),cH="@firebase/app-compat",hH="@firebase/analytics-compat",dH="@firebase/analytics",fH="@firebase/app-check-compat",pH="@firebase/app-check",mH="@firebase/auth",gH="@firebase/auth-compat",vH="@firebase/database",yH="@firebase/database-compat",_H="@firebase/functions",wH="@firebase/functions-compat",EH="@firebase/installations",TH="@firebase/installations-compat",SH="@firebase/messaging",IH="@firebase/messaging-compat",AH="@firebase/performance",bH="@firebase/performance-compat",RH="@firebase/remote-config",PH="@firebase/remote-config-compat",DH="@firebase/storage",CH="@firebase/storage-compat",xH="@firebase/firestore",kH="@firebase/vertexai-preview",OH="@firebase/firestore-compat",NH="firebase",MH="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]",VH={[cd]:"fire-core",[cH]:"fire-core-compat",[dH]:"fire-analytics",[hH]:"fire-analytics-compat",[pH]:"fire-app-check",[fH]:"fire-app-check-compat",[mH]:"fire-auth",[gH]:"fire-auth-compat",[vH]:"fire-rtdb",[yH]:"fire-rtdb-compat",[_H]:"fire-fn",[wH]:"fire-fn-compat",[EH]:"fire-iid",[TH]:"fire-iid-compat",[SH]:"fire-fcm",[IH]:"fire-fcm-compat",[AH]:"fire-perf",[bH]:"fire-perf-compat",[RH]:"fire-rc",[PH]:"fire-rc-compat",[DH]:"fire-gcs",[CH]:"fire-gcs-compat",[xH]:"fire-fst",[OH]:"fire-fst-compat",[kH]:"fire-vertex","fire-js":"fire-js",[NH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Map,Qo=new Map,Yo=new Map;function mu(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gR(t,e){t.container.addOrOverwriteComponent(e)}function xs(t){const e=t.name;if(Yo.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Yo.set(e,t);for(const n of wi.values())mu(n,t);for(const n of Qo.values())mu(n,t);return!0}function df(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $H(t,e,n=_i){df(t,e).clearInstance(n)}function vR(t){return t.options!==void 0}function LH(t){return t.settings!==void 0}function FH(){Yo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new hf("app","Firebase",UH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yR=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH extends yR{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,qn(cd,cg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Sy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Cn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=MH;function Ey(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_i,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=aR()),!n)throw Cn.create("no-options");const s=wi.get(i);if(s){if(pu(n,s.options)&&pu(r,s.config))return s;throw Cn.create("duplicate-app",{appName:i})}const o=new dR(i);for(const l of Yo.values())o.addComponent(l);const a=new yR(n,r,o);return wi.set(i,a),a}function zH(t,e){if(MG()&&!uR())throw Cn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;vR(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((h,d)=>Math.imul(31,h)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Cn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Qo.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new dR(s);for(const c of Yo.values())a.addComponent(c);const l=new BH(n,e,s,a);return Qo.set(s,l),l}function Ty(t=_i){const e=wi.get(t);if(!e&&t===_i&&aR())return Ey();if(!e)throw Cn.create("no-app",{appName:t});return e}function jH(){return Array.from(wi.values())}async function Sy(t){let e=!1;const n=t.name;wi.has(n)?(e=!0,wi.delete(n)):Qo.has(n)&&t.decRefCount()<=0&&(Qo.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function qn(t,e,n){var r;let i=(r=VH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}xs(new kr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function _R(t,e){if(t!==null&&typeof t!="function")throw Cn.create("invalid-log-argument");YG(t,e)}function wR(t){QG(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH="firebase-heartbeat-database",WH=1,gu="firebase-heartbeat-store";let Gp=null;function ER(){return Gp||(Gp=sH(qH,WH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),Gp}async function GH(t){try{const n=(await ER()).transaction(gu),r=await n.objectStore(gu).get(TR(t));return await n.done,r}catch(e){if(e instanceof Mi)Or.warn(e.message);else{const n=Cn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function yT(t,e){try{const r=(await ER()).transaction(gu,"readwrite");await r.objectStore(gu).put(e,TR(t)),await r.done}catch(n){if(n instanceof Mi)Or.warn(n.message);else{const r=Cn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function TR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH=1024,KH=30*24*60*60*1e3;class QH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_T();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=KH}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_T(),{heartbeatsToSend:r,unsentEntries:i}=YH(this._heartbeatsCache.heartbeats),s=ad(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Or.warn(n),""}}}function _T(){return new Date().toISOString().substring(0,10)}function YH(t,e=HH){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hR()?VG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wT(t){return ad(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t){xs(new kr("platform-logger",e=>new lH(e),"PRIVATE")),xs(new kr("heartbeat",e=>new QH(e),"PRIVATE")),qn(cd,cg,t),qn(cd,cg,"esm2017"),qn("fire-js","")}JH("");const ZH=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Mi,SDK_VERSION:ff,_DEFAULT_ENTRY_NAME:_i,_addComponent:mu,_addOrOverwriteComponent:gR,_apps:wi,_clearComponents:FH,_components:Yo,_getProvider:df,_isFirebaseApp:vR,_isFirebaseServerApp:LH,_registerComponent:xs,_removeServiceInstance:$H,_serverApps:Qo,deleteApp:Sy,getApp:Ty,getApps:jH,initializeApp:Ey,initializeServerApp:zH,onLog:_R,registerVersion:qn,setLogLevel:wR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,n){this._delegate=e,this.firebase=n,mu(e,new kr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Sy(this._delegate)))}_getService(e,n=_i){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=_i){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){mu(this._delegate,e)}_addOrOverwriteComponent(e){gR(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ET=new hf("app-compat","Firebase",tK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:qn,setLogLevel:wR,onLog:_R,apps:null,SDK_VERSION:ff,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:ZH}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||_i,!fT(e,c))throw ET.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,h={}){const d=Ey(c,h);if(fT(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const h=c.name,d=h.replace("-compat","");if(xs(c)&&c.type==="PUBLIC"){const f=(m=i())=>{if(typeof m[d]!="function")throw ET.create("invalid-app-argument",{appName:h});return m[d]()};c.serviceProps!==void 0&&ld(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...m){return this._getService.bind(this,h).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){const t=nK(eK);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:SR,extendNamespace:e,createSubscribe:UG,ErrorFactory:hf,deepExtend:ld});function e(n){ld(t,n)}return t}const rK=SR();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new _y("@firebase/app-compat"),iK="@firebase/app-compat",sK="0.2.41";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(t){qn(iK,sK,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=sR();if(t.firebase!==void 0){TT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&TT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const pf=rK;oK();var aK="firebase",lK="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pf.registerVersion(aK,lK,"app-compat");var ST=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,IR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function A(){}A.prototype=E.prototype,I.D=E.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(b,D,k){for(var C=Array(arguments.length-2),K=2;K<arguments.length;K++)C[K-2]=arguments[K];return E.prototype[D].apply(b,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,E,A){A||(A=0);var b=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)b[D]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(D=0;16>D;++D)b[D]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=I.g[0],A=I.g[1],D=I.g[2];var k=I.g[3],C=E+(k^A&(D^k))+b[0]+3614090360&4294967295;E=A+(C<<7&4294967295|C>>>25),C=k+(D^E&(A^D))+b[1]+3905402710&4294967295,k=E+(C<<12&4294967295|C>>>20),C=D+(A^k&(E^A))+b[2]+606105819&4294967295,D=k+(C<<17&4294967295|C>>>15),C=A+(E^D&(k^E))+b[3]+3250441966&4294967295,A=D+(C<<22&4294967295|C>>>10),C=E+(k^A&(D^k))+b[4]+4118548399&4294967295,E=A+(C<<7&4294967295|C>>>25),C=k+(D^E&(A^D))+b[5]+1200080426&4294967295,k=E+(C<<12&4294967295|C>>>20),C=D+(A^k&(E^A))+b[6]+2821735955&4294967295,D=k+(C<<17&4294967295|C>>>15),C=A+(E^D&(k^E))+b[7]+4249261313&4294967295,A=D+(C<<22&4294967295|C>>>10),C=E+(k^A&(D^k))+b[8]+1770035416&4294967295,E=A+(C<<7&4294967295|C>>>25),C=k+(D^E&(A^D))+b[9]+2336552879&4294967295,k=E+(C<<12&4294967295|C>>>20),C=D+(A^k&(E^A))+b[10]+4294925233&4294967295,D=k+(C<<17&4294967295|C>>>15),C=A+(E^D&(k^E))+b[11]+2304563134&4294967295,A=D+(C<<22&4294967295|C>>>10),C=E+(k^A&(D^k))+b[12]+1804603682&4294967295,E=A+(C<<7&4294967295|C>>>25),C=k+(D^E&(A^D))+b[13]+4254626195&4294967295,k=E+(C<<12&4294967295|C>>>20),C=D+(A^k&(E^A))+b[14]+2792965006&4294967295,D=k+(C<<17&4294967295|C>>>15),C=A+(E^D&(k^E))+b[15]+1236535329&4294967295,A=D+(C<<22&4294967295|C>>>10),C=E+(D^k&(A^D))+b[1]+4129170786&4294967295,E=A+(C<<5&4294967295|C>>>27),C=k+(A^D&(E^A))+b[6]+3225465664&4294967295,k=E+(C<<9&4294967295|C>>>23),C=D+(E^A&(k^E))+b[11]+643717713&4294967295,D=k+(C<<14&4294967295|C>>>18),C=A+(k^E&(D^k))+b[0]+3921069994&4294967295,A=D+(C<<20&4294967295|C>>>12),C=E+(D^k&(A^D))+b[5]+3593408605&4294967295,E=A+(C<<5&4294967295|C>>>27),C=k+(A^D&(E^A))+b[10]+38016083&4294967295,k=E+(C<<9&4294967295|C>>>23),C=D+(E^A&(k^E))+b[15]+3634488961&4294967295,D=k+(C<<14&4294967295|C>>>18),C=A+(k^E&(D^k))+b[4]+3889429448&4294967295,A=D+(C<<20&4294967295|C>>>12),C=E+(D^k&(A^D))+b[9]+568446438&4294967295,E=A+(C<<5&4294967295|C>>>27),C=k+(A^D&(E^A))+b[14]+3275163606&4294967295,k=E+(C<<9&4294967295|C>>>23),C=D+(E^A&(k^E))+b[3]+4107603335&4294967295,D=k+(C<<14&4294967295|C>>>18),C=A+(k^E&(D^k))+b[8]+1163531501&4294967295,A=D+(C<<20&4294967295|C>>>12),C=E+(D^k&(A^D))+b[13]+2850285829&4294967295,E=A+(C<<5&4294967295|C>>>27),C=k+(A^D&(E^A))+b[2]+4243563512&4294967295,k=E+(C<<9&4294967295|C>>>23),C=D+(E^A&(k^E))+b[7]+1735328473&4294967295,D=k+(C<<14&4294967295|C>>>18),C=A+(k^E&(D^k))+b[12]+2368359562&4294967295,A=D+(C<<20&4294967295|C>>>12),C=E+(A^D^k)+b[5]+4294588738&4294967295,E=A+(C<<4&4294967295|C>>>28),C=k+(E^A^D)+b[8]+2272392833&4294967295,k=E+(C<<11&4294967295|C>>>21),C=D+(k^E^A)+b[11]+1839030562&4294967295,D=k+(C<<16&4294967295|C>>>16),C=A+(D^k^E)+b[14]+4259657740&4294967295,A=D+(C<<23&4294967295|C>>>9),C=E+(A^D^k)+b[1]+2763975236&4294967295,E=A+(C<<4&4294967295|C>>>28),C=k+(E^A^D)+b[4]+1272893353&4294967295,k=E+(C<<11&4294967295|C>>>21),C=D+(k^E^A)+b[7]+4139469664&4294967295,D=k+(C<<16&4294967295|C>>>16),C=A+(D^k^E)+b[10]+3200236656&4294967295,A=D+(C<<23&4294967295|C>>>9),C=E+(A^D^k)+b[13]+681279174&4294967295,E=A+(C<<4&4294967295|C>>>28),C=k+(E^A^D)+b[0]+3936430074&4294967295,k=E+(C<<11&4294967295|C>>>21),C=D+(k^E^A)+b[3]+3572445317&4294967295,D=k+(C<<16&4294967295|C>>>16),C=A+(D^k^E)+b[6]+76029189&4294967295,A=D+(C<<23&4294967295|C>>>9),C=E+(A^D^k)+b[9]+3654602809&4294967295,E=A+(C<<4&4294967295|C>>>28),C=k+(E^A^D)+b[12]+3873151461&4294967295,k=E+(C<<11&4294967295|C>>>21),C=D+(k^E^A)+b[15]+530742520&4294967295,D=k+(C<<16&4294967295|C>>>16),C=A+(D^k^E)+b[2]+3299628645&4294967295,A=D+(C<<23&4294967295|C>>>9),C=E+(D^(A|~k))+b[0]+4096336452&4294967295,E=A+(C<<6&4294967295|C>>>26),C=k+(A^(E|~D))+b[7]+1126891415&4294967295,k=E+(C<<10&4294967295|C>>>22),C=D+(E^(k|~A))+b[14]+2878612391&4294967295,D=k+(C<<15&4294967295|C>>>17),C=A+(k^(D|~E))+b[5]+4237533241&4294967295,A=D+(C<<21&4294967295|C>>>11),C=E+(D^(A|~k))+b[12]+1700485571&4294967295,E=A+(C<<6&4294967295|C>>>26),C=k+(A^(E|~D))+b[3]+2399980690&4294967295,k=E+(C<<10&4294967295|C>>>22),C=D+(E^(k|~A))+b[10]+4293915773&4294967295,D=k+(C<<15&4294967295|C>>>17),C=A+(k^(D|~E))+b[1]+2240044497&4294967295,A=D+(C<<21&4294967295|C>>>11),C=E+(D^(A|~k))+b[8]+1873313359&4294967295,E=A+(C<<6&4294967295|C>>>26),C=k+(A^(E|~D))+b[15]+4264355552&4294967295,k=E+(C<<10&4294967295|C>>>22),C=D+(E^(k|~A))+b[6]+2734768916&4294967295,D=k+(C<<15&4294967295|C>>>17),C=A+(k^(D|~E))+b[13]+1309151649&4294967295,A=D+(C<<21&4294967295|C>>>11),C=E+(D^(A|~k))+b[4]+4149444226&4294967295,E=A+(C<<6&4294967295|C>>>26),C=k+(A^(E|~D))+b[11]+3174756917&4294967295,k=E+(C<<10&4294967295|C>>>22),C=D+(E^(k|~A))+b[2]+718787259&4294967295,D=k+(C<<15&4294967295|C>>>17),C=A+(k^(D|~E))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.u=function(I,E){E===void 0&&(E=I.length);for(var A=E-this.blockSize,b=this.B,D=this.h,k=0;k<E;){if(D==0)for(;k<=A;)i(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<E;)if(b[D++]=I.charCodeAt(k++),D==this.blockSize){i(this,b),D=0;break}}else for(;k<E;)if(b[D++]=I[k++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;var A=8*this.o;for(E=I.length-8;E<I.length;++E)I[E]=A&255,A/=256;for(this.u(I),I=Array(16),E=A=0;4>E;++E)for(var b=0;32>b;b+=8)I[A++]=this.g[E]>>>b&255;return I};function s(I,E){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=E(I)}function o(I,E){this.h=E;for(var A=[],b=!0,D=I.length-1;0<=D;D--){var k=I[D]|0;b&&k==E||(A[D]=k,b=!1)}this.g=A}var a={};function l(I){return-128<=I&&128>I?s(I,function(E){return new o([E|0],0>E?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return S(c(-I));for(var E=[],A=1,b=0;I>=A;b++)E[b]=I/A|0,A*=4294967296;return new o(E,0)}function h(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return S(h(I.substring(1),E));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(E,8)),b=d,D=0;D<I.length;D+=8){var k=Math.min(8,I.length-D),C=parseInt(I.substring(D,D+k),E);8>k?(k=c(Math.pow(E,k)),b=b.j(k).add(c(C))):(b=b.j(A),b=b.add(c(C)))}return b}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var I=0,E=1,A=0;A<this.g.length;A++){var b=this.i(A);I+=(0<=b?b:4294967296+b)*E,E*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(v(this))return"-"+S(this).toString(I);for(var E=c(Math.pow(I,6)),A=this,b="";;){var D=P(A,E).g;A=w(A,D.j(E));var k=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=D,_(A))return k+b;for(;6>k.length;)k="0"+k;b=k+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=w(this,I),v(I)?-1:_(I)?0:1};function S(I){for(var E=I.g.length,A=[],b=0;b<E;b++)A[b]=~I.g[b];return new o(A,~I.h).add(f)}t.abs=function(){return v(this)?S(this):this},t.add=function(I){for(var E=Math.max(this.g.length,I.g.length),A=[],b=0,D=0;D<=E;D++){var k=b+(this.i(D)&65535)+(I.i(D)&65535),C=(k>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);b=C>>>16,k&=65535,C&=65535,A[D]=C<<16|k}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(I,E){return I.add(S(E))}t.j=function(I){if(_(this)||_(I))return d;if(v(this))return v(I)?S(this).j(S(I)):S(S(this).j(I));if(v(I))return S(this.j(S(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var E=this.g.length+I.g.length,A=[],b=0;b<2*E;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<I.g.length;D++){var k=this.i(b)>>>16,C=this.i(b)&65535,K=I.i(D)>>>16,q=I.i(D)&65535;A[2*b+2*D]+=C*q,y(A,2*b+2*D),A[2*b+2*D+1]+=k*q,y(A,2*b+2*D+1),A[2*b+2*D+1]+=C*K,y(A,2*b+2*D+1),A[2*b+2*D+2]+=k*K,y(A,2*b+2*D+2)}for(b=0;b<E;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=E;b<2*E;b++)A[b]=0;return new o(A,0)};function y(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function T(I,E){this.g=I,this.h=E}function P(I,E){if(_(E))throw Error("division by zero");if(_(I))return new T(d,d);if(v(I))return E=P(S(I),E),new T(S(E.g),S(E.h));if(v(E))return E=P(I,S(E)),new T(S(E.g),E.h);if(30<I.g.length){if(v(I)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var A=f,b=E;0>=b.l(I);)A=x(A),b=x(b);var D=O(A,1),k=O(b,1);for(b=O(b,2),A=O(A,2);!_(b);){var C=k.add(b);0>=C.l(I)&&(D=D.add(A),k=C),b=O(b,1),A=O(A,1)}return E=w(I,D.j(E)),new T(D,E)}for(D=d;0<=I.l(E);){for(A=Math.max(1,Math.floor(I.m()/E.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),k=c(A),C=k.j(E);v(C)||0<C.l(I);)A-=b,k=c(A),C=k.j(E);_(k)&&(k=f),D=D.add(k),I=w(I,C)}return new T(D,I)}t.A=function(I){return P(this,I).h},t.and=function(I){for(var E=Math.max(this.g.length,I.g.length),A=[],b=0;b<E;b++)A[b]=this.i(b)&I.i(b);return new o(A,this.h&I.h)},t.or=function(I){for(var E=Math.max(this.g.length,I.g.length),A=[],b=0;b<E;b++)A[b]=this.i(b)|I.i(b);return new o(A,this.h|I.h)},t.xor=function(I){for(var E=Math.max(this.g.length,I.g.length),A=[],b=0;b<E;b++)A[b]=this.i(b)^I.i(b);return new o(A,this.h^I.h)};function x(I){for(var E=I.g.length+1,A=[],b=0;b<E;b++)A[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(A,I.h)}function O(I,E){var A=E>>5;E%=32;for(var b=I.g.length-A,D=[],k=0;k<b;k++)D[k]=0<E?I.i(k+A)>>>E|I.i(k+A+1)<<32-E:I.i(k+A);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,vs=o}).apply(typeof ST<"u"?ST:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AR,bR,gl,RR,gh,hg,PR,DR,CR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var N=u[R];if(!(N in g))break e;g=g[N]}u=u[u.length-1],R=g[u],p=p(R),p!=R&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,R=!1,N={next:function(){if(!R&&g<u.length){var U=g++;return{value:p(U,u[U]),done:!1}}return R=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,R),u.apply(p,N)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function _(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(R,N,U){for(var ee=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ee[Pe-2]=arguments[Pe];return p.prototype[N].apply(R,ee)}}function v(u){const p=u.length;if(0<p){const g=Array(p);for(let R=0;R<p;R++)g[R]=u[R];return g}return[]}function S(u,p){for(let g=1;g<arguments.length;g++){const R=arguments[g];if(l(R)){const N=u.length||0,U=R.length||0;u.length=N+U;for(let ee=0;ee<U;ee++)u[N+ee]=R[ee]}else u.push(R)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var x=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function O(u,p,g){for(const R in u)p.call(g,u[R],R,u)}function I(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function E(u){const p={};for(const g in u)p[g]=u[g];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,p){let g,R;for(let N=1;N<arguments.length;N++){R=arguments[N];for(g in R)u[g]=R[g];for(let U=0;U<A.length;U++)g=A[U],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function D(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function k(u){a.setTimeout(()=>{throw u},0)}function C(){var u=G;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class K{constructor(){this.h=this.g=null}add(p,g){const R=q.get();R.set(p,g),this.h?this.h.next=R:this.g=R,this.h=R}}var q=new w(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,$=!1,G=new K,Q=()=>{const u=a.Promise.resolve(void 0);Y=()=>{u.then(oe)}};var oe=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){k(g)}var p=q;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}$=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function J(u,p){if(B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(x){e:{try{P(p.nodeName);var N=!0;break e}catch{}N=!1}N||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&J.aa.h.call(this)}}_(J,B);var re={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ge=0;function _e(u,p,g,R,N){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!R,this.ha=N,this.key=++ge,this.da=this.fa=!1}function Re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ye(u){this.src=u,this.g={},this.h=0}Ye.prototype.add=function(u,p,g,R,N){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var ee=Ft(u,p,R,N);return-1<ee?(p=u[ee],g||(p.fa=!1)):(p=new _e(p,this.src,U,!!R,N),p.fa=g,u.push(p)),p};function Lt(u,p){var g=p.type;if(g in u.g){var R=u.g[g],N=Array.prototype.indexOf.call(R,p,void 0),U;(U=0<=N)&&Array.prototype.splice.call(R,N,1),U&&(Re(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Ft(u,p,g,R){for(var N=0;N<u.length;++N){var U=u[N];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==R)return N}return-1}var Bi="closure_lm_"+(1e6*Math.random()|0),zi={};function ka(u,p,g,R,N){if(Array.isArray(p)){for(var U=0;U<p.length;U++)ka(u,p[U],g,R,N);return null}return g=Oa(g),u&&u[ce]?u.K(p,g,c(R)?!!R.capture:!!R,N):sc(u,p,g,!1,R,N)}function sc(u,p,g,R,N,U){if(!p)throw Error("Invalid event type");var ee=c(N)?!!N.capture:!!N,Pe=Ys(u);if(Pe||(u[Bi]=Pe=new Ye(u)),g=Pe.add(p,g,R,ee,U),g.proxy)return g;if(R=zf(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)H||(N=ee),N===void 0&&(N=!1),u.addEventListener(p.toString(),R,N);else if(u.attachEvent)u.attachEvent(ji(p.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function zf(){function u(g){return p.call(u.src,u.listener,g)}const p=ac;return u}function oc(u,p,g,R,N){if(Array.isArray(p))for(var U=0;U<p.length;U++)oc(u,p[U],g,R,N);else R=c(R)?!!R.capture:!!R,g=Oa(g),u&&u[ce]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],g=Ft(U,g,R,N),-1<g&&(Re(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ys(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ft(p,g,R,N)),(g=-1<u?p[u]:null)&&Vn(g))}function Vn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ce])Lt(p.i,u);else{var g=u.type,R=u.proxy;p.removeEventListener?p.removeEventListener(g,R,u.capture):p.detachEvent?p.detachEvent(ji(g),R):p.addListener&&p.removeListener&&p.removeListener(R),(g=Ys(p))?(Lt(g,u),g.h==0&&(g.src=null,p[Bi]=null)):Re(u)}}}function ji(u){return u in zi?zi[u]:zi[u]="on"+u}function ac(u,p){if(u.da)u=!0;else{p=new J(p,this);var g=u.listener,R=u.ha||u.src;u.fa&&Vn(u),u=g.call(R,p)}return u}function Ys(u){return u=u[Bi],u instanceof Ye?u:null}var qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oa(u){return typeof u=="function"?u:(u[qi]||(u[qi]=function(p){return u.handleEvent(p)}),u[qi])}function lt(){L.call(this),this.i=new Ye(this),this.M=this,this.F=null}_(lt,L),lt.prototype[ce]=!0,lt.prototype.removeEventListener=function(u,p,g,R){oc(this,u,p,g,R)};function ft(u,p){var g,R=u.F;if(R)for(g=[];R;R=R.F)g.push(R);if(u=u.M,R=p.type||p,typeof p=="string")p=new B(p,u);else if(p instanceof B)p.target=p.target||u;else{var N=p;p=new B(R,u),b(p,N)}if(N=!0,g)for(var U=g.length-1;0<=U;U--){var ee=p.g=g[U];N=Wi(ee,R,!0,p)&&N}if(ee=p.g=u,N=Wi(ee,R,!0,p)&&N,N=Wi(ee,R,!1,p)&&N,g)for(U=0;U<g.length;U++)ee=p.g=g[U],N=Wi(ee,R,!1,p)&&N}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],R=0;R<g.length;R++)Re(g[R]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,g,R){return this.i.add(String(u),p,!1,g,R)},lt.prototype.L=function(u,p,g,R){return this.i.add(String(u),p,!0,g,R)};function Wi(u,p,g,R){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var N=!0,U=0;U<p.length;++U){var ee=p[U];if(ee&&!ee.da&&ee.capture==g){var Pe=ee.listener,Tt=ee.ha||ee.src;ee.fa&&Lt(u.i,ee),N=Pe.call(Tt,R)!==!1&&N}}return N&&!R.defaultPrevented}function N_(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function M_(u){u.g=N_(()=>{u.g=null,u.i&&(u.i=!1,M_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class IC extends L{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:M_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(u){L.call(this),this.h=u,this.g={}}_(Na,L);var V_=[];function $_(u){O(u.g,function(p,g){this.g.hasOwnProperty(g)&&Vn(p)},u),u.g={}}Na.prototype.N=function(){Na.aa.N.call(this),$_(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jf=a.JSON.stringify,AC=a.JSON.parse,bC=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function qf(){}qf.prototype.h=null;function L_(u){return u.h||(u.h=u.i())}function F_(){}var Ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wf(){B.call(this,"d")}_(Wf,B);function Gf(){B.call(this,"c")}_(Gf,B);var Gi={},U_=null;function lc(){return U_=U_||new lt}Gi.La="serverreachability";function B_(u){B.call(this,Gi.La,u)}_(B_,B);function Va(u){const p=lc();ft(p,new B_(p))}Gi.STAT_EVENT="statevent";function z_(u,p){B.call(this,Gi.STAT_EVENT,u),this.stat=p}_(z_,B);function Ut(u){const p=lc();ft(p,new z_(p,u))}Gi.Ma="timingevent";function j_(u,p){B.call(this,Gi.Ma,u),this.size=p}_(j_,B);function $a(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function RC(u,p,g,R,N,U){u.info(function(){if(u.g)if(U)for(var ee="",Pe=U.split("&"),Tt=0;Tt<Pe.length;Tt++){var Te=Pe[Tt].split("=");if(1<Te.length){var Dt=Te[0];Te=Te[1];var Ct=Dt.split("_");ee=2<=Ct.length&&Ct[1]=="type"?ee+(Dt+"="+Te+"&"):ee+(Dt+"=redacted&")}}else ee=null;else ee=U;return"XMLHTTP REQ ("+R+") [attempt "+N+"]: "+p+`
`+g+`
`+ee})}function PC(u,p,g,R,N,U,ee){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+N+"]: "+p+`
`+g+`
`+U+" "+ee})}function Xs(u,p,g,R){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+CC(u,g)+(R?" "+R:"")})}function DC(u,p){u.info(function(){return"TIMEOUT: "+p})}La.prototype.info=function(){};function CC(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var R=g[u];if(!(2>R.length)){var N=R[1];if(Array.isArray(N)&&!(1>N.length)){var U=N[0];if(U!="noop"&&U!="stop"&&U!="close")for(var ee=1;ee<N.length;ee++)N[ee]=""}}}}return jf(g)}catch{return p}}var uc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hf;function cc(){}_(cc,qf),cc.prototype.g=function(){return new XMLHttpRequest},cc.prototype.i=function(){return{}},Hf=new cc;function zr(u,p,g,R){this.j=u,this.i=p,this.l=g,this.R=R||1,this.U=new Na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new W_}function W_(){this.i=null,this.g="",this.h=!1}var G_={},Kf={};function Qf(u,p,g){u.L=1,u.v=pc(dr(p)),u.m=g,u.P=!0,H_(u,null)}function H_(u,p){u.F=Date.now(),hc(u),u.A=dr(u.v);var g=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),aw(g.i,"t",R),u.C=0,g=u.j.J,u.h=new W_,u.g=Aw(u.j,g?p:null,!u.m),0<u.O&&(u.M=new IC(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,R=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(V_[0]=N.toString()),N=V_);for(var U=0;U<N.length;U++){var ee=ka(g,N[U],R||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Va(),RC(u.i,u.u,u.A,u.l,u.R,u.m)}zr.prototype.ca=function(u){u=u.target;const p=this.M;p&&fr(u)==3?p.j():this.Y(u)},zr.prototype.Y=function(u){try{if(u==this.g)e:{const Ct=fr(this.g);var p=this.g.Ba();const eo=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||pw(this.g)))){this.J||Ct!=4||p==7||(p==8||0>=eo?Va(3):Va(2)),Yf(this);var g=this.g.Z();this.X=g;t:if(K_(this)){var R=pw(this.g);u="";var N=R.length,U=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hi(this),Fa(this);var ee="";break t}this.h.i=new a.TextDecoder}for(p=0;p<N;p++)this.h.h=!0,u+=this.h.i.decode(R[p],{stream:!(U&&p==N-1)});R.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=g==200,PC(this.i,this.u,this.A,this.l,this.R,Ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Tt=this.g;if((Pe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Pe)){var Te=Pe;break t}}Te=null}if(g=Te)Xs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xf(this,g);else{this.o=!1,this.s=3,Ut(12),Hi(this),Fa(this);break e}}if(this.P){g=!0;let $n;for(;!this.J&&this.C<ee.length;)if($n=xC(this,ee),$n==Kf){Ct==4&&(this.s=4,Ut(14),g=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if($n==G_){this.s=4,Ut(15),Xs(this.i,this.l,ee,"[Invalid Chunk]"),g=!1;break}else Xs(this.i,this.l,$n,null),Xf(this,$n);if(K_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||ee.length!=0||this.h.h||(this.s=1,Ut(16),g=!1),this.o=this.o&&g,!g)Xs(this.i,this.l,ee,"[Invalid Chunked Response]"),Hi(this),Fa(this);else if(0<ee.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),rp(Dt),Dt.M=!0,Ut(11))}}else Xs(this.i,this.l,ee,null),Xf(this,ee);Ct==4&&Hi(this),this.o&&!this.J&&(Ct==4?Ew(this.j,this):(this.o=!1,hc(this)))}else KC(this.g),g==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Hi(this),Fa(this)}}}catch{}finally{}};function K_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xC(u,p){var g=u.C,R=p.indexOf(`
`,g);return R==-1?Kf:(g=Number(p.substring(g,R)),isNaN(g)?G_:(R+=1,R+g>p.length?Kf:(p=p.slice(R,R+g),u.C=R+g,p)))}zr.prototype.cancel=function(){this.J=!0,Hi(this)};function hc(u){u.S=Date.now()+u.I,Q_(u,u.I)}function Q_(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$a(f(u.ba,u),p)}function Yf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}zr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(DC(this.i,this.A),this.L!=2&&(Va(),Ut(17)),Hi(this),this.s=2,Fa(this)):Q_(this,this.S-u)};function Fa(u){u.j.G==0||u.J||Ew(u.j,u)}function Hi(u){Yf(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,$_(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Xf(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Jf(g.h,u))){if(!u.K&&Jf(g.h,u)&&g.G==3){try{var R=g.Da.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var N=R;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)_c(g),vc(g);else break e;np(g),Ut(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=$a(f(g.Za,g),6e3));if(1>=J_(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Qi(g,11)}else if((u.K||g.g==u)&&_c(g),!y(p))for(N=g.Da.g.parse(p),p=0;p<N.length;p++){let Te=N[p];if(g.T=Te[0],Te=Te[1],g.G==2)if(Te[0]=="c"){g.K=Te[1],g.ia=Te[2];const Dt=Te[3];Dt!=null&&(g.la=Dt,g.j.info("VER="+g.la));const Ct=Te[4];Ct!=null&&(g.Aa=Ct,g.j.info("SVER="+g.Aa));const eo=Te[5];eo!=null&&typeof eo=="number"&&0<eo&&(R=1.5*eo,g.L=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const $n=u.g;if($n){const Ec=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ec){var U=R.h;U.g||Ec.indexOf("spdy")==-1&&Ec.indexOf("quic")==-1&&Ec.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Zf(U,U.h),U.h=null))}if(R.D){const ip=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;ip&&(R.ya=ip,Oe(R.I,R.D,ip))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),R=g;var ee=u;if(R.qa=Iw(R,R.J?R.ia:null,R.W),ee.K){Z_(R.h,ee);var Pe=ee,Tt=R.L;Tt&&(Pe.I=Tt),Pe.B&&(Yf(Pe),hc(Pe)),R.g=ee}else _w(R);0<g.i.length&&yc(g)}else Te[0]!="stop"&&Te[0]!="close"||Qi(g,7);else g.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Qi(g,7):tp(g):Te[0]!="noop"&&g.l&&g.l.ta(Te),g.v=0)}}Va(4)}catch{}}var kC=class{constructor(u,p){this.g=u,this.map=p}};function Y_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function J_(u){return u.h?1:u.g?u.g.size:0}function Jf(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Zf(u,p){u.g?u.g.add(p):u.h=p}function Z_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Y_.prototype.cancel=function(){if(this.i=ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ew(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return v(u.i)}function OC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,R=0;R<g;R++)p.push(u[R]);return p}p=[],g=0;for(R in u)p[g++]=u[R];return p}function NC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const R in u)p[g++]=R;return p}}}function tw(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=NC(u),R=OC(u),N=R.length,U=0;U<N;U++)p.call(void 0,R[U],g&&g[U],u)}var nw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MC(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var R=u[g].indexOf("="),N=null;if(0<=R){var U=u[g].substring(0,R);N=u[g].substring(R+1)}else U=u[g];p(U,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ki(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ki){this.h=u.h,dc(this,u.j),this.o=u.o,this.g=u.g,fc(this,u.s),this.l=u.l;var p=u.i,g=new za;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),rw(this,g),this.m=u.m}else u&&(p=String(u).match(nw))?(this.h=!1,dc(this,p[1]||"",!0),this.o=Ua(p[2]||""),this.g=Ua(p[3]||"",!0),fc(this,p[4]),this.l=Ua(p[5]||"",!0),rw(this,p[6]||"",!0),this.m=Ua(p[7]||"")):(this.h=!1,this.i=new za(null,this.h))}Ki.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ba(p,iw,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ba(p,iw,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ba(g,g.charAt(0)=="/"?LC:$C,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ba(g,UC)),u.join("")};function dr(u){return new Ki(u)}function dc(u,p,g){u.j=g?Ua(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function rw(u,p,g){p instanceof za?(u.i=p,BC(u.i,u.h)):(g||(p=Ba(p,FC)),u.i=new za(p,u.h))}function Oe(u,p,g){u.i.set(p,g)}function pc(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ua(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ba(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,VC),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function VC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var iw=/[#\/\?@]/g,$C=/[#\?:]/g,LC=/[#\?]/g,FC=/[#\?@]/g,UC=/#/g;function za(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function jr(u){u.g||(u.g=new Map,u.h=0,u.i&&MC(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=za.prototype,t.add=function(u,p){jr(this),this.i=null,u=Js(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function sw(u,p){jr(u),p=Js(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ow(u,p){return jr(u),p=Js(u,p),u.g.has(p)}t.forEach=function(u,p){jr(this),this.g.forEach(function(g,R){g.forEach(function(N){u.call(p,N,R,this)},this)},this)},t.na=function(){jr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let R=0;R<p.length;R++){const N=u[R];for(let U=0;U<N.length;U++)g.push(p[R])}return g},t.V=function(u){jr(this);let p=[];if(typeof u=="string")ow(this,u)&&(p=p.concat(this.g.get(Js(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return jr(this),this.i=null,u=Js(this,u),ow(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function aw(u,p,g){sw(u,p),0<g.length&&(u.i=null,u.g.set(Js(u,p),v(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var R=p[g];const U=encodeURIComponent(String(R)),ee=this.V(R);for(R=0;R<ee.length;R++){var N=U;ee[R]!==""&&(N+="="+encodeURIComponent(String(ee[R]))),u.push(N)}}return this.i=u.join("&")};function Js(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function BC(u,p){p&&!u.j&&(jr(u),u.i=null,u.g.forEach(function(g,R){var N=R.toLowerCase();R!=N&&(sw(this,R),aw(this,N,g))},u)),u.j=p}function zC(u,p){const g=new La;if(a.Image){const R=new Image;R.onload=m(qr,g,"TestLoadImage: loaded",!0,p,R),R.onerror=m(qr,g,"TestLoadImage: error",!1,p,R),R.onabort=m(qr,g,"TestLoadImage: abort",!1,p,R),R.ontimeout=m(qr,g,"TestLoadImage: timeout",!1,p,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else p(!1)}function jC(u,p){const g=new La,R=new AbortController,N=setTimeout(()=>{R.abort(),qr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:R.signal}).then(U=>{clearTimeout(N),U.ok?qr(g,"TestPingServer: ok",!0,p):qr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),qr(g,"TestPingServer: error",!1,p)})}function qr(u,p,g,R,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),R(g)}catch{}}function qC(){this.g=new bC}function WC(u,p,g){const R=g||"";try{tw(u,function(N,U){let ee=N;c(N)&&(ee=jf(N)),p.push(R+U+"="+encodeURIComponent(ee))})}catch(N){throw p.push(R+"type="+encodeURIComponent("_badmap")),N}}function ja(u){this.l=u.Ub||null,this.j=u.eb||!1}_(ja,qf),ja.prototype.g=function(){return new mc(this.l,this.j)},ja.prototype.i=function(u){return function(){return u}}({});function mc(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(mc,lt),t=mc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Wa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function lw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?qa(this):Wa(this),this.readyState==3&&lw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},t.Qa=function(u){this.g&&(this.response=u,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Wa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uw(u){let p="";return O(u,function(g,R){p+=R,p+=":",p+=g,p+=`\r
`}),p}function ep(u,p,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=uw(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Oe(u,p,g))}function Xe(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Xe,lt);var GC=/^https?$/i,HC=["POST","PUT"];t=Xe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hf.g(),this.v=this.o?L_(this.o):L_(Hf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){cw(this,U);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var N in R)g.set(N,R[N]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const U of R.keys())g.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(HC,p,void 0))||R||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ee]of g)this.g.setRequestHeader(U,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fw(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){cw(this,U)}};function cw(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,hw(u),gc(u)}function hw(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ft(this,"complete"),ft(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dw(this):this.bb())},t.bb=function(){dw(this)};function dw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||fr(u)!=4||u.Z()!=2)){if(u.u&&fr(u)==4)N_(u.Ea,0,u);else if(ft(u,"readystatechange"),fr(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var R;if(R=ee===0){var N=String(u.D).match(nw)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),R=!GC.test(N?N.toLowerCase():"")}g=R}if(g)ft(u,"complete"),ft(u,"success");else{u.m=6;try{var U=2<fr(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",hw(u)}}finally{gc(u)}}}}function gc(u,p){if(u.g){fw(u);const g=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ft(u,"ready");try{g.onreadystatechange=R}catch{}}}function fw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),AC(p)}};function pw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function KC(u){const p={};u=(u.g&&2<=fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(y(u[R]))continue;var g=D(u[R]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[N]||[];p[N]=U,U.push(g)}I(p,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function mw(u){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,u),this.cb=Ga("retryDelaySeedMs",1e4,u),this.Wa=Ga("forwardChannelMaxRetries",2,u),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Y_(u&&u.concurrentRequestLimit),this.Da=new qC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mw.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,R){Ut(0),this.W=u,this.H=p||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.I=Iw(this,null,this.W),yc(this)};function tp(u){if(gw(u),u.G==3){var p=u.U++,g=dr(u.I);if(Oe(g,"SID",u.K),Oe(g,"RID",p),Oe(g,"TYPE","terminate"),Ha(u,g),p=new zr(u,u.j,p),p.L=2,p.v=pc(dr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Aw(p.j,null),p.g.ea(p.v)),p.F=Date.now(),hc(p)}Sw(u)}function vc(u){u.g&&(rp(u),u.g.cancel(),u.g=null)}function gw(u){vc(u),u.u&&(a.clearTimeout(u.u),u.u=null),_c(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function yc(u){if(!X_(u.h)&&!u.s){u.s=!0;var p=u.Ga;Y||Q(),$||(Y(),$=!0),G.add(p,u),u.B=0}}function QC(u,p){return J_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$a(f(u.Ga,u,p),Tw(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new zr(this,this.j,u);let U=this.o;if(this.S&&(U?(U=E(U),b(U,this.S)):U=this.S),this.m!==null||this.O||(N.H=U,U=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=yw(this,N,p),g=dr(this.I),Oe(g,"RID",u),Oe(g,"CVER",22),this.D&&Oe(g,"X-HTTP-Session-Id",this.D),Ha(this,g),U&&(this.O?p="headers="+encodeURIComponent(String(uw(U)))+"&"+p:this.m&&ep(g,this.m,U)),Zf(this.h,N),this.Ua&&Oe(g,"TYPE","init"),this.P?(Oe(g,"$req",p),Oe(g,"SID","null"),N.T=!0,Qf(N,g,null)):Qf(N,g,p),this.G=2}}else this.G==3&&(u?vw(this,u):this.i.length==0||X_(this.h)||vw(this))};function vw(u,p){var g;p?g=p.l:g=u.U++;const R=dr(u.I);Oe(R,"SID",u.K),Oe(R,"RID",g),Oe(R,"AID",u.T),Ha(u,R),u.m&&u.o&&ep(R,u.m,u.o),g=new zr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=yw(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zf(u.h,g),Qf(g,R,p)}function Ha(u,p){u.H&&O(u.H,function(g,R){Oe(p,R,g)}),u.l&&tw({},function(g,R){Oe(p,R,g)})}function yw(u,p,g){g=Math.min(u.i.length,g);var R=u.l?f(u.l.Na,u.l,u):null;e:{var N=u.i;let U=-1;for(;;){const ee=["count="+g];U==-1?0<g?(U=N[0].g,ee.push("ofs="+U)):U=0:ee.push("ofs="+U);let Pe=!0;for(let Tt=0;Tt<g;Tt++){let Te=N[Tt].g;const Dt=N[Tt].map;if(Te-=U,0>Te)U=Math.max(0,N[Tt].g-100),Pe=!1;else try{WC(Dt,ee,"req"+Te+"_")}catch{R&&R(Dt)}}if(Pe){R=ee.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,R}function _w(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Y||Q(),$||(Y(),$=!0),G.add(p,u),u.v=0}}function np(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$a(f(u.Fa,u),Tw(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ww(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$a(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),vc(this),ww(this))};function rp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ww(u){u.g=new zr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=dr(u.qa);Oe(p,"RID","rpc"),Oe(p,"SID",u.K),Oe(p,"AID",u.T),Oe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(p,"TO",u.ja),Oe(p,"TYPE","xmlhttp"),Ha(u,p),u.m&&u.o&&ep(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=pc(dr(p)),g.m=null,g.P=!0,H_(g,u)}t.Za=function(){this.C!=null&&(this.C=null,vc(this),np(this),Ut(19))};function _c(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ew(u,p){var g=null;if(u.g==p){_c(u),rp(u),u.g=null;var R=2}else if(Jf(u.h,p))g=p.D,Z_(u.h,p),R=1;else return;if(u.G!=0){if(p.o)if(R==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var N=u.B;R=lc(),ft(R,new j_(R,g)),yc(u)}else _w(u);else if(N=p.s,N==3||N==0&&0<p.X||!(R==1&&QC(u,p)||R==2&&np(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),N){case 1:Qi(u,5);break;case 4:Qi(u,10);break;case 3:Qi(u,6);break;default:Qi(u,2)}}}function Tw(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function Qi(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),R=u.Xa;const N=!R;R=new Ki(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dc(R,"https"),pc(R),N?zC(R.toString(),g):jC(R.toString(),g)}else Ut(2);u.G=0,u.l&&u.l.sa(p),Sw(u),gw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Sw(u){if(u.G=0,u.ka=[],u.l){const p=ew(u.h);(p.length!=0||u.i.length!=0)&&(S(u.ka,p),S(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Iw(u,p,g){var R=g instanceof Ki?dr(g):new Ki(g);if(R.g!="")p&&(R.g=p+"."+R.g),fc(R,R.s);else{var N=a.location;R=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;var U=new Ki(null);R&&dc(U,R),p&&(U.g=p),N&&fc(U,N),g&&(U.l=g),R=U}return g=u.D,p=u.ya,g&&p&&Oe(R,g,p),Oe(R,"VER",u.la),Ha(u,R),R}function Aw(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Xe(new ja({eb:g})):new Xe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bw(){}t=bw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wc(){}wc.prototype.g=function(u,p){return new pn(u,p)};function pn(u,p){lt.call(this),this.g=new mw(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!y(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Zs(this)}_(pn,lt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){tp(this.g)},pn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=jf(u),u=g);p.i.push(new kC(p.Ya++,u)),p.G==3&&yc(p)},pn.prototype.N=function(){this.g.l=null,delete this.j,tp(this.g),delete this.g,pn.aa.N.call(this)};function Rw(u){Wf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(Rw,Wf);function Pw(){Gf.call(this),this.status=1}_(Pw,Gf);function Zs(u){this.g=u}_(Zs,bw),Zs.prototype.ua=function(){ft(this.g,"a")},Zs.prototype.ta=function(u){ft(this.g,new Rw(u))},Zs.prototype.sa=function(u){ft(this.g,new Pw)},Zs.prototype.ra=function(){ft(this.g,"b")},wc.prototype.createWebChannel=wc.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,CR=function(){return new wc},DR=function(){return lc()},PR=Gi,hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uc.NO_ERROR=0,uc.TIMEOUT=8,uc.HTTP_ERROR=6,gh=uc,q_.COMPLETE="complete",RR=q_,F_.EventType=Ma,Ma.OPEN="a",Ma.CLOSE="b",Ma.ERROR="c",Ma.MESSAGE="d",lt.prototype.listen=lt.prototype.K,gl=F_,bR=ja,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,AR=Xe}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const IT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="10.13.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new _y("@firebase/firestore");function lo(){return Ei.logLevel}function uK(t){Ei.setLogLevel(t)}function W(t,...e){if(Ei.logLevel<=ve.DEBUG){const n=e.map(Iy);Ei.debug(`Firestore (${Sa}): ${t}`,...n)}}function it(t,...e){if(Ei.logLevel<=ve.ERROR){const n=e.map(Iy);Ei.error(`Firestore (${Sa}): ${t}`,...n)}}function Hn(t,...e){if(Ei.logLevel<=ve.WARN){const n=e.map(Iy);Ei.warn(`Firestore (${Sa}): ${t}`,...n)}}function Iy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function ae(t,e){t||ie()}function cK(t,e){t||ie()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class dK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fK{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new xR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new gt(e)}}class pK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mK{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.R=n.token,new gK(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function OR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new qe(0,0))}static max(){return new ue(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends vu{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const _K=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends vu{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return _K.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(pe.fromString(e))}static fromName(e){return new te(pe.fromString(e).popFirst(5))}static empty(){return new te(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new pe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function dg(t){return t.fields.find(e=>e.kind===2)}function ts(t){return t.fields.filter(e=>e.kind!==2)}hd.UNKNOWN_ID=-1;class vh{constructor(e,n){this.fieldPath=e,this.kind=n}}class yu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new yu(0,En.min())}}function NR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new En(i,te.empty(),e)}function MR(t){return new En(t.readTime,t.key,-1)}class En{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new En(ue.min(),te.empty(),-1)}static max(){return new En(ue.max(),te.empty(),-1)}}function Ay(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==VR)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new xl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=by(r.target.error);this.V.reject(new xl(e,i))}}static open(e,n,r,i){try{return new mf(n,e.transaction(i,r))}catch(s){throw new xl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new EK(n)}}class sr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,sr.S(ud())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),rs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hR())return!1;if(sr.v())return!0;const e=ud(),n=sr.S(e),r=0<n&&n<10,i=LR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new xl(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=mf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function LR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class wK{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rs(this.B.delete())}}class xl extends j{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function $i(t){return t.name==="IndexedDbTransactionError"}class EK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rs(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),rs(this.store.add(e))}get(e){return rs(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),rs(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),rs(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=by(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new wK(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function rs(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=by(r.target.error);n(i)}})}let AT=!1;function by(t){const e=sr.S(ud());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AT||(AT=!0,setTimeout(()=>{throw r},0)),r}}return t}class TK{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){$i(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Vi(n)}await this.X(6e4)})}}class SK{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=MR(s);Ay(o,r)>0&&(r=o)}),new En(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sn.oe=-1;function Gu(t){return t==null}function _u(t){return t===0&&1/t==-1/0}function FR(t){return typeof t=="number"&&Number.isInteger(t)&&!_u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bT(e)),e=IK(t.get(n),e);return bT(e)}function IK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function bT(t){return t+""}function Zn(t){const e=t.length;if(ae(e>=2),e===2)return ae(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ie(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ie()}s=o+2}return new pe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e){return[t,Kt(e)]}function UR(t,e,n){return[t,Kt(e),n]}const AK={},bK=["prefixPath","collectionGroup","readTime","documentId"],RK=["prefixPath","collectionGroup","documentId"],PK=["collectionGroup","readTime","prefixPath","documentId"],DK=["canonicalId","targetId"],CK=["targetId","path"],xK=["path","targetId"],kK=["collectionId","parent"],OK=["indexId","uid"],NK=["uid","sequenceNumber"],MK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VK=["indexId","uid","orderedDocumentKey"],$K=["userId","collectionPath","documentId"],LK=["userId","collectionPath","largestBatchId"],FK=["userId","collectionGroup","largestBatchId"],BR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UK=[...BR,"documentOverlays"],zR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jR=zR,Ry=[...jR,"indexConfiguration","indexState","indexEntries"],BK=Ry,zK=[...Ry,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends $R{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function dt(t,e){const n=ne(t);return sr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new It(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(e){return new DT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new be(this.comparator);return n.data=e,n}}class DT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function no(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new on([])}unionWith(e){let n=new be(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WR("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const qK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ae(!!t),typeof t=="string"){let e=0;const n=qK.exec(t);if(ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Py(t){const e=t.mapValue.fields.__previous_value__;return gf(e)?Py(e):e}function wu(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Si{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Si("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Si&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_h={nullValue:"NULL_VALUE"};function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gf(t)?4:GR(t)?9007199254740991:vf(t)?10:11:ie()}function ur(t,e){if(t===e)return!0;const n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wu(t).isEqual(wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),a=Nr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ti(i.bytesValue).isEqual(Ti(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),a=Fe(s.doubleValue);return o===a?_u(o)===_u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(PT(o)!==PT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ur(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Eu(t,e){return(t.values||[]).find(n=>ur(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=ks(t),r=ks(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fe(s.integerValue||s.doubleValue),l=Fe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return CT(t.timestampValue,e.timestampValue);case 4:return CT(wu(t),wu(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ti(s),l=Ti(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Fe(s.latitude),Fe(o.latitude));return a!==0?a:he(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=he(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:xT(m,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ii.mapValue&&o===ii.mapValue)return 0;if(s===ii.mapValue)return 1;if(o===ii.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=he(l[d],h[d]);if(f!==0)return f;const m=Ii(a[l[d]],c[h[d]]);if(m!==0)return m}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function CT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Nr(t),r=Nr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function xT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ii(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Jo(t){return pg(t)}function pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=pg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${pg(n.fields[o])}`;return i+"}"}(t.mapValue):ie()}function Os(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mg(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function kT(t){return!!t&&"nullValue"in t}function OT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wh(t){return!!t&&"mapValue"in t}function vf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=kl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const HR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function GK(t){return"nullValue"in t?_h:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Os(Si.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?vf(t)?HR:{mapValue:{}}:ie()}function HK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Os(Si.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HR:"mapValue"in t?vf(t)?{mapValue:{}}:ii:ie()}function NT(t,e){const n=Ii(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MT(t,e){const n=Ii(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=kl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new At(kl(this.value))}}function KR(t){const e=[];return Ws(t.fields,(n,r)=>{const i=new ze([n]);if(wh(r)){const s=KR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ve(e,0,ue.min(),ue.min(),ue.min(),At.empty(),0)}static newFoundDocument(e,n,r,i){return new Ve(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Ve(e,2,n,ue.min(),ue.min(),At.empty(),0)}static newUnknownDocument(e,n){return new Ve(e,3,n,ue.min(),ue.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ve&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ve(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.position=e,this.inclusive=n}}function VT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Ii(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $T(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function KK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{}class me extends QR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new QK(e,n,r):n==="array-contains"?new JK(e,r):n==="in"?new tP(e,r):n==="not-in"?new ZK(e,r):n==="array-contains-any"?new e8(e,r):new me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YK(e,r):new XK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ii(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends QR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Se(e,n)}matches(e){return Zo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zo(t){return t.op==="and"}function gg(t){return t.op==="or"}function Dy(t){return YR(t)&&Zo(t)}function YR(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}function vg(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(Dy(t))return t.filters.map(e=>vg(e)).join(",");{const e=t.filters.map(n=>vg(n)).join(",");return`${t.op}(${e})`}}function XR(t,e){return t instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XR(o,i.filters[a]),!0):!1}(t,e):void ie()}function JR(t,e){const n=t.filters.concat(e);return Se.create(n,t.op)}function ZR(t){return t instanceof me?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(ZR).join(" ,")+"}"}(t):"Filter"}class QK extends me{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class YK extends me{constructor(e,n){super(e,"in",n),this.keys=eP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XK extends me{constructor(e,n){super(e,"not-in",n),this.keys=eP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class JK extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tu(n)&&Eu(n.arrayValue,this.value)}}class tP extends me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eu(this.value.arrayValue,n)}}class ZK extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Eu(this.value.arrayValue,n)}}class e8 extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Eu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function yg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new t8(t,e,n,r,i,s,o)}function Ns(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.ue=n}return e.ue}function Hu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$T(t.startAt,e.startAt)&&$T(t.endAt,e.endAt)}function dd(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fd(t,e){return t.filters.filter(n=>n instanceof me&&n.field.isEqual(e))}function LT(t,e,n){let r=_h,i=!0;for(const s of fd(t,e)){let o=_h,a=!0;switch(s.op){case"<":case"<=":o=GK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=_h}NT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];NT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function FT(t,e,n){let r=ii,i=!0;for(const s of fd(t,e)){let o=ii,a=!0;switch(s.op){case">=":case">":o=HK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ii}MT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];MT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nP(t,e,n,r,i,s,o,a){return new Lr(t,e,n,r,i,s,o,a)}function Ia(t){return new Lr(t)}function UT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cy(t){return t.collectionGroup!==null}function Oo(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new be(ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Su(s,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new Su(ze.keyField(),r))}return e.ce}function Qt(t){const e=ne(t);return e.le||(e.le=n8(e,Oo(t))),e.le}function n8(t,e){if(t.limitType==="F")return yg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Su(i.field,s)});const n=t.endAt?new Ai(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ai(t.startAt.position,t.startAt.inclusive):null;return yg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _g(t,e){const n=t.filters.concat([e]);return new Lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pd(t,e,n){return new Lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ku(t,e){return Hu(Qt(t),Qt(e))&&t.limitType===e.limitType}function rP(t){return`${Ns(Qt(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZR(i)).join(", ")}]`),Gu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jo(i)).join(",")),`Target(${r})`}(Qt(t))}; limitType=${t.limitType})`}function Qu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=VT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Oo(r),i)||r.endAt&&!function(o,a,l){const c=VT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Oo(r),i))}(t,e)}function iP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sP(t){return(e,n)=>{let r=!1;for(const i of Oo(t)){const s=r8(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r8(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ii(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new ke(te.comparator);function an(){return i8}const oP=new ke(te.comparator);function vl(...t){let e=oP;for(const n of t)e=e.insert(n.key,n);return e}function aP(t){let e=oP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function er(){return Ol()}function lP(){return Ol()}function Ol(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}const s8=new ke(te.comparator),o8=new be(te.comparator);function de(...t){let e=o8;for(const n of t)e=e.add(n);return e}const a8=new be(he);function xy(){return a8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function uP(t){return{integerValue:""+t}}function cP(t,e){return FR(e)?uP(e):ky(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function l8(t,e,n){return t instanceof ea?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gf(s)&&(s=Py(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ms?dP(t,e):t instanceof Vs?fP(t,e):function(i,s){const o=hP(i,s),a=BT(o)+BT(i.Pe);return mg(o)&&mg(i.Pe)?uP(a):ky(i.serializer,a)}(t,e)}function u8(t,e,n){return t instanceof Ms?dP(t,e):t instanceof Vs?fP(t,e):n}function hP(t,e){return t instanceof ta?function(r){return mg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ea extends yf{}class Ms extends yf{constructor(e){super(),this.elements=e}}function dP(t,e){const n=pP(e);for(const r of t.elements)n.some(i=>ur(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vs extends yf{constructor(e){super(),this.elements=e}}function fP(t,e){let n=pP(e);for(const r of t.elements)n=n.filter(i=>!ur(i,r));return{arrayValue:{values:n}}}class ta extends yf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function BT(t){return Fe(t.integerValue||t.doubleValue)}function pP(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.field=e,this.transform=n}}function c8(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ms&&i instanceof Ms||r instanceof Vs&&i instanceof Vs?Xo(r.elements,i.elements,ur):r instanceof ta&&i instanceof ta?ur(r.Pe,i.Pe):r instanceof ea&&i instanceof ea}(t.transform,e.transform)}class h8{constructor(e,n){this.version=e,this.transformResults=n}}class je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new je}static exists(e){return new je(void 0,e)}static updateTime(e){return new je(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _f{}function mP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ba(t.key,je.none()):new Aa(t.key,t.data,je.none());{const n=t.data,r=At.empty();let i=new be(ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fr(t.key,r,new on(i.toArray()),je.none())}}function d8(t,e,n){t instanceof Aa?function(i,s,o){const a=i.value.clone(),l=jT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(i,s,o){if(!Eh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=jT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gP(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,r){return t instanceof Aa?function(s,o,a,l){if(!Eh(s.precondition,o))return a;const c=s.value.clone(),h=qT(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(s,o,a,l){if(!Eh(s.precondition,o))return a;const c=qT(s.fieldTransforms,l,o),h=o.data;return h.setAll(gP(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Eh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function f8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=hP(r.transform,i||null);s!=null&&(n===null&&(n=At.empty()),n.set(r.field,s))}return n||null}function zT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xo(r,i,(s,o)=>c8(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Aa extends _f{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fr extends _f{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jT(t,e,n){const r=new Map;ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u8(o,a,n[i]))}return r}function qT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,l8(s,o,e))}return r}class ba extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oy extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&d8(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=mP(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,r)=>zT(n,r))&&Xo(this.baseMutations,e.baseMutations,(n,r)=>zT(n,r))}}class My{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length);let i=function(){return s8}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new My(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ye;function vP(t){switch(t){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function yP(t){if(t===void 0)return it("GRPC error has no .code"),F.UNKNOWN;switch(t){case ot.OK:return F.OK;case ot.CANCELLED:return F.CANCELLED;case ot.UNKNOWN:return F.UNKNOWN;case ot.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ot.INTERNAL:return F.INTERNAL;case ot.UNAVAILABLE:return F.UNAVAILABLE;case ot.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ot.NOT_FOUND:return F.NOT_FOUND;case ot.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ot.ABORTED:return F.ABORTED;case ot.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ot.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(ye=ot||(ot={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=new vs([4294967295,4294967295],0);function WT(t){const e=_P().encode(t),n=new IR;return n.update(e),new Uint8Array(n.digest())}function GT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vs([n,r],0),new vs([i,s],0)]}class $y{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(r<0)throw new yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(vs.fromNumber(r)));return i.compare(m8)===1&&(i=new vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=WT(e),[r,i]=GT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $y(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=WT(e),[r,i]=GT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xu(ue.min(),i,new ke(he),an(),de())}}class Ju{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ju(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class wP{constructor(e,n){this.targetId=e,this.me=n}}class EP{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HT{constructor(){this.fe=0,this.ge=QT(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new Ju(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=QT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g8{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=KT(),this.Qe=new ke(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(dd(s))if(r===0){const o=new te(s.path);this.Ue(n,o,Ve.newNoDocument(o,ue.min()))}else ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ti(r).toUint8Array()}catch(l){if(l instanceof WR)return Hn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $y(o,i,s)}catch(l){return Hn(l instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&dd(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ve.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Xu(e,n,this.Qe,this.ke,r);return this.ke=an(),this.qe=KT(),this.Qe=new ke(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new HT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new be(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new HT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function KT(){return new ke(te.comparator)}function QT(){return new ke(te.comparator)}const v8={asc:"ASCENDING",desc:"DESCENDING"},y8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_8={and:"AND",or:"OR"};class w8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wg(t,e){return t.useProto3Json||Gu(e)?e:{value:e}}function na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E8(t,e){return na(t,e.toTimestamp())}function st(t){return ae(!!t),ue.fromTimestamp(function(n){const r=Nr(n);return new qe(r.seconds,r.nanos)}(t))}function Ly(t,e){return Eg(t,e).canonicalString()}function Eg(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SP(t){const e=pe.fromString(t);return ae(OP(e)),e}function Iu(t,e){return Ly(t.databaseId,e.path)}function or(t,e){const n=SP(e);if(n.get(1)!==t.databaseId.projectId)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(bP(n))}function IP(t,e){return Ly(t.databaseId,e)}function AP(t){const e=SP(t);return e.length===4?pe.emptyPath():bP(e)}function Tg(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bP(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YT(t,e,n){return{name:Iu(t,e),fields:n.value.mapValue.fields}}function RP(t,e,n){const r=or(t,e.name),i=st(e.updateTime),s=e.createTime?st(e.createTime):ue.min(),o=new At({mapValue:{fields:e.fields}}),a=Ve.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function T8(t,e){return"found"in e?function(r,i){ae(!!i.found),i.found.name,i.found.updateTime;const s=or(r,i.found.name),o=st(i.found.updateTime),a=i.found.createTime?st(i.found.createTime):ue.min(),l=new At({mapValue:{fields:i.found.fields}});return Ve.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ae(!!i.missing),ae(!!i.readTime);const s=or(r,i.missing),o=st(i.readTime);return Ve.newNoDocument(s,o)}(t,e):ie()}function S8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ae(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:yP(c.code);return new j(h,c.message||"")}(o);n=new EP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=or(t,r.document.name),s=st(r.document.updateTime),o=r.document.createTime?st(r.document.createTime):ue.min(),a=new At({mapValue:{fields:r.document.fields}}),l=Ve.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Th(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=or(t,r.document),s=r.readTime?st(r.readTime):ue.min(),o=Ve.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Th([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=or(t,r.document),s=r.removedTargetIds||[];n=new Th([],s,i,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new p8(i,s),a=r.targetId;n=new wP(a,o)}}return n}function Au(t,e){let n;if(e instanceof Aa)n={update:YT(t,e.key,e.value)};else if(e instanceof ba)n={delete:Iu(t,e.key)};else if(e instanceof Fr)n={update:YT(t,e.key,e.data),updateMask:D8(e.fieldMask)};else{if(!(e instanceof Oy))return ie();n={verify:Iu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ea)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ms)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:E8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(t,e.precondition)),n}function Sg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?je.updateTime(st(s.updateTime)):s.exists!==void 0?je.exists(s.exists):je.none()}(e.currentDocument):je.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ae(a.setToServerValue==="REQUEST_TIME"),l=new ea;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ms(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Vs(h)}else"increment"in a?l=new ta(o,a.increment):ie();const c=ze.fromServerFormat(a.fieldPath);return new Yu(c,l)}(t,i)):[];if(e.update){e.update.name;const i=or(t,e.update.name),s=new At({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new on(c.map(h=>ze.fromServerFormat(h)))}(e.updateMask);return new Fr(i,s,o,n,r)}return new Aa(i,s,n,r)}if(e.delete){const i=or(t,e.delete);return new ba(i,n)}if(e.verify){const i=or(t,e.verify);return new Oy(i,n)}return ie()}function I8(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?st(i.updateTime):st(s);return o.isEqual(ue.min())&&(o=st(s)),new h8(o,i.transformResults||[])}(n,e))):[]}function PP(t,e){return{documents:[IP(t,e.path)]}}function DP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IP(t,i);const s=function(c){if(c.length!==0)return kP(Se.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:co(f.field),direction:b8(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function CP(t){let e=AP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=xP(d);return f instanceof Se&&Dy(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new Su(ho(_.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Gu(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Ai(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Ai(m,f)}(n.endAt)),nP(e,i,o,s,a,"F",l,c)}function A8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ho(n.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ho(n.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ho(n.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ho(n.unaryFilter.field);return me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return me.create(ho(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>xP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function b8(t){return v8[t]}function R8(t){return y8[t]}function P8(t){return _8[t]}function co(t){return{fieldPath:t.canonicalString()}}function ho(t){return ze.fromServerFormat(t.fieldPath)}function kP(t){return t instanceof me?function(n){if(n.op==="=="){if(OT(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NAN"}};if(kT(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OT(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NOT_NAN"}};if(kT(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(n.field),op:R8(n.op),value:n.value}}}(t):t instanceof Se?function(n){const r=n.getFilters().map(i=>kP(i));return r.length===1?r[0]:{compositeFilter:{op:P8(n.op),filters:r}}}(t):ie()}function D8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.ct=e}}function C8(t,e){let n;if(e.document)n=RP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),i=Ls(e.noDocument.readTime);n=Ve.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{const r=te.fromSegments(e.unknownDocument.path),i=Ls(e.unknownDocument.version);n=Ve.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new qe(i[0],i[1]);return ue.fromTimestamp(s)}(e.readTime)),n}function XT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:md(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Iu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:na(s,o.version.toTimestamp()),createTime:na(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$s(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:n.path.toArray(),version:$s(e.version)}}return r}function md(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $s(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ls(t){const e=new qe(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function is(t,e){const n=(e.baseMutations||[]).map(s=>Sg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Sg(t.ct,s)),i=qe.fromMillis(e.localWriteTimeMs);return new Ny(e.batchId,i,n,r)}function _l(t){const e=Ls(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ls(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ae(s.documents.length===1),Qt(Ia(AP(s.documents[0])))}(t.query):function(s){return Qt(CP(s))}(t.query),new Sr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function MP(t,e){const n=$s(e.snapshotVersion),r=$s(e.lastLimboFreeSnapshotVersion);let i;i=dd(e.target)?PP(t.ct,e.target):DP(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ns(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fy(t){const e=CP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pd(e,e.limit,"L"):e}function Hp(t,e){return new Vy(e.largestBatchId,Sg(t.ct,e.overlayMutation))}function JT(t,e){const n=e.path.lastSegment();return[t,Kt(e.path.popLast()),n]}function ZT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$s(r.readTime),documentKey:Kt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{getBundleMetadata(e,n){return e1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ls(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return e1(e).put(function(i){return{bundleId:i.id,createTime:$s(st(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return t1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Fy(s.bundledQuery),readTime:Ls(s.readTime)}}(r)})}saveNamedQuery(e,n){return t1(e).put(function(i){return{name:i.name,readTime:$s(st(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function e1(t){return dt(t,"bundles")}function t1(t){return dt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new wf(e,r)}getOverlay(e,n){return sl(e).get(JT(this.userId,n)).next(r=>r?Hp(this.serializer,r):null)}getOverlays(e,n){const r=er();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Vy(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Kt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(sl(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=er(),s=Kt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return sl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Hp(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=er();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const d=Hp(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return sl(e).put(function(i,s,o){const[a,l,c]=JT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Au(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function sl(t){return dt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Fe(e.integerValue));else if("doubleValue"in e){const r=Fe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),_u(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Nr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ti(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?GR(e)?this.dt(n,Number.MAX_SAFE_INTEGER):vf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ie()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Fe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),te.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ss.vt=new ss;function O8(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function n1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=O8(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class N8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=n1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=n1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class M8{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class V8{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ol{constructor(){this.jt=new N8,this.Ht=new M8(this.jt),this.Jt=new V8(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new os(this.indexId,this.documentKey,this.arrayValue,r)}}function Kr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=r1(t.arrayValue,e.arrayValue),n!==0?n:(n=r1(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function r1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.Xt=new be((n,r)=>ze.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ae(e.collectionGroup===this.collectionId),this.nn)return!1;const n=dg(e);if(n!==void 0&&!this.sn(n))return!1;const r=ts(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new be(ze.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new vh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new vh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new vh(r.field,r.dir==="asc"?0:1)));return new hd(hd.UNKNOWN_ID,this.collectionId,n,yu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){var e,n;if(ae(t instanceof me||t instanceof Se),t instanceof me){if(t instanceof tP){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>me.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}const r=t.filters.map(i=>VP(i));return Se.create(r,t.op)}function $8(t){if(t.getFilters().length===0)return[];const e=bg(VP(t));return ae($P(e)),Ig(e)||Ag(e)?[e]:e.getFilters()}function Ig(t){return t instanceof me}function Ag(t){return t instanceof Se&&Dy(t)}function $P(t){return Ig(t)||Ag(t)||function(n){if(n instanceof Se&&gg(n)){for(const r of n.getFilters())if(!Ig(r)&&!Ag(r))return!1;return!0}return!1}(t)}function bg(t){if(ae(t instanceof me||t instanceof Se),t instanceof me)return t;if(t.filters.length===1)return bg(t.filters[0]);const e=t.filters.map(r=>bg(r));let n=Se.create(e,t.op);return n=gd(n),$P(n)?n:(ae(n instanceof Se),ae(Zo(n)),ae(n.filters.length>1),n.filters.reduce((r,i)=>Uy(r,i)))}function Uy(t,e){let n;return ae(t instanceof me||t instanceof Se),ae(e instanceof me||e instanceof Se),n=t instanceof me?e instanceof me?function(i,s){return Se.create([i,s],"and")}(t,e):s1(t,e):e instanceof me?s1(e,t):function(i,s){if(ae(i.filters.length>0&&s.filters.length>0),Zo(i)&&Zo(s))return JR(i,s.getFilters());const o=gg(i)?i:s,a=gg(i)?s:i,l=o.filters.map(c=>Uy(c,a));return Se.create(l,"or")}(t,e),gd(n)}function s1(t,e){if(Zo(e))return JR(e,t.getFilters());{const n=e.filters.map(r=>Uy(t,r));return Se.create(n,"or")}}function gd(t){if(ae(t instanceof me||t instanceof Se),t instanceof me)return t;const e=t.getFilters();if(e.length===1)return gd(e[0]);if(YR(t))return t;const n=e.map(i=>gd(i)),r=[];return n.forEach(i=>{i instanceof me?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(){this.un=new By}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(En.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(En.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class By{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new be(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Uint8Array(0);class F8{constructor(e,n){this.databaseId=n,this.cn=new By,this.ln=new Li(r=>Ns(r),(r,i)=>Hu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Kt(i)};return o1(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[OR(n),""],!1,!0);return o1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Zn(o.parent))}return r})}addFieldIndex(e,n){const r=al(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=io(e);return s.next(a=>{o.put(ZT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=al(e),i=io(e),s=ro(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=al(e),r=ro(e),i=io(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new i1(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ro(e);let i=!0;const s=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de();const a=[];return M.forEach(s,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${Ns(n)}`);const h=function(T,P){const x=dg(P);if(x===void 0)return null;for(const O of fd(T,x.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),d=function(T,P){const x=new Map;for(const O of ts(P))for(const I of fd(T,O.fieldPath))switch(I.op){case"==":case"in":x.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return x.set(O.fieldPath.canonicalString(),I.value),Array.from(x.values())}return null}(c,l),f=function(T,P){const x=[];let O=!0;for(const I of ts(P)){const E=I.kind===0?LT(T,I.fieldPath,T.startAt):FT(T,I.fieldPath,T.startAt);x.push(E.value),O&&(O=E.inclusive)}return new Ai(x,O)}(c,l),m=function(T,P){const x=[];let O=!0;for(const I of ts(P)){const E=I.kind===0?FT(T,I.fieldPath,T.endAt):LT(T,I.fieldPath,T.endAt);x.push(E.value),O&&(O=E.inclusive)}return new Ai(x,O)}(c,l),_=this.In(l,c,f),v=this.In(l,c,m),S=this.Tn(l,c,d),w=this.En(l.indexId,h,_,f.inclusive,v,m.inclusive,S);return M.forEach(w,y=>r.G(y,n.limit).next(T=>{T.forEach(P=>{const x=te.fromSegments(P.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=$8(Se.create(e.filters,"and")).map(r=>yg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.dn(n[d/c]):Gc,m=this.An(e,f,r[d%c],i),_=this.Rn(e,f,s[d%c],o),v=a.map(S=>this.An(e,f,S,!0));h.push(...this.createRange(m,_,v))}return h}An(e,n,r,i){const s=new os(e,te.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new os(e,te.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new i1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new be(ze.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new ol;for(const i of ts(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ss.vt.It(s,o)}return r.zt()}dn(e){const n=new ol;return ss.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new ol;return ss.vt.It(Os(this.databaseId,n),r.Yt(function(s){const o=ts(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new ol);let s=0;for(const o of ts(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Tu(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);ss.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new ol;l.seed(a.zt()),ss.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=al(e),i=io(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const f=d?new yu(d.sequenceNumber,new En(Ls(d.readTime),new te(Zn(d.documentKey)),d.largestBatchId)):yu.empty(),m=h.fields.map(([_,v])=>new vh(ze.fromServerFormat(_),v));return new hd(h.indexId,h.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=al(e),s=io(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(ZT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(c=>{const h=this.Sn(s,l);return c.isEqual(h)?M.resolve():this.bn(e,s,l,c,h)}))))})}Dn(e,n,r,i){return ro(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ro(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=ro(e);let s=new be(Kr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new os(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new be(Kr);const i=this.Vn(n,e);if(i==null)return r;const s=dg(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Tu(o))for(const a of o.arrayValue.values||[])r=r.add(new os(n.indexId,e.key,this.dn(a),i))}else r=r.add(new os(n.indexId,e.key,Gc,i));return r}bn(e,n,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,h,d,f){const m=l.getIterator(),_=c.getIterator();let v=no(m),S=no(_);for(;v||S;){let w=!1,y=!1;if(v&&S){const T=h(v,S);T<0?y=!0:T>0&&(w=!0)}else v!=null?y=!0:w=!0;w?(d(S),S=no(_)):y?(f(v),v=no(m)):(v=no(m),S=no(_))}}(i,s,Kr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return io(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Kr(o,a)).filter((o,a,l)=>!a||Kr(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Kr(o,e),l=Kr(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Gc,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Gc,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Kr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(a1)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||ie())).next(a1)}}function o1(t){return dt(t,"collectionParents")}function ro(t){return dt(t,"indexEntries")}function al(t){return dt(t,"indexConfiguration")}function io(t){return dt(t,"indexState")}function a1(t){ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Ay(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new En(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,d,f)=>(a++,f.delete()));s.push(l.next(()=>{ae(a===1)}));const c=[];for(const h of n.mutations){const d=UR(e,h.key.path,n.batchId);s.push(i.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function vd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Ef{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ae(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Ef(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=fo(e),o=Qr(e);return o.add({}).next(a=>{ae(typeof a=="number");const l=new Ny(a,n,r,i),c=function(m,_,v){const S=v.baseMutations.map(y=>Au(m.ct,y)),w=v.mutations.map(y=>Au(m.ct,y));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:S,mutations:w}}(this.serializer,this.userId,l),h=[];let d=new be((f,m)=>he(f.canonicalString(),m.canonicalString()));for(const f of i){const m=UR(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),h.push(o.put(c)),h.push(s.put(m,AK))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Qr(e).get(n).next(r=>r?(ae(r.userId===this.userId),is(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Qr(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ae(a.batchId>=r),s=is(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).U("userMutationsIndex",n).next(r=>r.map(i=>is(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=yh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return fo(e).J({range:i},(o,a,l)=>{const[c,h,d]=o,f=Zn(h);if(c===this.userId&&n.path.isEqual(f))return Qr(e).get(d).next(m=>{if(!m)throw ie();ae(m.userId===this.userId),s.push(is(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new be(he);const i=[];return n.forEach(s=>{const o=yh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=fo(e).J({range:a},(c,h,d)=>{const[f,m,_]=c,v=Zn(m);f===this.userId&&s.path.isEqual(v)?r=r.add(_):d.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=yh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new be(he);return fo(e).J({range:o},(l,c,h)=>{const[d,f,m]=l,_=Zn(f);d===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Qr(e).get(s).next(o=>{if(o===null)throw ie();ae(o.userId===this.userId),r.push(is(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return LP(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return fo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Zn(s[1]);i.push(l)}else a.done()}).next(()=>{ae(i.length===0)})})}containsKey(e,n){return FP(e,this.userId,n)}Nn(e){return UP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FP(t,e,n){const r=yh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return fo(t).J({range:s,H:!0},(a,l,c)=>{const[h,d,f]=a;h===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Qr(t){return dt(t,"mutations")}function fo(t){return dt(t,"documentMutations")}function UP(t){return dt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fs(0)}static kn(){return new Fs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Fs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ue.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>so(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ae(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return so(e).J((o,a)=>{const l=_l(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return so(e).J((r,i)=>{const s=_l(i);n(s)})}qn(e){return u1(e).get("targetGlobalKey").next(n=>(ae(n!==null),n))}Qn(e,n){return u1(e).put("targetGlobalKey",n)}Kn(e,n){return so(e).put(MP(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ns(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return so(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=_l(a);Hu(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ei(e);return n.forEach(o=>{const a=Kt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=ei(e);return M.forEach(n,s=>{const o=Kt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ei(e);let s=de();return i.J({range:r,H:!0},(o,a,l)=>{const c=Zn(o[1]),h=new te(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Kt(n.path),i=IDBKeyRange.bound([r],[OR(r)],!1,!0);let s=0;return ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return so(e).get(n).next(r=>r?_l(r):null)}}function so(t){return dt(t,"targets")}function u1(t){return dt(t,"targetGlobal")}function ei(t){return dt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class B8{constructor(e){this.Un=e,this.buffer=new be(c1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();c1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$i(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Vi(n)}await this.Hn(3e5)})}}class j8{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(sn.oe);const r=new B8(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(l1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),lo()<=ve.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function q8(t,e){return new j8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.db=e,this.garbageCollector=q8(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Hc(e,r)}removeReference(e,n,r){return Hc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Hc(e,n)}nr(e,n){return function(i,s){let o=!1;return UP(i).Y(a=>FP(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),ei(e).delete(function(d){return[0,Kt(d.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Hc(e,n)}tr(e,n){const r=ei(e);let i,s=sn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==sn.oe&&n(new te(Zn(i)),s),s=c,i=l):s=sn.oe}).next(()=>{s!==sn.oe&&n(new te(Zn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hc(t,e){return ei(t).put(function(r,i){return{targetId:0,path:Kt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ve.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Yi(e).put(r)}removeEntry(e,n,r){return Yi(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],md(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ve.newInvalidDocument(n);return Yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ll(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Ve.newInvalidDocument(n)};return Yi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ll(n))},(i,s)=>{r={document:this.ir(n,s),size:vd(s)}}).next(()=>r)}getEntries(e,n){let r=an();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=an(),i=new ke(te.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,vd(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let i=new be(f1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ll(i.first()),ll(i.last())),o=i.getIterator();let a=o.getNext();return Yi(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const d=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&f1(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(ll(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),md(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yi(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=an();for(const d of c){const f=this.ir(te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Qu(n,f)||i.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=an();const o=d1(n,r),a=d1(n,En.max());return Yi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const d=this.ir(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new H8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return h1(e).get("remoteDocumentGlobalKey").next(n=>(ae(!!n),n))}rr(e,n){return h1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=C8(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return Ve.newInvalidDocument(e)}}function zP(t){return new G8(t)}class H8 extends BP{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Li(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new be((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=XT(this.cr.serializer,o);i=i.add(s.path.popLast());const c=vd(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=XT(this.cr.serializer,o.convertToNoDocument(ue.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function h1(t){return dt(t,"remoteDocumentGlobal")}function Yi(t){return dt(t,"remoteDocumentsV14")}function ll(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function d1(t,e){const n=e.documentKey.path.toArray();return[t,md(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function f1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nl(r.mutation,i,on.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=er();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=er();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=an();const o=Ol(),a=function(){return Ol()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Fr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Nl(h.mutation,c,h.mutation.getFieldMask(),qe.now())):o.set(c.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new K8(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ol();let i=new ke((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||on.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=lP();h.forEach(f=>{if(!s.has(f)){const m=mP(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(er());let a=-1,l=s;return o.next(c=>M.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(h=>({batchId:a,changes:aP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(d,f){return new Lr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ve.newInvalidDocument(h)))});let a=vl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Nl(h.mutation,c,on.empty(),qe.now()),Qu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:st(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Fy(i.bundledQuery),readTime:st(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.overlays=new ke(te.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=er();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=er(),s=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=er(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=er(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vy(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.Tr=new be(pt.Er),this.dr=new be(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new pe([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new pe([])),r=new pt(n,e),i=new pt(n,e+1);let s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new be(pt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ny(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new be(he);return n.forEach(i=>{const s=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new pt(new te(s),0);let a=new be(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new pt(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.Mr=e,this.docs=function(){return new ke(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Ve.newInvalidDocument(n))}getEntries(e,n){let r=an();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ve.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=an();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ay(MR(h),r)<=0||(i.has(h.key)||Qu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ie()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new e7(this)}getSize(e){return M.resolve(this.size)}}class e7 extends BP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e){this.persistence=e,this.Nr=new Li(n=>Ns(n),Hu),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zy,this.targetCount=0,this.kr=Fs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sn(0),this.Kr=!1,this.Kr=!0,this.$r=new X8,this.referenceDelegate=e(this),this.Ur=new t7(this),this.indexManager=new L8,this.remoteDocumentCache=function(i){return new Z8(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new NP(n),this.Gr=new Q8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new J8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new n7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class n7 extends $R{constructor(e){super(),this.currentSequenceNumber=e}}class Tf{constructor(e){this.persistence=e,this.Jr=new zy,this.Yr=null}static Zr(e){return new Tf(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.serializer=e}O(e,n,r,i){const s=new mf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0}),l.createObjectStore("documentMutations")}(e),p1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),p1(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RT,{unique:!0});const d=c.store("mutations"),f=h.map(m=>d.put(m));return M.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:$K});c.createIndex("collectionPathOverlayIndex",LK,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",FK,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:bK});c.createIndex("documentKeyIndex",RK),c.createIndex("collectionGroupIndex",PK)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:OK}).createIndex("sequenceNumberIndex",NK,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:MK}).createIndex("documentKeyIndex",VK,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=vd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{ae(l.userId===s.userId);const c=is(this.serializer,l);return LP(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new pe(o),c=function(d){return[0,Kt(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:Kt(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:kK});const r=n.store("collectionParents"),i=new By,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Kt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new pe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=Zn(a);return s(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=_l(i),o=MP(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new te(pe.fromString(d.document.name).popFirst(5)):d.noDocument?te.fromSegments(d.noDocument.path):d.unknownDocument?te.fromSegments(d.unknownDocument.path):ie()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=zP(this.serializer),s=new qP(Tf.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=(c=a.get(l.userId))!==null&&c!==void 0?c:de();is(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),M.forEach(a,(l,c)=>{const h=new gt(c),d=wf.lt(this.serializer,h),f=s.getIndexManager(h),m=Ef.lt(h,this.serializer,f,s.referenceDelegate);return new jP(i,m,d,f).recalculateAndSaveOverlaysForDocumentKeys(new fg(n,sn.oe),l).next()})})}}function p1(t){t.createObjectStore("targetDocuments",{keyPath:CK}).createIndex("documentTargetsIndex",xK,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DK,{unique:!0}),t.createObjectStore("targetGlobal")}const Kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jy{constructor(e,n,r,i,s,o,a,l,c,h,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=h,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!jy.D())throw new j(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new W8(this,i),this.Ai=n+"main",this.serializer=new NP(l),this.Ri=new sr(this.Ai,this.hi,new r7(this.serializer)),this.$r=new k8,this.Ur=new U8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zP(this.serializer),this.Gr=new x8,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,Kp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new sn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if($i(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ul(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return Kc(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=dt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):ul(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,Kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kc(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new fg(e,sn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Kc(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Ef.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F8(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return wf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?zK:l===16?BK:l===15?Ry:l===14?jR:l===13?zR:l===12?UK:l===11?BR:void ie()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new fg(a,this.Qr?this.Qr.next():sn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(F.FAILED_PRECONDITION,VR);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ul(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(F.FAILED_PRECONDITION,Kp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ul(e).put("owner",n)}static D(){return sr.D()}bi(e){const n=ul(e);return n.get("owner").next(r=>this.vi(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(it(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;cR()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return it("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ul(t){return dt(t,"owner")}function Kc(t){return dt(t,"clientMetadata")}function qy(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Wy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cR()?8:LR(ud())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new i7;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(lo()<=ve.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(lo()<=ve.DEBUG&&W("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(lo()<=ve.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(n))):M.resolve())}Yi(e,n){if(UT(n))return M.resolve(null);let r=Qt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pd(n,null,"F"),r=Qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,pd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return UT(n)||i.isEqual(ue.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(lo()<=ve.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(n)),this.rs(e,o,n,NR(i,-1)).next(a=>a))})}ts(e,n){let r=new be(sP(e));return n.forEach((i,s)=>{Qu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return lo()<=ve.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,En.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(he),this._s=new Li(s=>Ns(s),Hu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GP(t,e,n,r){return new s7(t,e,n,r)}async function HP(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function o7(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=M.resolve();return f.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(v=>{const S=c.docVersions.get(_);ae(S!==null),v.version.compareTo(S)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KP(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function a7(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(et.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(v,S,w){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=an(),c=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(QP(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function QP(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=an();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function l7(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ra(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ia(t,e,n){const r=ne(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$i(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function yd(t,e,n){const r=ne(t);let i=ue.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ne(l),f=d._s.get(h);return f!==void 0?M.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,Qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:de())).next(a=>(JP(r,iP(e),a),{documents:a,Ts:s})))}function YP(t,e){const n=ne(t),r=ne(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function XP(t,e){const n=ne(t),r=n.us.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,NR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(JP(n,e,i),i))}function JP(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function u7(t,e,n,r){const i=ne(t);let s=de(),o=an();for(const c of n){const h=e.Es(c.metadata.name);c.document&&(s=s.add(h));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(h,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await ra(i,function(h){return Qt(Ia(pe.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>QP(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.Ps,h.Is)).next(()=>h.Ps)))}async function c7(t,e,n=de()){const r=await ra(t,Qt(Fy(e.bundledQuery))),i=ne(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=st(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(et.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function m1(t,e){return`firestore_clients_${t}_${e}`}function g1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qp(t,e){return`firestore_targets_${t}_${e}`}class _d{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new _d(e,n,i.state,s):(it("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ml{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Ml(e,r.state,i):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=xy();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=FR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wd(e,s):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Gy{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Gy(n.clientId,n.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rg{constructor(){this.activeTargetIds=xy()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yp{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(he),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=m1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Rg),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(m1(this.persistenceKey,r));if(i){const s=wd.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qp(this.persistenceKey,e));if(i){const s=Ml.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=sn.oe;if(s!=null)try{const a=JSON.parse(s);ae(typeof a=="number"),o=a}catch(a){it("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==sn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new _d(this.currentUser,e,n,r),s=g1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=g1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Qp(this.persistenceKey,e),s=new Ml(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return wd.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _d.Rs(new gt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Ml.Rs(i,n)}Ls(e){return Gy.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=xy();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class ZP{constructor(){this.so=new Rg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Rg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Xp(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class p7 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Xp(),l=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Hn("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=d7[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Xp();return new Promise((o,a)=>{const l=new AR;l.setWithCredentials(!0),l.listenOnce(RR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gh.NO_ERROR:const h=l.getResponseJson();W(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case gh.TIMEOUT:W(Nt,`RPC '${e}' ${s} timed out`),a(new j(F.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const d=l.getStatus();if(W(Nt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(m.status);a(new j(_,m.message))}else a(new j(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new j(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(Nt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Xp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CR(),a=DR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new bR({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new f7({Io:S=>{m?W(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(W(Nt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),W(Nt,`RPC '${e}' stream ${i} sending:`,S),d.send(S))},To:()=>d.close()}),v=(S,w,y)=>{S.listen(w,T=>{try{y(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(d,gl.EventType.OPEN,()=>{m||(W(Nt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),v(d,gl.EventType.CLOSE,()=>{m||(m=!0,W(Nt,`RPC '${e}' stream ${i} transport closed`),_.So())}),v(d,gl.EventType.ERROR,S=>{m||(m=!0,Hn(Nt,`RPC '${e}' stream ${i} transport errored:`,S),_.So(new j(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,gl.EventType.MESSAGE,S=>{var w;if(!m){const y=S.data[0];ae(!!y);const T=y,P=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(P){W(Nt,`RPC '${e}' stream ${i} received error:`,P);const x=P.status;let O=function(A){const b=ot[A];if(b!==void 0)return yP(b)}(x),I=P.message;O===void 0&&(O=F.INTERNAL,I="Unknown error status: "+x+" with message "+P.message),m=!0,_.So(new j(O,I)),d.close()}else W(Nt,`RPC '${e}' stream ${i} received:`,y),_.bo(y)}}),v(a,PR.STAT_EVENT,S=>{S.stat===hg.PROXY?W(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===hg.NOPROXY&&W(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof window<"u"?window:null}function Sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){return new w8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new j(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m7 extends tD{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=S8(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?st(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=dd(l)?{documents:PP(s,l)}:{query:DP(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TP(s,o.resumeToken);const c=wg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=na(s,o.snapshotVersion.toTimestamp());const c=wg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=A8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.a_(n)}}class g7 extends tD{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=I8(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Tg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Au(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Eg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Eg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class y7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(it(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Fi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await Ra(c),c.q_.set("Unknown"),c.L_.delete(4),await ec(c)}(this))})}),this.q_=new y7(r,i)}}async function ec(t){if(Fi(t))for(const e of t.B_)await e(!0)}async function Ra(t){for(const e of t.B_)await e(!1)}function Sf(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yy(n)?Qy(n):Da(n).r_()&&Ky(n,e))}function sa(t,e){const n=ne(t),r=Da(n);n.N_.delete(e),r.r_()&&nD(n,e),n.N_.size===0&&(r.r_()?r.o_():Fi(n)&&n.q_.set("Unknown"))}function Ky(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Da(t).A_(e)}function nD(t,e){t.Q_.xe(e),Da(t).R_(e)}function Qy(t){t.Q_=new g8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Da(t).start(),t.q_.v_()}function Yy(t){return Fi(t)&&!Da(t).n_()&&t.N_.size>0}function Fi(t){return ne(t).L_.size===0}function rD(t){t.Q_=void 0}async function w7(t){t.q_.set("Online")}async function E7(t){t.N_.forEach((e,n)=>{Ky(t,e)})}async function T7(t,e){rD(t),Yy(t)?(t.q_.M_(e),Qy(t)):t.q_.set("Unknown")}async function S7(t,e,n){if(t.q_.set("Online"),e instanceof EP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ed(t,r)}else if(e instanceof Th?t.Q_.Ke(e):e instanceof wP?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await KP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),nD(s,l);const d=new Sr(h.target,l,c,h.sequenceNumber);Ky(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Ed(t,r)}}async function Ed(t,e,n){if(!$i(e))throw e;t.L_.add(1),await Ra(t),t.q_.set("Offline"),n||(n=()=>KP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ec(t)})}function iD(t,e){return e().catch(n=>Ed(t,n,e))}async function Pa(t){const e=ne(t),n=bi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;I7(e);)try{const i=await l7(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,A7(e,i)}catch(i){await Ed(e,i)}sD(e)&&oD(e)}function I7(t){return Fi(t)&&t.O_.length<10}function A7(t,e){t.O_.push(e);const n=bi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sD(t){return Fi(t)&&!bi(t).n_()&&t.O_.length>0}function oD(t){bi(t).start()}async function b7(t){bi(t).p_()}async function R7(t){const e=bi(t);for(const n of t.O_)e.m_(n.mutations)}async function P7(t,e,n){const r=t.O_.shift(),i=My.from(r,e,n);await iD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pa(t)}async function D7(t,e){e&&bi(t).V_&&await async function(r,i){if(function(o){return vP(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();bi(r).s_(),await iD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Pa(r)}}(t,e),sD(t)&&oD(t)}async function y1(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Fi(n);n.L_.add(3),await Ra(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ec(n)}async function Pg(t,e){const n=ne(t);e?(n.L_.delete(2),await ec(n)):e||(n.L_.add(2),await Ra(n),n.q_.set("Unknown"))}function Da(t){return t.K_||(t.K_=function(n,r,i){const s=ne(n);return s.w_(),new m7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:w7.bind(null,t),Ro:E7.bind(null,t),mo:T7.bind(null,t),d_:S7.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yy(t)?Qy(t):t.q_.set("Unknown")):(await t.K_.stop(),rD(t))})),t.K_}function bi(t){return t.U_||(t.U_=function(n,r,i){const s=ne(n);return s.w_(),new g7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b7.bind(null,t),mo:D7.bind(null,t),f_:R7.bind(null,t),g_:P7.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pa(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ca(t,e){if(it("AsyncQueue",`${e}: ${t}`),$i(t))return new j(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=vl(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new No(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new No;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.W_=new ke(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oa(e,n,No.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class x7{constructor(){this.queries=w1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=w1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new j(F.ABORTED,"Firestore shutting down"))}}function w1(){return new Li(t=>rP(t),Ku)}async function Jy(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new C7,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ca(o,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&e_(n)}async function Zy(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k7(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&e_(n)}function O7(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function e_(t){t.Y_.forEach(e=>{e.next()})}var Dg,E1;(E1=Dg||(Dg={})).ea="default",E1.Cache="cache";class t_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.serializer=e}Es(e){return or(this.serializer,e)}ds(e){return e.metadata.exists?RP(this.serializer,e.document,!1):Ve.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return st(e)}}class M7{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aD(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new T1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||de()).add(s);n.set(o,a)}}return n}async complete(){const e=await u7(this.localStore,new T1(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await c7(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function aD(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.key=e}}class uD{constructor(e){this.key=e}}class cD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=sP(e),this.Ra=new No(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=Qu(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let S=!1;f&&m?f.data.isEqual(m.data)?_!==v&&(r.track({type:3,doc:m}),S=!0):this.ga(f,m)||(r.track({type:2,doc:m}),S=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),S=!0):f&&!m&&(r.track({type:1,doc:f}),S=!0,(l||c)&&(a=!0)),S&&(m?(o=o.add(m),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,_){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return v(m)-v(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new oa(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uD(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lD(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class V7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $7{constructor(e){this.key=e,this.va=!1}}class L7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Li(a=>rP(a),Ku),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(te.comparator),this.Na=new Map,this.La=new zy,this.Ba={},this.ka=new Map,this.qa=Fs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function F7(t,e,n=!0){const r=If(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await hD(r,e,n,!0),i}async function U7(t,e){const n=If(t);await hD(n,e,!0,!1)}async function hD(t,e,n,r){const i=await ra(t.localStore,Qt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await n_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Sf(t.remoteStore,i),a}async function n_(t,e,n,r,i){t.Ka=(d,f,m)=>async function(v,S,w,y){let T=S.view.ma(w);T.ns&&(T=await yd(v.localStore,S.query,!1).then(({documents:I})=>S.view.ma(I,T)));const P=y&&y.targetChanges.get(S.targetId),x=y&&y.targetMismatches.get(S.targetId)!=null,O=S.view.applyChanges(T,v.isPrimaryClient,P,x);return Cg(v,S.targetId,O.wa),O.snapshot}(t,d,f,m);const s=await yd(t.localStore,e,!0),o=new cD(e,s.Ts),a=o.ma(s.documents),l=Ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Cg(t,n,c.wa);const h=new V7(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function B7(t,e,n){const r=ne(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ku(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ia(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sa(r.remoteStore,i.targetId),aa(r,i.targetId)}).catch(Vi)):(aa(r,i.targetId),await ia(r.localStore,i.targetId,!0))}async function z7(t,e){const n=ne(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sa(n.remoteStore,r.targetId))}async function j7(t,e,n){const r=o_(t);try{const i=await function(o,a){const l=ne(o),c=qe.now(),h=a.reduce((m,_)=>m.add(_.key),de());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=an(),v=de();return l.cs.getEntries(m,h).next(S=>{_=S,_.forEach((w,y)=>{y.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(S=>{d=S;const w=[];for(const y of a){const T=f8(y,d.get(y.key).overlayedDocument);T!=null&&w.push(new Fr(y.key,T,KR(T.value.mapValue),je.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(S=>{f=S;const w=S.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,S.batchId,w)})}).then(()=>({batchId:f.batchId,changes:aP(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ke(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ur(r,i.changes),await Pa(r.remoteStore)}catch(i){const s=Ca(i,"Failed to persist write");n.reject(s)}}async function dD(t,e){const n=ne(t);try{const r=await a7(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ae(o.va):i.removedDocuments.size>0&&(ae(o.va),o.va=!1))}),await Ur(n,r,e)}catch(r){await Vi(r)}}function S1(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&e_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q7(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke(te.comparator);o=o.insert(s,Ve.newNoDocument(s,ue.min()));const a=de().add(s),l=new Xu(ue.min(),new Map,new ke(he),o,a);await dD(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),s_(r)}else await ia(r.localStore,e,!1).then(()=>aa(r,e,n)).catch(Vi)}async function W7(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await o7(n.localStore,e);i_(n,r,null),r_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ur(n,i)}catch(i){await Vi(i)}}async function G7(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ae(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);i_(r,e,n),r_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ur(r,i)}catch(i){await Vi(i)}}async function H7(t,e){const n=ne(t);Fi(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=ne(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Ca(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function r_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function i_(t,e,n){const r=ne(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fD(t,r)})}function fD(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),s_(t))}function Cg(t,e,n){for(const r of n)r instanceof lD?(t.La.addReference(r.key,e),K7(t,r)):r instanceof uD?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fD(t,r.key)):ie()}function K7(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),s_(t))}function s_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(pe.fromString(e)),r=t.qa.next();t.Na.set(r,new $7(n)),t.Oa=t.Oa.insert(n,r),Sf(t.remoteStore,new Sr(Qt(Ia(n.path)),r,"TargetPurposeLimboResolution",sn.oe))}}async function Ur(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Wy.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>M.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!$i(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),_=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,v)}}}(r.localStore,s))}async function Q7(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await HP(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new j(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ur(n,r.hs)}}function Y7(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function X7(t,e){const n=ne(t),r=await yd(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Cg(n,e.targetId,i.wa),i}async function J7(t,e){const n=ne(t);return XP(n.localStore,e).then(r=>Ur(n,r))}async function Z7(t,e,n,r){const i=ne(t),s=await function(a,l){const c=ne(a),h=ne(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.Mn(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Pa(i.remoteStore):n==="acknowledged"||n==="rejected"?(i_(i,e,r||null),r_(i,e),function(a,l){ne(ne(a).mutationQueue).On(l)}(i.localStore,e)):ie(),await Ur(i,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function eQ(t,e){const n=ne(t);if(If(n),o_(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await I1(n,r.toArray());n.Qa=!0,await Pg(n.remoteStore,!0);for(const s of i)Sf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(aa(n,o),ia(n.localStore,o,!0))),sa(n.remoteStore,o)}),await i,await I1(n,r),function(o){const a=ne(o);a.Na.forEach((l,c)=>{sa(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new ke(te.comparator)}(n),n.Qa=!1,await Pg(n.remoteStore,!1)}}async function I1(t,e,n){const r=ne(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await ra(r.localStore,Qt(l[0]));for(const c of l){const h=r.Fa.get(c),d=await X7(r,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await YP(r.localStore,o);a=await ra(r.localStore,c),await n_(r,pD(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function pD(t){return nP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tQ(t){return function(n){return ne(ne(n).persistence).Qi()}(ne(t).localStore)}async function nQ(t,e,n,r){const i=ne(t);if(i.Qa)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await XP(i.localStore,iP(s[0])),a=Xu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await Ur(i,o,a);break}case"rejected":await ia(i.localStore,e,!0),aa(i,e,r);break;default:ie()}}async function rQ(t,e,n){const r=If(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}const s=await YP(r.localStore,i),o=await ra(r.localStore,s);await n_(r,pD(s),o.targetId,!1,o.resumeToken),Sf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await ia(r.localStore,i,!1).then(()=>{sa(r.remoteStore,i),aa(r,i)}).catch(Vi)}}function If(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q7.bind(null,e),e.Ca.d_=k7.bind(null,e.eventManager),e.Ca.$a=O7.bind(null,e.eventManager),e}function o_(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G7.bind(null,e),e}function iQ(t,e,n){const r=ne(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,_){const v=ne(m),S=st(_.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",w=>v.Gr.getBundleMetadata(w,_.id)).then(w=>!!w&&w.createTime.compareTo(S)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(aD(l));const c=new M7(l,s.localStore,o.serializer);let h=await o.Ua();for(;h;){const f=await c.la(h);f&&a._updateProgress(f),h=await o.Ua()}const d=await c.complete();return await Ur(s,d.Ia,void 0),await function(m,_){const v=ne(m);return v.persistence.runTransaction("Save bundle","readwrite",S=>v.Gr.saveBundleMetadata(S,_))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return Hn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class xg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GP(this.persistence,new WP,e.initialUser,this.serializer)}createPersistence(e){return new qP(Tf.Zr,this.serializer)}createSharedClientState(e){return new ZP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class mD extends xg{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Wa.initialize(this,e),await o_(this.Wa.syncEngine),await Pa(this.Wa.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return GP(this.persistence,new WP,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new z8(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new SK(n,this.persistence);return new TK(e.asyncQueue,r)}createPersistence(e){const n=qy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new jy(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,eD(),Sh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ZP}}class sQ extends mD{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Wa.syncEngine;this.sharedClientState instanceof Yp&&(this.sharedClientState.syncEngine={no:Z7.bind(null,n),ro:nQ.bind(null,n),io:rQ.bind(null,n),Qi:tQ.bind(null,n),eo:J7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await eQ(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=eD();if(!Yp.D(n))throw new j(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class a_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q7.bind(null,this.syncEngine),await Pg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x7}()}createDatastore(e){const n=Zu(e.databaseInfo.databaseId),r=function(s){return new p7(s)}(e.databaseInfo);return function(s,o,a,l){return new v7(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new _7(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>S1(this.syncEngine,n,0),function(){return v1.D()?new v1:new h7}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new L7(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ra(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new yt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.Ja()}async Ja(){const e=await this.Ya();if(e===null)return null;const n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);const i=await this.Xa(r);return new N7(JSON.parse(i),e.length+r)}eu(){return this.buffer.findIndex(e=>e===123)}async Ya(){for(;this.eu()<0&&!await this.tu(););if(this.buffer.length===0)return null;const e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Xa(e){for(;this.buffer.length<e;)await this.tu()&&this.Za("Reached the end of bundle when more is expected.");const n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}async tu(){const e=await this.ja.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=ne(i),a={documents:s.map(d=>Iu(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,pe.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=T8(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());ae(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ba(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=te.fromPath(r);this.mutations.push(new Oy(i,this.precondition(i)))}),await async function(r,i){const s=ne(r),o={writes:i.map(a=>Au(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,pe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?je.exists(!1):je.updateTime(n):je.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new j(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return je.updateTime(n)}return je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new Hy(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(async()=>{const e=new aQ(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})})}su(e){try{const n=this.updateFunction(e);return!Gu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!vP(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=kR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ca(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ih(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await HP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await l_(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>y1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>y1(e.remoteStore,i)),t._onlineComponents=e}function gD(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function l_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ih(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!gD(n))throw n;Hn("Error using user provided cache. Falling back to memory cache: "+n),await Ih(t,new xg)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Ih(t,new xg);return t._offlineComponents}async function bf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await kg(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await kg(t,new a_))),t._onlineComponents}function vD(t){return l_(t).then(e=>e.persistence)}function u_(t){return l_(t).then(e=>e.localStore)}function yD(t){return bf(t).then(e=>e.remoteStore)}function c_(t){return bf(t).then(e=>e.syncEngine)}function cQ(t){return bf(t).then(e=>e.datastore)}async function la(t){const e=await bf(t),n=e.eventManager;return n.onListen=F7.bind(null,e.syncEngine),n.onUnlisten=B7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z7.bind(null,e.syncEngine),n}function hQ(t){return t.asyncQueue.enqueue(async()=>{const e=await vD(t),n=await yD(t);return e.setNetworkEnabled(!0),function(i){const s=ne(i);return s.L_.delete(0),ec(s)}(n)})}function dQ(t){return t.asyncQueue.enqueue(async()=>{const e=await vD(t),n=await yD(t);return e.setNetworkEnabled(!1),async function(i){const s=ne(i);s.L_.add(0),await Ra(s),s.q_.set("Offline")}(n)})}function fQ(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,h){const d=ne(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ca(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await u_(t),e,n)),n.promise}function _D(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Af({next:f=>{o.enqueueAndForget(()=>Zy(s,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new j(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new j(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new t_(Ia(a.path),h,{includeMetadataChanges:!0,_a:!0});return Jy(s,d)}(await la(t),t.asyncQueue,e,n,r)),r.promise}function pQ(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await yd(i,s,!0),l=new cD(s,a.Ts),c=l.ma(a.documents),h=l.applyChanges(c,!1);o.resolve(h.snapshot)}catch(a){const l=Ca(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await u_(t),e,n)),n.promise}function wD(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Af({next:f=>{o.enqueueAndForget(()=>Zy(s,d)),f.fromCache&&l.source==="server"?c.reject(new j(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new t_(a,h,{includeMetadataChanges:!0,_a:!0});return Jy(s,d)}(await la(t),t.asyncQueue,e,n,r)),r.promise}function mQ(t,e){const n=new Af(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){ne(i).Y_.add(s),s.next()}(await la(t),n)),()=>{n.za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){ne(i).Y_.delete(s)}(await la(t),n))}}function gQ(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?_P().encode(o):o,function(h,d){return new oQ(h,d)}(function(h,d){if(h instanceof Uint8Array)return A1(h,d);if(h instanceof ArrayBuffer)return A1(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Zu(e));t.asyncQueue.enqueueAndForget(async()=>{iQ(await c_(t),i,r)})}function vQ(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=ne(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await u_(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e,n){if(!n)throw new j(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TD(t,e,n,r){if(e===!0&&r===!0)throw new j(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function R1(t){if(!te.isDocumentKey(t))throw new j(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P1(t){if(te.isDocumentKey(t))throw new j(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rf(t);throw new j(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function SD(t,e){if(e<=0)throw new j(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ED((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hK;switch(r.type){case"firstParty":return new mK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b1.get(n);r&&(W("ComponentProvider","Removing Datastore"),b1.delete(n),r.terminate())}(this),Promise.resolve()}}function ID(t,e,n,r={}){var i;const s=(t=Ee(t,tc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=gt.MOCK_USER;else{a=lR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new j(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new gt(c)}t._authCredentials=new dK(new xR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yt=class AD{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new AD(this.firestore,e,this._query)}},He=class bD{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bD(this.firestore,e,this._key)}},pi=class RD extends Yt{constructor(e,n,r){super(e,n,Ia(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new te(e))}withConverter(e){return new RD(this.firestore,e,this._path)}};function Td(t,e,...n){if(t=Ae(t),h_("collection","path",e),t instanceof tc){const r=pe.fromString(e,...n);return P1(r),new pi(t,null,r)}{if(!(t instanceof He||t instanceof pi))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return P1(r),new pi(t.firestore,null,r)}}function yQ(t,e){if(t=Ee(t,tc),h_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yt(t,null,function(r){return new Lr(pe.emptyPath(),r)}(e))}function Sd(t,e,...n){if(t=Ae(t),arguments.length===1&&(e=kR.newId()),h_("doc","path",e),t instanceof tc){const r=pe.fromString(e,...n);return R1(r),new He(t,null,new te(r))}{if(!(t instanceof He||t instanceof pi))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return R1(r),new He(t.firestore,t instanceof pi?t.converter:null,new te(r))}}function PD(t,e){return t=Ae(t),e=Ae(e),(t instanceof He||t instanceof pi)&&(e instanceof He||e instanceof pi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function DD(t,e){return t=Ae(t),e=Ae(e),t instanceof Yt&&e instanceof Yt&&t.firestore===e.firestore&&Ku(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Hy(this,"async_queue_retry"),this.Eu=()=>{const n=Sh();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Sh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new yt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!$i(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw it("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=Xy.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&ie()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function Og(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=-1;let tt=class extends tc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new _Q}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||CD(this),this._firestoreClient.terminate()}};function TQ(t,e){const n=typeof t=="object"?t:Ty(),r=typeof t=="string"?t:"(default)",i=df(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oR("firestore");s&&ID(i,...s)}return i}function Et(t){return t._firestoreClient||CD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function CD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new WK(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ED(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new uQ(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function SQ(t,e){kD(t=Ee(t,tt));const n=Et(t);if(n._uninitializedComponentsProvider)throw new j(F.FAILED_PRECONDITION,"SDK cache is already specified.");Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new a_;return xD(n,i,new mD(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function IQ(t){kD(t=Ee(t,tt));const e=Et(t);if(e._uninitializedComponentsProvider)throw new j(F.FAILED_PRECONDITION,"SDK cache is already specified.");Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new a_;return xD(e,r,new sQ(r,n.cacheSizeBytes))}function xD(t,e,n){const r=new yt;return t.asyncQueue.enqueue(async()=>{try{await Ih(t,n),await kg(t,e),r.resolve()}catch(i){const s=i;if(!gD(s))throw s;Hn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function AQ(t){if(t._initialized&&!t._terminated)throw new j(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!sr.D())return Promise.resolve();const i=r+"main";await sr.delete(i)}(qy(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function bQ(t){return function(n){const r=new yt;return n.asyncQueue.enqueueAndForget(async()=>H7(await c_(n),r)),r.promise}(Et(t=Ee(t,tt)))}function RQ(t){return hQ(Et(t=Ee(t,tt)))}function PQ(t){return dQ(Et(t=Ee(t,tt)))}function DQ(t,e){const n=Et(t=Ee(t,tt)),r=new wQ;return gQ(n,t._databaseId,e,r),r}function CQ(t,e){return vQ(Et(t=Ee(t,tt)),e).then(n=>n?new Yt(t,null,n.query):null)}function kD(t){if(t._initialized||t._terminated)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cr(et.fromBase64String(e))}catch(n){throw new j(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cr(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=/^__.*__$/;class kQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Aa(e,this.data,n,this.fieldTransforms)}}class OD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ND(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class Df{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Df(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Id(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(ND(this.wu)&&xQ.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class OQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zu(e)}Nu(e,n,r,i=!1){return new Df({wu:e,methodName:n,Ou:r,path:ze.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hs(t){const e=t._freezeSettings(),n=Zu(t._databaseId);return new OQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cf(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);__("Data must be an object, but it was:",o,r);const a=$D(r,o);let l,c;if(s.merge)l=new on(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Ng(e,d,n);if(!o.contains(f))throw new j(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);FD(h,f)||h.push(f)}l=new on(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new kQ(new At(a),l,c)}class nc extends Gs{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nc}}function MD(t,e,n){return new Df({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class f_ extends Gs{_toFieldTransform(e){return new Yu(e.path,new ea)}isEqual(e){return e instanceof f_}}class p_ extends Gs{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=MD(this,e,!0),r=this.Lu.map(s=>Ks(s,n)),i=new Ms(r);return new Yu(e.path,i)}isEqual(e){return e instanceof p_&&pu(this.Lu,e.Lu)}}class m_ extends Gs{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=MD(this,e,!0),r=this.Lu.map(s=>Ks(s,n)),i=new Vs(r);return new Yu(e.path,i)}isEqual(e){return e instanceof m_&&pu(this.Lu,e.Lu)}}class g_ extends Gs{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=new ta(e.serializer,cP(e.serializer,this.Bu));return new Yu(e.path,n)}isEqual(e){return e instanceof g_&&this.Bu===e.Bu}}function v_(t,e,n,r){const i=t.Nu(1,e,n);__("Data must be an object, but it was:",i,r);const s=[],o=At.empty();Ws(r,(l,c)=>{const h=w_(e,l,n);c=Ae(c);const d=i.Cu(h);if(c instanceof nc)s.push(h);else{const f=Ks(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new on(s);return new OD(o,a,i.fieldTransforms)}function y_(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[Ng(e,r,n)],l=[i];if(s.length%2!=0)throw new j(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Ng(e,s[f])),l.push(s[f+1]);const c=[],h=At.empty();for(let f=a.length-1;f>=0;--f)if(!FD(c,a[f])){const m=a[f];let _=l[f];_=Ae(_);const v=o.Cu(m);if(_ instanceof nc)c.push(m);else{const S=Ks(_,v);S!=null&&(c.push(m),h.set(m,S))}}const d=new on(c);return new OD(h,d,o.fieldTransforms)}function VD(t,e,n,r=!1){return Ks(n,t.Nu(r?4:3,e))}function Ks(t,e){if(LD(t=Ae(t)))return __("Unsupported field value:",e,t),$D(t,e);if(t instanceof Gs)return function(r,i){if(!ND(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ks(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=qe.fromDate(r);return{timestampValue:na(i.serializer,s)}}if(r instanceof qe){const s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:na(i.serializer,s)}}if(r instanceof Pf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cr)return{bytesValue:TP(i.serializer,r._byteString)};if(r instanceof He){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ly(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof d_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return ky(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Rf(r)}`)}(t,e)}function $D(t,e){const n={};return qR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(t,(r,i)=>{const s=Ks(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function LD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Pf||t instanceof cr||t instanceof He||t instanceof Gs||t instanceof d_)}function __(t,e,n){if(!LD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Rf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Ng(t,e,n){if((e=Ae(e))instanceof Ri)return e._internalPath;if(typeof e=="string")return w_(t,e);throw Id("Field path arguments must be of type string or ",t,!1,void 0,n)}const NQ=new RegExp("[~\\*/\\[\\]]");function w_(t,e,n){if(e.search(NQ)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ri(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Id(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(F.INVALID_ARGUMENT,a+t+l)}function FD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MQ extends bu{data(){return super.data()}}function xf(t,e){return typeof e=="string"?w_(t,e):e instanceof Ri?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E_{}class rc extends E_{}function pr(t,e,...n){let r=[];e instanceof E_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof T_).length,a=s.filter(l=>l instanceof kf).length;if(o>1||o>0&&a>0)throw new j(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class kf extends rc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kf(e,n,r)}_apply(e){const n=this._parse(e);return zD(e._query,n),new Yt(e.firestore,e.converter,_g(e._query,n))}_parse(e){const n=Hs(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new j(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){x1(d,h);const m=[];for(const _ of d)m.push(C1(l,s,_));f={arrayValue:{values:m}}}else f=C1(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||x1(d,h),f=VD(a,o,d,h==="in"||h==="not-in");return me.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function VQ(t,e,n){const r=e,i=xf("where",t);return kf._create(i,r,n)}class T_ extends E_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new T_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zD(o,l),o=_g(o,l)}(e._query,n),new Yt(e.firestore,e.converter,_g(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S_ extends rc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(s,o)}(e._query,this._field,this._direction);return new Yt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function $Q(t,e="asc"){const n=e,r=xf("orderBy",t);return S_._create(r,n)}class Of extends rc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Of(e,n,r)}_apply(e){return new Yt(e.firestore,e.converter,pd(e._query,this._limit,this._limitType))}}function LQ(t){return SD("limit",t),Of._create("limit",t,"F")}function FQ(t){return SD("limitToLast",t),Of._create("limitToLast",t,"L")}class Nf extends rc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Nf(e,n,r)}_apply(e){const n=BD(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function UQ(...t){return Nf._create("startAt",t,!0)}function BQ(...t){return Nf._create("startAfter",t,!1)}class Mf extends rc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mf(e,n,r)}_apply(e){const n=BD(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function zQ(...t){return Mf._create("endBefore",t,!1)}function jQ(...t){return Mf._create("endAt",t,!0)}function BD(t,e,n,r){if(n[0]=Ae(n[0]),n[0]instanceof bu)return function(s,o,a,l,c){if(!l)throw new j(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Oo(s))if(d.field.isKeyField())h.push(Os(o,l.key));else{const f=l.data.field(d.field);if(gf(f))throw new j(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new j(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new Ai(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Hs(t.firestore);return function(o,a,l,c,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new j(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<h.length;_++){const v=h[_];if(f[_].field.isKeyField()){if(typeof v!="string")throw new j(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!Cy(o)&&v.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const S=o.path.child(pe.fromString(v));if(!te.isDocumentKey(S))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const w=new te(S);m.push(Os(a,w))}else{const S=VD(l,c,v);m.push(S)}}return new Ai(m,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function C1(t,e,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new j(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cy(e)&&n.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!te.isDocumentKey(r))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Os(t,new te(r))}if(n instanceof He)return Os(t,n._key);throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(n)}.`)}function x1(t,e){if(!Array.isArray(t)||t.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zD(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class I_{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new d_(s)}convertGeoPoint(e){return new Pf(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Py(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ae(OP(r));const i=new Si(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qQ extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mr=class extends bu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Vl=class extends Mr{data(e={}){return super.data(e)}},Pi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vl(this._firestore,this._userDataWriter,r.key,r,new hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Vl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Vl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:WQ(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function WQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function jD(t,e){return t instanceof Mr&&e instanceof Mr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Pi&&e instanceof Pi&&t._firestore===e._firestore&&DD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GQ(t){t=Ee(t,He);const e=Ee(t.firestore,tt);return _D(Et(e),t._key).then(n=>A_(e,t,n))}class Qs extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function HQ(t){t=Ee(t,He);const e=Ee(t.firestore,tt),n=Et(e),r=new Qs(e);return fQ(n,t._key).then(i=>new Mr(e,r,t._key,i,new hs(i!==null&&i.hasLocalMutations,!0),t.converter))}function KQ(t){t=Ee(t,He);const e=Ee(t.firestore,tt);return _D(Et(e),t._key,{source:"server"}).then(n=>A_(e,t,n))}function qD(t){t=Ee(t,Yt);const e=Ee(t.firestore,tt),n=Et(e),r=new Qs(e);return UD(t._query),wD(n,t._query).then(i=>new Pi(e,r,t,i))}function QQ(t){t=Ee(t,Yt);const e=Ee(t.firestore,tt),n=Et(e),r=new Qs(e);return pQ(n,t._query).then(i=>new Pi(e,r,t,i))}function YQ(t){t=Ee(t,Yt);const e=Ee(t.firestore,tt),n=Et(e),r=new Qs(e);return wD(n,t._query,{source:"server"}).then(i=>new Pi(e,r,t,i))}function k1(t,e,n){t=Ee(t,He);const r=Ee(t.firestore,tt),i=Vf(t.converter,e,n);return ic(r,[Cf(Hs(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,je.none())])}function O1(t,e,n,...r){t=Ee(t,He);const i=Ee(t.firestore,tt),s=Hs(i);let o;return o=typeof(e=Ae(e))=="string"||e instanceof Ri?y_(s,"updateDoc",t._key,e,n,r):v_(s,"updateDoc",t._key,e),ic(i,[o.toMutation(t._key,je.exists(!0))])}function XQ(t){return ic(Ee(t.firestore,tt),[new ba(t._key,je.none())])}function JQ(t,e){const n=Ee(t.firestore,tt),r=Sd(t),i=Vf(t.converter,e);return ic(n,[Cf(Hs(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,je.exists(!1))]).then(()=>r)}function WD(t,...e){var n,r,i;t=Ae(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Og(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Og(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof He)c=Ee(t.firestore,tt),h=Ia(t._key.path),l={next:d=>{e[o]&&e[o](A_(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ee(t,Yt);c=Ee(d.firestore,tt),h=d._query;const f=new Qs(c);l={next:m=>{e[o]&&e[o](new Pi(c,f,d,m))},error:e[o+1],complete:e[o+2]},UD(t._query)}return function(f,m,_,v){const S=new Af(v),w=new t_(m,S,_);return f.asyncQueue.enqueueAndForget(async()=>Jy(await la(f),w)),()=>{S.za(),f.asyncQueue.enqueueAndForget(async()=>Zy(await la(f),w))}}(Et(c),h,a,l)}function ZQ(t,e){return mQ(Et(t=Ee(t,tt)),Og(e)?e:{next:e})}function ic(t,e){return function(r,i){const s=new yt;return r.asyncQueue.enqueueAndForget(async()=>j7(await c_(r),i,s)),s.promise}(Et(t),e)}function A_(t,e,n){const r=n.docs.get(e._key),i=new Qs(t);return new Mr(t,i,e._key,r,new hs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tY=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hs(e)}set(e,n,r){this._verifyNotCommitted();const i=ti(e,this._firestore),s=Vf(i.converter,n,r),o=Cf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,je.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ti(e,this._firestore);let o;return o=typeof(n=Ae(n))=="string"||n instanceof Ri?y_(this._dataReader,"WriteBatch.update",s._key,n,r,i):v_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,je.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ti(e,this._firestore);return this._mutations=this._mutations.concat(new ba(n._key,je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ti(t,e){if((t=Ae(t)).firestore!==e)throw new j(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nY=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Hs(n)}get(n){const r=ti(n,this._firestore),i=new qQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ie();const o=s[0];if(o.isFoundDocument())return new bu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new bu(this._firestore,i,r._key,null,r.converter);throw ie()})}set(n,r,i){const s=ti(n,this._firestore),o=Vf(s.converter,r,i),a=Cf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=ti(n,this._firestore);let a;return a=typeof(r=Ae(r))=="string"||r instanceof Ri?y_(this._dataReader,"Transaction.update",o._key,r,i,s):v_(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=ti(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ti(e,this._firestore),r=new Qs(this._firestore);return super.get(e).then(i=>new Mr(this._firestore,r,n._key,i._document,new hs(!1,!1),n.converter))}};function rY(t,e,n){t=Ee(t,tt);const r=Object.assign(Object.assign({},eY),n);return function(s){if(s.maxAttempts<1)throw new j(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new yt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await cQ(s);new lQ(s.asyncQueue,c,a,o,l).ru()}),l.promise}(Et(t),i=>e(new nY(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(){return new nc("deleteField")}function sY(){return new f_("serverTimestamp")}function oY(...t){return new p_("arrayUnion",t)}function aY(...t){return new m_("arrayRemove",t)}function lY(t){return new g_("increment",t)}(function(e,n=!0){(function(i){Sa=i})(ff),xs(new kr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new tt(new fK(r.getProvider("auth-internal")),new vK(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qn(IT,"4.7.2",e),qn(IT,"4.7.2","esm2017")})();const uY="@firebase/firestore-compat",cY="0.3.37";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function M1(){if(!jK())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let GD=class Mg{constructor(e){this._delegate=e}static fromBase64String(e){return M1(),new Mg(cr.fromBase64String(e))}static fromUint8Array(e){return N1(),new Mg(cr.fromUint8Array(e))}toBase64(){return M1(),this._delegate.toBase64()}toUint8Array(){return N1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t){return hY(t,["next","error","complete"])}function hY(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{enableIndexedDbPersistence(e,n){return SQ(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return IQ(e._delegate)}clearIndexedDbPersistence(e){return AQ(e._delegate)}}class HD{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Si||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Hn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){ID(this._delegate,e,n,r)}enableNetwork(){return RQ(this._delegate)}disableNetwork(){return PQ(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TD("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bQ(this._delegate)}onSnapshotsInSync(e){return ZQ(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ua(this,Td(this._delegate,e))}catch(n){throw qt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Rn(this,Sd(this._delegate,e))}catch(n){throw qt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jt(this,yQ(this._delegate,e))}catch(n){throw qt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return rY(this._delegate,n=>e(new KD(this,n)))}batch(){return Et(this._delegate),new QD(new tY(this._delegate,e=>ic(this._delegate,e)))}loadBundle(e){return DQ(this._delegate,e)}namedQuery(e){return CQ(this._delegate,e).then(n=>n?new jt(this,n):null)}}class $f extends I_{constructor(e){super(),this.firestore=e}convertBytes(e){return new GD(new cr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Rn.forKey(n,this.firestore,null)}}function fY(t){uK(t)}class KD{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new $f(e)}get(e){const n=ds(e);return this._delegate.get(n).then(r=>new Ru(this._firestore,new Mr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ds(e);return r?(b_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ds(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ds(e);return this._delegate.delete(n),this}}class QD{constructor(e){this._delegate=e}set(e,n,r){const i=ds(e);return r?(b_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ds(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ds(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Us{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Vl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Us.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Us(e,new $f(e),n),i.set(n,s)),s}}Us.INSTANCES=new WeakMap;class Rn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $f(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rn(n,new He(n._delegate,r,new te(e)))}static forKey(e,n,r){return new Rn(n,new He(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ua(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ua(this.firestore,Td(this._delegate,e))}catch(n){throw qt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ae(e),e instanceof He?PD(this._delegate,e):!1}set(e,n){n=b_("DocumentReference.set",n);try{return n?k1(this._delegate,e,n):k1(this._delegate,e)}catch(r){throw qt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?O1(this._delegate,e):O1(this._delegate,e,n,...r)}catch(i){throw qt(i,"updateDoc()","DocumentReference.update()")}}delete(){return XQ(this._delegate)}onSnapshot(...e){const n=YD(e),r=XD(e,i=>new Ru(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WD(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=HQ(this._delegate):(e==null?void 0:e.source)==="server"?n=KQ(this._delegate):n=GQ(this._delegate),n.then(r=>new Ru(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Rn(this.firestore,e?this._delegate.withConverter(Us.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qt(t,e,n){return t.message=t.message.replace(e,n),t}function YD(t){for(const e of t)if(typeof e=="object"&&!Vg(e))return e;return{}}function XD(t,e){var n,r;let i;return Vg(t[0])?i=t[0]:Vg(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Ru{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Rn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return jD(this._delegate,e._delegate)}}class Pu extends Ru{data(e){const n=this._delegate.data(e);return this._delegate._converter||cK(n!==void 0),n}}class jt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $f(e)}where(e,n,r){try{return new jt(this.firestore,pr(this._delegate,VQ(e,n,r)))}catch(i){throw qt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new jt(this.firestore,pr(this._delegate,$Q(e,n)))}catch(r){throw qt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jt(this.firestore,pr(this._delegate,LQ(e)))}catch(n){throw qt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new jt(this.firestore,pr(this._delegate,FQ(e)))}catch(n){throw qt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jt(this.firestore,pr(this._delegate,UQ(...e)))}catch(n){throw qt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jt(this.firestore,pr(this._delegate,BQ(...e)))}catch(n){throw qt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jt(this.firestore,pr(this._delegate,zQ(...e)))}catch(n){throw qt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jt(this.firestore,pr(this._delegate,jQ(...e)))}catch(n){throw qt(n,"endAt()","Query.endAt()")}}isEqual(e){return DD(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=QQ(this._delegate):(e==null?void 0:e.source)==="server"?n=YQ(this._delegate):n=qD(this._delegate),n.then(r=>new $g(this.firestore,new Pi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=YD(e),r=XD(e,i=>new $g(this.firestore,new Pi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WD(this._delegate,n,r)}withConverter(e){return new jt(this.firestore,e?this._delegate.withConverter(Us.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class pY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Pu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $g{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new jt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new pY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Pu(this._firestore,r))})}isEqual(e){return jD(this._delegate,e._delegate)}}class ua extends jt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rn(this.firestore,e):null}doc(e){try{return e===void 0?new Rn(this.firestore,Sd(this._delegate)):new Rn(this.firestore,Sd(this._delegate,e))}catch(n){throw qt(n,"doc()","CollectionReference.doc()")}}add(e){return JQ(this._delegate,e).then(n=>new Rn(this.firestore,n))}isEqual(e){return PD(this._delegate,e._delegate)}withConverter(e){return new ua(this.firestore,e?this._delegate.withConverter(Us.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ds(t){return Ee(t,He)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(...e){this._delegate=new Ri(...e)}static documentId(){return new R_(ze.keyField().canonicalString())}isEqual(e){return e=Ae(e),e instanceof Ri?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._delegate=e}static serverTimestamp(){const e=sY();return e._methodName="FieldValue.serverTimestamp",new as(e)}static delete(){const e=iY();return e._methodName="FieldValue.delete",new as(e)}static arrayUnion(...e){const n=oY(...e);return n._methodName="FieldValue.arrayUnion",new as(n)}static arrayRemove(...e){const n=aY(...e);return n._methodName="FieldValue.arrayRemove",new as(n)}static increment(e){const n=lY(e);return n._methodName="FieldValue.increment",new as(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY={Firestore:HD,GeoPoint:Pf,Timestamp:qe,Blob:GD,Transaction:KD,WriteBatch:QD,DocumentReference:Rn,DocumentSnapshot:Ru,Query:jt,QueryDocumentSnapshot:Pu,QuerySnapshot:$g,CollectionReference:ua,FieldPath:R_,FieldValue:as,setLogLevel:fY,CACHE_SIZE_UNLIMITED:EQ};function gY(t,e){t.INTERNAL.registerComponent(new kr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mY)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(t){gY(t,(e,n)=>new HD(e,n,new dY)),t.registerVersion(uY,cY)}vY(pf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="firebasestorage.googleapis.com",ZD="storageBucket",yY=2*60*1e3,_Y=10*60*1e3,wY=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends Mi{constructor(e,n,r=0){super(Jp(e),`Firebase Storage: ${n} (${Jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function Jp(t){return"storage/"+t}function P_(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Le.UNKNOWN,t)}function EY(t){return new Qe(Le.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TY(t){return new Qe(Le.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Le.UNAUTHENTICATED,t)}function IY(){return new Qe(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AY(t){return new Qe(Le.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eC(){return new Qe(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tC(){return new Qe(Le.CANCELED,"User canceled the upload/download.")}function bY(t){return new Qe(Le.INVALID_URL,"Invalid URL '"+t+"'.")}function RY(t){return new Qe(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PY(){return new Qe(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZD+"' property when initializing the app?")}function nC(){return new Qe(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DY(){return new Qe(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function CY(){return new Qe(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xY(t){return new Qe(Le.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Mo(t){return new Qe(Le.INVALID_ARGUMENT,t)}function rC(){return new Qe(Le.APP_DELETED,"The Firebase app was deleted.")}function iC(t){return new Qe(Le.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $l(t,e){return new Qe(Le.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cl(t){throw new Qe(Le.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vt.makeFromUrl(e,n)}catch{return new Vt(e,"")}if(r.path==="")return r;throw RY(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},v=n===JD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",w=new RegExp(`^https?://${v}/${i}/${S}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:m,indices:_,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<T.length;P++){const x=T[P],O=x.regex.exec(e);if(O){const I=O[x.indices.bucket];let E=O[x.indices.path];E||(E=""),r=new Vt(I,E),x.postModify(r);break}}if(r==null)throw bY(e);return r}}class kY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...S){c||(c=!0,e.apply(null,S))}function d(S){i=setTimeout(()=>{i=null,t(m,l())},S)}function f(){s&&clearTimeout(s)}function m(S,...w){if(c){f();return}if(S){f(),h.call(null,S,...w);return}if(l()||o){f(),h.call(null,S,...w);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let _=!1;function v(S){_||(_=!0,f(),!c&&(i!==null?(S||(a=2),clearTimeout(i),d(0)):S||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function NY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t){return t!==void 0}function VY(t){return typeof t=="function"}function $Y(t){return typeof t=="object"&&!Array.isArray(t)}function Lf(t){return typeof t=="string"||t instanceof String}function V1(t){return D_()&&t instanceof Blob}function D_(){return typeof Blob<"u"}function Lg(t,e,n,r){if(r<e)throw Mo(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Mo(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ys;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ys||(ys={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e,n,r,i,s,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Yc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ys.NO_ERROR,l=s.getStatus();if(!a||oC(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ys.ABORT;r(!1,new Yc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Yc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());MY(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=P_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?rC():tC();o(l)}else{const l=eC();o(l)}};this.canceled_?n(!1,new Yc(!1,null,!0)):this.backoffId_=OY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jY(t,e,n,r,i,s,o=!0){const a=sC(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return BY(c,e),FY(c,n),UY(c,s),zY(c,r),new LY(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WY(...t){const e=qY();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(D_())return new Blob(t);throw new Qe(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){if(typeof atob>"u")throw xY("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zp{constructor(e,n){this.data=e,this.contentType=n||null}}function aC(t,e){switch(t){case Pn.RAW:return new Zp(lC(e));case Pn.BASE64:case Pn.BASE64URL:return new Zp(uC(t,e));case Pn.DATA_URL:return new Zp(QY(e),YY(e))}throw P_()}function lC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KY(t){let e;try{e=decodeURIComponent(t)}catch{throw $l(Pn.DATA_URL,"Malformed data URL.")}return lC(e)}function uC(t,e){switch(t){case Pn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw $l(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Pn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw $l(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HY(e)}catch(i){throw i.message.includes("polyfill")?i:$l(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class cC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw $l(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=XY(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function QY(t){const e=new cC(t);return e.base64?uC(Pn.BASE64,e.rest):KY(e.rest)}function YY(t){return new cC(t).contentType}function XY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){let r=0,i="";V1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(V1(this.data_)){const r=this.data_,i=GY(r,e,n);return i===null?null:new wr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new wr(r,!0)}}static getBlob(...e){if(D_()){const n=e.map(r=>r instanceof wr?r.data_:r);return new wr(WY.apply(null,n))}else{const n=e.map(o=>Lf(o)?aC(Pn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new wr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){let e;try{e=JSON.parse(t)}catch{return null}return $Y(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZY(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function hC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eX(t,e){return e}class Bt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||eX}}let Xc=null;function tX(t){return!Lf(t)||t.length<2?t:hC(t)}function Ff(){if(Xc)return Xc;const t=[];t.push(new Bt("bucket")),t.push(new Bt("generation")),t.push(new Bt("metageneration")),t.push(new Bt("name","fullPath",!0));function e(s,o){return tX(o)}const n=new Bt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Bt("size");return i.xform=r,t.push(i),t.push(new Bt("timeCreated")),t.push(new Bt("updated")),t.push(new Bt("md5Hash",null,!0)),t.push(new Bt("cacheControl",null,!0)),t.push(new Bt("contentDisposition",null,!0)),t.push(new Bt("contentEncoding",null,!0)),t.push(new Bt("contentLanguage",null,!0)),t.push(new Bt("contentType",null,!0)),t.push(new Bt("metadata","customMetadata",!0)),Xc=t,Xc}function nX(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Vt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function rX(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return nX(r,t),r}function dC(t,e,n){const r=C_(e);return r===null?null:rX(t,r,n)}function iX(t,e,n,r){const i=C_(e);if(i===null||!Lf(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=Ui(f,n,r),_=sC({alt:"media",token:c});return m+_})[0]}function x_(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="prefixes",L1="items";function sX(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[$1])for(const i of n[$1]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Vt(e,s));r.prefixes.push(o)}if(n[L1])for(const i of n[L1]){const s=t._makeStorageReference(new Vt(e,i.name));r.items.push(s)}return r}function oX(t,e,n){const r=C_(n);return r===null?null:sX(t,e,r)}class Br{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){if(!t)throw P_()}function Uf(t,e){function n(r,i){const s=dC(t,i,e);return ar(s!==null),s}return n}function aX(t,e){function n(r,i){const s=oX(t,e,i);return ar(s!==null),s}return n}function lX(t,e){function n(r,i){const s=dC(t,i,e);return ar(s!==null),iX(s,i,t.host,t._protocol)}return n}function xa(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=IY():i=SY():n.getStatus()===402?i=TY(t.bucket):n.getStatus()===403?i=AY(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Bf(t){const e=xa(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=EY(t.path)),s.serverResponse=i.serverResponse,s}return n}function fC(t,e,n){const r=e.fullServerUrl(),i=Ui(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Br(i,s,Uf(t,n),o);return a.errorHandler=Bf(e),a}function uX(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Ui(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Br(a,l,aX(t,e.bucket),c);return h.urlParams=s,h.errorHandler=xa(e),h}function cX(t,e,n){const r=e.fullServerUrl(),i=Ui(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Br(i,s,lX(t,n),o);return a.errorHandler=Bf(e),a}function hX(t,e,n,r){const i=e.fullServerUrl(),s=Ui(i,t.host,t._protocol),o="PATCH",a=x_(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Br(s,o,Uf(t,r),c);return h.headers=l,h.body=a,h.errorHandler=Bf(e),h}function dX(t,e){const n=e.fullServerUrl(),r=Ui(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Br(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Bf(e),a}function fX(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fX(null,e)),r}function pX(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let P=0;P<2;P++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=pC(e,r,i),h=x_(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=wr.getBlob(d,r,f);if(m===null)throw nC();const _={name:c.fullPath},v=Ui(s,t.host,t._protocol),S="POST",w=t.maxUploadRetryTime,y=new Br(v,S,Uf(t,n),w);return y.urlParams=_,y.headers=o,y.body=m.uploadData(),y.errorHandler=xa(e),y}class Ad{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function k_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ar(!1)}return ar(!!n&&(e||["active"]).indexOf(n)!==-1),n}function mX(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=pC(e,r,i),a={name:o.fullPath},l=Ui(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=x_(o,n),f=t.maxUploadRetryTime;function m(v){k_(v);let S;try{S=v.getResponseHeader("X-Goog-Upload-URL")}catch{ar(!1)}return ar(Lf(S)),S}const _=new Br(l,c,m,f);return _.urlParams=a,_.headers=h,_.body=d,_.errorHandler=xa(e),_}function gX(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=k_(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ar(!1)}d||ar(!1);const f=Number(d);return ar(!isNaN(f)),new Ad(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Br(n,o,s,a);return l.headers=i,l.errorHandler=xa(e),l}const F1=256*1024;function vX(t,e,n,r,i,s,o,a){const l=new Ad(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw DY();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,f=d+h;let m="";h===0?m="finalize":c===h?m="upload, finalize":m="upload";const _={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},v=r.slice(d,f);if(v===null)throw nC();function S(P,x){const O=k_(P,["active","final"]),I=l.current+h,E=r.size();let A;return O==="final"?A=Uf(e,s)(P,x):A=null,new Ad(I,E,O==="final",A)}const w="POST",y=e.maxUploadRetryTime,T=new Br(n,w,S,y);return T.headers=_,T.body=v.uploadData(),T.progressCallback=a||null,T.errorHandler=xa(t),T}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yX={STATE_CHANGED:"state_changed"},Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function em(t){switch(t){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":return Wt.ERROR;default:return Wt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e,n,r){if(VY(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class wX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ys.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ys.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ys.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw cl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EX extends wX{initXhr(){this.xhr_.responseType="text"}}function Jn(){return new EX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Ff(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(oC(i.status,[]))if(s)i=eC();else{this.sleepTime=Math.max(this.sleepTime*2,wY),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=mX(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Jn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=gX(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Jn,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=F1*this._chunkMultiplier,n=new Ad(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=vX(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Jn,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){F1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=fC(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Jn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=pX(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Jn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=em(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new _X(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(em(this._state)){case Wt.SUCCESS:oo(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:const n=this._reject;oo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(em(this._state)){case Wt.RUNNING:case Wt.PAUSED:e.next&&oo(e.next.bind(e,this.snapshot))();break;case Wt.SUCCESS:e.complete&&oo(e.complete.bind(e))();break;case Wt.CANCELED:case Wt.ERROR:e.error&&oo(e.error.bind(e,this._error))();break;default:e.error&&oo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this._service=e,n instanceof Vt?this._location=n:this._location=Vt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bs(e,n)}get root(){const e=new Vt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hC(this._location.path)}get storage(){return this._service}get parent(){const e=JY(this._location.path);if(e===null)return null;const n=new Vt(this._location.bucket,e);return new Bs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw iC(e)}}function TX(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new mC(t,new wr(e),n)}function SX(t){const e={prefixes:[],items:[]};return gC(t,e).then(()=>e)}async function gC(t,e,n){const i=await vC(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await gC(t,e,i.nextPageToken)}function vC(t,e){e!=null&&typeof e.maxResults=="number"&&Lg("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=uX(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Jn)}function IX(t){t._throwIfRoot("getMetadata");const e=fC(t.storage,t._location,Ff());return t.storage.makeRequestWithTokens(e,Jn)}function AX(t,e){t._throwIfRoot("updateMetadata");const n=hX(t.storage,t._location,e,Ff());return t.storage.makeRequestWithTokens(n,Jn)}function bX(t){t._throwIfRoot("getDownloadURL");const e=cX(t.storage,t._location,Ff());return t.storage.makeRequestWithTokens(e,Jn).then(n=>{if(n===null)throw CY();return n})}function RX(t){t._throwIfRoot("deleteObject");const e=dX(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Jn)}function yC(t,e){const n=ZY(t._location.path,e),r=new Vt(t._location.bucket,n);return new Bs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t){return/^[A-Za-z]+:\/\//.test(t)}function DX(t,e){return new Bs(t,e)}function _C(t,e){if(t instanceof O_){const n=t;if(n._bucket==null)throw PY();const r=new Bs(n,n._bucket);return e!=null?_C(r,e):r}else return e!==void 0?yC(t,e):t}function CX(t,e){if(e&&PX(e)){if(t instanceof O_)return DX(t,e);throw Mo("To use ref(service, url), the first argument must be a Storage instance.")}else return _C(t,e)}function U1(t,e){const n=e==null?void 0:e[ZD];return n==null?null:Vt.makeFromBucketSpec(n,t)}function xX(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:lR(i,t.app.options.projectId))}class O_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=JD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yY,this._maxUploadRetryTime=_Y,this._requests=new Set,i!=null?this._bucket=Vt.makeFromBucketSpec(i,this._host):this._bucket=U1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vt.makeFromBucketSpec(this._url,e):this._bucket=U1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new kY(rC());{const o=jY(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const B1="@firebase/storage",z1="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="storage";function kX(t,e,n){return t=Ae(t),TX(t,e,n)}function OX(t){return t=Ae(t),IX(t)}function NX(t,e){return t=Ae(t),AX(t,e)}function MX(t,e){return t=Ae(t),vC(t,e)}function VX(t){return t=Ae(t),SX(t)}function $X(t){return t=Ae(t),bX(t)}function LX(t){return t=Ae(t),RX(t)}function j1(t,e){return t=Ae(t),CX(t,e)}function FX(t,e){return yC(t,e)}function UX(t=Ty(),e){t=Ae(t);const r=df(t,wC).getImmediate({identifier:e}),i=oR("storage");return i&&EC(r,...i),r}function EC(t,e,n,r={}){xX(t,e,n,r)}function BX(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new O_(n,r,i,e,ff)}function zX(){xs(new kr(wC,BX,"PUBLIC").setMultipleInstances(!0)),qn(B1,z1,""),qn(B1,z1,"esm2017")}zX();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Jc(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Jc(o,this,this._ref)):s={next:n.next?o=>n.next(new Jc(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class W1{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ar(e,this._service))}get items(){return this._delegate.items.map(e=>new Ar(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=FX(this._delegate,e);return new Ar(n,this.storage)}get root(){return new Ar(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ar(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new q1(kX(this._delegate,e,n),this)}putString(e,n=Pn.RAW,r){this._throwIfRoot("putString");const i=aC(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new q1(new mC(this._delegate,new wr(i.data,!0),s),this)}listAll(){return VX(this._delegate).then(e=>new W1(e,this.storage))}list(e){return MX(this._delegate,e||void 0).then(n=>new W1(n,this.storage))}getMetadata(){return OX(this._delegate)}updateMetadata(e){return NX(this._delegate,e)}getDownloadURL(){return $X(this._delegate)}delete(){return this._throwIfRoot("delete"),LX(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw iC(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(G1(e))throw Mo("ref() expected a child path but got a URL, use refFromURL instead.");return new Ar(j1(this._delegate,e),this)}refFromURL(e){if(!G1(e))throw Mo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vt.makeFromUrl(e,this._delegate.host)}catch{throw Mo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ar(j1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){EC(this._delegate,e,n,r)}}function G1(t){return/^[A-Za-z]+:\/\//.test(t)}const jX="@firebase/storage-compat",qX="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX="storage-compat";function GX(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new TC(n,r)}function HX(t){const e={TaskState:Wt,TaskEvent:yX,StringFormat:Pn,Storage:TC,Reference:Ar};t.INTERNAL.registerComponent(new kr(WX,GX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(jX,qX)}HX(pf);const SC=pf.initializeApp({apiKey:"AIzaSyCjqookaK8rIjkwvFhLp4mLULO_BQ6-GBM",authDomain:"realcontrol-31b06.firebaseapp.com",projectId:"realcontrol-31b06",storageBucket:"realcontrol-31b06.appspot.com",messagingSenderId:"630118428029",appId:"1:630118428029:web:c27e90db601c10cb54b014"}),H1=TQ(SC);UX(SC);const KX=TG(bo);bo.locale("es");function QX(){const[t,e]=le.useState([]),n=pr(Td(H1,"RealControlCustomers")),[r,i]=le.useState(!0);le.useEffect(()=>{qD(n).then(f=>{f.size===0&&console.log("No results!");const m=f.docs.map(_=>({id:_.id,..._.data()}));e(m)}).catch(f=>{console.log("Error searching items",f)})},[r]);let s=[];t.forEach((f,m)=>{f.proximoServicio!==void 0&&s.push({title:f.nombreCliente,start:new Date(f.proximoServicio),end:new Date(f.proximoServicio)})}),console.log(s),le.useState({comentarios:"",direccionCliente:"",correoCliente:"",fechaMeta:"",nombreCliente:"",servicioRealizado:"",tipoDeServicio:"",telefonoCliente:""}),Td(H1,"RealControlCustomers"),le.useState(!1),le.useState({comentarios:"",fechaMeta:"",servicioRealizado:"",tipoDeServicio:""}),le.useState(),le.useState();let o=[{start:bo("2024-10-4T12:00:00").toDate(),end:bo("2024-10-4T12:00:00").toDate(),title:"Primer evento",data:{d:"10"}},{start:bo("2024-10-5T7:00:00").toDate(),end:bo("2024-10-5T8:00:00").toDate(),title:"Segundo evento",data:{d:"20"}}];console.log(o);const a={allDay:"Todo el da",previous:"Anterior",next:"Siguiente",today:"Hoy",month:"Mes",week:"Semana",day:"Da",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"Sin eventos"},l={event:f=>mr.jsx("div",{className:"events",children:mr.jsx("span",{children:f.title})})},[c,h]=le.useState(),d=f=>{h(f.title),console.info(f.title)};return mr.jsxs(mr.Fragment,{children:[mr.jsx("h1",{children:"Calendario"}),mr.jsx("div",{style:{height:"90vh",width:"90vw",marginLeft:"5vw"},children:mr.jsx(gG,{localizer:KX,events:s,startAccessor:"start",endAccessor:"end",onSelectEvent:d,views:["month","week","day","agenda"],toolbar:!0,messages:a,components:l})})]})}lA(document.getElementById("root")).render(mr.jsx(le.StrictMode,{children:mr.jsx(QX,{})}));
