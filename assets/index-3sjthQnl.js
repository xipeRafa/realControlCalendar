(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var En=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function et(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TS={exports:{}},jd={},SS={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Symbol.for("react.element"),Bx=Symbol.for("react.portal"),jx=Symbol.for("react.fragment"),zx=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),Wx=Symbol.for("react.provider"),Gx=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Qx=Symbol.for("react.memo"),Yx=Symbol.for("react.lazy"),tE=Symbol.iterator;function Xx(t){return t===null||typeof t!="object"?null:(t=tE&&t[tE]||t["@@iterator"],typeof t=="function"?t:null)}var IS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AS=Object.assign,bS={};function Pa(t,e,n){this.props=t,this.context=e,this.refs=bS,this.updater=n||IS}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RS(){}RS.prototype=Pa.prototype;function ov(t,e,n){this.props=t,this.context=e,this.refs=bS,this.updater=n||IS}var av=ov.prototype=new RS;av.constructor=ov;AS(av,Pa.prototype);av.isPureReactComponent=!0;var nE=Array.isArray,PS=Object.prototype.hasOwnProperty,lv={current:null},DS={key:!0,ref:!0,__self:!0,__source:!0};function CS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)PS.call(e,r)&&!DS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hu,type:t,key:s,ref:o,props:i,_owner:lv.current}}function Jx(t,e){return{$$typeof:Hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hu}function Zx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rE=/\/+/g;function _p(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zx(""+t.key):e.toString(36)}function mh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hu:case Bx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_p(o,0):r,nE(i)?(n="",t!=null&&(n=t.replace(rE,"$&/")+"/"),mh(i,e,n,"",function(c){return c})):i!=null&&(uv(i)&&(i=Jx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+_p(s,a);o+=mh(s,e,n,l,i)}else if(l=Xx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+_p(s,a++),o+=mh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $c(t,e,n){if(t==null)return t;var r=[],i=0;return mh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ek(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},gh={transition:null},tk={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:gh,ReactCurrentOwner:lv};function xS(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:$c,forEach:function(t,e,n){$c(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $c(t,function(){e++}),e},toArray:function(t){return $c(t,function(e){return e})||[]},only:function(t){if(!uv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Pa;ve.Fragment=jx;ve.Profiler=qx;ve.PureComponent=ov;ve.StrictMode=zx;ve.Suspense=Kx;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk;ve.act=xS;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PS.call(e,l)&&!DS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hu,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:Gx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wx,_context:t},t.Consumer=t};ve.createElement=CS;ve.createFactory=function(t){var e=CS.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Hx,render:t}};ve.isValidElement=uv;ve.lazy=function(t){return{$$typeof:Yx,_payload:{_status:-1,_result:t},_init:ek}};ve.memo=function(t,e){return{$$typeof:Qx,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=gh.transition;gh.transition={};try{t()}finally{gh.transition=e}};ve.unstable_act=xS;ve.useCallback=function(t,e){return Zt.current.useCallback(t,e)};ve.useContext=function(t){return Zt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Zt.current.useEffect(t,e)};ve.useId=function(){return Zt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Zt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};ve.useRef=function(t){return Zt.current.useRef(t)};ve.useState=function(t){return Zt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Zt.current.useTransition()};ve.version="18.3.1";SS.exports=ve;var j=SS.exports;const V=et(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk=j,rk=Symbol.for("react.element"),ik=Symbol.for("react.fragment"),sk=Object.prototype.hasOwnProperty,ok=nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ak={key:!0,ref:!0,__self:!0,__source:!0};function kS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sk.call(e,r)&&!ak.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rk,type:t,key:s,ref:o,props:i,_owner:ok.current}}jd.Fragment=ik;jd.jsx=kS;jd.jsxs=kS;TS.exports=jd;var fe=TS.exports,OS={exports:{}},Rn={},NS={exports:{}},MS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,G){var X=N.length;N.push(G);e:for(;0<X;){var se=X-1>>>1,L=N[se];if(0<i(L,G))N[se]=G,N[X]=L,X=se;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var G=N[0],X=N.pop();if(X!==G){N[0]=X;e:for(var se=0,L=N.length,B=L>>>1;se<B;){var q=2*(se+1)-1,J=N[q],ie=q+1,ce=N[ie];if(0>i(J,X))ie<L&&0>i(ce,J)?(N[se]=ce,N[ie]=X,se=ie):(N[se]=J,N[q]=X,se=q);else if(ie<L&&0>i(ce,X))N[se]=ce,N[ie]=X,se=ie;else break e}}return G}function i(N,G){var X=N.sortIndex-G.sortIndex;return X!==0?X:N.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,y=!1,v=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(N){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=N)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function P(N){if(v=!1,T(N),!y)if(n(l)!==null)y=!0,z(x);else{var G=n(c);G!==null&&Q(P,G.startTime-N)}}function x(N,G){y=!1,v&&(v=!1,w(E),E=-1),m=!0;var X=f;try{for(T(G),d=n(l);d!==null&&(!(d.expirationTime>G)||N&&!D());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var L=se(d.expirationTime<=G);G=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),T(G)}else r(l);d=n(l)}if(d!==null)var B=!0;else{var q=n(c);q!==null&&Q(P,q.startTime-G),B=!1}return B}finally{d=null,f=X,m=!1}}var k=!1,S=null,E=-1,b=5,A=-1;function D(){return!(t.unstable_now()-A<b)}function O(){if(S!==null){var N=t.unstable_now();A=N;var G=!0;try{G=S(!0,N)}finally{G?C():(k=!1,S=null)}}else k=!1}var C;if(typeof _=="function")C=function(){_(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,W=Y.port2;Y.port1.onmessage=O,C=function(){W.postMessage(null)}}else C=function(){I(O,0)};function z(N){S=N,k||(k=!0,C())}function Q(N,G){E=I(function(){N(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,z(x))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var X=f;f=G;try{return N()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,G){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=f;f=N;try{return G()}finally{f=X}},t.unstable_scheduleCallback=function(N,G,X){var se=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,N){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=X+L,N={id:h++,callback:G,priorityLevel:N,startTime:X,expirationTime:L,sortIndex:-1},X>se?(N.sortIndex=X,e(c,N),n(l)===null&&N===n(c)&&(v?(w(E),E=-1):v=!0,Q(P,X-se))):(N.sortIndex=L,e(l,N),y||m||(y=!0,z(x))),N},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(N){var G=f;return function(){var X=f;f=G;try{return N.apply(this,arguments)}finally{f=X}}}})(MS);NS.exports=MS;var lk=NS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uk=j,In=lk;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VS=new Set,ru={};function io(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(ru[t]=e,t=0;t<e.length;t++)VS.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,ck=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iE={},sE={};function hk(t){return _m.call(sE,t)?!0:_m.call(iE,t)?!1:ck.test(t)?sE[t]=!0:(iE[t]=!0,!1)}function dk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fk(t,e,n,r){if(e===null||typeof e>"u"||dk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var cv=/[\-:]([a-z])/g;function hv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cv,hv);xt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cv,hv);xt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cv,hv);xt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function dv(t,e,n,r){var i=xt.hasOwnProperty(e)?xt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fk(e,n,i,r)&&(n=null),r||i===null?hk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=uk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),$S=Symbol.for("react.provider"),LS=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),ui=Symbol.for("react.lazy"),FS=Symbol.for("react.offscreen"),oE=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=oE&&t[oE]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,wp;function Cl(t){if(wp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wp=e&&e[1]||""}return`
`+wp+t}var Ep=!1;function Tp(t,e){if(!t||Ep)return"";Ep=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ep=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cl(t):""}function pk(t){switch(t.tag){case 5:return Cl(t.type);case 16:return Cl("Lazy");case 13:return Cl("Suspense");case 19:return Cl("SuspenseList");case 0:case 2:case 15:return t=Tp(t.type,!1),t;case 11:return t=Tp(t.type.render,!1),t;case 1:return t=Tp(t.type,!0),t;default:return""}}function Sm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Oo:return"Portal";case wm:return"Profiler";case fv:return"StrictMode";case Em:return"Suspense";case Tm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LS:return(t.displayName||"Context")+".Consumer";case $S:return(t._context.displayName||"Context")+".Provider";case pv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mv:return e=t.displayName||null,e!==null?e:Sm(t.type)||"Memo";case ui:e=t._payload,t=t._init;try{return Sm(t(e))}catch{}}return null}function mk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sm(e);case 8:return e===fv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function US(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gk(t){var e=US(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fc(t){t._valueTracker||(t._valueTracker=gk(t))}function BS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=US(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Im(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function aE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jS(t,e){e=e.checked,e!=null&&dv(t,"checked",e,!1)}function Am(t,e){jS(t,e);var n=Ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bm(t,e.type,n):e.hasOwnProperty("defaultValue")&&bm(t,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bm(t,e,n){(e!=="number"||Bh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xl=Array.isArray;function Wo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ci(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(xl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ci(n)}}function zS(t,e){var n=Ci(e.value),r=Ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uc,WS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uc=Uc||document.createElement("div"),Uc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function iu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vk=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(t){vk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fl[e]=Fl[t]})});function GS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fl.hasOwnProperty(t)&&Fl[t]?(""+e).trim():e+"px"}function HS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yk=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dm(t,e){if(e){if(yk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,Go=null,Ho=null;function hE(t){if(t=Yu(t)){if(typeof km!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Hd(e),km(t.stateNode,t.type,e))}}function KS(t){Go?Ho?Ho.push(t):Ho=[t]:Go=t}function QS(){if(Go){var t=Go,e=Ho;if(Ho=Go=null,hE(t),e)for(t=0;t<e.length;t++)hE(e[t])}}function YS(t,e){return t(e)}function XS(){}var Sp=!1;function JS(t,e,n){if(Sp)return t(e,n);Sp=!0;try{return YS(t,e,n)}finally{Sp=!1,(Go!==null||Ho!==null)&&(XS(),QS())}}function su(t,e){var n=t.stateNode;if(n===null)return null;var r=Hd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Om=!1;if($r)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Om=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Om=!1}function _k(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ul=!1,jh=null,zh=!1,Nm=null,wk={onError:function(t){Ul=!0,jh=t}};function Ek(t,e,n,r,i,s,o,a,l){Ul=!1,jh=null,_k.apply(wk,arguments)}function Tk(t,e,n,r,i,s,o,a,l){if(Ek.apply(this,arguments),Ul){if(Ul){var c=jh;Ul=!1,jh=null}else throw Error(Z(198));zh||(zh=!0,Nm=c)}}function so(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dE(t){if(so(t)!==t)throw Error(Z(188))}function Sk(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dE(i),t;if(s===r)return dE(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function eI(t){return t=Sk(t),t!==null?tI(t):null}function tI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tI(t);if(e!==null)return e;t=t.sibling}return null}var nI=In.unstable_scheduleCallback,fE=In.unstable_cancelCallback,Ik=In.unstable_shouldYield,Ak=In.unstable_requestPaint,ut=In.unstable_now,bk=In.unstable_getCurrentPriorityLevel,vv=In.unstable_ImmediatePriority,rI=In.unstable_UserBlockingPriority,qh=In.unstable_NormalPriority,Rk=In.unstable_LowPriority,iI=In.unstable_IdlePriority,zd=null,hr=null;function Pk(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:xk,Dk=Math.log,Ck=Math.LN2;function xk(t){return t>>>=0,t===0?32:31-(Dk(t)/Ck|0)|0}var Bc=64,jc=4194304;function kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=kl(a):(s&=o,s!==0&&(r=kl(s)))}else o=n&~i,o!==0?r=kl(o):s!==0&&(r=kl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),i=1<<n,r|=t[n],e&=~i;return r}function kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ok(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=kk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Mm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sI(){var t=Bc;return Bc<<=1,!(Bc&4194240)&&(Bc=64),t}function Ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ku(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function Nk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function yv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function oI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aI,_v,lI,uI,cI,Vm=!1,zc=[],wi=null,Ei=null,Ti=null,ou=new Map,au=new Map,di=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pE(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":ou.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(e.pointerId)}}function ml(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yu(e),e!==null&&_v(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Vk(t,e,n,r,i){switch(e){case"focusin":return wi=ml(wi,t,e,n,r,i),!0;case"dragenter":return Ei=ml(Ei,t,e,n,r,i),!0;case"mouseover":return Ti=ml(Ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ou.set(s,ml(ou.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,au.set(s,ml(au.get(s)||null,t,e,n,r,i)),!0}return!1}function hI(t){var e=Ss(t.target);if(e!==null){var n=so(e);if(n!==null){if(e=n.tag,e===13){if(e=ZS(n),e!==null){t.blockedOn=e,cI(t.priority,function(){lI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xm=r,n.target.dispatchEvent(r),xm=null}else return e=Yu(n),e!==null&&_v(e),t.blockedOn=n,!1;e.shift()}return!0}function mE(t,e,n){vh(t)&&n.delete(e)}function $k(){Vm=!1,wi!==null&&vh(wi)&&(wi=null),Ei!==null&&vh(Ei)&&(Ei=null),Ti!==null&&vh(Ti)&&(Ti=null),ou.forEach(mE),au.forEach(mE)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Vm||(Vm=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,$k)))}function lu(t){function e(i){return gl(i,t)}if(0<zc.length){gl(zc[0],t);for(var n=1;n<zc.length;n++){var r=zc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&gl(wi,t),Ei!==null&&gl(Ei,t),Ti!==null&&gl(Ti,t),ou.forEach(e),au.forEach(e),n=0;n<di.length;n++)r=di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)hI(n),n.blockedOn===null&&di.shift()}var Ko=Hr.ReactCurrentBatchConfig,Gh=!0;function Lk(t,e,n,r){var i=Pe,s=Ko.transition;Ko.transition=null;try{Pe=1,wv(t,e,n,r)}finally{Pe=i,Ko.transition=s}}function Fk(t,e,n,r){var i=Pe,s=Ko.transition;Ko.transition=null;try{Pe=4,wv(t,e,n,r)}finally{Pe=i,Ko.transition=s}}function wv(t,e,n,r){if(Gh){var i=$m(t,e,n,r);if(i===null)Np(t,e,r,Hh,n),pE(t,r);else if(Vk(i,t,e,n,r))r.stopPropagation();else if(pE(t,r),e&4&&-1<Mk.indexOf(t)){for(;i!==null;){var s=Yu(i);if(s!==null&&aI(s),s=$m(t,e,n,r),s===null&&Np(t,e,r,Hh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Np(t,e,r,null,n)}}var Hh=null;function $m(t,e,n,r){if(Hh=null,t=gv(r),t=Ss(t),t!==null)if(e=so(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hh=t,null}function dI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bk()){case vv:return 1;case rI:return 4;case qh:case Rk:return 16;case iI:return 536870912;default:return 16}default:return 16}}var gi=null,Ev=null,yh=null;function fI(){if(yh)return yh;var t,e=Ev,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yh=i.slice(t,1<r?1-r:void 0)}function _h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qc(){return!0}function gE(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qc:gE,this.isPropagationStopped=gE,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),e}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tv=Pn(Da),Qu=Ze({},Da,{view:0,detail:0}),Uk=Pn(Qu),Ap,bp,vl,qd=Ze({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(Ap=t.screenX-vl.screenX,bp=t.screenY-vl.screenY):bp=Ap=0,vl=t),Ap)},movementY:function(t){return"movementY"in t?t.movementY:bp}}),vE=Pn(qd),Bk=Ze({},qd,{dataTransfer:0}),jk=Pn(Bk),zk=Ze({},Qu,{relatedTarget:0}),Rp=Pn(zk),qk=Ze({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),Wk=Pn(qk),Gk=Ze({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hk=Pn(Gk),Kk=Ze({},Da,{data:0}),yE=Pn(Kk),Qk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xk[t])?!!e[t]:!1}function Sv(){return Jk}var Zk=Ze({},Qu,{key:function(t){if(t.key){var e=Qk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sv,charCode:function(t){return t.type==="keypress"?_h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eO=Pn(Zk),tO=Ze({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=Pn(tO),nO=Ze({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sv}),rO=Pn(nO),iO=Ze({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),sO=Pn(iO),oO=Ze({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aO=Pn(oO),lO=[9,13,27,32],Iv=$r&&"CompositionEvent"in window,Bl=null;$r&&"documentMode"in document&&(Bl=document.documentMode);var uO=$r&&"TextEvent"in window&&!Bl,pI=$r&&(!Iv||Bl&&8<Bl&&11>=Bl),wE=" ",EE=!1;function mI(t,e){switch(t){case"keyup":return lO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function cO(t,e){switch(t){case"compositionend":return gI(e);case"keypress":return e.which!==32?null:(EE=!0,wE);case"textInput":return t=e.data,t===wE&&EE?null:t;default:return null}}function hO(t,e){if(Mo)return t==="compositionend"||!Iv&&mI(t,e)?(t=fI(),yh=Ev=gi=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pI&&e.locale!=="ko"?null:e.data;default:return null}}var dO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dO[t.type]:e==="textarea"}function vI(t,e,n,r){KS(r),e=Kh(e,"onChange"),0<e.length&&(n=new Tv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jl=null,uu=null;function fO(t){PI(t,0)}function Wd(t){var e=Lo(t);if(BS(e))return t}function pO(t,e){if(t==="change")return e}var yI=!1;if($r){var Pp;if($r){var Dp="oninput"in document;if(!Dp){var SE=document.createElement("div");SE.setAttribute("oninput","return;"),Dp=typeof SE.oninput=="function"}Pp=Dp}else Pp=!1;yI=Pp&&(!document.documentMode||9<document.documentMode)}function IE(){jl&&(jl.detachEvent("onpropertychange",_I),uu=jl=null)}function _I(t){if(t.propertyName==="value"&&Wd(uu)){var e=[];vI(e,uu,t,gv(t)),JS(fO,e)}}function mO(t,e,n){t==="focusin"?(IE(),jl=e,uu=n,jl.attachEvent("onpropertychange",_I)):t==="focusout"&&IE()}function gO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wd(uu)}function vO(t,e){if(t==="click")return Wd(e)}function yO(t,e){if(t==="input"||t==="change")return Wd(e)}function _O(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:_O;function cu(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_m.call(e,i)||!Yn(t[i],e[i]))return!1}return!0}function AE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bE(t,e){var n=AE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=AE(n)}}function wI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function EI(){for(var t=window,e=Bh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bh(t.document)}return e}function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wO(t){var e=EI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wI(n.ownerDocument.documentElement,n)){if(r!==null&&Av(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bE(n,s);var o=bE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EO=$r&&"documentMode"in document&&11>=document.documentMode,Vo=null,Lm=null,zl=null,Fm=!1;function RE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fm||Vo==null||Vo!==Bh(r)||(r=Vo,"selectionStart"in r&&Av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&cu(zl,r)||(zl=r,r=Kh(Lm,"onSelect"),0<r.length&&(e=new Tv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:Wc("Animation","AnimationEnd"),animationiteration:Wc("Animation","AnimationIteration"),animationstart:Wc("Animation","AnimationStart"),transitionend:Wc("Transition","TransitionEnd")},Cp={},TI={};$r&&(TI=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Gd(t){if(Cp[t])return Cp[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TI)return Cp[t]=e[n];return t}var SI=Gd("animationend"),II=Gd("animationiteration"),AI=Gd("animationstart"),bI=Gd("transitionend"),RI=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(t,e){RI.set(t,e),io(e,[t])}for(var xp=0;xp<PE.length;xp++){var kp=PE[xp],TO=kp.toLowerCase(),SO=kp[0].toUpperCase()+kp.slice(1);qi(TO,"on"+SO)}qi(SI,"onAnimationEnd");qi(II,"onAnimationIteration");qi(AI,"onAnimationStart");qi("dblclick","onDoubleClick");qi("focusin","onFocus");qi("focusout","onBlur");qi(bI,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function DE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tk(r,e,void 0,t),t.currentTarget=null}function PI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;DE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;DE(i,a,c),s=l}}}if(zh)throw t=Nm,zh=!1,Nm=null,t}function Fe(t,e){var n=e[qm];n===void 0&&(n=e[qm]=new Set);var r=t+"__bubble";n.has(r)||(DI(e,t,2,!1),n.add(r))}function Op(t,e,n){var r=0;e&&(r|=4),DI(n,t,r,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function hu(t){if(!t[Gc]){t[Gc]=!0,VS.forEach(function(n){n!=="selectionchange"&&(IO.has(n)||Op(n,!1,t),Op(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,Op("selectionchange",!1,e))}}function DI(t,e,n,r){switch(dI(e)){case 1:var i=Lk;break;case 4:i=Fk;break;default:i=wv}n=i.bind(null,e,n,t),i=void 0,!Om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Np(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ss(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}JS(function(){var c=s,h=gv(n),d=[];e:{var f=RI.get(t);if(f!==void 0){var m=Tv,y=t;switch(t){case"keypress":if(_h(n)===0)break e;case"keydown":case"keyup":m=eO;break;case"focusin":y="focus",m=Rp;break;case"focusout":y="blur",m=Rp;break;case"beforeblur":case"afterblur":m=Rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=rO;break;case SI:case II:case AI:m=Wk;break;case bI:m=sO;break;case"scroll":m=Uk;break;case"wheel":m=aO;break;case"copy":case"cut":case"paste":m=Hk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=_E}var v=(e&4)!==0,I=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var _=c,T;_!==null;){T=_;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,w!==null&&(P=su(_,w),P!=null&&v.push(du(_,P,T)))),I)break;_=_.return}0<v.length&&(f=new m(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==xm&&(y=n.relatedTarget||n.fromElement)&&(Ss(y)||y[Lr]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Ss(y):null,y!==null&&(I=so(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=vE,P="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=_E,P="onPointerLeave",w="onPointerEnter",_="pointer"),I=m==null?f:Lo(m),T=y==null?f:Lo(y),f=new v(P,_+"leave",m,n,h),f.target=I,f.relatedTarget=T,P=null,Ss(h)===c&&(v=new v(w,_+"enter",y,n,h),v.target=T,v.relatedTarget=I,P=v),I=P,m&&y)t:{for(v=m,w=y,_=0,T=v;T;T=wo(T))_++;for(T=0,P=w;P;P=wo(P))T++;for(;0<_-T;)v=wo(v),_--;for(;0<T-_;)w=wo(w),T--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=wo(v),w=wo(w)}v=null}else v=null;m!==null&&CE(d,f,m,v,!1),y!==null&&I!==null&&CE(d,I,y,v,!0)}}e:{if(f=c?Lo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=pO;else if(TE(f))if(yI)x=yO;else{x=gO;var k=mO}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=vO);if(x&&(x=x(t,c))){vI(d,x,n,h);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&bm(f,"number",f.value)}switch(k=c?Lo(c):window,t){case"focusin":(TE(k)||k.contentEditable==="true")&&(Vo=k,Lm=c,zl=null);break;case"focusout":zl=Lm=Vo=null;break;case"mousedown":Fm=!0;break;case"contextmenu":case"mouseup":case"dragend":Fm=!1,RE(d,n,h);break;case"selectionchange":if(EO)break;case"keydown":case"keyup":RE(d,n,h)}var S;if(Iv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Mo?mI(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(pI&&n.locale!=="ko"&&(Mo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Mo&&(S=fI()):(gi=h,Ev="value"in gi?gi.value:gi.textContent,Mo=!0)),k=Kh(c,E),0<k.length&&(E=new yE(E,t,null,n,h),d.push({event:E,listeners:k}),S?E.data=S:(S=gI(n),S!==null&&(E.data=S)))),(S=uO?cO(t,n):hO(t,n))&&(c=Kh(c,"onBeforeInput"),0<c.length&&(h=new yE("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}PI(d,e)})}function du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=su(t,n),s!=null&&r.unshift(du(t,s,i)),s=su(t,e),s!=null&&r.push(du(t,s,i))),t=t.return}return r}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=su(n,s),l!=null&&o.unshift(du(n,l,a))):i||(l=su(n,s),l!=null&&o.push(du(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AO=/\r\n?/g,bO=/\u0000|\uFFFD/g;function xE(t){return(typeof t=="string"?t:""+t).replace(AO,`
`).replace(bO,"")}function Hc(t,e,n){if(e=xE(e),xE(t)!==e&&n)throw Error(Z(425))}function Qh(){}var Um=null,Bm=null;function jm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,RO=typeof clearTimeout=="function"?clearTimeout:void 0,kE=typeof Promise=="function"?Promise:void 0,PO=typeof queueMicrotask=="function"?queueMicrotask:typeof kE<"u"?function(t){return kE.resolve(null).then(t).catch(DO)}:zm;function DO(t){setTimeout(function(){throw t})}function Mp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lu(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function OE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),or="__reactFiber$"+Ca,fu="__reactProps$"+Ca,Lr="__reactContainer$"+Ca,qm="__reactEvents$"+Ca,CO="__reactListeners$"+Ca,xO="__reactHandles$"+Ca;function Ss(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=OE(t);t!==null;){if(n=t[or])return n;t=OE(t)}return e}t=n,n=t.parentNode}return null}function Yu(t){return t=t[or]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Hd(t){return t[fu]||null}var Wm=[],Fo=-1;function Wi(t){return{current:t}}function je(t){0>Fo||(t.current=Wm[Fo],Wm[Fo]=null,Fo--)}function Me(t,e){Fo++,Wm[Fo]=t.current,t.current=e}var xi={},Bt=Wi(xi),hn=Wi(!1),Ns=xi;function ta(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dn(t){return t=t.childContextTypes,t!=null}function Yh(){je(hn),je(Bt)}function NE(t,e,n){if(Bt.current!==xi)throw Error(Z(168));Me(Bt,e),Me(hn,n)}function CI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,mk(t)||"Unknown",i));return Ze({},n,r)}function Xh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,Ns=Bt.current,Me(Bt,t),Me(hn,hn.current),!0}function ME(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=CI(t,e,Ns),r.__reactInternalMemoizedMergedChildContext=t,je(hn),je(Bt),Me(Bt,t)):je(hn),Me(hn,n)}var Pr=null,Kd=!1,Vp=!1;function xI(t){Pr===null?Pr=[t]:Pr.push(t)}function kO(t){Kd=!0,xI(t)}function Gi(){if(!Vp&&Pr!==null){Vp=!0;var t=0,e=Pe;try{var n=Pr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,Kd=!1}catch(i){throw Pr!==null&&(Pr=Pr.slice(t+1)),nI(vv,Gi),i}finally{Pe=e,Vp=!1}}return null}var Uo=[],Bo=0,Jh=null,Zh=0,Dn=[],Cn=0,Ms=null,xr=1,kr="";function us(t,e){Uo[Bo++]=Zh,Uo[Bo++]=Jh,Jh=t,Zh=e}function kI(t,e,n){Dn[Cn++]=xr,Dn[Cn++]=kr,Dn[Cn++]=Ms,Ms=t;var r=xr;t=kr;var i=32-Hn(r)-1;r&=~(1<<i),n+=1;var s=32-Hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xr=1<<32-Hn(e)+i|n<<i|r,kr=s+t}else xr=1<<s|n<<i|r,kr=t}function bv(t){t.return!==null&&(us(t,1),kI(t,1,0))}function Rv(t){for(;t===Jh;)Jh=Uo[--Bo],Uo[Bo]=null,Zh=Uo[--Bo],Uo[Bo]=null;for(;t===Ms;)Ms=Dn[--Cn],Dn[Cn]=null,kr=Dn[--Cn],Dn[Cn]=null,xr=Dn[--Cn],Dn[Cn]=null}var Sn=null,Tn=null,Ge=!1,Gn=null;function OI(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function VE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:xr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,Tn=null,!0):!1;default:return!1}}function Gm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hm(t){if(Ge){var e=Tn;if(e){var n=e;if(!VE(t,e)){if(Gm(t))throw Error(Z(418));e=Si(n.nextSibling);var r=Sn;e&&VE(t,e)?OI(r,n):(t.flags=t.flags&-4097|2,Ge=!1,Sn=t)}}else{if(Gm(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ge=!1,Sn=t}}}function $E(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function Kc(t){if(t!==Sn)return!1;if(!Ge)return $E(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jm(t.type,t.memoizedProps)),e&&(e=Tn)){if(Gm(t))throw NI(),Error(Z(418));for(;e;)OI(t,e),e=Si(e.nextSibling)}if($E(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Sn?Si(t.stateNode.nextSibling):null;return!0}function NI(){for(var t=Tn;t;)t=Si(t.nextSibling)}function na(){Tn=Sn=null,Ge=!1}function Pv(t){Gn===null?Gn=[t]:Gn.push(t)}var OO=Hr.ReactCurrentBatchConfig;function yl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Qc(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LE(t){var e=t._init;return e(t._payload)}function MI(t){function e(w,_){if(t){var T=w.deletions;T===null?(w.deletions=[_],w.flags|=16):T.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Ri(w,_),w.index=0,w.sibling=null,w}function s(w,_,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<_?(w.flags|=2,_):T):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,T,P){return _===null||_.tag!==6?(_=zp(T,w.mode,P),_.return=w,_):(_=i(_,T),_.return=w,_)}function l(w,_,T,P){var x=T.type;return x===No?h(w,_,T.props.children,P,T.key):_!==null&&(_.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ui&&LE(x)===_.type)?(P=i(_,T.props),P.ref=yl(w,_,T),P.return=w,P):(P=bh(T.type,T.key,T.props,null,w.mode,P),P.ref=yl(w,_,T),P.return=w,P)}function c(w,_,T,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=qp(T,w.mode,P),_.return=w,_):(_=i(_,T.children||[]),_.return=w,_)}function h(w,_,T,P,x){return _===null||_.tag!==7?(_=Ds(T,w.mode,P,x),_.return=w,_):(_=i(_,T),_.return=w,_)}function d(w,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=zp(""+_,w.mode,T),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lc:return T=bh(_.type,_.key,_.props,null,w.mode,T),T.ref=yl(w,null,_),T.return=w,T;case Oo:return _=qp(_,w.mode,T),_.return=w,_;case ui:var P=_._init;return d(w,P(_._payload),T)}if(xl(_)||fl(_))return _=Ds(_,w.mode,T,null),_.return=w,_;Qc(w,_)}return null}function f(w,_,T,P){var x=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return x!==null?null:a(w,_,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Lc:return T.key===x?l(w,_,T,P):null;case Oo:return T.key===x?c(w,_,T,P):null;case ui:return x=T._init,f(w,_,x(T._payload),P)}if(xl(T)||fl(T))return x!==null?null:h(w,_,T,P,null);Qc(w,T)}return null}function m(w,_,T,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(T)||null,a(_,w,""+P,x);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Lc:return w=w.get(P.key===null?T:P.key)||null,l(_,w,P,x);case Oo:return w=w.get(P.key===null?T:P.key)||null,c(_,w,P,x);case ui:var k=P._init;return m(w,_,T,k(P._payload),x)}if(xl(P)||fl(P))return w=w.get(T)||null,h(_,w,P,x,null);Qc(_,P)}return null}function y(w,_,T,P){for(var x=null,k=null,S=_,E=_=0,b=null;S!==null&&E<T.length;E++){S.index>E?(b=S,S=null):b=S.sibling;var A=f(w,S,T[E],P);if(A===null){S===null&&(S=b);break}t&&S&&A.alternate===null&&e(w,S),_=s(A,_,E),k===null?x=A:k.sibling=A,k=A,S=b}if(E===T.length)return n(w,S),Ge&&us(w,E),x;if(S===null){for(;E<T.length;E++)S=d(w,T[E],P),S!==null&&(_=s(S,_,E),k===null?x=S:k.sibling=S,k=S);return Ge&&us(w,E),x}for(S=r(w,S);E<T.length;E++)b=m(S,w,E,T[E],P),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?E:b.key),_=s(b,_,E),k===null?x=b:k.sibling=b,k=b);return t&&S.forEach(function(D){return e(w,D)}),Ge&&us(w,E),x}function v(w,_,T,P){var x=fl(T);if(typeof x!="function")throw Error(Z(150));if(T=x.call(T),T==null)throw Error(Z(151));for(var k=x=null,S=_,E=_=0,b=null,A=T.next();S!==null&&!A.done;E++,A=T.next()){S.index>E?(b=S,S=null):b=S.sibling;var D=f(w,S,A.value,P);if(D===null){S===null&&(S=b);break}t&&S&&D.alternate===null&&e(w,S),_=s(D,_,E),k===null?x=D:k.sibling=D,k=D,S=b}if(A.done)return n(w,S),Ge&&us(w,E),x;if(S===null){for(;!A.done;E++,A=T.next())A=d(w,A.value,P),A!==null&&(_=s(A,_,E),k===null?x=A:k.sibling=A,k=A);return Ge&&us(w,E),x}for(S=r(w,S);!A.done;E++,A=T.next())A=m(S,w,E,A.value,P),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?E:A.key),_=s(A,_,E),k===null?x=A:k.sibling=A,k=A);return t&&S.forEach(function(O){return e(w,O)}),Ge&&us(w,E),x}function I(w,_,T,P){if(typeof T=="object"&&T!==null&&T.type===No&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Lc:e:{for(var x=T.key,k=_;k!==null;){if(k.key===x){if(x=T.type,x===No){if(k.tag===7){n(w,k.sibling),_=i(k,T.props.children),_.return=w,w=_;break e}}else if(k.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ui&&LE(x)===k.type){n(w,k.sibling),_=i(k,T.props),_.ref=yl(w,k,T),_.return=w,w=_;break e}n(w,k);break}else e(w,k);k=k.sibling}T.type===No?(_=Ds(T.props.children,w.mode,P,T.key),_.return=w,w=_):(P=bh(T.type,T.key,T.props,null,w.mode,P),P.ref=yl(w,_,T),P.return=w,w=P)}return o(w);case Oo:e:{for(k=T.key;_!==null;){if(_.key===k)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(w,_.sibling),_=i(_,T.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=qp(T,w.mode,P),_.return=w,w=_}return o(w);case ui:return k=T._init,I(w,_,k(T._payload),P)}if(xl(T))return y(w,_,T,P);if(fl(T))return v(w,_,T,P);Qc(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,T),_.return=w,w=_):(n(w,_),_=zp(T,w.mode,P),_.return=w,w=_),o(w)):n(w,_)}return I}var ra=MI(!0),VI=MI(!1),ed=Wi(null),td=null,jo=null,Dv=null;function Cv(){Dv=jo=td=null}function xv(t){var e=ed.current;je(ed),t._currentValue=e}function Km(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qo(t,e){td=t,Dv=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Dv!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(td===null)throw Error(Z(308));jo=t,td.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var Is=null;function kv(t){Is===null?Is=[t]:Is.push(t)}function $I(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function Ov(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,kv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yv(t,n)}}function FE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var i=t.updateQueue;ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Ze({},d,f);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$s|=o,t.lanes=o,t.memoizedState=d}}function UE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Xu={},dr=Wi(Xu),pu=Wi(Xu),mu=Wi(Xu);function As(t){if(t===Xu)throw Error(Z(174));return t}function Nv(t,e){switch(Me(mu,e),Me(pu,t),Me(dr,Xu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pm(e,t)}je(dr),Me(dr,e)}function ia(){je(dr),je(pu),je(mu)}function FI(t){As(mu.current);var e=As(dr.current),n=Pm(e,t.type);e!==n&&(Me(pu,t),Me(dr,n))}function Mv(t){pu.current===t&&(je(dr),je(pu))}var Ye=Wi(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $p=[];function Vv(){for(var t=0;t<$p.length;t++)$p[t]._workInProgressVersionPrimary=null;$p.length=0}var Eh=Hr.ReactCurrentDispatcher,Lp=Hr.ReactCurrentBatchConfig,Vs=0,Xe=null,pt=null,_t=null,id=!1,ql=!1,gu=0,NO=0;function Mt(){throw Error(Z(321))}function $v(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Lv(t,e,n,r,i,s){if(Vs=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eh.current=t===null||t.memoizedState===null?LO:FO,t=n(r,i),ql){s=0;do{if(ql=!1,gu=0,25<=s)throw Error(Z(301));s+=1,_t=pt=null,e.updateQueue=null,Eh.current=UO,t=n(r,i)}while(ql)}if(Eh.current=sd,e=pt!==null&&pt.next!==null,Vs=0,_t=pt=Xe=null,id=!1,e)throw Error(Z(300));return t}function Fv(){var t=gu!==0;return gu=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Xe.memoizedState=_t=t:_t=_t.next=t,_t}function Ln(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=_t===null?Xe.memoizedState:_t.next;if(e!==null)_t=e,pt=t;else{if(t===null)throw Error(Z(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Xe.memoizedState=_t=t:_t=_t.next=t}return _t}function vu(t,e){return typeof e=="function"?e(t):e}function Fp(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Vs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Xe.lanes|=h,$s|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Yn(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,$s|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Up(t){var e=Ln(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yn(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function UI(){}function BI(t,e){var n=Xe,r=Ln(),i=e(),s=!Yn(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,Uv(qI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,yu(9,zI.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(Z(349));Vs&30||jI(n,e,i)}return i}function jI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zI(t,e,n,r){e.value=n,e.getSnapshot=r,WI(e)&&GI(t)}function qI(t,e,n){return n(function(){WI(e)&&GI(t)})}function WI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function GI(t){var e=Fr(t,1);e!==null&&Kn(e,t,1,-1)}function BE(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:t},e.queue=t,t=t.dispatch=$O.bind(null,Xe,t),[e.memoizedState,t]}function yu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HI(){return Ln().memoizedState}function Th(t,e,n,r){var i=sr();Xe.flags|=t,i.memoizedState=yu(1|e,n,void 0,r===void 0?null:r)}function Qd(t,e,n,r){var i=Ln();r=r===void 0?null:r;var s=void 0;if(pt!==null){var o=pt.memoizedState;if(s=o.destroy,r!==null&&$v(r,o.deps)){i.memoizedState=yu(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=yu(1|e,n,s,r)}function jE(t,e){return Th(8390656,8,t,e)}function Uv(t,e){return Qd(2048,8,t,e)}function KI(t,e){return Qd(4,2,t,e)}function QI(t,e){return Qd(4,4,t,e)}function YI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XI(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4,4,YI.bind(null,e,t),n)}function Bv(){}function JI(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$v(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ZI(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$v(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eA(t,e,n){return Vs&21?(Yn(n,e)||(n=sI(),Xe.lanes|=n,$s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function MO(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Lp.transition;Lp.transition={};try{t(!1),e()}finally{Pe=n,Lp.transition=r}}function tA(){return Ln().memoizedState}function VO(t,e,n){var r=bi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nA(t))rA(e,n);else if(n=$I(t,e,n,r),n!==null){var i=Qt();Kn(n,t,r,i),iA(n,e,r)}}function $O(t,e,n){var r=bi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nA(t))rA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o)){var l=e.interleaved;l===null?(i.next=i,kv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$I(t,e,i,r),n!==null&&(i=Qt(),Kn(n,t,r,i),iA(n,e,r))}}function nA(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function rA(t,e){ql=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yv(t,n)}}var sd={readContext:$n,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},LO={readContext:$n,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:jE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Th(4194308,4,YI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Th(4194308,4,t,e)},useInsertionEffect:function(t,e){return Th(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VO.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:BE,useDebugValue:Bv,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=BE(!1),e=t[0];return t=MO.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=sr();if(Ge){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Et===null)throw Error(Z(349));Vs&30||jI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jE(qI.bind(null,r,s,t),[t]),r.flags|=2048,yu(9,zI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=Et.identifierPrefix;if(Ge){var n=kr,r=xr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FO={readContext:$n,useCallback:JI,useContext:$n,useEffect:Uv,useImperativeHandle:XI,useInsertionEffect:KI,useLayoutEffect:QI,useMemo:ZI,useReducer:Fp,useRef:HI,useState:function(){return Fp(vu)},useDebugValue:Bv,useDeferredValue:function(t){var e=Ln();return eA(e,pt.memoizedState,t)},useTransition:function(){var t=Fp(vu)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:UI,useSyncExternalStore:BI,useId:tA,unstable_isNewReconciler:!1},UO={readContext:$n,useCallback:JI,useContext:$n,useEffect:Uv,useImperativeHandle:XI,useInsertionEffect:KI,useLayoutEffect:QI,useMemo:ZI,useReducer:Up,useRef:HI,useState:function(){return Up(vu)},useDebugValue:Bv,useDeferredValue:function(t){var e=Ln();return pt===null?e.memoizedState=t:eA(e,pt.memoizedState,t)},useTransition:function(){var t=Up(vu)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:UI,useSyncExternalStore:BI,useId:tA,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yd={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=bi(t),s=Mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Kn(e,t,i,r),wh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=bi(t),s=Mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Kn(e,t,i,r),wh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=bi(t),i=Mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ii(t,i,r),e!==null&&(Kn(e,t,r,n),wh(e,t,r))}};function zE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cu(n,r)||!cu(i,s):!0}function sA(t,e,n){var r=!1,i=xi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=dn(e)?Ns:Bt.current,r=e.contextTypes,s=(r=r!=null)?ta(t,i):xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function qE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yd.enqueueReplaceState(e,e.state,null)}function Ym(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ov(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=dn(e)?Ns:Bt.current,i.context=ta(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yd.enqueueReplaceState(i,i.state,null),nd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=pk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BO=typeof WeakMap=="function"?WeakMap:Map;function oA(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ad||(ad=!0,ag=r),Xm(t,e)},n}function aA(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xm(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function WE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tN.bind(null,t,e,n),e.then(t,t))}function GE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function HE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,Ii(n,e,1))),n.lanes|=1),t)}var jO=Hr.ReactCurrentOwner,an=!1;function qt(t,e,n,r){e.child=t===null?VI(e,null,n,r):ra(e,t.child,n,r)}function KE(t,e,n,r,i){n=n.render;var s=e.ref;return Qo(e,i),r=Lv(t,e,n,r,s,i),n=Fv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ur(t,e,i)):(Ge&&n&&bv(e),e.flags|=1,qt(t,e,r,i),e.child)}function QE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lA(t,e,s,r,i)):(t=bh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cu,n(o,r)&&t.ref===e.ref)return Ur(t,e,i)}return e.flags|=1,t=Ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function lA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cu(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,Ur(t,e,i)}return Jm(t,e,n,r,i)}function uA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(qo,_n),_n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(qo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(qo,_n),_n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(qo,_n),_n|=r;return qt(t,e,i,n),e.child}function cA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jm(t,e,n,r,i){var s=dn(n)?Ns:Bt.current;return s=ta(e,s),Qo(e,i),n=Lv(t,e,n,r,s,i),r=Fv(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ur(t,e,i)):(Ge&&r&&bv(e),e.flags|=1,qt(t,e,n,i),e.child)}function YE(t,e,n,r,i){if(dn(n)){var s=!0;Xh(e)}else s=!1;if(Qo(e,i),e.stateNode===null)Sh(t,e),sA(e,n,r),Ym(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$n(c):(c=dn(n)?Ns:Bt.current,c=ta(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qE(e,o,r,c),ci=!1;var f=e.memoizedState;o.state=f,nd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||hn.current||ci?(typeof h=="function"&&(Qm(e,n,h,r),l=e.memoizedState),(a=ci||zE(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,LI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=dn(n)?Ns:Bt.current,l=ta(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qE(e,o,r,l),ci=!1,f=e.memoizedState,o.state=f,nd(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||hn.current||ci?(typeof m=="function"&&(Qm(e,n,m,r),y=e.memoizedState),(c=ci||zE(e,n,c,r,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Zm(t,e,n,r,s,i)}function Zm(t,e,n,r,i,s){cA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ME(e,n,!1),Ur(t,e,s);r=e.stateNode,jO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ra(e,t.child,null,s),e.child=ra(e,null,a,s)):qt(t,e,a,s),e.memoizedState=r.state,i&&ME(e,n,!0),e.child}function hA(t){var e=t.stateNode;e.pendingContext?NE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NE(t,e.context,!1),Nv(t,e.containerInfo)}function XE(t,e,n,r,i){return na(),Pv(i),e.flags|=256,qt(t,e,n,r),e.child}var eg={dehydrated:null,treeContext:null,retryLane:0};function tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function dA(t,e,n){var r=e.pendingProps,i=Ye.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ye,i&1),t===null)return Hm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zd(o,r,0,null),t=Ds(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tg(n),e.memoizedState=eg,t):jv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ri(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ri(a,s):(s=Ds(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?tg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=eg,r}return s=t.child,t=s.sibling,r=Ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jv(t,e){return e=Zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yc(t,e,n,r){return r!==null&&Pv(r),ra(e,t.child,null,n),t=jv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bp(Error(Z(422))),Yc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zd({mode:"visible",children:r.children},i,0,null),s=Ds(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ra(e,t.child,null,o),e.child.memoizedState=tg(o),e.memoizedState=eg,s);if(!(e.mode&1))return Yc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Bp(s,r,void 0),Yc(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),Kn(r,t,i,-1))}return Kv(),r=Bp(Error(Z(421))),Yc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Tn=Si(i.nextSibling),Sn=e,Ge=!0,Gn=null,t!==null&&(Dn[Cn++]=xr,Dn[Cn++]=kr,Dn[Cn++]=Ms,xr=t.id,kr=t.overflow,Ms=e),e=jv(e,r.children),e.flags|=4096,e)}function JE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Km(t.return,e,n)}function jp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function fA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&JE(t,n,e);else if(t.tag===19)JE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jp(e,!0,n,null,s);break;case"together":jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qO(t,e,n){switch(e.tag){case 3:hA(e),na();break;case 5:FI(e);break;case 1:dn(e.type)&&Xh(e);break;case 4:Nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?dA(t,e,n):(Me(Ye,Ye.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);Me(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,uA(t,e,n)}return Ur(t,e,n)}var pA,ng,mA,gA;pA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ng=function(){};mA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,As(dr.current);var s=null;switch(n){case"input":i=Im(t,i),r=Im(t,r),s=[];break;case"select":i=Ze({},i,{value:void 0}),r=Ze({},r,{value:void 0}),s=[];break;case"textarea":i=Rm(t,i),r=Rm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qh)}Dm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ru.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ru.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};gA=function(t,e,n,r){n!==r&&(e.flags|=4)};function _l(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WO(t,e,n){var r=e.pendingProps;switch(Rv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return dn(e.type)&&Yh(),Vt(e),null;case 3:return r=e.stateNode,ia(),je(hn),je(Bt),Vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(cg(Gn),Gn=null))),ng(t,e),Vt(e),null;case 5:Mv(e);var i=As(mu.current);if(n=e.type,t!==null&&e.stateNode!=null)mA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Vt(e),null}if(t=As(dr.current),Kc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[or]=e,r[fu]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Ol.length;i++)Fe(Ol[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":aE(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":uE(r,s),Fe("invalid",r)}Dm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hc(r.textContent,a,t),i=["children",""+a]):ru.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Fc(r),lE(r,s,!0);break;case"textarea":Fc(r),cE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Qh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[fu]=r,pA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cm(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ol.length;i++)Fe(Ol[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":aE(t,r),i=Im(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ze({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":uE(t,r),i=Rm(t,r),Fe("invalid",t);break;default:i=r}Dm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?HS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&iu(t,l):typeof l=="number"&&iu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ru.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fe("scroll",t):l!=null&&dv(t,s,l,o))}switch(n){case"input":Fc(t),lE(t,r,!1);break;case"textarea":Fc(t),cE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ci(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)gA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=As(mu.current),As(dr.current),Kc(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(s=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:Hc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Vt(e),null;case 13:if(je(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&Tn!==null&&e.mode&1&&!(e.flags&128))NI(),na(),e.flags|=98560,s=!1;else if(s=Kc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[or]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else Gn!==null&&(cg(Gn),Gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?mt===0&&(mt=3):Kv())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return ia(),ng(t,e),t===null&&hu(e.stateNode.containerInfo),Vt(e),null;case 10:return xv(e.type._context),Vt(e),null;case 17:return dn(e.type)&&Yh(),Vt(e),null;case 19:if(je(Ye),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)_l(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rd(t),o!==null){for(e.flags|=128,_l(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ye,Ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&ut()>oa&&(e.flags|=128,r=!0,_l(s,!1),e.lanes=4194304)}else{if(!r)if(t=rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_l(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return Vt(e),null}else 2*ut()-s.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,r=!0,_l(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ut(),e.sibling=null,n=Ye.current,Me(Ye,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Hv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function GO(t,e){switch(Rv(e),e.tag){case 1:return dn(e.type)&&Yh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),je(hn),je(Bt),Vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mv(e),null;case 13:if(je(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ye),null;case 4:return ia(),null;case 10:return xv(e.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var Xc=!1,Ft=!1,HO=typeof WeakSet=="function"?WeakSet:Set,ae=null;function zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function rg(t,e,n){try{n()}catch(r){it(t,e,r)}}var ZE=!1;function KO(t,e){if(Um=Gh,t=EI(),Av(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:t,selectionRange:n},Gh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,I=y.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:qn(e.type,v),I);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(P){it(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return y=ZE,ZE=!1,y}function Wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rg(e,n,s)}i=i.next}while(i!==r)}}function Xd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ig(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vA(t){var e=t.alternate;e!==null&&(t.alternate=null,vA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[fu],delete e[qm],delete e[CO],delete e[xO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yA(t){return t.tag===5||t.tag===3||t.tag===4}function e0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qh));else if(r!==4&&(t=t.child,t!==null))for(sg(t,e,n),t=t.sibling;t!==null;)sg(t,e,n),t=t.sibling}function og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}var Rt=null,Wn=!1;function ii(t,e,n){for(n=n.child;n!==null;)_A(t,e,n),n=n.sibling}function _A(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(zd,n)}catch{}switch(n.tag){case 5:Ft||zo(n,e);case 6:var r=Rt,i=Wn;Rt=null,ii(t,e,n),Rt=r,Wn=i,Rt!==null&&(Wn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Wn?(t=Rt,n=n.stateNode,t.nodeType===8?Mp(t.parentNode,n):t.nodeType===1&&Mp(t,n),lu(t)):Mp(Rt,n.stateNode));break;case 4:r=Rt,i=Wn,Rt=n.stateNode.containerInfo,Wn=!0,ii(t,e,n),Rt=r,Wn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&rg(n,e,o),i=i.next}while(i!==r)}ii(t,e,n);break;case 1:if(!Ft&&(zo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,ii(t,e,n),Ft=r):ii(t,e,n);break;default:ii(t,e,n)}}function t0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HO),e.forEach(function(r){var i=rN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,Wn=!1;break e;case 3:Rt=a.stateNode.containerInfo,Wn=!0;break e;case 4:Rt=a.stateNode.containerInfo,Wn=!0;break e}a=a.return}if(Rt===null)throw Error(Z(160));_A(s,o,i),Rt=null,Wn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){it(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wA(e,t),e=e.sibling}function wA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),ir(t),r&4){try{Wl(3,t,t.return),Xd(3,t)}catch(v){it(t,t.return,v)}try{Wl(5,t,t.return)}catch(v){it(t,t.return,v)}}break;case 1:zn(e,t),ir(t),r&512&&n!==null&&zo(n,n.return);break;case 5:if(zn(e,t),ir(t),r&512&&n!==null&&zo(n,n.return),t.flags&32){var i=t.stateNode;try{iu(i,"")}catch(v){it(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jS(i,s),Cm(a,o);var c=Cm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?HS(i,d):h==="dangerouslySetInnerHTML"?WS(i,d):h==="children"?iu(i,d):dv(i,h,d,c)}switch(a){case"input":Am(i,s);break;case"textarea":zS(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Wo(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Wo(i,!!s.multiple,s.defaultValue,!0):Wo(i,!!s.multiple,s.multiple?[]:"",!1))}i[fu]=s}catch(v){it(t,t.return,v)}}break;case 6:if(zn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){it(t,t.return,v)}}break;case 3:if(zn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lu(e.containerInfo)}catch(v){it(t,t.return,v)}break;case 4:zn(e,t),ir(t);break;case 13:zn(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wv=ut())),r&4&&t0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||h,zn(e,t),Ft=c):zn(e,t),ir(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(d=ae=h;ae!==null;){switch(f=ae,m=f.child,f.tag){case 0:case 11:case 14:case 15:Wl(4,f,f.return);break;case 1:zo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){it(r,n,v)}}break;case 5:zo(f,f.return);break;case 22:if(f.memoizedState!==null){r0(d);continue}}m!==null?(m.return=f,ae=m):r0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GS("display",o))}catch(v){it(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){it(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zn(e,t),ir(t),r&4&&t0(t);break;case 21:break;default:zn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yA(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(iu(i,""),r.flags&=-33);var s=e0(t);og(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e0(t);sg(t,a,o);break;default:throw Error(Z(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QO(t,e,n){ae=t,EA(t)}function EA(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Xc;var c=Ft;if(Xc=o,(Ft=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?i0(i):l!==null?(l.return=o,ae=l):i0(i);for(;s!==null;)ae=s,EA(s),s=s.sibling;ae=i,Xc=a,Ft=c}n0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):n0(t)}}function n0(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Xd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&UE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}UE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&lu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ft||e.flags&512&&ig(e)}catch(f){it(e,e.return,f)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function r0(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function i0(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xd(4,e)}catch(l){it(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{ig(e)}catch(l){it(e,s,l)}break;case 5:var o=e.return;try{ig(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var YO=Math.ceil,od=Hr.ReactCurrentDispatcher,zv=Hr.ReactCurrentOwner,Mn=Hr.ReactCurrentBatchConfig,Se=0,Et=null,ft=null,Ct=0,_n=0,qo=Wi(0),mt=0,_u=null,$s=0,Jd=0,qv=0,Gl=null,on=null,Wv=0,oa=1/0,br=null,ad=!1,ag=null,Ai=null,Jc=!1,vi=null,ld=0,Hl=0,lg=null,Ih=-1,Ah=0;function Qt(){return Se&6?ut():Ih!==-1?Ih:Ih=ut()}function bi(t){return t.mode&1?Se&2&&Ct!==0?Ct&-Ct:OO.transition!==null?(Ah===0&&(Ah=sI()),Ah):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:dI(t.type)),t):1}function Kn(t,e,n,r){if(50<Hl)throw Hl=0,lg=null,Error(Z(185));Ku(t,n,r),(!(Se&2)||t!==Et)&&(t===Et&&(!(Se&2)&&(Jd|=n),mt===4&&fi(t,Ct)),fn(t,r),n===1&&Se===0&&!(e.mode&1)&&(oa=ut()+500,Kd&&Gi()))}function fn(t,e){var n=t.callbackNode;Ok(t,e);var r=Wh(t,t===Et?Ct:0);if(r===0)n!==null&&fE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fE(n),e===1)t.tag===0?kO(s0.bind(null,t)):xI(s0.bind(null,t)),PO(function(){!(Se&6)&&Gi()}),n=null;else{switch(oI(r)){case 1:n=vv;break;case 4:n=rI;break;case 16:n=qh;break;case 536870912:n=iI;break;default:n=qh}n=DA(n,TA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TA(t,e){if(Ih=-1,Ah=0,Se&6)throw Error(Z(327));var n=t.callbackNode;if(Yo()&&t.callbackNode!==n)return null;var r=Wh(t,t===Et?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ud(t,r);else{e=r;var i=Se;Se|=2;var s=IA();(Et!==t||Ct!==e)&&(br=null,oa=ut()+500,Ps(t,e));do try{ZO();break}catch(a){SA(t,a)}while(!0);Cv(),od.current=s,Se=i,ft!==null?e=0:(Et=null,Ct=0,e=mt)}if(e!==0){if(e===2&&(i=Mm(t),i!==0&&(r=i,e=ug(t,i))),e===1)throw n=_u,Ps(t,0),fi(t,r),fn(t,ut()),n;if(e===6)fi(t,r);else{if(i=t.current.alternate,!(r&30)&&!XO(i)&&(e=ud(t,r),e===2&&(s=Mm(t),s!==0&&(r=s,e=ug(t,s))),e===1))throw n=_u,Ps(t,0),fi(t,r),fn(t,ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:cs(t,on,br);break;case 3:if(fi(t,r),(r&130023424)===r&&(e=Wv+500-ut(),10<e)){if(Wh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zm(cs.bind(null,t,on,br),e);break}cs(t,on,br);break;case 4:if(fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YO(r/1960))-r,10<r){t.timeoutHandle=zm(cs.bind(null,t,on,br),r);break}cs(t,on,br);break;case 5:cs(t,on,br);break;default:throw Error(Z(329))}}}return fn(t,ut()),t.callbackNode===n?TA.bind(null,t):null}function ug(t,e){var n=Gl;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=ud(t,e),t!==2&&(e=on,on=n,e!==null&&cg(e)),t}function cg(t){on===null?on=t:on.push.apply(on,t)}function XO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fi(t,e){for(e&=~qv,e&=~Jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function s0(t){if(Se&6)throw Error(Z(327));Yo();var e=Wh(t,0);if(!(e&1))return fn(t,ut()),null;var n=ud(t,e);if(t.tag!==0&&n===2){var r=Mm(t);r!==0&&(e=r,n=ug(t,r))}if(n===1)throw n=_u,Ps(t,0),fi(t,e),fn(t,ut()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,on,br),fn(t,ut()),null}function Gv(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(oa=ut()+500,Kd&&Gi())}}function Ls(t){vi!==null&&vi.tag===0&&!(Se&6)&&Yo();var e=Se;Se|=1;var n=Mn.transition,r=Pe;try{if(Mn.transition=null,Pe=1,t)return t()}finally{Pe=r,Mn.transition=n,Se=e,!(Se&6)&&Gi()}}function Hv(){_n=qo.current,je(qo)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RO(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(Rv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yh();break;case 3:ia(),je(hn),je(Bt),Vv();break;case 5:Mv(r);break;case 4:ia();break;case 13:je(Ye);break;case 19:je(Ye);break;case 10:xv(r.type._context);break;case 22:case 23:Hv()}n=n.return}if(Et=t,ft=t=Ri(t.current,null),Ct=_n=e,mt=0,_u=null,qv=Jd=$s=0,on=Gl=null,Is!==null){for(e=0;e<Is.length;e++)if(n=Is[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return t}function SA(t,e){do{var n=ft;try{if(Cv(),Eh.current=sd,id){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(Vs=0,_t=pt=Xe=null,ql=!1,gu=0,zv.current=null,n===null||n.return===null){mt=1,_u=e,ft=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=GE(o);if(m!==null){m.flags&=-257,HE(m,o,a,s,e),m.mode&1&&WE(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){WE(s,c,e),Kv();break e}l=Error(Z(426))}}else if(Ge&&a.mode&1){var I=GE(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),HE(I,o,a,s,e),Pv(sa(l,a));break e}}s=l=sa(l,a),mt!==4&&(mt=2),Gl===null?Gl=[s]:Gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=oA(s,l,e);FE(s,w);break e;case 1:a=l;var _=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ai===null||!Ai.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=aA(s,a,e);FE(s,P);break e}}s=s.return}while(s!==null)}bA(n)}catch(x){e=x,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function IA(){var t=od.current;return od.current=sd,t===null?sd:t}function Kv(){(mt===0||mt===3||mt===2)&&(mt=4),Et===null||!($s&268435455)&&!(Jd&268435455)||fi(Et,Ct)}function ud(t,e){var n=Se;Se|=2;var r=IA();(Et!==t||Ct!==e)&&(br=null,Ps(t,e));do try{JO();break}catch(i){SA(t,i)}while(!0);if(Cv(),Se=n,od.current=r,ft!==null)throw Error(Z(261));return Et=null,Ct=0,mt}function JO(){for(;ft!==null;)AA(ft)}function ZO(){for(;ft!==null&&!Ik();)AA(ft)}function AA(t){var e=PA(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?bA(t):ft=e,zv.current=null}function bA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GO(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ft=null;return}}else if(n=WO(n,e,_n),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);mt===0&&(mt=5)}function cs(t,e,n){var r=Pe,i=Mn.transition;try{Mn.transition=null,Pe=1,eN(t,e,n,r)}finally{Mn.transition=i,Pe=r}return null}function eN(t,e,n,r){do Yo();while(vi!==null);if(Se&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Nk(t,s),t===Et&&(ft=Et=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jc||(Jc=!0,DA(qh,function(){return Yo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mn.transition,Mn.transition=null;var o=Pe;Pe=1;var a=Se;Se|=4,zv.current=null,KO(t,n),wA(n,t),wO(Bm),Gh=!!Um,Bm=Um=null,t.current=n,QO(n),Ak(),Se=a,Pe=o,Mn.transition=s}else t.current=n;if(Jc&&(Jc=!1,vi=t,ld=i),s=t.pendingLanes,s===0&&(Ai=null),Pk(n.stateNode),fn(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,t=ag,ag=null,t;return ld&1&&t.tag!==0&&Yo(),s=t.pendingLanes,s&1?t===lg?Hl++:(Hl=0,lg=t):Hl=0,Gi(),null}function Yo(){if(vi!==null){var t=oI(ld),e=Mn.transition,n=Pe;try{if(Mn.transition=null,Pe=16>t?16:t,vi===null)var r=!1;else{if(t=vi,vi=null,ld=0,Se&6)throw Error(Z(331));var i=Se;for(Se|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Wl(8,h,s)}var d=h.child;if(d!==null)d.return=h,ae=d;else for(;ae!==null;){h=ae;var f=h.sibling,m=h.return;if(vA(h),h===c){ae=null;break}if(f!==null){f.return=m,ae=f;break}ae=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var I=v.sibling;v.sibling=null,v=I}while(v!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wl(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ae=w;break e}ae=s.return}}var _=t.current;for(ae=_;ae!==null;){o=ae;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ae=T;else e:for(o=_;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xd(9,a)}}catch(x){it(a,a.return,x)}if(a===o){ae=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ae=P;break e}ae=a.return}}if(Se=i,Gi(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(zd,t)}catch{}r=!0}return r}finally{Pe=n,Mn.transition=e}}return!1}function o0(t,e,n){e=sa(n,e),e=oA(t,e,1),t=Ii(t,e,1),e=Qt(),t!==null&&(Ku(t,1,e),fn(t,e))}function it(t,e,n){if(t.tag===3)o0(t,t,n);else for(;e!==null;){if(e.tag===3){o0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=sa(n,t),t=aA(e,t,1),e=Ii(e,t,1),t=Qt(),e!==null&&(Ku(e,1,t),fn(e,t));break}}e=e.return}}function tN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Ct&n)===n&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>ut()-Wv?Ps(t,0):qv|=n),fn(t,e)}function RA(t,e){e===0&&(t.mode&1?(e=jc,jc<<=1,!(jc&130023424)&&(jc=4194304)):e=1);var n=Qt();t=Fr(t,e),t!==null&&(Ku(t,e,n),fn(t,n))}function nN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RA(t,n)}function rN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),RA(t,n)}var PA;PA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,qO(t,e,n);an=!!(t.flags&131072)}else an=!1,Ge&&e.flags&1048576&&kI(e,Zh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sh(t,e),t=e.pendingProps;var i=ta(e,Bt.current);Qo(e,n),i=Lv(null,e,r,t,i,n);var s=Fv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(s=!0,Xh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ov(e),i.updater=Yd,e.stateNode=i,i._reactInternals=e,Ym(e,r,t,n),e=Zm(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&bv(e),qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sN(r),t=qn(r,t),i){case 0:e=Jm(null,e,r,t,n);break e;case 1:e=YE(null,e,r,t,n);break e;case 11:e=KE(null,e,r,t,n);break e;case 14:e=QE(null,e,r,qn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),Jm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),YE(t,e,r,i,n);case 3:e:{if(hA(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,LI(t,e),nd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sa(Error(Z(423)),e),e=XE(t,e,r,n,i);break e}else if(r!==i){i=sa(Error(Z(424)),e),e=XE(t,e,r,n,i);break e}else for(Tn=Si(e.stateNode.containerInfo.firstChild),Sn=e,Ge=!0,Gn=null,n=VI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===i){e=Ur(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return FI(e),t===null&&Hm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jm(r,i)?o=null:s!==null&&jm(r,s)&&(e.flags|=32),cA(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&Hm(e),null;case 13:return dA(t,e,n);case 4:return Nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ra(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),KE(t,e,r,i,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Me(ed,r._currentValue),r._currentValue=o,s!==null)if(Yn(s.value,o)){if(s.children===i.children&&!hn.current){e=Ur(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Km(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Km(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qo(e,n),i=$n(i),r=r(i),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,i=qn(r,e.pendingProps),i=qn(r.type,i),QE(t,e,r,i,n);case 15:return lA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),Sh(t,e),e.tag=1,dn(r)?(t=!0,Xh(e)):t=!1,Qo(e,n),sA(e,r,i),Ym(e,r,i,n),Zm(null,e,r,!0,t,n);case 19:return fA(t,e,n);case 22:return uA(t,e,n)}throw Error(Z(156,e.tag))};function DA(t,e){return nI(t,e)}function iN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new iN(t,e,n,r)}function Qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sN(t){if(typeof t=="function")return Qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pv)return 11;if(t===mv)return 14}return 2}function Ri(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case No:return Ds(n.children,i,s,e);case fv:o=8,i|=8;break;case wm:return t=kn(12,n,e,i|2),t.elementType=wm,t.lanes=s,t;case Em:return t=kn(13,n,e,i),t.elementType=Em,t.lanes=s,t;case Tm:return t=kn(19,n,e,i),t.elementType=Tm,t.lanes=s,t;case FS:return Zd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $S:o=10;break e;case LS:o=9;break e;case pv:o=11;break e;case mv:o=14;break e;case ui:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ds(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function Zd(t,e,n,r){return t=kn(22,t,r,e),t.elementType=FS,t.lanes=n,t.stateNode={isHidden:!1},t}function zp(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function qp(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ip(0),this.expirationTimes=Ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ip(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yv(t,e,n,r,i,s,o,a,l){return t=new oN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ov(s),t}function aN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CA(t){if(!t)return xi;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(dn(n))return CI(t,n,e)}return e}function xA(t,e,n,r,i,s,o,a,l){return t=Yv(n,r,!0,t,i,s,o,a,l),t.context=CA(null),n=t.current,r=Qt(),i=bi(n),s=Mr(r,i),s.callback=e??null,Ii(n,s,i),t.current.lanes=i,Ku(t,i,r),fn(t,r),t}function ef(t,e,n,r){var i=e.current,s=Qt(),o=bi(i);return n=CA(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ii(i,e,o),t!==null&&(Kn(t,i,o,s),wh(t,i,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xv(t,e){a0(t,e),(t=t.alternate)&&a0(t,e)}function lN(){return null}var kA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jv(t){this._internalRoot=t}tf.prototype.render=Jv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));ef(t,e,null,null)};tf.prototype.unmount=Jv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){ef(null,t,null,null)}),e[Lr]=null}};function tf(t){this._internalRoot=t}tf.prototype.unstable_scheduleHydration=function(t){if(t){var e=uI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<di.length&&e!==0&&e<di[n].priority;n++);di.splice(n,0,t),n===0&&hI(t)}};function Zv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l0(){}function uN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=cd(o);s.call(c)}}var o=xA(e,r,t,0,null,!1,!1,"",l0);return t._reactRootContainer=o,t[Lr]=o.current,hu(t.nodeType===8?t.parentNode:t),Ls(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=cd(l);a.call(c)}}var l=Yv(t,0,!1,null,null,!1,!1,"",l0);return t._reactRootContainer=l,t[Lr]=l.current,hu(t.nodeType===8?t.parentNode:t),Ls(function(){ef(e,l,n,r)}),l}function rf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cd(o);a.call(l)}}ef(e,o,t,i)}else o=uN(n,e,t,i,r);return cd(o)}aI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kl(e.pendingLanes);n!==0&&(yv(e,n|1),fn(e,ut()),!(Se&6)&&(oa=ut()+500,Gi()))}break;case 13:Ls(function(){var r=Fr(t,1);if(r!==null){var i=Qt();Kn(r,t,1,i)}}),Xv(t,1)}};_v=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=Qt();Kn(e,t,134217728,n)}Xv(t,134217728)}};lI=function(t){if(t.tag===13){var e=bi(t),n=Fr(t,e);if(n!==null){var r=Qt();Kn(n,t,e,r)}Xv(t,e)}};uI=function(){return Pe};cI=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};km=function(t,e,n){switch(e){case"input":if(Am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hd(r);if(!i)throw Error(Z(90));BS(r),Am(r,i)}}}break;case"textarea":zS(t,n);break;case"select":e=n.value,e!=null&&Wo(t,!!n.multiple,e,!1)}};YS=Gv;XS=Ls;var cN={usingClientEntryPoint:!1,Events:[Yu,Lo,Hd,KS,QS,Gv]},wl={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hN={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eI(t),t===null?null:t.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||lN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{zd=Zc.inject(hN),hr=Zc}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zv(e))throw Error(Z(200));return aN(t,e,null,n)};Rn.createRoot=function(t,e){if(!Zv(t))throw Error(Z(299));var n=!1,r="",i=kA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yv(t,1,!1,null,null,n,!1,r,i),t[Lr]=e.current,hu(t.nodeType===8?t.parentNode:t),new Jv(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=eI(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return Ls(t)};Rn.hydrate=function(t,e,n){if(!nf(e))throw Error(Z(200));return rf(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!Zv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=kA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xA(e,null,t,1,n??null,i,!1,s,o),t[Lr]=e.current,hu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new tf(e)};Rn.render=function(t,e,n){if(!nf(e))throw Error(Z(200));return rf(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!nf(t))throw Error(Z(40));return t._reactRootContainer?(Ls(function(){rf(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Rn.unstable_batchedUpdates=Gv;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return rf(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function OA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OA)}catch(t){console.error(t)}}OA(),OS.exports=Rn;var NA=OS.exports;const yi=et(NA);var MA,u0=NA;MA=u0.createRoot,u0.hydrateRoot;var VA={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(VA);var dN=VA.exports;const Xn=et(dN),fN=["xxl","xl","lg","md","sm","xs"],pN="xs",$A=j.createContext({prefixes:{},breakpoints:fN,minBreakpoint:pN});function xa(t,e){const{prefixes:n}=j.useContext($A);return t||n[e]||e}function mN(){const{dir:t}=j.useContext($A);return t==="rtl"}const oo=!!(typeof window<"u"&&window.document&&window.document.createElement);var hg=!1,dg=!1;try{var Wp={get passive(){return hg=!0},get once(){return dg=hg=!0}};oo&&(window.addEventListener("test",Wp,Wp),window.removeEventListener("test",Wp,!0))}catch{}function LA(t,e,n,r){if(r&&typeof r!="boolean"&&!dg){var i=r.once,s=r.capture,o=n;!dg&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,hg?r:s)}t.addEventListener(e,n,r)}function Hi(t){return t&&t.ownerDocument||document}function fg(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}var eh;function hd(t){if((!eh&&eh!==0||t)&&oo){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),eh=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return eh}function pg(){return j.useState(null)}function gN(t){const e=j.useRef(t);return j.useEffect(()=>{e.current=t},[t]),e}function xn(t){const e=gN(t);return j.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const c0=t=>!t||typeof t=="function"?t:e=>{t.current=e};function vN(t,e){const n=c0(t),r=c0(e);return i=>{n&&n(i),r&&r(i)}}function ka(t,e){return j.useMemo(()=>vN(t,e),[t,e])}function yN(t){const e=j.useRef(t);return e.current=t,e}function FA(t){const e=yN(t);j.useEffect(()=>()=>e.current(),[])}function _N(t){var e=Hi(t);return e&&e.defaultView||window}function wN(t,e){return _N(t).getComputedStyle(t,e)}var EN=/([A-Z])/g;function TN(t){return t.replace(EN,"-$1").toLowerCase()}var SN=/^ms-/;function th(t){return TN(t).replace(SN,"-ms-")}var IN=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function AN(t){return!!(t&&IN.test(t))}function wn(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(th(e))||wN(t).getPropertyValue(th(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(th(i)):AN(i)?r+=i+"("+s+") ":n+=th(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function Or(t,e,n,r){return LA(t,e,n,r),function(){fg(t,e,n,r)}}function bN(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function RN(t){var e=wn(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function PN(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||bN(t,"transitionend",!0)},e+n),s=Or(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function UA(t,e,n,r){n==null&&(n=RN(t)||0);var i=PN(t,n,r),s=Or(t,"transitionend",e);return function(){i(),s()}}function Gp(t){t===void 0&&(t=Hi());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Fs(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function BA(){const t=j.useRef(!0),e=j.useRef(()=>t.current);return j.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function DN(t){const e=j.useRef(null);return j.useEffect(()=>{e.current=t}),e.current}const CN="data-rr-ui-";function xN(t){return`${CN}${t}`}function kN(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const h0=xN("modal-open");class ey{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return kN(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(wn(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(h0,""),wn(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(h0),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const jA=j.createContext(oo?window:void 0);jA.Provider;function ty(){return j.useContext(jA)}const Hp=(t,e)=>oo?t==null?(e||Hi()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function ON(t,e){const n=ty(),[r,i]=j.useState(()=>Hp(t,n==null?void 0:n.document));if(!r){const s=Hp(t);s&&i(s)}return j.useEffect(()=>{},[e,r]),j.useEffect(()=>{const s=Hp(t);s!==r&&i(s)},[t,r]),r}const NN=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",MN=typeof document<"u",d0=MN||NN?j.useLayoutEffect:j.useEffect;function VN({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=j.useRef(null),o=j.useRef(e),a=xn(n);j.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=ka(s,t.ref),c=j.cloneElement(t,{ref:l});return e?c:i||!o.current&&r?null:c}function $N(t){return t.code==="Escape"||t.keyCode===27}function LN(){const t=j.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const FN=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function UN(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BN(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:o,addEndListener:a,children:l}=t,c=UN(t,FN);const{major:h}=LN(),d=h>=19?l.props.ref:l.ref,f=j.useRef(null),m=ka(f,typeof l=="function"?null:d),y=k=>S=>{k&&f.current&&k(f.current,S)},v=j.useCallback(y(e),[e]),I=j.useCallback(y(n),[n]),w=j.useCallback(y(r),[r]),_=j.useCallback(y(i),[i]),T=j.useCallback(y(s),[s]),P=j.useCallback(y(o),[o]),x=j.useCallback(y(a),[a]);return Object.assign({},c,{nodeRef:f},e&&{onEnter:v},n&&{onEntering:I},r&&{onEntered:w},i&&{onExit:_},s&&{onExiting:T},o&&{onExited:P},a&&{addEndListener:x},{children:typeof l=="function"?(k,S)=>l(k,Object.assign({},S,{ref:m})):j.cloneElement(l,{ref:m})})}const jN=["component"];function zN(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const qN=j.forwardRef((t,e)=>{let{component:n}=t,r=zN(t,jN);const i=BN(r);return fe.jsx(n,Object.assign({ref:e},i))});function WN({in:t,onTransition:e}){const n=j.useRef(null),r=j.useRef(!0),i=xn(e);return d0(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),d0(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function GN({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=j.useState(!e);e&&s&&o(!1);const a=WN({in:!!e,onTransition:c=>{const h=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(h,d=>{throw c.in||o(!0),d})}}),l=ka(a,t.ref);return s&&!e?null:j.cloneElement(t,{ref:l})}function f0(t,e,n){return t?fe.jsx(qN,Object.assign({},n,{component:t})):e?fe.jsx(GN,Object.assign({},n,{transition:e})):fe.jsx(VN,Object.assign({},n))}const HN=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function KN(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let Kp;function QN(t){return Kp||(Kp=new ey({ownerDocument:t==null?void 0:t.document})),Kp}function YN(t){const e=ty(),n=t||QN(e),r=j.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:j.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:j.useCallback(i=>{r.current.backdrop=i},[])})}const zA=j.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:h,transition:d,runTransition:f,backdropTransition:m,runBackdropTransition:y,autoFocus:v=!0,enforceFocus:I=!0,restoreFocus:w=!0,restoreFocusOptions:_,renderDialog:T,renderBackdrop:P=Ae=>fe.jsx("div",Object.assign({},Ae)),manager:x,container:k,onShow:S,onHide:E=()=>{},onExit:b,onExited:A,onExiting:D,onEnter:O,onEntering:C,onEntered:Y}=t,W=KN(t,HN);const z=ty(),Q=ON(k),N=YN(x),G=BA(),X=DN(n),[se,L]=j.useState(!n),B=j.useRef(null);j.useImperativeHandle(e,()=>N,[N]),oo&&!X&&n&&(B.current=Gp(z==null?void 0:z.document)),n&&se&&L(!1);const q=xn(()=>{if(N.add(),Ee.current=Or(document,"keydown",me),ge.current=Or(document,"focus",()=>setTimeout(ie),!0),S&&S(),v){var Ae,er;const tr=Gp((Ae=(er=N.dialog)==null?void 0:er.ownerDocument)!=null?Ae:z==null?void 0:z.document);N.dialog&&tr&&!Fs(N.dialog,tr)&&(B.current=tr,N.dialog.focus())}}),J=xn(()=>{if(N.remove(),Ee.current==null||Ee.current(),ge.current==null||ge.current(),w){var Ae;(Ae=B.current)==null||Ae.focus==null||Ae.focus(_),B.current=null}});j.useEffect(()=>{!n||!Q||q()},[n,Q,q]),j.useEffect(()=>{se&&J()},[se,J]),FA(()=>{J()});const ie=xn(()=>{if(!I||!G()||!N.isTopModal())return;const Ae=Gp(z==null?void 0:z.document);N.dialog&&Ae&&!Fs(N.dialog,Ae)&&N.dialog.focus()}),ce=xn(Ae=>{Ae.target===Ae.currentTarget&&(c==null||c(Ae),a===!0&&E())}),me=xn(Ae=>{l&&$N(Ae)&&N.isTopModal()&&(h==null||h(Ae),Ae.defaultPrevented||E())}),ge=j.useRef(),Ee=j.useRef(),xe=(...Ae)=>{L(!0),A==null||A(...Ae)};if(!Q)return null;const nt=Object.assign({role:r,ref:N.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},W,{style:s,className:i,tabIndex:-1});let lt=T?T(nt):fe.jsx("div",Object.assign({},nt,{children:j.cloneElement(o,{role:"document"})}));lt=f0(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:b,onExiting:D,onExited:xe,onEnter:O,onEntering:C,onEntered:Y,children:lt});let rn=null;return a&&(rn=P({ref:N.setBackdropRef,onClick:ce}),rn=f0(m,y,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:rn})),fe.jsx(fe.Fragment,{children:yi.createPortal(fe.jsxs(fe.Fragment,{children:[rn,lt]}),Q)})});zA.displayName="Modal";const XN=Object.assign(zA,{Manager:ey});function JN(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function qA(t,e){t.classList?t.classList.add(e):JN(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var ZN=Function.prototype.bind.call(Function.prototype.call,[].slice);function hs(t,e){return ZN(t.querySelectorAll(e))}function p0(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function WA(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=p0(t.className,e):t.setAttribute("class",p0(t.className&&t.className.baseVal||"",e))}const Eo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class eM extends ey{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,wn(n,{[e]:`${parseFloat(wn(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],wn(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(qA(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";hs(n,Eo.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),hs(n,Eo.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),hs(n,Eo.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();WA(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";hs(n,Eo.FIXED_CONTENT).forEach(s=>this.restore(r,s)),hs(n,Eo.STICKY_CONTENT).forEach(s=>this.restore(i,s)),hs(n,Eo.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Qp;function tM(t){return Qp||(Qp=new eM(t)),Qp}function Ju(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function dd(t,e){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dd(t,e)}function GA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dd(t,e)}var HA={exports:{}},nM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rM=nM,iM=rM;function KA(){}function QA(){}QA.resetWarningCache=KA;var sM=function(){function t(r,i,s,o,a,l){if(l!==iM){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:QA,resetWarningCache:KA};return n.PropTypes=n,n};HA.exports=sM();var oM=HA.exports;const ee=et(oM),m0={disabled:!1},YA=V.createContext(null);var aM=function(e){return e.scrollTop},Nl="unmounted",ds="exited",hi="entering",gs="entered",mg="exiting",Kr=function(t){GA(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=ds,s.appearStatus=hi):l=gs:r.unmountOnExit||r.mountOnEnter?l=Nl:l=ds,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Nl?{status:ds}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==hi&&o!==gs&&(s=hi):(o===hi||o===gs)&&(s=mg)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===hi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:yi.findDOMNode(this);o&&aM(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ds&&this.setState({status:Nl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[yi.findDOMNode(this),a],c=l[0],h=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||m0.disabled){this.safeSetState({status:gs},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:hi},function(){s.props.onEntering(c,h),s.onTransitionEnd(f,function(){s.safeSetState({status:gs},function(){s.props.onEntered(c,h)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:yi.findDOMNode(this);if(!s||m0.disabled){this.safeSetState({status:ds},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:mg},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ds},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:yi.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Nl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Ju(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return V.createElement(YA.Provider,{value:null},typeof o=="function"?o(i,a):V.cloneElement(V.Children.only(o),a))},e}(V.Component);Kr.contextType=YA;Kr.propTypes={};function To(){}Kr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:To,onEntering:To,onEntered:To,onExit:To,onExiting:To,onExited:To};Kr.UNMOUNTED=Nl;Kr.EXITED=ds;Kr.ENTERING=hi;Kr.ENTERED=gs;Kr.EXITING=mg;function g0(t,e){const n=wn(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function lM(t,e){const n=g0(t,"transitionDuration"),r=g0(t,"transitionDelay"),i=UA(t,s=>{s.target===t&&(i(),e(s))},n+r)}function uM(t){t.offsetHeight}function cM(t){return t&&"setState"in t?yi.findDOMNode(t):t??null}const hM=V.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...c},h)=>{const d=j.useRef(null),f=ka(d,l),m=k=>{f(cM(k))},y=k=>S=>{k&&d.current&&k(d.current,S)},v=j.useCallback(y(t),[t]),I=j.useCallback(y(e),[e]),w=j.useCallback(y(n),[n]),_=j.useCallback(y(r),[r]),T=j.useCallback(y(i),[i]),P=j.useCallback(y(s),[s]),x=j.useCallback(y(o),[o]);return fe.jsx(Kr,{ref:h,...c,onEnter:v,onEntered:w,onEntering:I,onExit:_,onExited:P,onExiting:T,addEndListener:x,nodeRef:d,children:typeof a=="function"?(k,S)=>a(k,{...S,ref:m}):V.cloneElement(a,{ref:m})})}),dM={[hi]:"show",[gs]:"show"},ny=j.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=j.useCallback((l,c)=>{uM(l),r==null||r(l,c)},[r]);return fe.jsx(hM,{ref:s,addEndListener:lM,...o,onEnter:a,childRef:e.ref,children:(l,c)=>j.cloneElement(e,{...c,className:Xn("fade",t,e.props.className,dM[l],n[l])})})});ny.displayName="Fade";const XA=j.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=xa(e,"modal-body"),fe.jsx(n,{ref:i,className:Xn(t,e),...r})));XA.displayName="ModalBody";const JA=j.createContext({onHide(){}}),ry=j.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...l},c)=>{t=xa(t,"modal");const h=`${t}-dialog`,d=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return fe.jsx("div",{...l,ref:c,className:Xn(h,e,i&&`${t}-${i}`,r&&`${h}-centered`,a&&`${h}-scrollable`,s&&d),children:fe.jsx("div",{className:Xn(`${t}-content`,n),children:o})})});ry.displayName="ModalDialog";const ZA=j.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=xa(e,"modal-footer"),fe.jsx(n,{ref:i,className:Xn(t,e),...r})));ZA.displayName="ModalFooter";const fM={"aria-label":ee.string,onClick:ee.func,variant:ee.oneOf(["white"])},iy=j.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>fe.jsx("button",{ref:i,type:"button",className:Xn("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));iy.displayName="CloseButton";iy.propTypes=fM;const pM=j.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=j.useContext(JA),l=xn(()=>{a==null||a.onHide(),r==null||r()});return fe.jsxs("div",{ref:o,...s,children:[i,n&&fe.jsx(iy,{"aria-label":t,variant:e,onClick:l})]})}),eb=j.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=xa(t,"modal-header"),fe.jsx(pM,{ref:s,...i,className:Xn(e,t),closeLabel:n,closeButton:r})));eb.displayName="ModalHeader";const mM=t=>j.forwardRef((e,n)=>fe.jsx("div",{...e,ref:n,className:Xn(e.className,t)})),gM=mM("h4"),tb=j.forwardRef(({className:t,bsPrefix:e,as:n=gM,...r},i)=>(e=xa(e,"modal-title"),fe.jsx(n,{ref:i,className:Xn(t,e),...r})));tb.displayName="ModalTitle";function vM(t){return fe.jsx(ny,{...t,timeout:null})}function yM(t){return fe.jsx(ny,{...t,timeout:null})}const nb=j.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=ry,"data-bs-theme":a,"aria-labelledby":l,"aria-describedby":c,"aria-label":h,show:d=!1,animation:f=!0,backdrop:m=!0,keyboard:y=!0,onEscapeKeyDown:v,onShow:I,onHide:w,container:_,autoFocus:T=!0,enforceFocus:P=!0,restoreFocus:x=!0,restoreFocusOptions:k,onEntered:S,onExit:E,onExiting:b,onEnter:A,onEntering:D,onExited:O,backdropClassName:C,manager:Y,...W},z)=>{const[Q,N]=j.useState({}),[G,X]=j.useState(!1),se=j.useRef(!1),L=j.useRef(!1),B=j.useRef(null),[q,J]=pg(),ie=ka(z,J),ce=xn(w),me=mN();t=xa(t,"modal");const ge=j.useMemo(()=>({onHide:ce}),[ce]);function Ee(){return Y||tM({isRTL:me})}function xe(he){if(!oo)return;const $e=Ee().getScrollbarWidth()>0,rr=he.scrollHeight>Hi(he).documentElement.clientHeight;N({paddingRight:$e&&!rr?hd():void 0,paddingLeft:!$e&&rr?hd():void 0})}const nt=xn(()=>{q&&xe(q.dialog)});FA(()=>{fg(window,"resize",nt),B.current==null||B.current()});const lt=()=>{se.current=!0},rn=he=>{se.current&&q&&he.target===q.dialog&&(L.current=!0),se.current=!1},Ae=()=>{X(!0),B.current=UA(q.dialog,()=>{X(!1)})},er=he=>{he.target===he.currentTarget&&Ae()},tr=he=>{if(m==="static"){er(he);return}if(L.current||he.target!==he.currentTarget){L.current=!1;return}w==null||w()},Ja=he=>{y?v==null||v(he):(he.preventDefault(),m==="static"&&Ae())},po=(he,$e)=>{he&&xe(he),A==null||A(he,$e)},vn=he=>{B.current==null||B.current(),E==null||E(he)},Tr=(he,$e)=>{D==null||D(he,$e),LA(window,"resize",nt)},mo=he=>{he&&(he.style.display=""),O==null||O(he),fg(window,"resize",nt)},ei=j.useCallback(he=>fe.jsx("div",{...he,className:Xn(`${t}-backdrop`,C,!f&&"show")}),[f,C,t]),nr={...n,...Q};nr.display="block";const rs=he=>fe.jsx("div",{role:"dialog",...he,style:nr,className:Xn(e,t,G&&`${t}-static`,!f&&"show"),onClick:m?tr:void 0,onMouseUp:rn,"data-bs-theme":a,"aria-label":h,"aria-labelledby":l,"aria-describedby":c,children:fe.jsx(o,{...W,onMouseDown:lt,className:r,contentClassName:i,children:s})});return fe.jsx(JA.Provider,{value:ge,children:fe.jsx(XN,{show:d,ref:ie,backdrop:m,container:_,keyboard:!0,autoFocus:T,enforceFocus:P,restoreFocus:x,restoreFocusOptions:k,onEscapeKeyDown:Ja,onShow:I,onHide:w,onEnter:po,onEntering:Tr,onEntered:S,onExit:vn,onExiting:b,onExited:mo,manager:Ee(),transition:f?vM:void 0,backdropTransition:f?yM:void 0,renderBackdrop:ei,renderDialog:rs})})});nb.displayName="Modal";const nh=Object.assign(nb,{Body:XA,Header:eb,Title:tb,Footer:ZA,Dialog:ry,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var _M=function(){},wM=_M;const EM=et(wM);function Br(t){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(t)}function TM(t,e){if(Br(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Br(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rb(t){var e=TM(t,"string");return Br(e)=="symbol"?e:e+""}function vs(t,e,n){return(e=rb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v0(Object(n),!0).forEach(function(r){vs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yr(t,e){if(t==null)return{};var n,r,i=Ju(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rb(r.key),r)}}function It(t,e,n){return e&&y0(t.prototype,e),n&&y0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fd(t){return fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fd(t)}function ib(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ib=function(){return!!t})()}function SM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IM(t,e){if(e&&(Br(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SM(t)}function tn(t,e,n){return e=fd(e),IM(t,ib()?Reflect.construct(e,n||[],fd(t).constructor):e.apply(t,n))}function nn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dd(t,e)}function sb(t){if(Array.isArray(t))return t}function AM(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function gg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sy(t,e){if(t){if(typeof t=="string")return gg(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gg(t,e):void 0}}function ob(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(t,e){return sb(t)||AM(t,e)||sy(t,e)||ob()}function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(null,arguments)}var bM=function(t,e,n,r,i,s,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],h=0;l=new Error(e.replace(/%s/g,function(){return c[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},RM=bM;const wu=et(RM);var PM=function(){};function DM(t,e){var n={};return Object.keys(t).forEach(function(r){n[Rh(r)]=PM}),n}function _0(t,e){return t[e]!==void 0}function Rh(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function CM(t){return!!t&&(typeof t!="function"||t.prototype&&t.prototype.isReactComponent)}function ab(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function lb(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function ub(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ab.__suppressDeprecationWarning=!0;lb.__suppressDeprecationWarning=!0;ub.__suppressDeprecationWarning=!0;function xM(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=ab,e.componentWillReceiveProps=lb),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=ub;var a=e.componentDidUpdate;e.componentDidUpdate=function(c,h,d){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,c,h,f)}}return t}var kM="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function cb(t,e,n){n===void 0&&(n=[]);var r=t.displayName||t.name||"Component",i=CM(t),s=Object.keys(e),o=s.map(Rh);i||!n.length||wu(!1);var a=function(c){GA(h,c);function h(){for(var f,m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];f=c.call.apply(c,[this].concat(y))||this,f.handlers=Object.create(null),s.forEach(function(w){var _=e[w],T=function(x){if(f.props[_]){var k;f._notifying=!0;for(var S=arguments.length,E=new Array(S>1?S-1:0),b=1;b<S;b++)E[b-1]=arguments[b];(k=f.props)[_].apply(k,[x].concat(E)),f._notifying=!1}f.unmounted||f.setState(function(A){var D,O=A.values;return{values:st(Object.create(null),O,(D={},D[w]=x,D))}})};f.handlers[_]=T}),n.length&&(f.attachRef=function(w){f.inner=w});var I=Object.create(null);return s.forEach(function(w){I[w]=f.props[Rh(w)]}),f.state={values:I,prevProps:{}},f}var d=h.prototype;return d.shouldComponentUpdate=function(){return!this._notifying},h.getDerivedStateFromProps=function(m,y){var v=y.values,I=y.prevProps,w={values:st(Object.create(null),v),prevProps:{}};return s.forEach(function(_){w.prevProps[_]=m[_],!_0(m,_)&&_0(I,_)&&(w.values[_]=m[Rh(_)])}),w},d.componentWillUnmount=function(){this.unmounted=!0},d.render=function(){var m=this,y=this.props,v=y.innerRef,I=Ju(y,["innerRef"]);o.forEach(function(_){delete I[_]});var w={};return s.forEach(function(_){var T=m.props[_];w[_]=T!==void 0?T:m.state.values[_]}),V.createElement(t,st({},I,w,this.handlers,{ref:v||this.attachRef}))},h}(V.Component);xM(a),a.displayName="Uncontrolled("+r+")",a.propTypes=st({innerRef:function(){}},DM(e)),n.forEach(function(c){a.prototype[c]=function(){var d;return(d=this.inner)[c].apply(d,arguments)}});var l=a;return V.forwardRef&&(l=V.forwardRef(function(c,h){return V.createElement(a,st({},c,{innerRef:h,__source:{fileName:kM,lineNumber:128},__self:this}))}),l.propTypes=a.propTypes),l.ControlledComponent=t,l.deferControlTo=function(c,h,d){return h===void 0&&(h={}),cb(c,st({},e,h),d)},l}function hb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=hb(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function gt(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=hb(t))&&(r&&(r+=" "),r+=e);return r}var pd="milliseconds",Eu="seconds",Tu="minutes",Su="hours",Us="day",aa="week",Iu="month",Bs="year",js="decade",zs="century",db={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},OM={month:1,year:12,decade:10*12,century:100*12};function NM(t){return[31,MM(t),31,30,31,30,31,31,30,31,30,31]}function MM(t){return t%4===0&&t%100!==0||t%400===0?29:28}function Jn(t,e,n){switch(t=new Date(t),n){case pd:case Eu:case Tu:case Su:case Us:case aa:return VM(t,e*db[n]);case Iu:case Bs:case js:case zs:return $M(t,e*OM[n])}throw new TypeError('Invalid units: "'+n+'"')}function VM(t,e){var n=new Date(+t+e);return LM(t,n)}function $M(t,e){var n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),s=n*12+r+e,o=Math.trunc(s/12),a=s%12,l=Math.min(i,NM(o)[a]),c=new Date(t);return c.setFullYear(o),c.setDate(1),c.setMonth(a),c.setDate(l),c}function LM(t,e){var n=t.getTimezoneOffset(),r=e.getTimezoneOffset(),i=r-n;return new Date(+e+i*db.minutes)}function Au(t,e,n){return Jn(t,-e,n)}function kt(t,e,n){switch(t=new Date(t),e){case zs:case js:case Bs:t=gd(t,0);case Iu:t=vb(t,1);case aa:case Us:t=Pu(t,0);case Su:t=la(t,0);case Tu:t=Ru(t,0);case Eu:t=bu(t,0)}return e===js&&(t=Au(t,qs(t)%10,"year")),e===zs&&(t=Au(t,qs(t)%100,"year")),e===aa&&(t=yb(t,0,n)),t}function md(t,e,n){switch(t=new Date(t),t=kt(t,e,n),e){case zs:case js:case Bs:case Iu:case aa:t=Jn(t,1,e),t=Au(t,1,Us),t.setHours(23,59,59,999);break;case Us:t.setHours(23,59,59,999);break;case Su:case Tu:case Eu:t=Jn(t,1,e),t=Au(t,1,pd)}return t}var Zu=Na(function(t,e){return t===e}),oy=Na(function(t,e){return t!==e}),sf=Na(function(t,e){return t>e}),ec=Na(function(t,e){return t>=e}),ay=Na(function(t,e){return t<e}),Oa=Na(function(t,e){return t<=e});function fb(){return new Date(Math.min.apply(Math,arguments))}function pb(){return new Date(Math.max.apply(Math,arguments))}function mb(t,e,n,r){return r=r||"day",(!e||ec(t,e,r))&&(!n||Oa(t,n,r))}var bu=Ki("Milliseconds"),Ru=Ki("Seconds"),la=Ki("Minutes"),Pu=Ki("Hours"),gb=Ki("Day"),vb=Ki("Date"),gd=Ki("Month"),qs=Ki("FullYear");function FM(t,e){return e===void 0?qs(kt(t,js)):Jn(t,e+10,Bs)}function UM(t,e){return e===void 0?qs(kt(t,zs)):Jn(t,e+100,Bs)}function yb(t,e,n){var r=(gb(t)+7-(n||0))%7;return e===void 0?r:Jn(t,e-r,Us)}function BM(t,e,n,r){var i,s,o;switch(n){case pd:case Eu:case Tu:case Su:case Us:case aa:i=e.getTime()-t.getTime();break;case Iu:case Bs:case js:case zs:i=(qs(e)-qs(t))*12+gd(e)-gd(t);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case pd:s=1;break;case Eu:s=1e3;break;case Tu:s=1e3*60;break;case Su:s=1e3*60*60;break;case Us:s=1e3*60*60*24;break;case aa:s=1e3*60*60*24*7;break;case Iu:s=1;break;case Bs:s=12;break;case js:s=120;break;case zs:s=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return o=i/s,r?o:Math.round(o)}function Ki(t){var e=function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(t);return function(n,r){if(r===void 0)return n["get"+t]();var i=new Date(n);return i["set"+t](r),e&&i["get"+t]()!=r&&(t==="Hours"||r>=e&&i.getHours()-n.getHours()<Math.floor(r/e))&&i["set"+t](r+e),i}}function Na(t){return function(e,n,r){return t(+kt(e,r),+kt(n,r))}}const w0=Object.freeze(Object.defineProperty({__proto__:null,add:Jn,century:UM,date:vb,day:gb,decade:FM,diff:BM,endOf:md,eq:Zu,gt:sf,gte:ec,hours:Pu,inRange:mb,lt:ay,lte:Oa,max:pb,milliseconds:bu,min:fb,minutes:la,month:gd,neq:oy,seconds:Ru,startOf:kt,subtract:Au,weekday:yb,year:qs},Symbol.toStringTag,{value:"Module"}));function jM(t){if(Array.isArray(t))return gg(t)}function _b(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ph(t){return jM(t)||_b(t)||sy(t)||zM()}function qM(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var wb=qM;function WM(t,e){return t===e||t!==t&&e!==e}var tc=WM,GM=typeof En=="object"&&En&&En.Object===Object&&En,Eb=GM,HM=Eb,KM=typeof self=="object"&&self&&self.Object===Object&&self,QM=HM||KM||Function("return this")(),Er=QM,YM=Er,XM=YM.Symbol,Ma=XM,E0=Ma,Tb=Object.prototype,JM=Tb.hasOwnProperty,ZM=Tb.toString,El=E0?E0.toStringTag:void 0;function e2(t){var e=JM.call(t,El),n=t[El];try{t[El]=void 0;var r=!0}catch{}var i=ZM.call(t);return r&&(e?t[El]=n:delete t[El]),i}var t2=e2,n2=Object.prototype,r2=n2.toString;function i2(t){return r2.call(t)}var s2=i2,T0=Ma,o2=t2,a2=s2,l2="[object Null]",u2="[object Undefined]",S0=T0?T0.toStringTag:void 0;function c2(t){return t==null?t===void 0?u2:l2:S0&&S0 in Object(t)?o2(t):a2(t)}var Va=c2;function h2(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Qr=h2,d2=Va,f2=Qr,p2="[object AsyncFunction]",m2="[object Function]",g2="[object GeneratorFunction]",v2="[object Proxy]";function y2(t){if(!f2(t))return!1;var e=d2(t);return e==m2||e==g2||e==p2||e==v2}var ly=y2,_2=9007199254740991;function w2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_2}var uy=w2,E2=ly,T2=uy;function S2(t){return t!=null&&T2(t.length)&&!E2(t)}var nc=S2,I2=9007199254740991,A2=/^(?:0|[1-9]\d*)$/;function b2(t,e){var n=typeof t;return e=e??I2,!!e&&(n=="number"||n!="symbol"&&A2.test(t))&&t>-1&&t%1==0&&t<e}var cy=b2,R2=tc,P2=nc,D2=cy,C2=Qr;function x2(t,e,n){if(!C2(n))return!1;var r=typeof e;return(r=="number"?P2(n)&&D2(e,n.length):r=="string"&&e in n)?R2(n[e],t):!1}var of=x2,k2=/\s/;function O2(t){for(var e=t.length;e--&&k2.test(t.charAt(e)););return e}var N2=O2,M2=N2,V2=/^\s+/;function $2(t){return t&&t.slice(0,M2(t)+1).replace(V2,"")}var L2=$2;function F2(t){return t!=null&&typeof t=="object"}var Qi=F2,U2=Va,B2=Qi,j2="[object Symbol]";function z2(t){return typeof t=="symbol"||B2(t)&&U2(t)==j2}var rc=z2,q2=L2,I0=Qr,W2=rc,A0=NaN,G2=/^[-+]0x[0-9a-f]+$/i,H2=/^0b[01]+$/i,K2=/^0o[0-7]+$/i,Q2=parseInt;function Y2(t){if(typeof t=="number")return t;if(W2(t))return A0;if(I0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=I0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=q2(t);var n=H2.test(t);return n||K2.test(t)?Q2(t.slice(2),n?2:8):G2.test(t)?A0:+t}var X2=Y2,J2=X2,b0=1/0,Z2=17976931348623157e292;function eV(t){if(!t)return t===0?t:0;if(t=J2(t),t===b0||t===-b0){var e=t<0?-1:1;return e*Z2}return t===t?t:0}var Sb=eV,tV=Sb;function nV(t){var e=tV(t),n=e%1;return e===e?n?e-n:e:0}var Ib=nV,rV=wb,iV=of,sV=Ib,oV=Math.ceil,aV=Math.max;function lV(t,e,n){(n?iV(t,e,n):e===void 0)?e=1:e=aV(sV(e),0);var r=t==null?0:t.length;if(!r||e<1)return[];for(var i=0,s=0,o=Array(oV(r/e));i<r;)o[s++]=rV(t,i,i+=e);return o}var uV=lV;const cV=et(uV);function hV(t){return"nodeType"in t&&t.nodeType===document.DOCUMENT_NODE}function hy(t){return"window"in t&&t.window===t?t:hV(t)&&t.defaultView||!1}function Ab(t){var e=t==="pageXOffset"?"scrollLeft":"scrollTop";function n(r,i){var s=hy(r);if(i===void 0)return s?s[t]:r[e];s?s.scrollTo(s[t],i):r[e]=i}return n}const bb=Ab("pageXOffset"),Rb=Ab("pageYOffset");function Cs(t){var e=Hi(t),n={top:0,left:0,height:0,width:0},r=e&&e.documentElement;return!r||!Fs(r,t)||(t.getBoundingClientRect!==void 0&&(n=t.getBoundingClientRect()),n={top:n.top+Rb(r)-(r.clientTop||0),left:n.left+bb(r)-(r.clientLeft||0),width:n.width,height:n.height}),n}var dV=function(e){return!!e&&"offsetParent"in e};function fV(t){for(var e=Hi(t),n=t&&t.offsetParent;dV(n)&&n.nodeName!=="HTML"&&wn(n,"position")==="static";)n=n.offsetParent;return n||e.documentElement}var pV=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function Pb(t,e){var n={top:0,left:0},r;if(wn(t,"position")==="fixed")r=t.getBoundingClientRect();else{var i=e||fV(t);r=Cs(t),pV(i)!=="html"&&(n=Cs(i));var s=String(wn(i,"borderTopWidth")||0);n.top+=parseInt(s,10)-Rb(i)||0;var o=String(wn(i,"borderLeftWidth")||0);n.left+=parseInt(o,10)-bb(i)||0}var a=String(wn(t,"marginTop")||0),l=String(wn(t,"marginLeft")||0);return st({},r,{top:r.top-n.top-(parseInt(a,10)||0),left:r.left-n.left-(parseInt(l,10)||0)})}var R0=new Date().getTime();function mV(t){var e=new Date().getTime(),n=Math.max(0,16-(e-R0)),r=setTimeout(t,n);return R0=e,r}var gV=["","webkit","moz","o","ms"],vg="clearTimeout",yg=mV,P0=function(e,n){return e+(e?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};oo&&gV.some(function(t){var e=P0(t,"request");return e in window&&(vg=P0(t,"cancel"),yg=function(r){return window[e](r)}),!!yg});var D0=function(e){typeof window[vg]=="function"&&window[vg](e)},Db=yg,Yp;function vV(t,e){if(!Yp){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;Yp=function(s,o){return r.call(s,o)}}return Yp(t,e)}function yV(t){const e=BA();return[t[0],j.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var pn="top",Fn="bottom",Un="right",mn="left",dy="auto",ic=[pn,Fn,Un,mn],ua="start",Du="end",_V="clippingParents",Cb="viewport",Tl="popper",wV="reference",C0=ic.reduce(function(t,e){return t.concat([e+"-"+ua,e+"-"+Du])},[]),fy=[].concat(ic,[dy]).reduce(function(t,e){return t.concat([e,e+"-"+ua,e+"-"+Du])},[]),EV="beforeRead",TV="read",SV="afterRead",IV="beforeMain",AV="main",bV="afterMain",RV="beforeWrite",PV="write",DV="afterWrite",CV=[EV,TV,SV,IV,AV,bV,RV,PV,DV];function fr(t){return t.split("-")[0]}function An(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ws(t){var e=An(t).Element;return t instanceof e||t instanceof Element}function pr(t){var e=An(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function py(t){if(typeof ShadowRoot>"u")return!1;var e=An(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var xs=Math.max,vd=Math.min,ca=Math.round;function _g(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xb(){return!/^((?!chrome|android).)*safari/i.test(_g())}function ha(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&pr(t)&&(i=t.offsetWidth>0&&ca(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&ca(r.height)/t.offsetHeight||1);var o=Ws(t)?An(t):window,a=o.visualViewport,l=!xb()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,h=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:h,right:c+d,bottom:h+f,left:c,x:c,y:h}}function my(t){var e=ha(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function kb(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&py(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ki(t){return t?(t.nodeName||"").toLowerCase():null}function jr(t){return An(t).getComputedStyle(t)}function xV(t){return["table","td","th"].indexOf(ki(t))>=0}function Yi(t){return((Ws(t)?t.ownerDocument:t.document)||window.document).documentElement}function af(t){return ki(t)==="html"?t:t.assignedSlot||t.parentNode||(py(t)?t.host:null)||Yi(t)}function x0(t){return!pr(t)||jr(t).position==="fixed"?null:t.offsetParent}function kV(t){var e=/firefox/i.test(_g()),n=/Trident/i.test(_g());if(n&&pr(t)){var r=jr(t);if(r.position==="fixed")return null}var i=af(t);for(py(i)&&(i=i.host);pr(i)&&["html","body"].indexOf(ki(i))<0;){var s=jr(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function sc(t){for(var e=An(t),n=x0(t);n&&xV(n)&&jr(n).position==="static";)n=x0(n);return n&&(ki(n)==="html"||ki(n)==="body"&&jr(n).position==="static")?e:n||kV(t)||e}function gy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Kl(t,e,n){return xs(t,vd(e,n))}function OV(t,e,n){var r=Kl(t,e,n);return r>n?n:r}function Ob(){return{top:0,right:0,bottom:0,left:0}}function Nb(t){return Object.assign({},Ob(),t)}function Mb(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var NV=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Nb(typeof e!="number"?e:Mb(e,ic))};function MV(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=fr(n.placement),l=gy(a),c=[mn,Un].indexOf(a)>=0,h=c?"height":"width";if(!(!s||!o)){var d=NV(i.padding,n),f=my(s),m=l==="y"?pn:mn,y=l==="y"?Fn:Un,v=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],I=o[l]-n.rects.reference[l],w=sc(s),_=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,T=v/2-I/2,P=d[m],x=_-f[h]-d[y],k=_/2-f[h]/2+T,S=Kl(P,k,x),E=l;n.modifiersData[r]=(e={},e[E]=S,e.centerOffset=S-k,e)}}function VV(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||kb(e.elements.popper,i)&&(e.elements.arrow=i))}const $V={name:"arrow",enabled:!0,phase:"main",fn:MV,effect:VV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function da(t){return t.split("-")[1]}var LV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FV(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:ca(n*i)/i||0,y:ca(r*i)/i||0}}function k0(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,d=t.isFixed,f=o.x,m=f===void 0?0:f,y=o.y,v=y===void 0?0:y,I=typeof h=="function"?h({x:m,y:v}):{x:m,y:v};m=I.x,v=I.y;var w=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),T=mn,P=pn,x=window;if(c){var k=sc(n),S="clientHeight",E="clientWidth";if(k===An(n)&&(k=Yi(n),jr(k).position!=="static"&&a==="absolute"&&(S="scrollHeight",E="scrollWidth")),k=k,i===pn||(i===mn||i===Un)&&s===Du){P=Fn;var b=d&&k===x&&x.visualViewport?x.visualViewport.height:k[S];v-=b-r.height,v*=l?1:-1}if(i===mn||(i===pn||i===Fn)&&s===Du){T=Un;var A=d&&k===x&&x.visualViewport?x.visualViewport.width:k[E];m-=A-r.width,m*=l?1:-1}}var D=Object.assign({position:a},c&&LV),O=h===!0?FV({x:m,y:v},An(n)):{x:m,y:v};if(m=O.x,v=O.y,l){var C;return Object.assign({},D,(C={},C[P]=_?"0":"",C[T]=w?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",C))}return Object.assign({},D,(e={},e[P]=_?v+"px":"",e[T]=w?m+"px":"",e.transform="",e))}function UV(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:fr(e.placement),variation:da(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,k0(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,k0(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const BV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:UV,data:{}};var rh={passive:!0};function jV(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=An(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",n.update,rh)}),a&&l.addEventListener("resize",n.update,rh),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",n.update,rh)}),a&&l.removeEventListener("resize",n.update,rh)}}const zV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jV,data:{}};var qV={left:"right",right:"left",bottom:"top",top:"bottom"};function Dh(t){return t.replace(/left|right|bottom|top/g,function(e){return qV[e]})}var WV={start:"end",end:"start"};function O0(t){return t.replace(/start|end/g,function(e){return WV[e]})}function vy(t){var e=An(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function yy(t){return ha(Yi(t)).left+vy(t).scrollLeft}function GV(t,e){var n=An(t),r=Yi(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=xb();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+yy(t),y:l}}function HV(t){var e,n=Yi(t),r=vy(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=xs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=xs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+yy(t),l=-r.scrollTop;return jr(i||n).direction==="rtl"&&(a+=xs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function _y(t){var e=jr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Vb(t){return["html","body","#document"].indexOf(ki(t))>=0?t.ownerDocument.body:pr(t)&&_y(t)?t:Vb(af(t))}function Ql(t,e){var n;e===void 0&&(e=[]);var r=Vb(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=An(r),o=i?[s].concat(s.visualViewport||[],_y(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Ql(af(o)))}function wg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function KV(t,e){var n=ha(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function N0(t,e,n){return e===Cb?wg(GV(t,n)):Ws(e)?KV(e,n):wg(HV(Yi(t)))}function QV(t){var e=Ql(af(t)),n=["absolute","fixed"].indexOf(jr(t).position)>=0,r=n&&pr(t)?sc(t):t;return Ws(r)?e.filter(function(i){return Ws(i)&&kb(i,r)&&ki(i)!=="body"}):[]}function YV(t,e,n,r){var i=e==="clippingParents"?QV(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var h=N0(t,c,r);return l.top=xs(h.top,l.top),l.right=vd(h.right,l.right),l.bottom=vd(h.bottom,l.bottom),l.left=xs(h.left,l.left),l},N0(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $b(t){var e=t.reference,n=t.element,r=t.placement,i=r?fr(r):null,s=r?da(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case pn:l={x:o,y:e.y-n.height};break;case Fn:l={x:o,y:e.y+e.height};break;case Un:l={x:e.x+e.width,y:a};break;case mn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?gy(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case ua:l[c]=l[c]-(e[h]/2-n[h]/2);break;case Du:l[c]=l[c]+(e[h]/2-n[h]/2);break}}return l}function Cu(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?_V:a,c=n.rootBoundary,h=c===void 0?Cb:c,d=n.elementContext,f=d===void 0?Tl:d,m=n.altBoundary,y=m===void 0?!1:m,v=n.padding,I=v===void 0?0:v,w=Nb(typeof I!="number"?I:Mb(I,ic)),_=f===Tl?wV:Tl,T=t.rects.popper,P=t.elements[y?_:f],x=YV(Ws(P)?P:P.contextElement||Yi(t.elements.popper),l,h,o),k=ha(t.elements.reference),S=$b({reference:k,element:T,strategy:"absolute",placement:i}),E=wg(Object.assign({},T,S)),b=f===Tl?E:k,A={top:x.top-b.top+w.top,bottom:b.bottom-x.bottom+w.bottom,left:x.left-b.left+w.left,right:b.right-x.right+w.right},D=t.modifiersData.offset;if(f===Tl&&D){var O=D[i];Object.keys(A).forEach(function(C){var Y=[Un,Fn].indexOf(C)>=0?1:-1,W=[pn,Fn].indexOf(C)>=0?"y":"x";A[C]+=O[W]*Y})}return A}function XV(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?fy:l,h=da(r),d=h?a?C0:C0.filter(function(y){return da(y)===h}):ic,f=d.filter(function(y){return c.indexOf(y)>=0});f.length===0&&(f=d);var m=f.reduce(function(y,v){return y[v]=Cu(t,{placement:v,boundary:i,rootBoundary:s,padding:o})[fr(v)],y},{});return Object.keys(m).sort(function(y,v){return m[y]-m[v]})}function JV(t){if(fr(t)===dy)return[];var e=Dh(t);return[O0(t),e,O0(e)]}function ZV(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,y=m===void 0?!0:m,v=n.allowedAutoPlacements,I=e.options.placement,w=fr(I),_=w===I,T=l||(_||!y?[Dh(I)]:JV(I)),P=[I].concat(T).reduce(function(q,J){return q.concat(fr(J)===dy?XV(e,{placement:J,boundary:h,rootBoundary:d,padding:c,flipVariations:y,allowedAutoPlacements:v}):J)},[]),x=e.rects.reference,k=e.rects.popper,S=new Map,E=!0,b=P[0],A=0;A<P.length;A++){var D=P[A],O=fr(D),C=da(D)===ua,Y=[pn,Fn].indexOf(O)>=0,W=Y?"width":"height",z=Cu(e,{placement:D,boundary:h,rootBoundary:d,altBoundary:f,padding:c}),Q=Y?C?Un:mn:C?Fn:pn;x[W]>k[W]&&(Q=Dh(Q));var N=Dh(Q),G=[];if(s&&G.push(z[O]<=0),a&&G.push(z[Q]<=0,z[N]<=0),G.every(function(q){return q})){b=D,E=!1;break}S.set(D,G)}if(E)for(var X=y?3:1,se=function(J){var ie=P.find(function(ce){var me=S.get(ce);if(me)return me.slice(0,J).every(function(ge){return ge})});if(ie)return b=ie,"break"},L=X;L>0;L--){var B=se(L);if(B==="break")break}e.placement!==b&&(e.modifiersData[r]._skip=!0,e.placement=b,e.reset=!0)}}const e$={name:"flip",enabled:!0,phase:"main",fn:ZV,requiresIfExists:["offset"],data:{_skip:!1}};function M0(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function V0(t){return[pn,Un,Fn,mn].some(function(e){return t[e]>=0})}function t$(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Cu(e,{elementContext:"reference"}),a=Cu(e,{altBoundary:!0}),l=M0(o,r),c=M0(a,i,s),h=V0(l),d=V0(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const n$={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:t$};function r$(t,e,n){var r=fr(t),i=[mn,pn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[mn,Un].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function i$(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=fy.reduce(function(h,d){return h[d]=r$(d,e.rects,s),h},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const s$={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:i$};function o$(t){var e=t.state,n=t.name;e.modifiersData[n]=$b({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const a$={name:"popperOffsets",enabled:!0,phase:"read",fn:o$,data:{}};function l$(t){return t==="x"?"y":"x"}function u$(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,y=n.tetherOffset,v=y===void 0?0:y,I=Cu(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),w=fr(e.placement),_=da(e.placement),T=!_,P=gy(w),x=l$(P),k=e.modifiersData.popperOffsets,S=e.rects.reference,E=e.rects.popper,b=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,A=typeof b=="number"?{mainAxis:b,altAxis:b}:Object.assign({mainAxis:0,altAxis:0},b),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(k){if(s){var C,Y=P==="y"?pn:mn,W=P==="y"?Fn:Un,z=P==="y"?"height":"width",Q=k[P],N=Q+I[Y],G=Q-I[W],X=m?-E[z]/2:0,se=_===ua?S[z]:E[z],L=_===ua?-E[z]:-S[z],B=e.elements.arrow,q=m&&B?my(B):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ob(),ie=J[Y],ce=J[W],me=Kl(0,S[z],q[z]),ge=T?S[z]/2-X-me-ie-A.mainAxis:se-me-ie-A.mainAxis,Ee=T?-S[z]/2+X+me+ce+A.mainAxis:L+me+ce+A.mainAxis,xe=e.elements.arrow&&sc(e.elements.arrow),nt=xe?P==="y"?xe.clientTop||0:xe.clientLeft||0:0,lt=(C=D==null?void 0:D[P])!=null?C:0,rn=Q+ge-lt-nt,Ae=Q+Ee-lt,er=Kl(m?vd(N,rn):N,Q,m?xs(G,Ae):G);k[P]=er,O[P]=er-Q}if(a){var tr,Ja=P==="x"?pn:mn,po=P==="x"?Fn:Un,vn=k[x],Tr=x==="y"?"height":"width",mo=vn+I[Ja],ei=vn-I[po],nr=[pn,mn].indexOf(w)!==-1,rs=(tr=D==null?void 0:D[x])!=null?tr:0,he=nr?mo:vn-S[Tr]-E[Tr]-rs+A.altAxis,$e=nr?vn+S[Tr]+E[Tr]-rs-A.altAxis:ei,rr=m&&nr?OV(he,vn,$e):Kl(m?he:mo,vn,m?$e:ei);k[x]=rr,O[x]=rr-vn}e.modifiersData[r]=O}}const c$={name:"preventOverflow",enabled:!0,phase:"main",fn:u$,requiresIfExists:["offset"]};function h$(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function d$(t){return t===An(t)||!pr(t)?vy(t):h$(t)}function f$(t){var e=t.getBoundingClientRect(),n=ca(e.width)/t.offsetWidth||1,r=ca(e.height)/t.offsetHeight||1;return n!==1||r!==1}function p$(t,e,n){n===void 0&&(n=!1);var r=pr(e),i=pr(e)&&f$(e),s=Yi(e),o=ha(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ki(e)!=="body"||_y(s))&&(a=d$(e)),pr(e)?(l=ha(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=yy(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function m$(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function g$(t){var e=m$(t);return CV.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function v$(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function y$(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var $0={placement:"bottom",modifiers:[],strategy:"absolute"};function L0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function _$(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?$0:i;return function(a,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},$0,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:h,setOptions:function(w){var _=typeof w=="function"?w(h.options):w;v(),h.options=Object.assign({},s,h.options,_),h.scrollParents={reference:Ws(a)?Ql(a):a.contextElement?Ql(a.contextElement):[],popper:Ql(l)};var T=g$(y$([].concat(r,h.options.modifiers)));return h.orderedModifiers=T.filter(function(P){return P.enabled}),y(),m.update()},forceUpdate:function(){if(!f){var w=h.elements,_=w.reference,T=w.popper;if(L0(_,T)){h.rects={reference:p$(_,sc(T),h.options.strategy==="fixed"),popper:my(T)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(A){return h.modifiersData[A.name]=Object.assign({},A.data)});for(var P=0;P<h.orderedModifiers.length;P++){if(h.reset===!0){h.reset=!1,P=-1;continue}var x=h.orderedModifiers[P],k=x.fn,S=x.options,E=S===void 0?{}:S,b=x.name;typeof k=="function"&&(h=k({state:h,options:E,name:b,instance:m})||h)}}}},update:v$(function(){return new Promise(function(I){m.forceUpdate(),I(h)})}),destroy:function(){v(),f=!0}};if(!L0(a,l))return m;m.setOptions(c).then(function(I){!f&&c.onFirstUpdate&&c.onFirstUpdate(I)});function y(){h.orderedModifiers.forEach(function(I){var w=I.name,_=I.options,T=_===void 0?{}:_,P=I.effect;if(typeof P=="function"){var x=P({state:h,name:w,instance:m,options:T}),k=function(){};d.push(x||k)}})}function v(){d.forEach(function(I){return I()}),d=[]}return m}}var w$=_$({defaultModifiers:[n$,a$,BV,zV,s$,e$,c$,$V]}),F0=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},E$={name:"applyStyles",enabled:!1},T$={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var n=e.state;return function(){var r=n.elements,i=r.reference,s=r.popper;if("removeAttribute"in i){var o=(i.getAttribute("aria-describedby")||"").split(",").filter(function(a){return a.trim()!==s.id});o.length?i.setAttribute("aria-describedby",o.join(",")):i.removeAttribute("aria-describedby")}}},fn:function(e){var n,r=e.state,i=r.elements,s=i.popper,o=i.reference,a=(n=s.getAttribute("role"))==null?void 0:n.toLowerCase();if(s.id&&a==="tooltip"&&"setAttribute"in o){var l=o.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(s.id)!==-1)return;o.setAttribute("aria-describedby",l?l+","+s.id:s.id)}}},S$=[];function I$(t,e,n){var r=n===void 0?{}:n,i=r.enabled,s=i===void 0?!0:i,o=r.placement,a=o===void 0?"bottom":o,l=r.strategy,c=l===void 0?"absolute":l,h=r.modifiers,d=h===void 0?S$:h,f=Ju(r,["enabled","placement","strategy","modifiers"]),m=j.useRef(),y=j.useCallback(function(){var P;(P=m.current)==null||P.update()},[]),v=j.useCallback(function(){var P;(P=m.current)==null||P.forceUpdate()},[]),I=yV(j.useState({placement:a,update:y,forceUpdate:v,attributes:{},styles:{popper:F0(c),arrow:{}}})),w=I[0],_=I[1],T=j.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(x){var k=x.state,S={},E={};Object.keys(k.elements).forEach(function(b){S[b]=k.styles[b],E[b]=k.attributes[b]}),_({state:k,styles:S,attributes:E,update:y,forceUpdate:v,placement:k.placement})}}},[y,v,_]);return j.useEffect(function(){!m.current||!s||m.current.setOptions({placement:a,strategy:c,modifiers:[].concat(d,[T,E$])})},[c,a,T,s]),j.useEffect(function(){if(!(!s||t==null||e==null))return m.current=w$(t,e,st({},f,{placement:a,strategy:c,modifiers:[].concat(d,[T$,T])})),function(){m.current!=null&&(m.current.destroy(),m.current=void 0,_(function(P){return st({},P,{attributes:{},styles:{popper:F0(c)}})}))}},[s,t,e]),w}function A$(t){return t&&"setState"in t?yi.findDOMNode(t):t??null}const b$=function(t){return Hi(A$(t))};var R$=27,U0=function(){};function P$(t){return t.button===0}function D$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var B0=function(e){return e&&("current"in e?e.current:e)};function C$(t,e,n){var r=n===void 0?{}:n,i=r.disabled,s=r.clickTrigger,o=s===void 0?"click":s,a=j.useRef(!1),l=e||U0,c=j.useCallback(function(f){var m,y=B0(t);EM(!!y,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),a.current=!y||D$(f)||!P$(f)||!!Fs(y,(m=f.composedPath==null?void 0:f.composedPath()[0])!=null?m:f.target)},[t]),h=xn(function(f){a.current||l(f)}),d=xn(function(f){f.keyCode===R$&&l(f)});j.useEffect(function(){if(!(i||t==null)){var f=window.event,m=b$(B0(t)),y=Or(m,o,c,!0),v=Or(m,o,function(_){if(_===f){f=void 0;return}h(_)}),I=Or(m,"keyup",function(_){if(_===f){f=void 0;return}d(_)}),w=[];return"ontouchstart"in m.documentElement&&(w=[].slice.call(m.body.children).map(function(_){return Or(_,"mousemove",U0)})),function(){y(),v(),I(),w.forEach(function(_){return _()})}}},[t,i,o,c,h,d])}function x$(t){var e={};return Array.isArray(t)?(t==null||t.forEach(function(n){e[n.name]=n}),e):t||e}function k$(t){return t===void 0&&(t={}),Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e].name=e,t[e]})}function O$(t){var e,n,r,i,s=t.enabled,o=t.enableEvents,a=t.placement,l=t.flip,c=t.offset,h=t.fixed,d=t.containerPadding,f=t.arrowElement,m=t.popperConfig,y=m===void 0?{}:m,v=x$(y.modifiers);return st({},y,{placement:a,enabled:s,strategy:h?"fixed":y.strategy,modifiers:k$(st({},v,{eventListeners:{enabled:o},preventOverflow:st({},v.preventOverflow,{options:d?st({padding:d},(e=v.preventOverflow)==null?void 0:e.options):(n=v.preventOverflow)==null?void 0:n.options}),offset:{options:st({offset:c},(r=v.offset)==null?void 0:r.options)},arrow:st({},v.arrow,{enabled:!!f,options:st({},(i=v.arrow)==null?void 0:i.options,{element:f})}),flip:st({enabled:!!l},v.flip)}))})}var Xp=function(e){var n;return typeof document>"u"?null:e==null?Hi().body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),(n=e)!=null&&n.nodeType&&e||null)};function j0(t,e){var n=j.useState(function(){return Xp(t)}),r=n[0],i=n[1];if(!r){var s=Xp(t);s&&i(s)}return j.useEffect(function(){},[e,r]),j.useEffect(function(){var o=Xp(t);o!==r&&i(o)},[t,r]),r}var wy=V.forwardRef(function(t,e){var n=t.flip,r=t.offset,i=t.placement,s=t.containerPadding,o=s===void 0?5:s,a=t.popperConfig,l=a===void 0?{}:a,c=t.transition,h=pg(),d=h[0],f=h[1],m=pg(),y=m[0],v=m[1],I=ka(f,e),w=j0(t.container),_=j0(t.target),T=j.useState(!t.show),P=T[0],x=T[1],k=I$(_,d,O$({placement:i,enableEvents:!!t.show,containerPadding:o||5,flip:n,offset:r,arrowElement:y,popperConfig:l})),S=k.styles,E=k.attributes,b=Ju(k,["styles","attributes"]);t.show?P&&x(!1):!t.transition&&!P&&x(!0);var A=function(){x(!0),t.onExited&&t.onExited.apply(t,arguments)},D=t.show||c&&!P;if(C$(d,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!D)return null;var O=t.children(st({},b,{show:!!t.show,props:st({},E.popper,{style:S.popper,ref:I}),arrowProps:st({},E.arrow,{style:S.arrow,ref:v})}));if(c){var C=t.onExit,Y=t.onExiting,W=t.onEnter,z=t.onEntering,Q=t.onEntered;O=V.createElement(c,{in:t.show,appear:!0,onExit:C,onExiting:Y,onExited:A,onEnter:W,onEntering:z,onEntered:Q},O)}return w?yi.createPortal(O,w):null});wy.displayName="Overlay";wy.propTypes={show:ee.bool,placement:ee.oneOf(fy),target:ee.any,container:ee.any,flip:ee.bool,children:ee.func.isRequired,containerPadding:ee.number,popperConfig:ee.object,rootClose:ee.bool,rootCloseEvent:ee.oneOf(["click","mousedown"]),rootCloseDisabled:ee.bool,onHide:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e.rootClose){var s;return(s=ee.func).isRequired.apply(s,[e].concat(r))}return ee.func.apply(ee,[e].concat(r))},transition:ee.elementType,onEnter:ee.func,onEntering:ee.func,onEntered:ee.func,onExit:ee.func,onExiting:ee.func,onExited:ee.func};function N$(){this.__data__=[],this.size=0}var M$=N$,V$=tc;function $$(t,e){for(var n=t.length;n--;)if(V$(t[n][0],e))return n;return-1}var lf=$$,L$=lf,F$=Array.prototype,U$=F$.splice;function B$(t){var e=this.__data__,n=L$(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():U$.call(e,n,1),--this.size,!0}var j$=B$,z$=lf;function q$(t){var e=this.__data__,n=z$(e,t);return n<0?void 0:e[n][1]}var W$=q$,G$=lf;function H$(t){return G$(this.__data__,t)>-1}var K$=H$,Q$=lf;function Y$(t,e){var n=this.__data__,r=Q$(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var X$=Y$,J$=M$,Z$=j$,eL=W$,tL=K$,nL=X$;function $a(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$a.prototype.clear=J$;$a.prototype.delete=Z$;$a.prototype.get=eL;$a.prototype.has=tL;$a.prototype.set=nL;var uf=$a,rL=uf;function iL(){this.__data__=new rL,this.size=0}var sL=iL;function oL(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var aL=oL;function lL(t){return this.__data__.get(t)}var uL=lL;function cL(t){return this.__data__.has(t)}var hL=cL,dL=Er,fL=dL["__core-js_shared__"],pL=fL,Jp=pL,z0=function(){var t=/[^.]+$/.exec(Jp&&Jp.keys&&Jp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mL(t){return!!z0&&z0 in t}var gL=mL,vL=Function.prototype,yL=vL.toString;function _L(t){if(t!=null){try{return yL.call(t)}catch{}try{return t+""}catch{}}return""}var Lb=_L,wL=ly,EL=gL,TL=Qr,SL=Lb,IL=/[\\^$.*+?()[\]{}|]/g,AL=/^\[object .+?Constructor\]$/,bL=Function.prototype,RL=Object.prototype,PL=bL.toString,DL=RL.hasOwnProperty,CL=RegExp("^"+PL.call(DL).replace(IL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xL(t){if(!TL(t)||EL(t))return!1;var e=wL(t)?CL:AL;return e.test(SL(t))}var kL=xL;function OL(t,e){return t==null?void 0:t[e]}var NL=OL,ML=kL,VL=NL;function $L(t,e){var n=VL(t,e);return ML(n)?n:void 0}var ao=$L,LL=ao,FL=Er,UL=LL(FL,"Map"),Ey=UL,BL=ao,jL=BL(Object,"create"),cf=jL,q0=cf;function zL(){this.__data__=q0?q0(null):{},this.size=0}var qL=zL;function WL(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var GL=WL,HL=cf,KL="__lodash_hash_undefined__",QL=Object.prototype,YL=QL.hasOwnProperty;function XL(t){var e=this.__data__;if(HL){var n=e[t];return n===KL?void 0:n}return YL.call(e,t)?e[t]:void 0}var JL=XL,ZL=cf,eF=Object.prototype,tF=eF.hasOwnProperty;function nF(t){var e=this.__data__;return ZL?e[t]!==void 0:tF.call(e,t)}var rF=nF,iF=cf,sF="__lodash_hash_undefined__";function oF(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=iF&&e===void 0?sF:e,this}var aF=oF,lF=qL,uF=GL,cF=JL,hF=rF,dF=aF;function La(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}La.prototype.clear=lF;La.prototype.delete=uF;La.prototype.get=cF;La.prototype.has=hF;La.prototype.set=dF;var fF=La,W0=fF,pF=uf,mF=Ey;function gF(){this.size=0,this.__data__={hash:new W0,map:new(mF||pF),string:new W0}}var vF=gF;function yF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var _F=yF,wF=_F;function EF(t,e){var n=t.__data__;return wF(e)?n[typeof e=="string"?"string":"hash"]:n.map}var hf=EF,TF=hf;function SF(t){var e=TF(this,t).delete(t);return this.size-=e?1:0,e}var IF=SF,AF=hf;function bF(t){return AF(this,t).get(t)}var RF=bF,PF=hf;function DF(t){return PF(this,t).has(t)}var CF=DF,xF=hf;function kF(t,e){var n=xF(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var OF=kF,NF=vF,MF=IF,VF=RF,$F=CF,LF=OF;function Fa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fa.prototype.clear=NF;Fa.prototype.delete=MF;Fa.prototype.get=VF;Fa.prototype.has=$F;Fa.prototype.set=LF;var Ty=Fa,FF=uf,UF=Ey,BF=Ty,jF=200;function zF(t,e){var n=this.__data__;if(n instanceof FF){var r=n.__data__;if(!UF||r.length<jF-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new BF(r)}return n.set(t,e),this.size=n.size,this}var qF=zF,WF=uf,GF=sL,HF=aL,KF=uL,QF=hL,YF=qF;function Ua(t){var e=this.__data__=new WF(t);this.size=e.size}Ua.prototype.clear=GF;Ua.prototype.delete=HF;Ua.prototype.get=KF;Ua.prototype.has=QF;Ua.prototype.set=YF;var Sy=Ua,XF="__lodash_hash_undefined__";function JF(t){return this.__data__.set(t,XF),this}var ZF=JF;function eU(t){return this.__data__.has(t)}var tU=eU,nU=Ty,rU=ZF,iU=tU;function yd(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new nU;++e<n;)this.add(t[e])}yd.prototype.add=yd.prototype.push=rU;yd.prototype.has=iU;var sU=yd;function oU(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var aU=oU;function lU(t,e){return t.has(e)}var uU=lU,cU=sU,hU=aU,dU=uU,fU=1,pU=2;function mU(t,e,n,r,i,s){var o=n&fU,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,m=n&pU?new cU:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var y=t[d],v=e[d];if(r)var I=o?r(v,y,d,e,t,s):r(y,v,d,t,e,s);if(I!==void 0){if(I)continue;f=!1;break}if(m){if(!hU(e,function(w,_){if(!dU(m,_)&&(y===w||i(y,w,n,r,s)))return m.push(_)})){f=!1;break}}else if(!(y===v||i(y,v,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var Fb=mU,gU=Er,vU=gU.Uint8Array,Ub=vU;function yU(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var _U=yU;function wU(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var EU=wU,G0=Ma,H0=Ub,TU=tc,SU=Fb,IU=_U,AU=EU,bU=1,RU=2,PU="[object Boolean]",DU="[object Date]",CU="[object Error]",xU="[object Map]",kU="[object Number]",OU="[object RegExp]",NU="[object Set]",MU="[object String]",VU="[object Symbol]",$U="[object ArrayBuffer]",LU="[object DataView]",K0=G0?G0.prototype:void 0,Zp=K0?K0.valueOf:void 0;function FU(t,e,n,r,i,s,o){switch(n){case LU:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $U:return!(t.byteLength!=e.byteLength||!s(new H0(t),new H0(e)));case PU:case DU:case kU:return TU(+t,+e);case CU:return t.name==e.name&&t.message==e.message;case OU:case MU:return t==e+"";case xU:var a=IU;case NU:var l=r&bU;if(a||(a=AU),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=RU,o.set(t,e);var h=SU(a(t),a(e),r,i,s,o);return o.delete(t),h;case VU:if(Zp)return Zp.call(t)==Zp.call(e)}return!1}var UU=FU;function BU(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Iy=BU,jU=Array.isArray,Bn=jU,zU=Iy,qU=Bn;function WU(t,e,n){var r=e(t);return qU(t)?r:zU(r,n(t))}var Bb=WU;function GU(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var HU=GU;function KU(){return[]}var jb=KU,QU=HU,YU=jb,XU=Object.prototype,JU=XU.propertyIsEnumerable,Q0=Object.getOwnPropertySymbols,ZU=Q0?function(t){return t==null?[]:(t=Object(t),QU(Q0(t),function(e){return JU.call(t,e)}))}:YU,Ay=ZU;function eB(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var tB=eB,nB=Va,rB=Qi,iB="[object Arguments]";function sB(t){return rB(t)&&nB(t)==iB}var oB=sB,Y0=oB,aB=Qi,zb=Object.prototype,lB=zb.hasOwnProperty,uB=zb.propertyIsEnumerable,cB=Y0(function(){return arguments}())?Y0:function(t){return aB(t)&&lB.call(t,"callee")&&!uB.call(t,"callee")},by=cB,_d={exports:{}};function hB(){return!1}var dB=hB;_d.exports;(function(t,e){var n=Er,r=dB,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(_d,_d.exports);var df=_d.exports,fB=Va,pB=uy,mB=Qi,gB="[object Arguments]",vB="[object Array]",yB="[object Boolean]",_B="[object Date]",wB="[object Error]",EB="[object Function]",TB="[object Map]",SB="[object Number]",IB="[object Object]",AB="[object RegExp]",bB="[object Set]",RB="[object String]",PB="[object WeakMap]",DB="[object ArrayBuffer]",CB="[object DataView]",xB="[object Float32Array]",kB="[object Float64Array]",OB="[object Int8Array]",NB="[object Int16Array]",MB="[object Int32Array]",VB="[object Uint8Array]",$B="[object Uint8ClampedArray]",LB="[object Uint16Array]",FB="[object Uint32Array]",Ue={};Ue[xB]=Ue[kB]=Ue[OB]=Ue[NB]=Ue[MB]=Ue[VB]=Ue[$B]=Ue[LB]=Ue[FB]=!0;Ue[gB]=Ue[vB]=Ue[DB]=Ue[yB]=Ue[CB]=Ue[_B]=Ue[wB]=Ue[EB]=Ue[TB]=Ue[SB]=Ue[IB]=Ue[AB]=Ue[bB]=Ue[RB]=Ue[PB]=!1;function UB(t){return mB(t)&&pB(t.length)&&!!Ue[fB(t)]}var BB=UB;function jB(t){return function(e){return t(e)}}var ff=jB,wd={exports:{}};wd.exports;(function(t,e){var n=Eb,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(wd,wd.exports);var Ry=wd.exports,zB=BB,qB=ff,X0=Ry,J0=X0&&X0.isTypedArray,WB=J0?qB(J0):zB,Py=WB,GB=tB,HB=by,KB=Bn,QB=df,YB=cy,XB=Py,JB=Object.prototype,ZB=JB.hasOwnProperty;function e4(t,e){var n=KB(t),r=!n&&HB(t),i=!n&&!r&&QB(t),s=!n&&!r&&!i&&XB(t),o=n||r||i||s,a=o?GB(t.length,String):[],l=a.length;for(var c in t)(e||ZB.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||YB(c,l)))&&a.push(c);return a}var qb=e4,t4=Object.prototype;function n4(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||t4;return t===n}var Dy=n4;function r4(t,e){return function(n){return t(e(n))}}var Wb=r4,i4=Wb,s4=i4(Object.keys,Object),o4=s4,a4=Dy,l4=o4,u4=Object.prototype,c4=u4.hasOwnProperty;function h4(t){if(!a4(t))return l4(t);var e=[];for(var n in Object(t))c4.call(t,n)&&n!="constructor"&&e.push(n);return e}var d4=h4,f4=qb,p4=d4,m4=nc;function g4(t){return m4(t)?f4(t):p4(t)}var oc=g4,v4=Bb,y4=Ay,_4=oc;function w4(t){return v4(t,_4,y4)}var Gb=w4,Z0=Gb,E4=1,T4=Object.prototype,S4=T4.hasOwnProperty;function I4(t,e,n,r,i,s){var o=n&E4,a=Z0(t),l=a.length,c=Z0(e),h=c.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:S4.call(e,f)))return!1}var m=s.get(t),y=s.get(e);if(m&&y)return m==e&&y==t;var v=!0;s.set(t,e),s.set(e,t);for(var I=o;++d<l;){f=a[d];var w=t[f],_=e[f];if(r)var T=o?r(_,w,f,e,t,s):r(w,_,f,t,e,s);if(!(T===void 0?w===_||i(w,_,n,r,s):T)){v=!1;break}I||(I=f=="constructor")}if(v&&!I){var P=t.constructor,x=e.constructor;P!=x&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof x=="function"&&x instanceof x)&&(v=!1)}return s.delete(t),s.delete(e),v}var A4=I4,b4=ao,R4=Er,P4=b4(R4,"DataView"),D4=P4,C4=ao,x4=Er,k4=C4(x4,"Promise"),O4=k4,N4=ao,M4=Er,V4=N4(M4,"Set"),$4=V4,L4=ao,F4=Er,U4=L4(F4,"WeakMap"),B4=U4,Eg=D4,Tg=Ey,Sg=O4,Ig=$4,Ag=B4,Hb=Va,Ba=Lb,eT="[object Map]",j4="[object Object]",tT="[object Promise]",nT="[object Set]",rT="[object WeakMap]",iT="[object DataView]",z4=Ba(Eg),q4=Ba(Tg),W4=Ba(Sg),G4=Ba(Ig),H4=Ba(Ag),fs=Hb;(Eg&&fs(new Eg(new ArrayBuffer(1)))!=iT||Tg&&fs(new Tg)!=eT||Sg&&fs(Sg.resolve())!=tT||Ig&&fs(new Ig)!=nT||Ag&&fs(new Ag)!=rT)&&(fs=function(t){var e=Hb(t),n=e==j4?t.constructor:void 0,r=n?Ba(n):"";if(r)switch(r){case z4:return iT;case q4:return eT;case W4:return tT;case G4:return nT;case H4:return rT}return e});var pf=fs,em=Sy,K4=Fb,Q4=UU,Y4=A4,sT=pf,oT=Bn,aT=df,X4=Py,J4=1,lT="[object Arguments]",uT="[object Array]",ih="[object Object]",Z4=Object.prototype,cT=Z4.hasOwnProperty;function ej(t,e,n,r,i,s){var o=oT(t),a=oT(e),l=o?uT:sT(t),c=a?uT:sT(e);l=l==lT?ih:l,c=c==lT?ih:c;var h=l==ih,d=c==ih,f=l==c;if(f&&aT(t)){if(!aT(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new em),o||X4(t)?K4(t,e,n,r,i,s):Q4(t,e,l,n,r,i,s);if(!(n&J4)){var m=h&&cT.call(t,"__wrapped__"),y=d&&cT.call(e,"__wrapped__");if(m||y){var v=m?t.value():t,I=y?e.value():e;return s||(s=new em),i(v,I,n,r,s)}}return f?(s||(s=new em),Y4(t,e,n,r,i,s)):!1}var tj=ej,nj=tj,hT=Qi;function Kb(t,e,n,r,i){return t===e?!0:t==null||e==null||!hT(t)&&!hT(e)?t!==t&&e!==e:nj(t,e,n,r,Kb,i)}var Cy=Kb,rj=Cy;function ij(t,e){return rj(t,e)}var sj=ij;const oj=et(sj);function tm(t,e){var n=hy(t);return n?n.innerHeight:Cs(t).height}function Qb(t,e,n){t.closest&&!n&&t.closest(e);var r=t;do{if(vV(r,e))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}function aj(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var lj=aj,uj=Sy,cj=Cy,hj=1,dj=2;function fj(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new uj;if(r)var f=r(c,h,l,t,e,d);if(!(f===void 0?cj(h,c,hj|dj,r,d):f))return!1}}return!0}var pj=fj,mj=Qr;function gj(t){return t===t&&!mj(t)}var Yb=gj,vj=Yb,yj=oc;function _j(t){for(var e=yj(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,vj(i)]}return e}var wj=_j;function Ej(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Xb=Ej,Tj=pj,Sj=wj,Ij=Xb;function Aj(t){var e=Sj(t);return e.length==1&&e[0][2]?Ij(e[0][0],e[0][1]):function(n){return n===t||Tj(n,t,e)}}var bj=Aj,Rj=Bn,Pj=rc,Dj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cj=/^\w*$/;function xj(t,e){if(Rj(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Pj(t)?!0:Cj.test(t)||!Dj.test(t)||e!=null&&t in Object(e)}var xy=xj,Jb=Ty,kj="Expected a function";function ky(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(kj);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(ky.Cache||Jb),n}ky.Cache=Jb;var Oj=ky,Nj=Oj,Mj=500;function Vj(t){var e=Nj(t,function(r){return n.size===Mj&&n.clear(),r}),n=e.cache;return e}var $j=Vj,Lj=$j,Fj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Uj=/\\(\\)?/g,Bj=Lj(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fj,function(n,r,i,s){e.push(i?s.replace(Uj,"$1"):r||n)}),e}),jj=Bj;function zj(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Oy=zj,dT=Ma,qj=Oy,Wj=Bn,Gj=rc,Hj=1/0,fT=dT?dT.prototype:void 0,pT=fT?fT.toString:void 0;function Zb(t){if(typeof t=="string")return t;if(Wj(t))return qj(t,Zb)+"";if(Gj(t))return pT?pT.call(t):"";var e=t+"";return e=="0"&&1/t==-Hj?"-0":e}var Kj=Zb,Qj=Kj;function Yj(t){return t==null?"":Qj(t)}var Xj=Yj,Jj=Bn,Zj=xy,ez=jj,tz=Xj;function nz(t,e){return Jj(t)?t:Zj(t,e)?[t]:ez(tz(t))}var mf=nz,rz=rc,iz=1/0;function sz(t){if(typeof t=="string"||rz(t))return t;var e=t+"";return e=="0"&&1/t==-iz?"-0":e}var ac=sz,oz=mf,az=ac;function lz(t,e){e=oz(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[az(e[n++])];return n&&n==r?t:void 0}var gf=lz,uz=gf;function cz(t,e,n){var r=t==null?void 0:uz(t,e);return r===void 0?n:r}var hz=cz;function dz(t,e){return t!=null&&e in Object(t)}var fz=dz,pz=mf,mz=by,gz=Bn,vz=cy,yz=uy,_z=ac;function wz(t,e,n){e=pz(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=_z(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&yz(i)&&vz(o,i)&&(gz(t)||mz(t)))}var Ez=wz,Tz=fz,Sz=Ez;function Iz(t,e){return t!=null&&Sz(t,e,Tz)}var Az=Iz,bz=Cy,Rz=hz,Pz=Az,Dz=xy,Cz=Yb,xz=Xb,kz=ac,Oz=1,Nz=2;function Mz(t,e){return Dz(t)&&Cz(e)?xz(kz(t),e):function(n){var r=Rz(n,t);return r===void 0&&r===e?Pz(n,t):bz(e,r,Oz|Nz)}}var Vz=Mz;function $z(t){return t}var vf=$z;function Lz(t){return function(e){return e==null?void 0:e[t]}}var Fz=Lz,Uz=gf;function Bz(t){return function(e){return Uz(e,t)}}var jz=Bz,zz=Fz,qz=jz,Wz=xy,Gz=ac;function Hz(t){return Wz(t)?zz(Gz(t)):qz(t)}var Kz=Hz,Qz=bj,Yz=Vz,Xz=vf,Jz=Bn,Zz=Kz;function e3(t){return typeof t=="function"?t:t==null?Xz:typeof t=="object"?Jz(t)?Yz(t[0],t[1]):Qz(t):Zz(t)}var yf=e3,t3=lj,n3=yf,r3=Ib,i3=Math.max;function s3(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:r3(n);return i<0&&(i=i3(r+i,0)),t3(t,n3(e),i)}var o3=s3;const a3=et(o3);var l3=Math.ceil,u3=Math.max;function c3(t,e,n,r){for(var i=-1,s=u3(l3((e-t)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=t,t+=n;return o}var h3=c3,d3=h3,f3=of,nm=Sb;function p3(t){return function(e,n,r){return r&&typeof r!="number"&&f3(e,n,r)&&(n=r=void 0),e=nm(e),n===void 0?(n=e,e=0):n=nm(n),r=r===void 0?e<n?1:-1:nm(r),d3(e,n,r,t)}}var m3=p3,g3=m3,v3=g3(),y3=v3;const _3=et(y3);var mT=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function w3(t,e){return!!(t===e||mT(t)&&mT(e))}function E3(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!w3(t[n],e[n]))return!1;return!0}function eR(t,e){e===void 0&&(e=E3);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var gT=Ma,T3=by,S3=Bn,vT=gT?gT.isConcatSpreadable:void 0;function I3(t){return S3(t)||T3(t)||!!(vT&&t&&t[vT])}var A3=I3,b3=Iy,R3=A3;function tR(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=R3),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?tR(a,e-1,n,r,i):b3(i,a):r||(i[i.length]=a)}return i}var nR=tR;function P3(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var D3=P3,C3=D3,x3=C3(),k3=x3,O3=k3,N3=oc;function M3(t,e){return t&&O3(t,e,N3)}var Ny=M3,V3=nc;function $3(t,e){return function(n,r){if(n==null)return n;if(!V3(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var L3=$3,F3=Ny,U3=L3,B3=U3(F3),j3=B3,z3=j3,q3=nc;function W3(t,e){var n=-1,r=q3(t)?Array(t.length):[];return z3(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var G3=W3;function H3(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var K3=H3,yT=rc;function Q3(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=yT(t),o=e!==void 0,a=e===null,l=e===e,c=yT(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var Y3=Q3,X3=Y3;function J3(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=X3(i[r],s[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var Z3=J3,rm=Oy,e6=gf,t6=yf,n6=G3,r6=K3,i6=ff,s6=Z3,o6=vf,a6=Bn;function l6(t,e,n){e.length?e=rm(e,function(s){return a6(s)?function(o){return e6(o,s.length===1?s[0]:s)}:s}):e=[o6];var r=-1;e=rm(e,i6(t6));var i=n6(t,function(s,o,a){var l=rm(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return r6(i,function(s,o){return s6(s,o,n)})}var u6=l6;function c6(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var h6=c6,d6=h6,_T=Math.max;function f6(t,e,n){return e=_T(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=_T(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),d6(t,this,a)}}var rR=f6;function p6(t){return function(){return t}}var m6=p6,g6=ao,v6=function(){try{var t=g6(Object,"defineProperty");return t({},"",{}),t}catch{}}(),iR=v6,y6=m6,wT=iR,_6=vf,w6=wT?function(t,e){return wT(t,"toString",{configurable:!0,enumerable:!1,value:y6(e),writable:!0})}:_6,E6=w6,T6=800,S6=16,I6=Date.now;function A6(t){var e=0,n=0;return function(){var r=I6(),i=S6-(r-n);if(n=r,i>0){if(++e>=T6)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var b6=A6,R6=E6,P6=b6,D6=P6(R6),sR=D6,C6=vf,x6=rR,k6=sR;function O6(t,e){return k6(x6(t,e,C6),t+"")}var oR=O6,N6=nR,M6=u6,V6=oR,ET=of,$6=V6(function(t,e){if(t==null)return[];var n=e.length;return n>1&&ET(t,e[0],e[1])?e=[]:n>2&&ET(e[0],e[1],e[2])&&(e=[e[0]]),M6(t,N6(e,1),[])}),L6=$6;const F6=et(L6);function bg(t,e){var n=hy(t);return n?n.innerWidth:Cs(t).width}function aR(t){return sb(t)||_b(t)||sy(t)||ob()}function U6(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var lR=U6,TT=iR;function B6(t,e,n){e=="__proto__"&&TT?TT(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var My=B6,j6=My,z6=tc,q6=Object.prototype,W6=q6.hasOwnProperty;function G6(t,e,n){var r=t[e];(!(W6.call(t,e)&&z6(r,n))||n===void 0&&!(e in t))&&j6(t,e,n)}var uR=G6,H6=uR,K6=My;function Q6(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?K6(n,a,l):H6(n,a,l)}return n}var lc=Q6,Y6=lc,X6=oc;function J6(t,e){return t&&Y6(e,X6(e),t)}var Z6=J6;function e9(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var t9=e9,n9=Qr,r9=Dy,i9=t9,s9=Object.prototype,o9=s9.hasOwnProperty;function a9(t){if(!n9(t))return i9(t);var e=r9(t),n=[];for(var r in t)r=="constructor"&&(e||!o9.call(t,r))||n.push(r);return n}var l9=a9,u9=qb,c9=l9,h9=nc;function d9(t){return h9(t)?u9(t,!0):c9(t)}var _f=d9,f9=lc,p9=_f;function m9(t,e){return t&&f9(e,p9(e),t)}var g9=m9,Ed={exports:{}};Ed.exports;(function(t,e){var n=Er,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,h){if(h)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(Ed,Ed.exports);var v9=Ed.exports;function y9(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var _9=y9,w9=lc,E9=Ay;function T9(t,e){return w9(t,E9(t),e)}var S9=T9,I9=Wb,A9=I9(Object.getPrototypeOf,Object),wf=A9,b9=Iy,R9=wf,P9=Ay,D9=jb,C9=Object.getOwnPropertySymbols,x9=C9?function(t){for(var e=[];t;)b9(e,P9(t)),t=R9(t);return e}:D9,cR=x9,k9=lc,O9=cR;function N9(t,e){return k9(t,O9(t),e)}var M9=N9,V9=Bb,$9=cR,L9=_f;function F9(t){return V9(t,L9,$9)}var hR=F9,U9=Object.prototype,B9=U9.hasOwnProperty;function j9(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&B9.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var z9=j9,ST=Ub;function q9(t){var e=new t.constructor(t.byteLength);return new ST(e).set(new ST(t)),e}var Vy=q9,W9=Vy;function G9(t,e){var n=e?W9(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var H9=G9,K9=/\w*$/;function Q9(t){var e=new t.constructor(t.source,K9.exec(t));return e.lastIndex=t.lastIndex,e}var Y9=Q9,IT=Ma,AT=IT?IT.prototype:void 0,bT=AT?AT.valueOf:void 0;function X9(t){return bT?Object(bT.call(t)):{}}var J9=X9,Z9=Vy;function e5(t,e){var n=e?Z9(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var t5=e5,n5=Vy,r5=H9,i5=Y9,s5=J9,o5=t5,a5="[object Boolean]",l5="[object Date]",u5="[object Map]",c5="[object Number]",h5="[object RegExp]",d5="[object Set]",f5="[object String]",p5="[object Symbol]",m5="[object ArrayBuffer]",g5="[object DataView]",v5="[object Float32Array]",y5="[object Float64Array]",_5="[object Int8Array]",w5="[object Int16Array]",E5="[object Int32Array]",T5="[object Uint8Array]",S5="[object Uint8ClampedArray]",I5="[object Uint16Array]",A5="[object Uint32Array]";function b5(t,e,n){var r=t.constructor;switch(e){case m5:return n5(t);case a5:case l5:return new r(+t);case g5:return r5(t,n);case v5:case y5:case _5:case w5:case E5:case T5:case S5:case I5:case A5:return o5(t,n);case u5:return new r;case c5:case f5:return new r(t);case h5:return i5(t);case d5:return new r;case p5:return s5(t)}}var R5=b5,P5=Qr,RT=Object.create,D5=function(){function t(){}return function(e){if(!P5(e))return{};if(RT)return RT(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),dR=D5,C5=dR,x5=wf,k5=Dy;function O5(t){return typeof t.constructor=="function"&&!k5(t)?C5(x5(t)):{}}var N5=O5,M5=pf,V5=Qi,$5="[object Map]";function L5(t){return V5(t)&&M5(t)==$5}var F5=L5,U5=F5,B5=ff,PT=Ry,DT=PT&&PT.isMap,j5=DT?B5(DT):U5,z5=j5,q5=pf,W5=Qi,G5="[object Set]";function H5(t){return W5(t)&&q5(t)==G5}var K5=H5,Q5=K5,Y5=ff,CT=Ry,xT=CT&&CT.isSet,X5=xT?Y5(xT):Q5,J5=X5,Z5=Sy,eq=lR,tq=uR,nq=Z6,rq=g9,iq=v9,sq=_9,oq=S9,aq=M9,lq=Gb,uq=hR,cq=pf,hq=z9,dq=R5,fq=N5,pq=Bn,mq=df,gq=z5,vq=Qr,yq=J5,_q=oc,wq=_f,Eq=1,Tq=2,Sq=4,fR="[object Arguments]",Iq="[object Array]",Aq="[object Boolean]",bq="[object Date]",Rq="[object Error]",pR="[object Function]",Pq="[object GeneratorFunction]",Dq="[object Map]",Cq="[object Number]",mR="[object Object]",xq="[object RegExp]",kq="[object Set]",Oq="[object String]",Nq="[object Symbol]",Mq="[object WeakMap]",Vq="[object ArrayBuffer]",$q="[object DataView]",Lq="[object Float32Array]",Fq="[object Float64Array]",Uq="[object Int8Array]",Bq="[object Int16Array]",jq="[object Int32Array]",zq="[object Uint8Array]",qq="[object Uint8ClampedArray]",Wq="[object Uint16Array]",Gq="[object Uint32Array]",Ne={};Ne[fR]=Ne[Iq]=Ne[Vq]=Ne[$q]=Ne[Aq]=Ne[bq]=Ne[Lq]=Ne[Fq]=Ne[Uq]=Ne[Bq]=Ne[jq]=Ne[Dq]=Ne[Cq]=Ne[mR]=Ne[xq]=Ne[kq]=Ne[Oq]=Ne[Nq]=Ne[zq]=Ne[qq]=Ne[Wq]=Ne[Gq]=!0;Ne[Rq]=Ne[pR]=Ne[Mq]=!1;function Ch(t,e,n,r,i,s){var o,a=e&Eq,l=e&Tq,c=e&Sq;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!vq(t))return t;var h=pq(t);if(h){if(o=hq(t),!a)return sq(t,o)}else{var d=cq(t),f=d==pR||d==Pq;if(mq(t))return iq(t,a);if(d==mR||d==fR||f&&!i){if(o=l||f?{}:fq(t),!a)return l?aq(t,rq(o,t)):oq(t,nq(o,t))}else{if(!Ne[d])return i?t:{};o=dq(t,d,a)}}s||(s=new Z5);var m=s.get(t);if(m)return m;s.set(t,o),yq(t)?t.forEach(function(I){o.add(Ch(I,e,n,I,t,s))}):gq(t)&&t.forEach(function(I,w){o.set(w,Ch(I,e,n,w,t,s))});var y=c?l?uq:lq:l?wq:_q,v=h?void 0:y(t);return eq(v||t,function(I,w){v&&(w=I,I=t[w]),tq(o,w,Ch(I,e,n,w,t,s))}),o}var Hq=Ch;function Kq(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Qq=Kq,Yq=gf,Xq=wb;function Jq(t,e){return e.length<2?t:Yq(t,Xq(e,0,-1))}var Zq=Jq,eW=mf,tW=Qq,nW=Zq,rW=ac;function iW(t,e){return e=eW(e,t),t=nW(t,e),t==null||delete t[rW(tW(e))]}var sW=iW,oW=Va,aW=wf,lW=Qi,uW="[object Object]",cW=Function.prototype,hW=Object.prototype,gR=cW.toString,dW=hW.hasOwnProperty,fW=gR.call(Object);function pW(t){if(!lW(t)||oW(t)!=uW)return!1;var e=aW(t);if(e===null)return!0;var n=dW.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gR.call(n)==fW}var mW=pW,gW=mW;function vW(t){return gW(t)?void 0:t}var yW=vW,_W=nR;function wW(t){var e=t==null?0:t.length;return e?_W(t,1):[]}var EW=wW,TW=EW,SW=rR,IW=sR;function AW(t){return IW(SW(t,void 0,TW),t+"")}var bW=AW,RW=Oy,PW=Hq,DW=sW,CW=mf,xW=lc,kW=yW,OW=bW,NW=hR,MW=1,VW=2,$W=4,LW=OW(function(t,e){var n={};if(t==null)return n;var r=!1;e=RW(e,function(s){return s=CW(s,t),r||(r=s.length>1),s}),xW(t,NW(t),n),r&&(n=PW(n,MW|VW|$W,kW));for(var i=e.length;i--;)DW(n,e[i]);return n}),FW=LW;const UW=et(FW);var BW=oR,jW=tc,zW=of,qW=_f,vR=Object.prototype,WW=vR.hasOwnProperty,GW=BW(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&zW(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=qW(s),a=-1,l=o.length;++a<l;){var c=o[a],h=t[c];(h===void 0||jW(h,vR[c])&&!WW.call(t,c))&&(t[c]=s[c])}return t}),HW=GW;const KW=et(HW);var QW=lR,YW=dR,XW=Ny,JW=yf,ZW=wf,eG=Bn,tG=df,nG=ly,rG=Qr,iG=Py;function sG(t,e,n){var r=eG(t),i=r||tG(t)||iG(t);if(e=JW(e),n==null){var s=t&&t.constructor;i?n=r?new s:[]:rG(t)?n=nG(s)?YW(ZW(t)):{}:n={}}return(i?QW:XW)(t,function(o,a,l){return e(n,o,a,l)}),n}var oG=sG;const aG=et(oG);var lG=My,uG=Ny,cG=yf;function hG(t,e){var n={};return e=cG(e),uG(t,function(r,i,s){lG(n,i,e(r,i,s))}),n}var dG=hG;const fG=et(dG);var yR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){return function(n,r,i){r.prototype.isBetween=function(s,o,a,l){var c=i(s),h=i(o),d=(l=l||"()")[0]==="(",f=l[1]===")";return(d?this.isAfter(c,a):!this.isBefore(c,a))&&(f?this.isBefore(h,a):!this.isAfter(h,a))||(d?this.isBefore(c,a):!this.isAfter(c,a))&&(f?this.isAfter(h,a):!this.isBefore(h,a))}}})})(yR);var pG=yR.exports;const mG=et(pG);var _R={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){return function(n,r){r.prototype.isSameOrAfter=function(i,s){return this.isSame(i,s)||this.isAfter(i,s)}}})})(_R);var gG=_R.exports;const vG=et(gG);var wR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){return function(n,r){r.prototype.isSameOrBefore=function(i,s){return this.isSame(i,s)||this.isBefore(i,s)}}})})(wR);var yG=wR.exports;const _G=et(yG);var ER={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){return function(n,r,i){var s=r.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,m,y,v){var I=d.name?d:d.$locale(),w=o(I[f]),_=o(I[m]),T=w||_.map(function(x){return x.slice(0,y)});if(!v)return T;var P=I.weekStart;return T.map(function(x,k){return T[(k+(P||0))%7]})},l=function(){return i.Ls[i.locale()]},c=function(d,f){return d.formats[f]||function(m){return m.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,v,I){return v||I.slice(1)})}(d.formats[f.toUpperCase()])},h=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return c(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return h.bind(this)()},i.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(f){return c(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},i.months=function(){return a(l(),"months")},i.monthsShort=function(){return a(l(),"monthsShort","months",3)},i.weekdays=function(d){return a(l(),"weekdays",null,null,d)},i.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},i.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(ER);var wG=ER.exports;const EG=et(wG);var TR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var o=i.prototype,a=o.format;s.en.formats=n,o.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,h=function(d,f){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,y,v){var I=v&&v.toUpperCase();return y||f[v]||n[v]||f[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,_,T){return _||T.slice(1)})})}(l,c===void 0?{}:c);return a.call(this,h)}}})})(TR);var TG=TR.exports;const SG=et(TG);var SR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){return function(n,r,i){var s=function(o,a){if(!a||!a.length||a.length===1&&!a[0]||a.length===1&&Array.isArray(a[0])&&!a[0].length)return null;var l;a.length===1&&a[0].length>0&&(a=a[0]),l=(a=a.filter(function(h){return h}))[0];for(var c=1;c<a.length;c+=1)a[c].isValid()&&!a[c][o](l)||(l=a[c]);return l};i.max=function(){var o=[].slice.call(arguments,0);return s("isAfter",o)},i.min=function(){var o=[].slice.call(arguments,0);return s("isBefore",o)}}})})(SR);var IG=SR.exports;const AG=et(IG);var IR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(v){var I={date:v,utc:!0,args:arguments};return new o(I)},l.utc=function(v){var I=a(this.toDate(),{locale:this.$L,utc:!0});return v?I.add(this.utcOffset(),n):I},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=l.parse;l.parse=function(v){v.utc&&(this.$u=!0),this.$utils().u(v.$offset)||(this.$offset=v.$offset),c.call(this,v)};var h=l.init;l.init=function(){if(this.$u){var v=this.$d;this.$y=v.getUTCFullYear(),this.$M=v.getUTCMonth(),this.$D=v.getUTCDate(),this.$W=v.getUTCDay(),this.$H=v.getUTCHours(),this.$m=v.getUTCMinutes(),this.$s=v.getUTCSeconds(),this.$ms=v.getUTCMilliseconds()}else h.call(this)};var d=l.utcOffset;l.utcOffset=function(v,I){var w=this.$utils().u;if(w(v))return this.$u?0:w(this.$offset)?d.call(this):this.$offset;if(typeof v=="string"&&(v=function(x){x===void 0&&(x="");var k=x.match(r);if(!k)return null;var S=(""+k[0]).match(i)||["-",0,0],E=S[0],b=60*+S[1]+ +S[2];return b===0?0:E==="+"?b:-b}(v),v===null))return this;var _=Math.abs(v)<=16?60*v:v,T=this;if(I)return T.$offset=_,T.$u=v===0,T;if(v!==0){var P=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(T=this.local().add(_+P,n)).$offset=_,T.$x.$localOffset=P}else T=this.utc();return T};var f=l.format;l.format=function(v){var I=v||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,I)},l.valueOf=function(){var v=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*v},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var m=l.toDate;l.toDate=function(v){return v==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var y=l.diff;l.diff=function(v,I,w){if(v&&this.$u===v.$u)return y.call(this,v,I,w);var _=this.local(),T=a(v).local();return y.call(_,T,I,w)}}})})(IR);var bG=IR.exports;const RG=et(bG);function Rr(t){return t.children}var gn={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Kt={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},kT=Object.keys(Kt).map(function(t){return Kt[t]});ee.oneOfType([ee.string,ee.func]);ee.any;ee.func;ee.oneOfType([ee.arrayOf(ee.oneOf(kT)),ee.objectOf(function(t,e){var n=kT.indexOf(e)!==-1&&typeof t[e]=="boolean";if(n)return null;for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return ee.elementType.apply(ee,[t,e].concat(i))})]);ee.oneOfType([ee.oneOf(["overlap","no-overlap"]),ee.func]);function We(t,e){t&&t.apply(null,[].concat(e))}var OT={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function AR(t,e){var n=kt(t,"month");return kt(n,"week",e.startOfWeek())}function bR(t,e){var n=md(t,"month");return md(n,"week",e.startOfWeek())}function PG(t,e){for(var n=AR(t,e),r=bR(t,e),i=[];Oa(n,r,"day");)i.push(n),n=Jn(n,1,"day");return i}function DG(t,e){var n=kt(t,e);return Zu(n,t)?n:Jn(n,1,e)}function CG(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",r=t,i=[];Oa(r,e,n);)i.push(r),r=Jn(r,1,n);return i}function xG(t,e){return e==null&&t==null?null:(e==null&&(e=new Date),t==null&&(t=new Date),t=kt(t,"day"),t=Pu(t,Pu(e)),t=la(t,la(e)),t=Ru(t,Ru(e)),bu(t,bu(e)))}function NT(t){return Pu(t)===0&&la(t)===0&&Ru(t)===0&&bu(t)===0}function kG(t,e,n,r){return n==="day"&&(n="date"),Math.abs(w0[n](t,void 0,r)-w0[n](e,void 0,r))}function $y(t,e,n){return!n||n==="milliseconds"?Math.abs(+t-+e):Math.round(Math.abs(+kt(t,n)/OT[n]-+kt(e,n)/OT[n]))}var OG=ee.oneOfType([ee.string,ee.func]);function NG(t,e,n,r,i){var s=typeof r=="function"?r(n,i,t):e.call(t,n,r,i);return wu(s==null||typeof s=="string","`localizer format(..)` must return a string, null, or undefined"),s}function MG(t,e,n){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,e+n,0,0)}function Ly(t,e){return t.getTimezoneOffset()-e.getTimezoneOffset()}function VG(t,e){return $y(t,e,"minutes")+Ly(t,e)}function $G(t){var e=kt(t,"day");return $y(e,t,"minutes")+Ly(e,t)}function LG(t,e){return ay(t,e,"day")}function FG(t,e,n){var r=Zu(t,e,"minutes");return r?ec(e,n,"minutes"):sf(e,n,"minutes")}function Rg(t,e){return kG(t,e,"day")}function UG(t){var e=t.evtA,n=e.start,r=e.end,i=e.allDay,s=t.evtB,o=s.start,a=s.end,l=s.allDay,c=+kt(n,"day")-+kt(o,"day"),h=Rg(n,r),d=Rg(o,a);return c||d-h||!!l-!!i||+n-+o||+r-+a}function BG(t){var e=t.event,n=e.start,r=e.end,i=t.range,s=i.start,o=i.end,a=kt(n,"day"),l=Oa(a,o,"day"),c=oy(a,r,"minutes"),h=c?sf(r,s,"minutes"):ec(r,s,"minutes");return l&&h}function jG(t,e){return Zu(t,e,"day")}function zG(t,e){return NT(t)&&NT(e)}var qG=It(function t(e){var n=this;St(this,t),wu(typeof e.format=="function","date localizer `format(..)` must be a function"),wu(typeof e.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=e.propType||OG,this.formats=e.formats,this.format=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return NG.apply(void 0,[n,e.format].concat(i))},this.startOfWeek=e.firstOfWeek,this.merge=e.merge||xG,this.inRange=e.inRange||mb,this.lt=e.lt||ay,this.lte=e.lte||Oa,this.gt=e.gt||sf,this.gte=e.gte||ec,this.eq=e.eq||Zu,this.neq=e.neq||oy,this.startOf=e.startOf||kt,this.endOf=e.endOf||md,this.add=e.add||Jn,this.range=e.range||CG,this.diff=e.diff||$y,this.ceil=e.ceil||DG,this.min=e.min||fb,this.max=e.max||pb,this.minutes=e.minutes||la,this.daySpan=e.daySpan||Rg,this.firstVisibleDay=e.firstVisibleDay||AR,this.lastVisibleDay=e.lastVisibleDay||bR,this.visibleDays=e.visibleDays||PG,this.getSlotDate=e.getSlotDate||MG,this.getTimezoneOffset=e.getTimezoneOffset||function(r){return r.getTimezoneOffset()},this.getDstOffset=e.getDstOffset||Ly,this.getTotalMin=e.getTotalMin||VG,this.getMinutesFromMidnight=e.getMinutesFromMidnight||$G,this.continuesPrior=e.continuesPrior||LG,this.continuesAfter=e.continuesAfter||FG,this.sortEvents=e.sortEvents||UG,this.inEventRange=e.inEventRange||BG,this.isSameDate=e.isSameDate||jG,this.startAndEndAreDateOnly=e.startAndEndAreDateOnly||zG,this.segmentOffset=e.browserTZOffset?e.browserTZOffset():0});function WG(t,e,n,r){var i=Oe(Oe({},t.formats),n);return Oe(Oe({},t),{},{messages:r,startOfWeek:function(){return t.startOfWeek(e)},format:function(o,a){return t.format(o,i[a]||a,e)}})}var GG={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};function HG(t){return Oe(Oe({},GG),t)}function KG(t){var e=t.ref,n=t.callback;j.useEffect(function(){var r=function(s){e.current&&!e.current.contains(s.target)&&n()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[e,n])}var QG=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],RR=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.style,s=r.className,o=r.event,a=r.selected,l=r.isAllDay,c=r.onSelect,h=r.onDoubleClick,d=r.onKeyPress,f=r.localizer,m=r.continuesPrior,y=r.continuesAfter,v=r.accessors,I=r.getters,w=r.children,_=r.components,T=_.event,P=_.eventWrapper,x=r.slotStart,k=r.slotEnd,S=yr(r,QG);delete S.resizable;var E=v.title(o),b=v.tooltip(o),A=v.end(o),D=v.start(o),O=v.allDay(o),C=l||O||f.diff(D,f.ceil(A,"day"),"day")>1,Y=I.eventProp(o,D,A,a),W=V.createElement("div",{className:"rbc-event-content",title:b||void 0},T?V.createElement(T,{event:o,continuesPrior:m,continuesAfter:y,title:E,isAllDay:O,localizer:f,slotStart:x,slotEnd:k}):E);return V.createElement(P,Object.assign({},this.props,{type:"date"}),V.createElement("div",Object.assign({},S,{style:Oe(Oe({},Y.style),i),className:gt("rbc-event",s,Y.className,{"rbc-selected":a,"rbc-event-allday":C,"rbc-event-continues-prior":m,"rbc-event-continues-after":y}),onClick:function(Q){return c&&c(o,Q)},onDoubleClick:function(Q){return h&&h(o,Q)},onKeyDown:function(Q){return d&&d(o,Q)}}),typeof w=="function"?w(W):W))}}])}(V.Component);function Ef(t,e){return!t||e==null?!1:oj(t,e)}function PR(t,e){var n=t.right-t.left,r=n/e;return r}function DR(t,e,n,r){var i=PR(t,r);return n?r-1-Math.floor((e-t.left)/i):Math.floor((e-t.left)/i)}function YG(t,e){var n=e.x,r=e.y;return r>=t.top&&r<=t.bottom&&n>=t.left&&n<=t.right}function XG(t,e,n,r,i){var s=-1,o=-1,a=r-1,l=PR(e,r),c=DR(e,n.x,i,r),h=e.top<n.y&&e.bottom>n.y,d=e.top<t.y&&e.bottom>t.y,f=t.y>e.bottom,m=e.top>t.y,y=n.top<e.top&&n.bottom>e.bottom;return y&&(s=0,o=a),h&&(m?(s=0,o=c):f&&(s=c,o=a)),d&&(s=o=i?a-Math.floor((t.x-e.left)/l):Math.floor((t.x-e.left)/l),h?c<s?s=c:o=c:t.y<n.y?o=a:s=0),{startIdx:s,endIdx:o}}function JG(t){var e=t.target,n=t.offset,r=t.container,i=t.box,s=Cs(e),o=s.top,a=s.left,l=s.width,c=s.height,h=Cs(r),d=h.top,f=h.left,m=h.width,y=h.height,v=Cs(i),I=v.width,w=v.height,_=d+y,T=f+m,P=o+w,x=a+I,k=n.x,S=n.y,E=P>_?o-w-S:o+S+c,b=x>T?a+k-I+l:a+k;return{topOffset:E,leftOffset:b}}function ZG(t){var e=t.containerRef,n=t.accessors,r=t.getters,i=t.selected,s=t.components,o=t.localizer,a=t.position,l=t.show,c=t.events,h=t.slotStart,d=t.slotEnd,f=t.onSelect,m=t.onDoubleClick,y=t.onKeyPress,v=t.handleDragStart,I=t.popperRef,w=t.target,_=t.offset;KG({ref:I,callback:l}),j.useLayoutEffect(function(){var x=JG({target:w,offset:_,container:e.current,box:I.current}),k=x.topOffset,S=x.leftOffset;I.current.style.top="".concat(k,"px"),I.current.style.left="".concat(S,"px")},[_.x,_.y,w]);var T=a.width,P={minWidth:T+T/2};return V.createElement("div",{style:P,className:"rbc-overlay",ref:I},V.createElement("div",{className:"rbc-overlay-header"},o.format(h,"dayHeaderFormat")),c.map(function(x,k){return V.createElement(RR,{key:k,type:"popup",localizer:o,event:x,getters:r,onSelect:f,accessors:n,components:s,onDoubleClick:m,onKeyPress:y,continuesPrior:o.lt(n.end(x),h,"day"),continuesAfter:o.gte(n.start(x),d,"day"),slotStart:h,slotEnd:d,selected:Ef(x,i),draggable:!0,onDragStart:function(){return v(x)},onDragEnd:function(){return l()}})}))}var CR=V.forwardRef(function(t,e){return V.createElement(ZG,Object.assign({},t,{popperRef:e}))});CR.propTypes={accessors:ee.object.isRequired,getters:ee.object.isRequired,selected:ee.object,components:ee.object.isRequired,localizer:ee.object.isRequired,position:ee.object.isRequired,show:ee.func.isRequired,events:ee.array.isRequired,slotStart:ee.instanceOf(Date).isRequired,slotEnd:ee.instanceOf(Date),onSelect:ee.func,onDoubleClick:ee.func,onKeyPress:ee.func,handleDragStart:ee.func,style:ee.object,offset:ee.shape({x:ee.number,y:ee.number})};function eH(t){var e=t.containerRef,n=t.popupOffset,r=n===void 0?5:n,i=t.overlay,s=t.accessors,o=t.localizer,a=t.components,l=t.getters,c=t.selected,h=t.handleSelectEvent,d=t.handleDoubleClickEvent,f=t.handleKeyPressEvent,m=t.handleDragStart,y=t.onHide,v=t.overlayDisplay,I=j.useRef(null);if(!i.position)return null;var w=r;isNaN(r)||(w={x:r,y:r});var _=i.position,T=i.events,P=i.date,x=i.end;return V.createElement(wy,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:y,target:i.target},function(k){var S=k.props;return V.createElement(CR,Object.assign({},S,{containerRef:e,ref:I,target:i.target,offset:w,accessors:s,getters:l,selected:c,components:a,localizer:o,position:_,show:v,events:T,slotStart:P,slotEnd:x,onSelect:h,onDoubleClick:d,onKeyPress:f,handleDragStart:m}))})}var Fy=V.forwardRef(function(t,e){return V.createElement(eH,Object.assign({},t,{containerRef:e}))});Fy.propTypes={popupOffset:ee.oneOfType([ee.number,ee.shape({x:ee.number,y:ee.number})]),overlay:ee.shape({position:ee.object,events:ee.array,date:ee.instanceOf(Date),end:ee.instanceOf(Date)}),accessors:ee.object.isRequired,localizer:ee.object.isRequired,components:ee.object.isRequired,getters:ee.object.isRequired,selected:ee.object,handleSelectEvent:ee.func,handleDoubleClickEvent:ee.func,handleKeyPressEvent:ee.func,handleDragStart:ee.func,onHide:ee.func,overlayDisplay:ee.func};function $t(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Or(n,t,e,{passive:!1})}function tH(t,e,n){return!t||Fs(t,document.elementFromPoint(e,n))}function nH(t,e){var n=e.clientX,r=e.clientY,i=document.elementFromPoint(n,r);return Qb(i,".rbc-event",t)}function rH(t,e){var n=e.clientX,r=e.clientY,i=document.elementFromPoint(n,r);return Qb(i,".rbc-show-more",t)}function Td(t,e){return!!nH(t,e)}function iH(t,e){return!!rH(t,e)}function Sl(t){var e=t;return t.touches&&t.touches.length&&(e=t.touches[0]),{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var MT=5,sH=250,xR=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,i=r===void 0?!1:r,s=n.longPressThreshold,o=s===void 0?250:s,a=n.validContainers,l=a===void 0?[]:a;St(this,t),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=e,this.globalMouse=!e||i,this.longPressThreshold=o,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=$t("touchmove",function(){},window),this._removeKeyDownListener=$t("keydown",this._keyListener),this._removeKeyUpListener=$t("keyup",this._keyListener),this._removeDropFromOutsideListener=$t("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=$t("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return It(t,[{key:"on",value:function(n,r){var i=this._listeners[n]||(this._listeners[n]=[]);return i.push(r),{remove:function(){var o=i.indexOf(r);o!==-1&&i.splice(o,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var o,a=this._listeners[n]||[];return a.forEach(function(l){o===void 0&&(o=l.apply(void 0,i))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:VT(r,Gs(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var i=this,s=null,o=null,a=null,l=function(f){s=setTimeout(function(){h(),n(f)},i.longPressThreshold),o=$t("touchmove",function(){return h()}),a=$t("touchend",function(){return h()})},c=$t("touchstart",l),h=function(){s&&clearTimeout(s),o&&o(),a&&a(),s=null,o=null,a=null};return r&&l(r),function(){h(),c()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=$t("mousedown",function(s){n._removeInitialEventListener(),n._handleInitialEvent(s),n._removeInitialEventListener=$t("mousedown",n._handleInitialEvent)}),i=$t("touchstart",function(s){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,s)});this._removeInitialEventListener=function(){r(),i()}}},{key:"_dropFromOutsideListener",value:function(n){var r=Sl(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY;this.emit("dropFromOutside",{x:i,y:s,clientX:o,clientY:a}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=Sl(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY;this.emit("dragOverFromOutside",{x:i,y:s,clientX:o,clientY:a}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=Sl(n),i=r.clientX,s=r.clientY,o=r.pageX,a=r.pageY,l=this.container(),c,h;if(!(n.which===3||n.button===2||!tH(l,i,s))){if(!this.globalMouse&&l&&!Fs(l,n.target)){var d=oH(0),f=d.top,m=d.left,y=d.bottom,v=d.right;if(h=Gs(l),c=VT({top:h.top-f,left:h.left-m,bottom:h.bottom+y,right:h.right+v},{top:a,left:o}),!c)return}var I=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:o,y:a,clientX:i,clientY:s});if(I!==!1)switch(n.type){case"mousedown":this._removeEndListener=$t("mouseup",this._handleTerminatingEvent),this._onEscListener=$t("keydown",this._handleTerminatingEvent),this._removeMoveListener=$t("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=$t("touchend",this._handleTerminatingEvent),this._removeMoveListener=$t("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,i=this.validContainers;return!i||!i.length||!r?!0:i.some(function(s){return!!r.closest(s)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,i=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var s=!this.container||Fs(this.container(),n.target),o=this._isWithinValidContainer(n);return n.key==="Escape"||!o?this.emit("reset"):!r&&s?this._handleClickEvent(n):r?this.emit("select",i):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=Sl(n),i=r.pageX,s=r.pageY,o=r.clientX,a=r.clientY,l=new Date().getTime();return this._lastClickData&&l-this._lastClickData.timestamp<sH?(this._lastClickData=null,this.emit("doubleClick",{x:i,y:s,clientX:o,clientY:a})):(this._lastClickData={timestamp:l},this.emit("click",{x:i,y:s,clientX:o,clientY:a}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,i=r.x,s=r.y,o=Sl(n),a=o.pageX,l=o.pageY,c=Math.abs(i-a),h=Math.abs(s-l),d=Math.min(a,i),f=Math.min(l,s),m=this.selecting,y=this.isClick(a,l);y&&!m&&!(c||h)||(!m&&!y&&this.emit("selectStart",this._initialEventData),y||(this.selecting=!0,this._selectRect={top:f,left:d,x:a,y:l,right:d+c,bottom:f+h},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var i=this._initialEventData,s=i.x,o=i.y,a=i.isTouch;return!a&&Math.abs(n-s)<=MT&&Math.abs(r-o)<=MT}}])}();function oH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Br(t)!=="object"&&(t={top:t,left:t,right:t,bottom:t}),t}function VT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Gs(t),i=r.top,s=r.left,o=r.right,a=o===void 0?s:o,l=r.bottom,c=l===void 0?i:l,h=Gs(e),d=h.top,f=h.left,m=h.right,y=m===void 0?f:m,v=h.bottom,I=v===void 0?d:v;return!(c-n<d||i+n>I||a-n<f||s+n>y)}function Gs(t){if(!t.getBoundingClientRect)return t;var e=t.getBoundingClientRect(),n=e.left+$T("left"),r=e.top+$T("top");return{top:r,left:n,right:(t.offsetWidth||0)+n,bottom:(t.offsetHeight||0)+r}}function $T(t){if(t==="left")return window.pageXOffset||document.body.scrollLeft||0;if(t==="top")return window.pageYOffset||document.body.scrollTop||0}var aH=function(t){function e(n,r){var i;return St(this,e),i=tn(this,e,[n,r]),i.state={selecting:!1},i.containerRef=j.createRef(),i}return nn(e,t),It(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,i=r.range,s=r.getNow,o=r.getters,a=r.date,l=r.components.dateCellWrapper,c=r.localizer,h=this.state,d=h.selecting,f=h.startIdx,m=h.endIdx,y=s();return V.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},i.map(function(v,I){var w=d&&I>=f&&I<=m,_=o.dayProp(v),T=_.className,P=_.style;return V.createElement(l,{key:I,value:v,range:i},V.createElement("div",{style:P,className:gt("rbc-day-bg",T,w&&"rbc-selected-cell",c.isSameDate(v,y)&&"rbc-today",a&&c.neq(a,v,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,i=this.containerRef.current,s=this._selector=new xR(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(l,c){if(!Td(i,l)&&!iH(i,l)){var h=Gs(i),d=r.props,f=d.range,m=d.rtl;if(YG(h,l)){var y=DR(h,l.x,m,f.length);r._selectSlot({startIdx:y,endIdx:y,action:c,box:l})}}r._initial={},r.setState({selecting:!1})};s.on("selecting",function(a){var l=r.props,c=l.range,h=l.rtl,d=-1,f=-1;if(r.state.selecting||(We(r.props.onSelectStart,[a]),r._initial={x:a.x,y:a.y}),s.isSelected(i)){var m=Gs(i),y=XG(r._initial,m,a,c.length,h);d=y.startIdx,f=y.endIdx}r.setState({selecting:!0,startIdx:d,endIdx:f})}),s.on("beforeSelect",function(a){if(r.props.selectable==="ignoreEvents")return!Td(r.containerRef.current,a)}),s.on("click",function(a){return o(a,"click")}),s.on("doubleClick",function(a){return o(a,"doubleClick")}),s.on("select",function(a){r._selectSlot(Oe(Oe({},r.state),{},{action:"select",bounds:a})),r._initial={},r.setState({selecting:!1}),We(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var i=r.endIdx,s=r.startIdx,o=r.action,a=r.bounds,l=r.box;i!==-1&&s!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:s,end:i,action:o,bounds:a,box:l,resourceId:this.props.resourceId})}}])}(V.Component),ar={propTypes:{slotMetrics:ee.object.isRequired,selected:ee.object,isAllDay:ee.bool,accessors:ee.object.isRequired,localizer:ee.object.isRequired,components:ee.object.isRequired,getters:ee.object.isRequired,onSelect:ee.func,onDoubleClick:ee.func,onKeyPress:ee.func},defaultProps:{segments:[],selected:{}},renderEvent:function(e,n){var r=e.selected;e.isAllDay;var i=e.accessors,s=e.getters,o=e.onSelect,a=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,h=e.slotMetrics,d=e.components,f=e.resizable,m=h.continuesPrior(n),y=h.continuesAfter(n);return V.createElement(RR,{event:n,getters:s,localizer:c,accessors:i,components:d,onSelect:o,onDoubleClick:a,onKeyPress:l,continuesPrior:m,continuesAfter:y,slotStart:h.first,slotEnd:h.last,selected:Ef(n,r),resizable:f})},renderSpan:function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",s=Math.abs(n)/e*100+"%";return V.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},i)}},kR=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.segments,o=i.slotMetrics.slots,a=i.className,l=1;return V.createElement("div",{className:gt(a,"rbc-row")},s.reduce(function(c,h,d){var f=h.event,m=h.left,y=h.right,v=h.span,I="_lvl_"+d,w=m-l,_=ar.renderEvent(r.props,f);return w&&c.push(ar.renderSpan(o,w,"".concat(I,"_gap"))),c.push(ar.renderSpan(o,v,I,_)),l=y+1,c},[]))}}])}(V.Component);kR.defaultProps=Oe({},ar.defaultProps);function OR(t){var e=t.dateRange,n=t.unit,r=n===void 0?"day":n,i=t.localizer;return{first:e[0],last:i.add(e[e.length-1],1,r)}}function lH(t,e,n,r){var i=OR({dateRange:e,localizer:r}),s=i.first,o=i.last,a=r.diff(s,o,"day"),l=r.max(r.startOf(n.start(t),"day"),s),c=r.min(r.ceil(n.end(t),"day"),o),h=a3(e,function(f){return r.isSameDate(f,l)}),d=r.diff(l,c,"day");return d=Math.min(d,a),d=Math.max(d-r.segmentOffset,1),{event:t,span:d,left:h+1,right:Math.max(h+d,1)}}function NR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,i,s=[],o=[];for(n=0;n<t.length;n++){for(i=t[n],r=0;r<s.length&&uH(i,s[r]);r++);r>=e?o.push(i):(s[r]||(s[r]=[])).push(i)}for(n=0;n<s.length;n++)s[n].sort(function(a,l){return a.left-l.left});return{levels:s,extra:o}}function xu(t,e,n,r,i){var s={start:r.start(t),end:r.end(t)},o={start:e,end:n};return i.inEventRange({event:s,range:o})}function uH(t,e){return e.some(function(n){return n.left<=t.right&&n.right>=t.left})}function cH(t,e,n){var r=Ph(t),i=[],s=[];r.forEach(function(l){var c=e.start(l),h=e.end(l);n.daySpan(c,h)>1?i.push(l):s.push(l)});var o=i.sort(function(l,c){return Pg(l,c,e,n)}),a=s.sort(function(l,c){return Pg(l,c,e,n)});return[].concat(Ph(o),Ph(a))}function Pg(t,e,n,r){var i={start:n.start(t),end:n.end(t),allDay:n.allDay(t)},s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)};return r.sortEvents({evtA:i,evtB:s})}var MR=function(e,n){return e.left<=n&&e.right>=n},LT=function(e,n){return e.filter(function(r){return MR(r,n)}).map(function(r){return r.event})},VR=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){for(var r=this.props,i=r.segments,s=r.slotMetrics.slots,o=NR(i).levels[0],a=1,l=1,c=[];a<=s;){var h="_lvl_"+a,d=o.filter(function(_){return MR(_,a)})[0]||{},f=d.event,m=d.left,y=d.right,v=d.span;if(!f){a++;continue}var I=Math.max(0,m-l);if(this.canRenderSlotEvent(m,v)){var w=ar.renderEvent(this.props,f);I&&c.push(ar.renderSpan(s,I,h+"_gap")),c.push(ar.renderSpan(s,v,h,w)),l=a=y+1}else I&&c.push(ar.renderSpan(s,I,h+"_gap")),c.push(ar.renderSpan(s,1,h,this.renderShowMore(i,a))),l=a=a+1}return V.createElement("div",{className:"rbc-row"},c)}},{key:"canRenderSlotEvent",value:function(r,i){var s=this.props.segments;return _3(r,r+i).every(function(o){var a=LT(s,o).length;return a===1})}},{key:"renderShowMore",value:function(r,i){var s=this,o=this.props,a=o.localizer,l=o.slotMetrics,c=o.components,h=l.getEventsForSlot(i),d=LT(r,i),f=d.length;if(c!=null&&c.showMore){var m=c.showMore,y=l.getDateForSlot(i-1);return f?V.createElement(m,{localizer:a,slotDate:y,slot:i,count:f,events:h,remainingEvents:d}):!1}return f?V.createElement("button",{type:"button",key:"sm_"+i,className:gt("rbc-button-link","rbc-show-more"),onClick:function(I){return s.showMore(i,I)}},a.messages.showMore(f,d,h)):!1}},{key:"showMore",value:function(r,i){i.preventDefault(),i.stopPropagation(),this.props.onShowMore(r,i.target)}}])}(V.Component);VR.defaultProps=Oe({},ar.defaultProps);var hH=function(e){var n=e.children;return V.createElement("div",{className:"rbc-row-content-scroll-container"},n)},dH=function(e,n){return e.left<=n&&e.right>=n},fH=function(e,n){return e[0].range===n[0].range&&e[0].events===n[0].events};function $R(){return eR(function(t){for(var e=t.range,n=t.events,r=t.maxRows,i=t.minRows,s=t.accessors,o=t.localizer,a=OR({dateRange:e,localizer:o}),l=a.first,c=a.last,h=n.map(function(v){return lH(v,e,s,o)}),d=NR(h,Math.max(r-1,1)),f=d.levels,m=d.extra,y=m.length>0?i-1:i;f.length<y;)f.push([]);return{first:l,last:c,levels:f,extra:m,range:e,slots:e.length,clone:function(I){var w=$R();return w(Oe(Oe({},t),I))},getDateForSlot:function(I){return e[I]},getSlotForDate:function(I){return e.find(function(w){return o.isSameDate(w,I)})},getEventsForSlot:function(I){return h.filter(function(w){return dH(w,I)}).map(function(w){return w.event})},continuesPrior:function(I){return o.continuesPrior(s.start(I),l)},continuesAfter:function(I){var w=s.start(I),_=s.end(I);return o.continuesAfter(w,_,c)}}},fH)}var Sd=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.handleSelectSlot=function(o){var a=n.props,l=a.range,c=a.onSelectSlot;c(l.slice(o.start,o.end+1),o)},n.handleShowMore=function(o,a){var l=n.props,c=l.range,h=l.onShowMore,d=n.slotMetrics(n.props),f=hs(n.containerRef.current,".rbc-row-bg")[0],m;f&&(m=f.children[o-1]);var y=d.getEventsForSlot(o);h(y,c[o-1],m,o,a)},n.getContainer=function(){var o=n.props.container;return o?o():n.containerRef.current},n.renderHeadingCell=function(o,a){var l=n.props,c=l.renderHeader,h=l.getNow,d=l.localizer;return c({date:o,key:"header_".concat(a),className:gt("rbc-date-cell",d.isSameDate(o,h())&&"rbc-now")})},n.renderDummy=function(){var o=n.props,a=o.className,l=o.range,c=o.renderHeader,h=o.showAllEvents;return V.createElement("div",{className:a,ref:n.containerRef},V.createElement("div",{className:gt("rbc-row-content",h&&"rbc-row-content-scrollable")},c&&V.createElement("div",{className:"rbc-row",ref:n.headingRowRef},l.map(n.renderHeadingCell)),V.createElement("div",{className:"rbc-row",ref:n.eventRowRef},V.createElement("div",{className:"rbc-row-segment"},V.createElement("div",{className:"rbc-event"},V.createElement("div",{className:"rbc-event-content"}," "))))))},n.containerRef=j.createRef(),n.headingRowRef=j.createRef(),n.eventRowRef=j.createRef(),n.slotMetrics=$R(),n}return nn(e,t),It(e,[{key:"getRowLimit",value:function(){var r,i=tm(this.eventRowRef.current),s=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?tm(this.headingRowRef.current):0,o=tm(this.containerRef.current)-s;return Math.max(Math.floor(o/i),1)}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.rtl,o=r.range,a=r.className,l=r.selected,c=r.selectable,h=r.renderForMeasure,d=r.accessors,f=r.getters,m=r.components,y=r.getNow,v=r.renderHeader,I=r.onSelect,w=r.localizer,_=r.onSelectStart,T=r.onSelectEnd,P=r.onDoubleClick,x=r.onKeyPress,k=r.resourceId,S=r.longPressThreshold,E=r.isAllDay,b=r.resizable,A=r.showAllEvents;if(h)return this.renderDummy();var D=this.slotMetrics(this.props),O=D.levels,C=D.extra,Y=A?hH:Rr,W=m.weekWrapper,z={selected:l,accessors:d,getters:f,localizer:w,components:m,onSelect:I,onDoubleClick:P,onKeyPress:x,resourceId:k,slotMetrics:D,resizable:b};return V.createElement("div",{className:a,role:"rowgroup",ref:this.containerRef},V.createElement(aH,{localizer:w,date:i,getNow:y,rtl:s,range:o,selectable:c,container:this.getContainer,getters:f,onSelectStart:_,onSelectEnd:T,onSelectSlot:this.handleSelectSlot,components:m,longPressThreshold:S,resourceId:k}),V.createElement("div",{className:gt("rbc-row-content",A&&"rbc-row-content-scrollable"),role:"row"},v&&V.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),V.createElement(Y,null,V.createElement(W,Object.assign({isAllDay:E},z,{rtl:this.props.rtl}),O.map(function(Q,N){return V.createElement(kR,Object.assign({key:N,segments:Q},z))}),!!C.length&&V.createElement(VR,Object.assign({segments:C,onShowMore:this.handleShowMore},z))))))}}])}(V.Component);Sd.defaultProps={minRows:0,maxRows:1/0};var LR=function(e){var n=e.label;return V.createElement("span",{role:"columnheader","aria-sort":"none"},n)},pH=function(e){var n=e.label,r=e.drilldownView,i=e.onDrillDown;return r?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:i,role:"cell"},n):V.createElement("span",null,n)},mH=["date","className"],gH=function(e,n,r,i,s){return e.filter(function(o){return xu(o,n,r,i,s)})},Tf=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(o,a){var l=n.props,c=l.events,h=l.components,d=l.selectable,f=l.getNow,m=l.selected,y=l.date,v=l.localizer,I=l.longPressThreshold,w=l.accessors,_=l.getters,T=l.showAllEvents,P=n.state,x=P.needLimitMeasure,k=P.rowLimit,S=gH(Ph(c),o[0],o[o.length-1],w,v),E=cH(S,w,v);return V.createElement(Sd,{key:a,ref:a===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:f,date:y,range:o,events:E,maxRows:T?1/0:k,selected:m,selectable:d,components:h,accessors:w,getters:_,localizer:v,renderHeader:n.readerDateHeading,renderForMeasure:x,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:I,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:T})},n.readerDateHeading=function(o){var a=o.date,l=o.className,c=yr(o,mH),h=n.props,d=h.date,f=h.getDrilldownView,m=h.localizer,y=m.neq(a,d,"month"),v=m.isSameDate(a,d),I=f(a),w=m.format(a,"dateFormat"),_=n.props.components.dateHeader||pH;return V.createElement("div",Object.assign({},c,{className:gt(l,y&&"rbc-off-range",v&&"rbc-current"),role:"cell"}),V.createElement(_,{label:w,date:a,drilldownView:I,isOffRange:y,onDrillDown:function(P){return n.handleHeadingClick(a,I,P)}}))},n.handleSelectSlot=function(o,a){n._pendingSelection=n._pendingSelection.concat(o),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(a)})},n.handleHeadingClick=function(o,a,l){l.preventDefault(),n.clearSelection(),We(n.props.onDrillDown,[o,a])},n.handleSelectEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onSelectEvent,a)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onDoubleClickEvent,a)},n.handleKeyPressEvent=function(){n.clearSelection();for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onKeyPressEvent,a)},n.handleShowMore=function(o,a,l,c,h){var d=n.props,f=d.popup,m=d.onDrillDown,y=d.onShowMore,v=d.getDrilldownView,I=d.doShowMoreDrillDown;if(n.clearSelection(),f){var w=Pb(l,n.containerRef.current);n.setState({overlay:{date:a,events:o,position:w,target:h}})}else I&&We(m,[a,v(a)||Kt.DAY]);We(y,[o,a,c])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=j.createRef(),n.slotRowRef=j.createRef(),n._bgRows=[],n._pendingSelection=[],n}return nn(e,t),It(e,[{key:"componentDidMount",value:function(){var r=this,i;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){i||Db(function(){i=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.className,a=s.visibleDays(i,s),l=cV(a,7);return this._weekCount=l.length,V.createElement("div",{className:gt("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},V.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var i=this.props,s=i.localizer,o=i.components,a=r[0],l=r[r.length-1],c=o.header||LR;return s.range(a,l,"day").map(function(h,d){return V.createElement("div",{key:"header_"+d,className:"rbc-header"},V.createElement(c,{date:h,localizer:s,label:s.format(h,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,i,s=this,o=(r=(i=this.state)===null||i===void 0?void 0:i.overlay)!==null&&r!==void 0?r:{},a=this.props,l=a.accessors,c=a.localizer,h=a.components,d=a.getters,f=a.selected,m=a.popupOffset,y=a.handleDragStart,v=function(){return s.setState({overlay:null})};return V.createElement(Fy,{overlay:o,accessors:l,localizer:c,components:h,getters:d,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var i=this._pendingSelection.slice();this._pendingSelection=[],i.sort(function(a,l){return+a-+l});var s=new Date(i[0]),o=new Date(i[i.length-1]);o.setDate(i[i.length-1].getDate()+1),We(this.props.onSelectSlot,{slots:i,start:s,end:o,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,i){var s=r.date,o=r.localizer;return{date:s,needLimitMeasure:o.neq(s,i.date,"month")}}}])}(V.Component);Tf.range=function(t,e){var n=e.localizer,r=n.firstVisibleDay(t,n),i=n.lastVisibleDay(t,n);return{start:r,end:i}};Tf.navigate=function(t,e,n){var r=n.localizer;switch(e){case gn.PREVIOUS:return r.add(t,-1,"month");case gn.NEXT:return r.add(t,1,"month");default:return t}};Tf.title=function(t,e){var n=e.localizer;return n.format(t,"monthHeaderFormat")};var FT=function(e){var n=e.min,r=e.max,i=e.step,s=e.slots,o=e.localizer;return"".concat(+o.startOf(n,"minutes"))+"".concat(+o.startOf(r,"minutes"))+"".concat(i,"-").concat(s)};function Uy(t){for(var e=t.min,n=t.max,r=t.step,i=t.timeslots,s=t.localizer,o=FT({start:e,end:n,step:r,timeslots:i,localizer:s}),a=1+s.getTotalMin(e,n),l=s.getMinutesFromMidnight(e),c=Math.ceil((a-1)/(r*i)),h=c*i,d=new Array(c),f=new Array(h),m=0;m<c;m++){d[m]=new Array(i);for(var y=0;y<i;y++){var v=m*i+y,I=v*r;f[v]=d[m][y]=s.getSlotDate(e,l,I)}}var w=f.length*r;f.push(s.getSlotDate(e,l,w));function _(T){var P=s.diff(e,T,"minutes")+s.getDstOffset(e,T);return Math.min(P,a)}return{groups:d,update:function(P){return FT(P)!==o?Uy(P):this},dateIsInGroup:function(P,x){var k=d[x+1];return s.inRange(P,d[x][0],k?k[0]:n,"minutes")},nextSlot:function(P){var x=f[Math.min(f.findIndex(function(k){return k===P||s.eq(k,P)})+1,f.length-1)];return s.eq(x,P)&&(x=s.add(P,r,"minutes")),x},closestSlotToPosition:function(P){var x=Math.min(f.length-1,Math.max(0,Math.floor(P*h)));return f[x]},closestSlotFromPoint:function(P,x){var k=Math.abs(x.top-x.bottom);return this.closestSlotToPosition((P.y-x.top)/k)},closestSlotFromDate:function(P){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(s.lt(P,e,"minutes"))return f[0];if(s.gt(P,n,"minutes"))return f[f.length-1];var k=s.diff(e,P,"minutes");return f[(k-k%r)/r+x]},startsBeforeDay:function(P){return s.lt(P,e,"day")},startsAfterDay:function(P){return s.gt(P,n,"day")},startsBefore:function(P){return s.lt(s.merge(e,P),e,"minutes")},startsAfter:function(P){return s.gt(s.merge(n,P),n,"minutes")},getRange:function(P,x,k,S){k||(P=s.min(n,s.max(e,P))),S||(x=s.min(n,s.max(e,x)));var E=_(P),b=_(x),A=b>r*h&&!s.eq(n,x)?(E-r)/(r*h)*100:E/(r*h)*100;return{top:A,height:b/(r*h)*100-A,start:_(P),startDate:P,end:_(x),endDate:x}},getCurrentTimePosition:function(P){var x=_(P),k=x/(r*h)*100;return k}}}var vH=function(){function t(e,n){var r=n.accessors,i=n.slotMetrics;St(this,t);var s=i.getRange(r.start(e),r.end(e)),o=s.start,a=s.startDate,l=s.end,c=s.endDate,h=s.top,d=s.height;this.start=o,this.end=l,this.startMs=+a,this.endMs=+c,this.top=h,this.height=d,this.data=e}return It(t,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(i,s){return Math.max(i,s.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:n;var i=this.row.leaves,s=i.indexOf(this);return s===i.length-1?n:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,r=n.leaves,i=n.xOffset,s=n._width,o=r.indexOf(this)+1;return i+o*s}}])}();function yH(t,e,n){return Math.abs(e.start-t.start)<n||e.start>t.start&&e.start<t.end}function _H(t){for(var e=F6(t,["startMs",function(a){return-a.endMs}]),n=[];e.length>0;){var r=e.shift();n.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(!(r.endMs>s.startMs)){if(i>0){var o=e.splice(i,1)[0];n.push(o)}break}}}return n}function FR(t){for(var e=t.events,n=t.minimumStartDifference,r=t.slotMetrics,i=t.accessors,s=e.map(function(h){return new vH(h,{slotMetrics:r,accessors:i})}),o=_H(s),a=[],l=function(){var d=o[c],f=a.find(function(v){return v.end>d.start||Math.abs(d.start-v.start)<n});if(!f)return d.rows=[],a.push(d),1;d.container=f;for(var m=null,y=f.rows.length-1;!m&&y>=0;y--)yH(f.rows[y],d,n)&&(m=f.rows[y]);m?(m.leaves.push(d),d.row=m):(d.leaves=[],f.rows.push(d))},c=0;c<o.length;c++)l();return o.map(function(h){return{event:h.data,style:{top:h.top,height:h.height,width:h.width,xOffset:Math.max(0,h.xOffset)}}})}function UR(t,e,n){for(var r=0;r<t.friends.length;++r)if(!(n.indexOf(t.friends[r])>-1)){e=e>t.friends[r].idx?e:t.friends[r].idx,n.push(t.friends[r]);var i=UR(t.friends[r],e,n);e=e>i?e:i}return e}function wH(t){var e=t.events,n=t.minimumStartDifference,r=t.slotMetrics,i=t.accessors,s=FR({events:e,minimumStartDifference:n,slotMetrics:r,accessors:i});s.sort(function(W,z){return W=W.style,z=z.style,W.top!==z.top?W.top>z.top?1:-1:W.height!==z.height?W.top+W.height<z.top+z.height?1:-1:0});for(var o=0;o<s.length;++o)s[o].friends=[],delete s[o].style.left,delete s[o].style.left,delete s[o].idx,delete s[o].size;for(var a=0;a<s.length-1;++a)for(var l=s[a],c=l.style.top,h=l.style.top+l.style.height,d=a+1;d<s.length;++d){var f=s[d],m=f.style.top,y=f.style.top+f.style.height;(m>=c&&y<=h||y>c&&y<=h||m>=c&&m<h)&&(l.friends.push(f),f.friends.push(l))}for(var v=0;v<s.length;++v){for(var I=s[v],w=[],_=0;_<100;++_)w.push(1);for(var T=0;T<I.friends.length;++T)I.friends[T].idx!==void 0&&(w[I.friends[T].idx]=0);I.idx=w.indexOf(1)}for(var P=0;P<s.length;++P){var x=0;if(!s[P].size){var k=[],S=UR(s[P],0,k);x=100/(S+1),s[P].size=x;for(var E=0;E<k.length;++E)k[E].size=x}}for(var b=0;b<s.length;++b){var A=s[b];A.style.left=A.idx*A.size;for(var D=0,O=0;O<A.friends.length;++O){var C=A.friends[O].idx;D=D>C?D:C}D<=A.idx&&(A.size=100-A.idx*A.size);var Y=A.idx===0?0:3;A.style.width="calc(".concat(A.size,"% - ").concat(Y,"px)"),A.style.height="calc(".concat(A.style.height,"% - 2px)"),A.style.xOffset="calc(".concat(A.style.left,"% + ").concat(Y,"px)")}return s}var UT={overlap:FR,"no-overlap":wH};function EH(t){return!!(t&&t.constructor&&t.call&&t.apply)}function TH(t){t.events,t.minimumStartDifference,t.slotMetrics,t.accessors;var e=t.dayLayoutAlgorithm,n=e;return e in UT&&(n=UT[e]),EH(n)?n.apply(this,arguments):[]}var BR=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.renderSlot,s=r.resource,o=r.group,a=r.getters,l=r.components,c=l===void 0?{}:l,h=c.timeSlotWrapper,d=h===void 0?Rr:h,f=a?a.slotGroupProp(o):{};return V.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),o.map(function(m,y){var v=a?a.slotProp(m,s):{};return V.createElement(d,{key:y,value:m,resource:s},V.createElement("div",Object.assign({},v,{className:gt("rbc-time-slot",v.className)}),i&&i(m,y)))}))}}])}(j.Component);function sh(t){return typeof t=="string"?t:t+"%"}function SH(t){var e=t.style,n=t.className,r=t.event,i=t.accessors,s=t.rtl,o=t.selected,a=t.label,l=t.continuesPrior,c=t.continuesAfter,h=t.getters,d=t.onClick,f=t.onDoubleClick,m=t.isBackgroundEvent,y=t.onKeyPress,v=t.components,I=v.event,w=v.eventWrapper,_=i.title(r),T=i.tooltip(r),P=i.end(r),x=i.start(r),k=h.eventProp(r,x,P,o),S=[V.createElement("div",{key:"1",className:"rbc-event-label"},a),V.createElement("div",{key:"2",className:"rbc-event-content"},I?V.createElement(I,{event:r,title:_}):_)],E=e.height,b=e.top,A=e.width,D=e.xOffset,O=Oe(Oe({},k.style),{},vs({top:sh(b),height:sh(E),width:sh(A)},s?"right":"left",sh(D)));return V.createElement(w,Object.assign({type:"time"},t),V.createElement("div",{role:"button",tabIndex:0,onClick:d,onDoubleClick:f,style:O,onKeyDown:y,title:T?(typeof a=="string"?a+": ":"")+T:void 0,className:gt(m?"rbc-background-event":"rbc-event",n,k.className,{"rbc-selected":o,"rbc-event-continues-earlier":l,"rbc-event-continues-later":c})},S))}var IH=function(e){var n=e.children,r=e.className,i=e.style,s=e.innerRef;return V.createElement("div",{className:r,style:i,ref:s},n)},AH=V.forwardRef(function(t,e){return V.createElement(IH,Object.assign({},t,{innerRef:e}))}),bH=["dayProp"],RH=["eventContainerWrapper"],jR=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(o){var a=o.events,l=o.isBackgroundEvent,c=n.props,h=c.rtl,d=c.selected,f=c.accessors,m=c.localizer,y=c.getters,v=c.components,I=c.step,w=c.timeslots,_=c.dayLayoutAlgorithm,T=c.resizable,P=n,x=P.slotMetrics,k=m.messages,S=TH({events:a,accessors:f,slotMetrics:x,minimumStartDifference:Math.ceil(I*w/2),dayLayoutAlgorithm:_});return S.map(function(E,b){var A=E.event,D=E.style,O=f.end(A),C=f.start(A),Y="eventTimeRangeFormat",W,z=x.startsBeforeDay(C),Q=x.startsAfterDay(O);z?Y="eventTimeRangeEndFormat":Q&&(Y="eventTimeRangeStartFormat"),z&&Q?W=k.allDay:W=m.format({start:C,end:O},Y);var N=z||x.startsBefore(C),G=Q||x.startsAfter(O);return V.createElement(SH,{style:D,event:A,label:W,key:"evt_"+b,getters:y,rtl:h,components:v,continuesPrior:N,continuesAfter:G,accessors:f,resource:n.props.resource,selected:Ef(A,d),onClick:function(se){return n._select(Oe(Oe(Oe({},A),n.props.resource&&{sourceResource:n.props.resource}),l&&{isBackgroundEvent:!0}),se)},onDoubleClick:function(se){return n._doubleClick(A,se)},isBackgroundEvent:l,onKeyPress:function(se){return n._keyPress(A,se)},resizable:T})})},n._selectable=function(){var o=n.containerRef.current,a=n.props,l=a.longPressThreshold,c=a.localizer,h=n._selector=new xR(function(){return o},{longPressThreshold:l}),d=function(v){var I=n.props.onSelecting,w=n.state||{},_=f(v),T=_.startDate,P=_.endDate;I&&(c.eq(w.startDate,T,"minutes")&&c.eq(w.endDate,P,"minutes")||I({start:T,end:P,resourceId:n.props.resource})===!1)||(n.state.start!==_.start||n.state.end!==_.end||n.state.selecting!==_.selecting)&&n.setState(_)},f=function(v){var I=n.slotMetrics.closestSlotFromPoint(v,Gs(o));n.state.selecting||(n._initialSlot=I);var w=n._initialSlot;c.lte(w,I)?I=n.slotMetrics.nextSlot(I):c.gt(w,I)&&(w=n.slotMetrics.nextSlot(w));var _=n.slotMetrics.getRange(c.min(w,I),c.max(w,I));return Oe(Oe({},_),{},{selecting:!0,top:"".concat(_.top,"%"),height:"".concat(_.height,"%")})},m=function(v,I){if(!Td(n.containerRef.current,v)){var w=f(v),_=w.startDate,T=w.endDate;n._selectSlot({startDate:_,endDate:T,action:I,box:v})}n.setState({selecting:!1})};h.on("selecting",d),h.on("selectStart",d),h.on("beforeSelect",function(y){if(n.props.selectable==="ignoreEvents")return!Td(n.containerRef.current,y)}),h.on("click",function(y){return m(y,"click")}),h.on("doubleClick",function(y){return m(y,"doubleClick")}),h.on("select",function(y){n.state.selecting&&(n._selectSlot(Oe(Oe({},n.state),{},{action:"select",bounds:y})),n.setState({selecting:!1}))}),h.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(o){for(var a=o.startDate,l=o.endDate,c=o.action,h=o.bounds,d=o.box,f=a,m=[];n.props.localizer.lte(f,l);)m.push(f),f=new Date(+f+n.props.step*60*1e3);We(n.props.onSelectSlot,{slots:m,start:a,end:l,resourceId:n.props.resource,action:c,bounds:h,box:d})},n._select=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onSelectEvent,a)},n._doubleClick=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onDoubleClickEvent,a)},n._keyPress=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onKeyPressEvent,a)},n.slotMetrics=Uy(n.props),n.containerRef=j.createRef(),n}return nn(e,t),It(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,i){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var s=this.props,o=s.getNow,a=s.isNow,l=s.localizer,c=s.date,h=s.min,d=s.max,f=l.neq(r.getNow(),o(),"minutes");if(r.isNow!==a||f){if(this.clearTimeIndicatorInterval(),a){var m=!f&&l.eq(r.date,c,"minutes")&&i.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(m)}}else a&&(l.neq(r.min,h,"minutes")||l.neq(r.max,d,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!i&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,i=r.min,s=r.max,o=r.getNow,a=o();if(a>=i&&a<=s){var l=this.slotMetrics.getCurrentTimePosition(a);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:l})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,i=r.date,s=r.max,o=r.rtl,a=r.isNow,l=r.resource,c=r.accessors,h=r.localizer,d=r.getters,f=d.dayProp,m=yr(d,bH),y=r.components,v=y.eventContainerWrapper,I=yr(y,RH);this.slotMetrics=this.slotMetrics.update(this.props);var w=this.slotMetrics,_=this.state,T=_.selecting,P=_.top,x=_.height,k=_.startDate,S=_.endDate,E={start:k,end:S},b=f(s,l),A=b.className,D=b.style,O=I.dayColumnWrapper||AH;return V.createElement(O,{ref:this.containerRef,date:i,style:D,className:gt(A,"rbc-day-slot","rbc-time-column",a&&"rbc-now",a&&"rbc-today",T&&"rbc-slot-selecting"),slotMetrics:w,resource:l},w.groups.map(function(C,Y){return V.createElement(BR,{key:Y,group:C,resource:l,getters:m,components:I})}),V.createElement(v,{localizer:h,resource:l,accessors:c,getters:m,components:I,slotMetrics:w},V.createElement("div",{className:gt("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),T&&V.createElement("div",{className:"rbc-slot-selection",style:{top:P,height:x}},V.createElement("span",null,h.format(E,"selectRangeFormat"))),a&&this.intervalTriggered&&V.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}(V.Component);jR.defaultProps={dragThroughEvents:!0,timeslots:2};function PH(t){var e=t.min,n=t.max,r=t.localizer;return r.getTimezoneOffset(e)!==r.getTimezoneOffset(n)?{start:r.add(e,-1,"day"),end:r.add(n,-1,"day")}:{start:e,end:n}}var DH=function(e){var n=e.min,r=e.max,i=e.timeslots,s=e.step,o=e.localizer,a=e.getNow,l=e.resource,c=e.components,h=e.getters,d=e.gutterRef,f=c.timeGutterWrapper,m=j.useMemo(function(){return PH({min:n,max:r,localizer:o})},[n==null?void 0:n.toISOString(),r==null?void 0:r.toISOString(),o]),y=m.start,v=m.end,I=j.useState(Uy({min:y,max:v,timeslots:i,step:s,localizer:o})),w=Dr(I,2),_=w[0],T=w[1];j.useEffect(function(){_&&T(_.update({min:y,max:v,timeslots:i,step:s,localizer:o}))},[y==null?void 0:y.toISOString(),v==null?void 0:v.toISOString(),i,s]);var P=j.useCallback(function(x,k){if(k)return null;var S=_.dateIsInGroup(a(),k);return V.createElement("span",{className:gt("rbc-label",S&&"rbc-now")},o.format(x,"timeGutterFormat"))},[_,o,a]);return V.createElement(f,{slotMetrics:_},V.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},_.groups.map(function(x,k){return V.createElement(BR,{key:k,group:x,resource:l,components:c,renderSlot:P,getters:h})})))},CH=V.forwardRef(function(t,e){return V.createElement(DH,Object.assign({gutterRef:e},t))}),xH=function(e){var n=e.label;return V.createElement(V.Fragment,null,n)},kH=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.handleHeaderClick=function(o,a,l){l.preventDefault(),We(n.props.onDrillDown,[o,a])},n.renderRow=function(o){var a=n.props,l=a.events,c=a.rtl,h=a.selectable,d=a.getNow,f=a.range,m=a.getters,y=a.localizer,v=a.accessors,I=a.components,w=a.resizable,_=v.resourceId(o),T=o?l.filter(function(P){return v.resource(P)===_}):l;return V.createElement(Sd,{isAllDay:!0,rtl:c,getNow:d,minRows:2,maxRows:n.props.allDayMaxRows+1,range:f,events:T,resourceId:_,className:"rbc-allday-cell",selectable:h,selected:n.props.selected,components:I,accessors:v,getters:m,localizer:y,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:w})},n}return nn(e,t),It(e,[{key:"renderHeaderCells",value:function(r){var i=this,s=this.props,o=s.localizer,a=s.getDrilldownView,l=s.getNow,c=s.getters.dayProp,h=s.components.header,d=h===void 0?LR:h,f=l();return r.map(function(m,y){var v=a(m),I=o.format(m,"dayFormat"),w=c(m),_=w.className,T=w.style,P=V.createElement(d,{date:m,label:I,localizer:o});return V.createElement("div",{key:y,style:T,className:gt("rbc-header",_,o.isSameDate(m,f)&&"rbc-today")},v?V.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(k){return i.handleHeaderClick(m,v,k)}},P):V.createElement("span",null,P))})}},{key:"render",value:function(){var r=this,i=this.props,s=i.width,o=i.rtl,a=i.resources,l=i.range,c=i.events,h=i.getNow,d=i.accessors,f=i.selectable,m=i.components,y=i.getters,v=i.scrollRef,I=i.localizer,w=i.isOverflowing,_=i.components,T=_.timeGutterHeader,P=_.resourceHeader,x=P===void 0?xH:P,k=i.resizable,S={};w&&(S[o?"marginLeft":"marginRight"]="".concat(hd()-1,"px"));var E=a.groupEvents(c);return V.createElement("div",{style:S,ref:v,className:gt("rbc-time-header",w&&"rbc-overflowing")},V.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},T&&V.createElement(T,null)),a.map(function(b,A){var D=Dr(b,2),O=D[0],C=D[1];return V.createElement("div",{className:"rbc-time-header-content",key:O||A},C&&V.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(A)},V.createElement("div",{className:"rbc-header"},V.createElement(x,{index:A,label:d.resourceTitle(C),resource:C}))),V.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(l)),V.createElement(Sd,{isAllDay:!0,rtl:o,getNow:h,minRows:2,maxRows:r.props.allDayMaxRows+1,range:l,events:E.get(O)||[],resourceId:C&&O,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:m,accessors:d,getters:y,localizer:I,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:k}))}))}}])}(V.Component),im={};function OH(t,e){return{map:function(r){return t?t.map(function(i,s){return r([e.resourceId(i),i],s)}):[r([im,null],0)]},groupEvents:function(r){var i=new Map;return t?(r.forEach(function(s){var o=e.resource(s)||im;if(Array.isArray(o))o.forEach(function(l){var c=i.get(l)||[];c.push(s),i.set(l,c)});else{var a=i.get(o)||[];a.push(s),i.set(o,a)}}),i):(i.set(im,r),i)}}}var ja=function(t){function e(n){var r;return St(this,e),r=tn(this,e,[n]),r.handleScroll=function(i){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=i.target.scrollLeft)},r.handleResize=function(){D0(r.rafHandle),r.rafHandle=Db(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];We(r.props.onKeyPressEvent,s)},r.handleSelectEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];We(r.props.onSelectEvent,s)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];We(r.props.onDoubleClickEvent,s)},r.handleShowMore=function(i,s,o,a,l){var c=r.props,h=c.popup,d=c.onDrillDown,f=c.onShowMore,m=c.getDrilldownView,y=c.doShowMoreDrillDown;if(r.clearSelection(),h){var v=Pb(o,r.containerRef.current);r.setState({overlay:{date:s,events:i,position:Oe(Oe({},v),{},{width:"200px"}),target:l}})}else y&&We(d,[s,m(s)||Kt.DAY]);We(f,[i,s,a])},r.handleSelectAllDaySlot=function(i,s){var o=r.props.onSelectSlot,a=new Date(i[0]),l=new Date(i[i.length-1]);l.setDate(i[i.length-1].getDate()+1),We(o,{slots:i,start:a,end:l,action:s.action,resourceId:s.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var i=r.contentRef.current;if(i!=null&&i.scrollHeight){var s=i.scrollHeight>i.clientHeight;r.state.isOverflowing!==s&&(r._updatingOverflow=!0,r.setState({isOverflowing:s},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=eR(function(i,s){return OH(i,s)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=V.createRef(),r.contentRef=V.createRef(),r.containerRef=V.createRef(),r._scrollRatio=null,r.gutterRef=j.createRef(),r}return nn(e,t),It(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),D0(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderEvents",value:function(r,i,s,o){var a=this,l=this.props,c=l.min,h=l.max,d=l.components,f=l.accessors,m=l.localizer,y=l.dayLayoutAlgorithm,v=this.memoizedResources(this.props.resources,f),I=v.groupEvents(i),w=v.groupEvents(s);return v.map(function(_,T){var P=Dr(_,2),x=P[0],k=P[1];return r.map(function(S,E){var b=(I.get(x)||[]).filter(function(D){return m.inRange(S,f.start(D),f.end(D),"day")}),A=(w.get(x)||[]).filter(function(D){return m.inRange(S,f.start(D),f.end(D),"day")});return V.createElement(jR,Object.assign({},a.props,{localizer:m,min:m.merge(S,c),max:m.merge(S,h),resource:k&&x,components:d,isNow:m.isSameDate(S,o),key:T+"-"+E,date:S,events:b,backgroundEvents:A,dayLayoutAlgorithm:y}))})})}},{key:"render",value:function(){var r,i=this.props,s=i.events,o=i.backgroundEvents,a=i.range,l=i.width,c=i.rtl,h=i.selected,d=i.getNow,f=i.resources,m=i.components,y=i.accessors,v=i.getters,I=i.localizer,w=i.min,_=i.max,T=i.showMultiDayTimes,P=i.longPressThreshold,x=i.resizable;l=l||this.state.gutterWidth;var k=a[0],S=a[a.length-1];this.slots=a.length;var E=[],b=[],A=[];return s.forEach(function(D){if(xu(D,k,S,y,I)){var O=y.start(D),C=y.end(D);y.allDay(D)||I.startAndEndAreDateOnly(O,C)||!T&&!I.isSameDate(O,C)?E.push(D):b.push(D)}}),o.forEach(function(D){xu(D,k,S,y,I)&&A.push(D)}),E.sort(function(D,O){return Pg(D,O,y,I)}),V.createElement("div",{className:gt("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},V.createElement(kH,{range:a,events:E,width:l,rtl:c,getNow:d,localizer:I,selected:h,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(f,y),selectable:this.props.selectable,accessors:y,getters:v,components:m,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:P,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:x}),this.props.popup&&this.renderOverlay(),V.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},V.createElement(CH,{date:k,ref:this.gutterRef,localizer:I,min:I.merge(k,w),max:I.merge(k,_),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:m,className:"rbc-time-gutter",getters:v}),this.renderEvents(a,b,A,d())))}},{key:"renderOverlay",value:function(){var r,i,s=this,o=(r=(i=this.state)===null||i===void 0?void 0:i.overlay)!==null&&r!==void 0?r:{},a=this.props,l=a.accessors,c=a.localizer,h=a.components,d=a.getters,f=a.selected,m=a.popupOffset,y=a.handleDragStart,v=function(){return s.setState({overlay:null})};return V.createElement(Fy,{overlay:o,accessors:l,localizer:c,components:h,getters:d,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:v})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var i,s=(i=r.gutterRef)!==null&&i!==void 0&&i.current?bg(r.gutterRef.current):void 0;s&&r.state.gutterWidth!==s&&r.setState({gutterWidth:s})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,i=r.min,s=r.max,o=r.scrollToTime,a=r.localizer,l=a.diff(a.merge(o,i),o,"milliseconds"),c=a.diff(i,s,"milliseconds");this._scrollRatio=l/c}}])}(j.Component);ja.defaultProps={step:30,timeslots:2};var NH=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Sf=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,y=yr(r,NH),v=e.range(i,{localizer:s});return V.createElement(ja,Object.assign({},y,{range:v,eventOffset:10,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);Sf.range=function(t,e){var n=e.localizer;return[n.startOf(t,"day")]};Sf.navigate=function(t,e,n){var r=n.localizer;switch(e){case gn.PREVIOUS:return r.add(t,-1,"day");case gn.NEXT:return r.add(t,1,"day");default:return t}};Sf.title=function(t,e){var n=e.localizer;return n.format(t,"dayHeaderFormat")};var MH=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Oi=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,y=yr(r,MH),v=e.range(i,this.props);return V.createElement(ja,Object.assign({},y,{range:v,eventOffset:15,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);Oi.defaultProps=ja.defaultProps;Oi.navigate=function(t,e,n){var r=n.localizer;switch(e){case gn.PREVIOUS:return r.add(t,-1,"week");case gn.NEXT:return r.add(t,1,"week");default:return t}};Oi.range=function(t,e){var n=e.localizer,r=n.startOfWeek(),i=n.startOf(t,"week",r),s=n.endOf(t,"week",r);return n.range(i,s)};Oi.title=function(t,e){var n=e.localizer,r=Oi.range(t,{localizer:n}),i=aR(r),s=i[0],o=i.slice(1);return n.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var VH=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function By(t,e){return Oi.range(t,e).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var uc=function(t){function e(){return St(this,e),tn(this,e,arguments)}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.date,s=r.localizer,o=r.min,a=o===void 0?s.startOf(new Date,"day"):o,l=r.max,c=l===void 0?s.endOf(new Date,"day"):l,h=r.scrollToTime,d=h===void 0?s.startOf(new Date,"day"):h,f=r.enableAutoScroll,m=f===void 0?!0:f,y=yr(r,VH),v=By(i,this.props);return V.createElement(ja,Object.assign({},y,{range:v,eventOffset:15,localizer:s,min:a,max:c,scrollToTime:d,enableAutoScroll:m}))}}])}(V.Component);uc.defaultProps=ja.defaultProps;uc.range=By;uc.navigate=Oi.navigate;uc.title=function(t,e){var n=e.localizer,r=By(t,{localizer:n}),i=aR(r),s=i[0],o=i.slice(1);return n.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var If=30;function Af(t){var e=t.accessors,n=t.components,r=t.date,i=t.events,s=t.getters,o=t.length,a=o===void 0?If:o,l=t.localizer,c=t.onDoubleClickEvent,h=t.onSelectEvent,d=t.selected,f=j.useRef(null),m=j.useRef(null),y=j.useRef(null),v=j.useRef(null),I=j.useRef(null);j.useEffect(function(){T()});var w=function(E,b,A){var D=n.event,O=n.date;return b=b.filter(function(C){return xu(C,l.startOf(E,"day"),l.endOf(E,"day"),e,l)}),b.map(function(C,Y){var W=e.title(C),z=e.end(C),Q=e.start(C),N=s.eventProp(C,Q,z,Ef(C,d)),G=Y===0&&l.format(E,"agendaDateFormat"),X=Y===0?V.createElement("td",{rowSpan:b.length,className:"rbc-agenda-date-cell"},O?V.createElement(O,{day:E,label:G}):G):!1;return V.createElement("tr",{key:A+"_"+Y,className:N.className,style:N.style},X,V.createElement("td",{className:"rbc-agenda-time-cell"},_(E,C)),V.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(L){return h&&h(C,L)},onDoubleClick:function(L){return c&&c(C,L)}},D?V.createElement(D,{event:C,title:W}):W))},[])},_=function(E,b){var A="",D=n.time,O=l.messages.allDay,C=e.end(b),Y=e.start(b);return e.allDay(b)||(l.eq(Y,C)?O=l.format(Y,"agendaTimeFormat"):l.isSameDate(Y,C)?O=l.format({start:Y,end:C},"agendaTimeRangeFormat"):l.isSameDate(E,Y)?O=l.format(Y,"agendaTimeFormat"):l.isSameDate(E,C)&&(O=l.format(C,"agendaTimeFormat"))),l.gt(E,Y,"day")&&(A="rbc-continues-prior"),l.lt(E,C,"day")&&(A+=" rbc-continues-after"),V.createElement("span",{className:A.trim()},D?V.createElement(D,{event:b,day:E,label:O}):O)},T=function(){if(I.current){var E=f.current,b=I.current.firstChild;if(b){var A=v.current.scrollHeight>v.current.clientHeight,D=[],O=D;D=[bg(b.children[0]),bg(b.children[1])],(O[0]!==D[0]||O[1]!==D[1])&&(m.current.style.width=D[0]+"px",y.current.style.width=D[1]+"px"),A?(qA(E,"rbc-header-overflowing"),E.style.marginRight=hd()+"px"):WA(E,"rbc-header-overflowing")}}},P=l.messages,x=l.add(r,a,"day"),k=l.range(r,x,"day");return i=i.filter(function(S){return xu(S,l.startOf(r,"day"),l.endOf(x,"day"),e,l)}),i.sort(function(S,E){return+e.start(S)-+e.start(E)}),V.createElement("div",{className:"rbc-agenda-view"},i.length!==0?V.createElement(V.Fragment,null,V.createElement("table",{ref:f,className:"rbc-agenda-table"},V.createElement("thead",null,V.createElement("tr",null,V.createElement("th",{className:"rbc-header",ref:m},P.date),V.createElement("th",{className:"rbc-header",ref:y},P.time),V.createElement("th",{className:"rbc-header"},P.event)))),V.createElement("div",{className:"rbc-agenda-content",ref:v},V.createElement("table",{className:"rbc-agenda-table"},V.createElement("tbody",{ref:I},k.map(function(S,E){return w(S,i,E)}))))):V.createElement("span",{className:"rbc-agenda-empty"},P.noEventsInRange))}Af.range=function(t,e){var n=e.length,r=n===void 0?If:n,i=e.localizer,s=i.add(t,r,"day");return{start:t,end:s}};Af.navigate=function(t,e,n){var r=n.length,i=r===void 0?If:r,s=n.localizer;switch(e){case gn.PREVIOUS:return s.add(t,-i,"day");case gn.NEXT:return s.add(t,i,"day");default:return t}};Af.title=function(t,e){var n=e.length,r=n===void 0?If:n,i=e.localizer,s=i.add(t,r,"day");return i.format({start:t,end:s},"agendaHeaderFormat")};var xh=vs(vs(vs(vs(vs({},Kt.MONTH,Tf),Kt.WEEK,Oi),Kt.WORK_WEEK,uc),Kt.DAY,Sf),Kt.AGENDA,Af),$H=["action","date","today"];function LH(t,e){var n=e.action,r=e.date,i=e.today,s=yr(e,$H);switch(t=typeof t=="string"?xh[t]:t,n){case gn.TODAY:r=i||new Date;break;case gn.DATE:break;default:wu(t&&typeof t.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),r=t.navigate(r,n,s)}return r}var FH=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.navigate=function(o){n.props.onNavigate(o)},n.view=function(o){n.props.onView(o)},n}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.localizer.messages,s=r.label;return V.createElement("div",{className:"rbc-toolbar"},V.createElement("span",{className:"rbc-btn-group"},V.createElement("button",{type:"button",onClick:this.navigate.bind(null,gn.TODAY)},i.today),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,gn.PREVIOUS)},i.previous),V.createElement("button",{type:"button",onClick:this.navigate.bind(null,gn.NEXT)},i.next)),V.createElement("span",{className:"rbc-toolbar-label"},s),V.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(i)))}},{key:"viewNamesGroup",value:function(r){var i=this,s=this.props.views,o=this.props.view;if(s.length>1)return s.map(function(a){return V.createElement("button",{type:"button",key:a,className:gt({"rbc-active":o===a}),onClick:i.view.bind(null,a)},r[a])})}}])}(V.Component);function UH(t,e){var n=null;return typeof e=="function"?n=e(t):typeof e=="string"&&Br(t)==="object"&&t!=null&&e in t&&(n=t[e]),n}var si=function(e){return function(n){return UH(n,e)}},BH=["view","date","getNow","onNavigate"],jH=["view","toolbar","events","backgroundEvents","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function zR(t){if(Array.isArray(t))return t;for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=Dr(r[n],2),s=i[0],o=i[1];o&&e.push(s)}return e}function zH(t,e){var n=e.views,r=zR(n);return r.indexOf(t)!==-1}var qR=function(t){function e(){var n;St(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=tn(this,e,[].concat(i)),n.getViews=function(){var o=n.props.views;return Array.isArray(o)?aG(o,function(a,l){return a[l]=xh[l]},{}):Br(o)==="object"?fG(o,function(a,l){return a===!0?xh[l]:a}):xh},n.getView=function(){var o=n.getViews();return o[n.props.view]},n.getDrilldownView=function(o){var a=n.props,l=a.view,c=a.drilldownView,h=a.getDrilldownView;return h?h(o,l,Object.keys(n.getViews())):c},n.handleRangeChange=function(o,a,l){var c=n.props,h=c.onRangeChange,d=c.localizer;h&&a.range&&h(a.range(o,{localizer:d}),l)},n.handleNavigate=function(o,a){var l=n.props,c=l.view,h=l.date,d=l.getNow,f=l.onNavigate,m=yr(l,BH),y=n.getView(),v=d();h=LH(y,Oe(Oe({},m),{},{action:o,date:a||h||v,today:v})),f(h,c,o),n.handleRangeChange(h,y)},n.handleViewChange=function(o){o!==n.props.view&&zH(o,n.props)&&n.props.onView(o);var a=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),a[o],o)},n.handleSelectEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onSelectEvent,a)},n.handleDoubleClickEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onDoubleClickEvent,a)},n.handleKeyPressEvent=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];We(n.props.onKeyPressEvent,a)},n.handleSelectSlot=function(o){We(n.props.onSelectSlot,o)},n.handleDrillDown=function(o,a){var l=n.props.onDrillDown;if(l){l(o,a,n.drilldownView);return}a&&n.handleViewChange(a),n.handleNavigate(gn.DATE,o)},n.state={context:e.getContext(n.props)},n}return nn(e,t),It(e,[{key:"render",value:function(){var r=this.props,i=r.view,s=r.toolbar,o=r.events,a=r.backgroundEvents,l=r.style,c=r.className,h=r.elementProps,d=r.date,f=r.getNow,m=r.length,y=r.showMultiDayTimes,v=r.onShowMore,I=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var w=yr(r,jH);d=d||f();var _=this.getView(),T=this.state.context,P=T.accessors,x=T.components,k=T.getters,S=T.localizer,E=T.viewNames,b=x.toolbar||FH,A=_.title(d,{localizer:S,length:m});return V.createElement("div",Object.assign({},h,{className:gt(c,"rbc-calendar",w.rtl&&"rbc-rtl"),style:l}),s&&V.createElement(b,{date:d,view:i,views:E,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:S}),V.createElement(_,Object.assign({},w,{events:o,backgroundEvents:a,date:d,getNow:f,length:m,localizer:S,getters:k,components:x,accessors:P,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:I})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:e.getContext(r)}}},{key:"getContext",value:function(r){var i=r.startAccessor,s=r.endAccessor,o=r.allDayAccessor,a=r.tooltipAccessor,l=r.titleAccessor,c=r.resourceAccessor,h=r.resourceIdAccessor,d=r.resourceTitleAccessor,f=r.eventPropGetter,m=r.backgroundEventPropGetter,y=r.slotPropGetter,v=r.slotGroupPropGetter,I=r.dayPropGetter,w=r.view,_=r.views,T=r.localizer,P=r.culture,x=r.messages,k=x===void 0?{}:x,S=r.components,E=S===void 0?{}:S,b=r.formats,A=b===void 0?{}:b,D=zR(_),O=HG(k);return{viewNames:D,localizer:WG(T,P,A,O),getters:{eventProp:function(){return f&&f.apply(void 0,arguments)||{}},backgroundEventProp:function(){return m&&m.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return I&&I.apply(void 0,arguments)||{}}},components:KW(E[w]||{},UW(E,D),{eventWrapper:Rr,backgroundEventWrapper:Rr,eventContainerWrapper:Rr,dateCellWrapper:Rr,weekWrapper:Rr,timeSlotWrapper:Rr,timeGutterWrapper:Rr}),accessors:{start:si(i),end:si(s),allDay:si(o),tooltip:si(a),title:si(l),resource:si(c),resourceId:si(h),resourceTitle:si(d)}}}}])}(V.Component);qR.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Kt.MONTH,views:[Kt.MONTH,Kt.WEEK,Kt.DAY,Kt.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Kt.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var qH=cb(qR,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),WH=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"MMMM DD",n)+" – "+r.format(s,r.eq(i,s,"month")?"DD":"MMMM DD",n)},GH=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"L",n)+" – "+r.format(s,"L",n)},sm=function(e,n,r){var i=e.start,s=e.end;return r.format(i,"LT",n)+" – "+r.format(s,"LT",n)},HH=function(e,n,r){var i=e.start;return r.format(i,"LT",n)+" – "},KH=function(e,n,r){var i=e.end;return" – "+r.format(i,"LT",n)},QH={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:sm,eventTimeRangeFormat:sm,eventTimeRangeStartFormat:HH,eventTimeRangeEndFormat:KH,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:WH,agendaHeaderFormat:GH,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:sm};function oi(t){var e=t&&t.toLowerCase();return e==="FullYear"?e="year":e||(e=void 0),e}function YH(t){t.extend(mG),t.extend(vG),t.extend(_G),t.extend(EG),t.extend(SG),t.extend(AG),t.extend(RG);var e=function(B,q){return q?B.locale(q):B},n=t.tz?t.tz:t;function r(L){return n(L).toDate().getTimezoneOffset()}function i(L,B){var q,J=n(L),ie=n(B);if(!n.tz)return J.toDate().getTimezoneOffset()-ie.toDate().getTimezoneOffset();var ce=(q=J.tz().$x.$timezone)!==null&&q!==void 0?q:t.tz.guess(),me=-n.tz(+J,ce).utcOffset(),ge=-n.tz(+ie,ce).utcOffset();return me-ge}function s(L){var B=n(L).startOf("day");return i(B,L)}function o(L,B,q){var J=oi(q),ie=J?n(L).startOf(J):n(L),ce=J?n(B).startOf(J):n(B);return[ie,ce,J]}function a(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,q=oi(B);return q?n(L).startOf(q).toDate():n(L).toDate()}function l(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,q=oi(B);return q?n(L).endOf(q).toDate():n(L).toDate()}function c(L,B,q){var J=o(L,B,q),ie=Dr(J,3),ce=ie[0],me=ie[1],ge=ie[2];return ce.isSame(me,ge)}function h(L,B,q){return!c(L,B,q)}function d(L,B,q){var J=o(L,B,q),ie=Dr(J,3),ce=ie[0],me=ie[1],ge=ie[2];return ce.isAfter(me,ge)}function f(L,B,q){var J=o(L,B,q),ie=Dr(J,3),ce=ie[0],me=ie[1],ge=ie[2];return ce.isBefore(me,ge)}function m(L,B,q){var J=o(L,B,q),ie=Dr(J,3),ce=ie[0],me=ie[1],ge=ie[2];return ce.isSameOrBefore(me,ge)}function y(L,B,q){var J=o(L,B,q),ie=Dr(J,3),ce=ie[0],me=ie[1],ge=ie[2];return ce.isSameOrBefore(me,ge)}function v(L,B,q){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",ie=oi(J),ce=n(L),me=n(B),ge=n(q);return ce.isBetween(me,ge,ie,"[]")}function I(L,B){var q=n(L),J=n(B),ie=t.min(q,J);return ie.toDate()}function w(L,B){var q=n(L),J=n(B),ie=t.max(q,J);return ie.toDate()}function _(L,B){if(!L&&!B)return null;var q=n(B).format("HH:mm:ss"),J=n(L).startOf("day").format("MM/DD/YYYY");return t("".concat(J," ").concat(q),"MM/DD/YYYY HH:mm:ss").toDate()}function T(L,B,q){var J=oi(q);return n(L).add(B,J).toDate()}function P(L,B){for(var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",J=oi(q),ie=n(L).toDate(),ce=[];y(ie,B);)ce.push(ie),ie=T(ie,1,J);return ce}function x(L,B){var q=oi(B),J=a(L,q);return c(J,L)?J:T(J,1,q)}function k(L,B){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",J=oi(q),ie=n(L),ce=n(B);return ce.diff(ie,J)}function S(L){var B=n(L);return B.minutes()}function E(L){var B=L?t.localeData(L):t.localeData();return B?B.firstDayOfWeek():0}function b(L){return n(L).startOf("month").startOf("week").toDate()}function A(L){return n(L).endOf("month").endOf("week").toDate()}function D(L){for(var B=b(L),q=A(L),J=[];y(B,q);)J.push(B),B=T(B,1,"d");return J}function O(L,B,q){return n(L).startOf("day").minute(B+q).toDate()}function C(L,B){return k(L,B,"minutes")}function Y(L){var B=n(L).startOf("day"),q=n(L);return q.diff(B,"minutes")+s(L)}function W(L,B){var q=n(L),J=n(B);return q.isBefore(J,"day")}function z(L,B,q){var J=n(B),ie=n(q);return J.isSameOrAfter(ie,"minutes")}function Q(L,B){var q=n(L),J=n(B);return J.diff(q,"day")}function N(L){var B=L.evtA,q=B.start,J=B.end,ie=B.allDay,ce=L.evtB,me=ce.start,ge=ce.end,Ee=ce.allDay,xe=+a(q,"day")-+a(me,"day"),nt=Q(q,J),lt=Q(me,ge);return xe||lt-nt||!!Ee-!!ie||+q-+me||+J-+ge}function G(L){var B=L.event,q=B.start,J=B.end,ie=L.range,ce=ie.start,me=ie.end,ge=n(q).startOf("day"),Ee=n(J),xe=n(ce),nt=n(me),lt=ge.isSameOrBefore(nt,"day"),rn=!ge.isSame(Ee,"minutes"),Ae=rn?Ee.isAfter(xe,"minutes"):Ee.isSameOrAfter(xe,"minutes");return lt&&Ae}function X(L,B){var q=n(L),J=n(B);return q.isSame(J,"day")}function se(){var L=new Date,B=/-/.test(L.toString())?"-":"",q=L.getTimezoneOffset(),J=Number("".concat(B).concat(Math.abs(q))),ie=n().utcOffset();return ie>J?1:0}return new qG({formats:QH,firstOfWeek:E,firstVisibleDay:b,lastVisibleDay:A,visibleDays:D,format:function(B,q,J){return e(n(B),J).format(q)},lt:f,lte:y,gt:d,gte:m,eq:c,neq:h,merge:_,inRange:v,startOf:a,endOf:l,range:P,add:T,diff:k,ceil:x,min:I,max:w,minutes:S,getSlotDate:O,getTimezoneOffset:r,getDstOffset:i,getTotalMin:C,getMinutesFromMidnight:Y,continuesPrior:W,continuesAfter:z,sortEvents:N,inEventRange:G,isSameDate:X,browserTZOffset:se})}var WR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(En,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",d="month",f="quarter",m="year",y="date",v="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var W=["th","st","nd","rd"],z=Y%100;return"["+Y+(W[(z-20)%10]||W[z]||W[0])+"]"}},T=function(Y,W,z){var Q=String(Y);return!Q||Q.length>=W?Y:""+Array(W+1-Q.length).join(z)+Y},P={s:T,z:function(Y){var W=-Y.utcOffset(),z=Math.abs(W),Q=Math.floor(z/60),N=z%60;return(W<=0?"+":"-")+T(Q,2,"0")+":"+T(N,2,"0")},m:function Y(W,z){if(W.date()<z.date())return-Y(z,W);var Q=12*(z.year()-W.year())+(z.month()-W.month()),N=W.clone().add(Q,d),G=z-N<0,X=W.clone().add(Q+(G?-1:1),d);return+(-(Q+(z-N)/(G?N-X:X-N))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:d,y:m,w:h,d:c,D:y,h:l,m:a,s:o,ms:s,Q:f}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},x="en",k={};k[x]=_;var S="$isDayjsObject",E=function(Y){return Y instanceof O||!(!Y||!Y[S])},b=function Y(W,z,Q){var N;if(!W)return x;if(typeof W=="string"){var G=W.toLowerCase();k[G]&&(N=G),z&&(k[G]=z,N=G);var X=W.split("-");if(!N&&X.length>1)return Y(X[0])}else{var se=W.name;k[se]=W,N=se}return!Q&&N&&(x=N),N||!Q&&x},A=function(Y,W){if(E(Y))return Y.clone();var z=typeof W=="object"?W:{};return z.date=Y,z.args=arguments,new O(z)},D=P;D.l=b,D.i=E,D.w=function(Y,W){return A(Y,{locale:W.$L,utc:W.$u,x:W.$x,$offset:W.$offset})};var O=function(){function Y(z){this.$L=b(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[S]=!0}var W=Y.prototype;return W.parse=function(z){this.$d=function(Q){var N=Q.date,G=Q.utc;if(N===null)return new Date(NaN);if(D.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var X=N.match(I);if(X){var se=X[2]-1||0,L=(X[7]||"0").substring(0,3);return G?new Date(Date.UTC(X[1],se,X[3]||1,X[4]||0,X[5]||0,X[6]||0,L)):new Date(X[1],se,X[3]||1,X[4]||0,X[5]||0,X[6]||0,L)}}return new Date(N)}(z),this.init()},W.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},W.$utils=function(){return D},W.isValid=function(){return this.$d.toString()!==v},W.isSame=function(z,Q){var N=A(z);return this.startOf(Q)<=N&&N<=this.endOf(Q)},W.isAfter=function(z,Q){return A(z)<this.startOf(Q)},W.isBefore=function(z,Q){return this.endOf(Q)<A(z)},W.$g=function(z,Q,N){return D.u(z)?this[Q]:this.set(N,z)},W.unix=function(){return Math.floor(this.valueOf()/1e3)},W.valueOf=function(){return this.$d.getTime()},W.startOf=function(z,Q){var N=this,G=!!D.u(Q)||Q,X=D.p(z),se=function(ge,Ee){var xe=D.w(N.$u?Date.UTC(N.$y,Ee,ge):new Date(N.$y,Ee,ge),N);return G?xe:xe.endOf(c)},L=function(ge,Ee){return D.w(N.toDate()[ge].apply(N.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(Ee)),N)},B=this.$W,q=this.$M,J=this.$D,ie="set"+(this.$u?"UTC":"");switch(X){case m:return G?se(1,0):se(31,11);case d:return G?se(1,q):se(0,q+1);case h:var ce=this.$locale().weekStart||0,me=(B<ce?B+7:B)-ce;return se(G?J-me:J+(6-me),q);case c:case y:return L(ie+"Hours",0);case l:return L(ie+"Minutes",1);case a:return L(ie+"Seconds",2);case o:return L(ie+"Milliseconds",3);default:return this.clone()}},W.endOf=function(z){return this.startOf(z,!1)},W.$set=function(z,Q){var N,G=D.p(z),X="set"+(this.$u?"UTC":""),se=(N={},N[c]=X+"Date",N[y]=X+"Date",N[d]=X+"Month",N[m]=X+"FullYear",N[l]=X+"Hours",N[a]=X+"Minutes",N[o]=X+"Seconds",N[s]=X+"Milliseconds",N)[G],L=G===c?this.$D+(Q-this.$W):Q;if(G===d||G===m){var B=this.clone().set(y,1);B.$d[se](L),B.init(),this.$d=B.set(y,Math.min(this.$D,B.daysInMonth())).$d}else se&&this.$d[se](L);return this.init(),this},W.set=function(z,Q){return this.clone().$set(z,Q)},W.get=function(z){return this[D.p(z)]()},W.add=function(z,Q){var N,G=this;z=Number(z);var X=D.p(Q),se=function(q){var J=A(G);return D.w(J.date(J.date()+Math.round(q*z)),G)};if(X===d)return this.set(d,this.$M+z);if(X===m)return this.set(m,this.$y+z);if(X===c)return se(1);if(X===h)return se(7);var L=(N={},N[a]=r,N[l]=i,N[o]=n,N)[X]||1,B=this.$d.getTime()+z*L;return D.w(B,this)},W.subtract=function(z,Q){return this.add(-1*z,Q)},W.format=function(z){var Q=this,N=this.$locale();if(!this.isValid())return N.invalidDate||v;var G=z||"YYYY-MM-DDTHH:mm:ssZ",X=D.z(this),se=this.$H,L=this.$m,B=this.$M,q=N.weekdays,J=N.months,ie=N.meridiem,ce=function(Ee,xe,nt,lt){return Ee&&(Ee[xe]||Ee(Q,G))||nt[xe].slice(0,lt)},me=function(Ee){return D.s(se%12||12,Ee,"0")},ge=ie||function(Ee,xe,nt){var lt=Ee<12?"AM":"PM";return nt?lt.toLowerCase():lt};return G.replace(w,function(Ee,xe){return xe||function(nt){switch(nt){case"YY":return String(Q.$y).slice(-2);case"YYYY":return D.s(Q.$y,4,"0");case"M":return B+1;case"MM":return D.s(B+1,2,"0");case"MMM":return ce(N.monthsShort,B,J,3);case"MMMM":return ce(J,B);case"D":return Q.$D;case"DD":return D.s(Q.$D,2,"0");case"d":return String(Q.$W);case"dd":return ce(N.weekdaysMin,Q.$W,q,2);case"ddd":return ce(N.weekdaysShort,Q.$W,q,3);case"dddd":return q[Q.$W];case"H":return String(se);case"HH":return D.s(se,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ge(se,L,!0);case"A":return ge(se,L,!1);case"m":return String(L);case"mm":return D.s(L,2,"0");case"s":return String(Q.$s);case"ss":return D.s(Q.$s,2,"0");case"SSS":return D.s(Q.$ms,3,"0");case"Z":return X}return null}(Ee)||X.replace(":","")})},W.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},W.diff=function(z,Q,N){var G,X=this,se=D.p(Q),L=A(z),B=(L.utcOffset()-this.utcOffset())*r,q=this-L,J=function(){return D.m(X,L)};switch(se){case m:G=J()/12;break;case d:G=J();break;case f:G=J()/3;break;case h:G=(q-B)/6048e5;break;case c:G=(q-B)/864e5;break;case l:G=q/i;break;case a:G=q/r;break;case o:G=q/n;break;default:G=q}return N?G:D.a(G)},W.daysInMonth=function(){return this.endOf(d).$D},W.$locale=function(){return k[this.$L]},W.locale=function(z,Q){if(!z)return this.$L;var N=this.clone(),G=b(z,Q,!0);return G&&(N.$L=G),N},W.clone=function(){return D.w(this.$d,this)},W.toDate=function(){return new Date(this.valueOf())},W.toJSON=function(){return this.isValid()?this.toISOString():null},W.toISOString=function(){return this.$d.toISOString()},W.toString=function(){return this.$d.toUTCString()},Y}(),C=O.prototype;return A.prototype=C,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",m],["$D",y]].forEach(function(Y){C[Y[1]]=function(W){return this.$g(W,Y[0],Y[1])}}),A.extend=function(Y,W){return Y.$i||(Y(W,O,A),Y.$i=!0),A},A.locale=b,A.isDayjs=E,A.unix=function(Y){return A(1e3*Y)},A.en=k[x],A.Ls=k,A.p={},A})})(WR);var GR=WR.exports;const HR=et(GR);var XH={exports:{}};(function(t,e){(function(n,r){t.exports=r(GR)})(En,function(n){function r(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var i=r(n),s={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(o){return o+"º"}};return i.default.locale(s,null,!0),s})})(XH);var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},QR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new ZH;const f=s<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eK=function(t){const e=KR(t);return QR.encodeByteArray(e,!0)},Id=function(t){return eK(t).replace(/\./g,"")},tK=function(t){try{return QR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ad(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!nK(n)||(t[n]=Ad(t[n],e[n]));return t}function nK(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=()=>YR().__FIREBASE_DEFAULTS__,iK=()=>{if(typeof process>"u"||typeof BT>"u")return;const t=BT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tK(t[1]);return e&&JSON.parse(e)},jy=()=>{try{return rK()||iK()||sK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oK=t=>{var e,n;return(n=(e=jy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XR=t=>{const e=oK(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JR=()=>{var t;return(t=jy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Id(JSON.stringify(n)),Id(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lK(){var t;const e=(t=jy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uK(){return typeof window<"u"||eP()}function eP(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tP(){return!lK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nP(){try{return typeof indexedDB=="object"}catch{return!1}}function cK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="FirebaseError";class Xi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hK,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bf.prototype.create)}}class bf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dK(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xi(i,a,r)}}function dK(t,e){return t.replace(fK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fK=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ku(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zT(s)&&zT(o)){if(!ku(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zT(t){return t!==null&&typeof t=="object"}function pK(t,e){const n=new mK(t,e);return n.subscribe.bind(n)}class mK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=om),i.error===void 0&&(i.error=om),i.complete===void 0&&(i.complete=om);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_K(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yK(t){return t===ps?void 0:t}function _K(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=[];var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const iP={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},wK=we.INFO,EK={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},TK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=EK[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qy{constructor(e){this.name=e,this._logLevel=wK,this._logHandler=TK,this._userLogHandler=null,zy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}function SK(t){zy.forEach(e=>{e.setLogLevel(t)})}function IK(t,e){for(const n of zy){let r=null;e&&e.level&&(r=iP[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:we[s].toLowerCase(),message:a,args:o,type:i.name})}}}const AK=(t,e)=>e.some(n=>t instanceof n);let qT,WT;function bK(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RK(){return WT||(WT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sP=new WeakMap,Dg=new WeakMap,oP=new WeakMap,am=new WeakMap,Wy=new WeakMap;function PK(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Pi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sP.set(n,t)}).catch(()=>{}),Wy.set(e,t),e}function DK(t){if(Dg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dg.set(t,e)}let Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CK(t){Cg=t(Cg)}function xK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lm(this),e,...n);return oP.set(r,e.sort?e.sort():[e]),Pi(r)}:RK().includes(t)?function(...e){return t.apply(lm(this),e),Pi(sP.get(this))}:function(...e){return Pi(t.apply(lm(this),e))}}function kK(t){return typeof t=="function"?xK(t):(t instanceof IDBTransaction&&DK(t),AK(t,bK())?new Proxy(t,Cg):t)}function Pi(t){if(t instanceof IDBRequest)return PK(t);if(am.has(t))return am.get(t);const e=kK(t);return e!==t&&(am.set(t,e),Wy.set(e,t)),e}const lm=t=>Wy.get(t);function OK(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Pi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Pi(o.result),l.oldVersion,l.newVersion,Pi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NK=["get","getKey","getAll","getAllKeys","count"],MK=["put","add","delete","clear"],um=new Map;function GT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NK.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return um.set(e,s),s}CK(t=>({...t,get:(e,n,r)=>GT(e,n)||t.get(e,n,r),has:(e,n)=>!!GT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($K(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $K(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rd="@firebase/app",xg="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new qy("@firebase/app"),LK="@firebase/app-compat",FK="@firebase/analytics-compat",UK="@firebase/analytics",BK="@firebase/app-check-compat",jK="@firebase/app-check",zK="@firebase/auth",qK="@firebase/auth-compat",WK="@firebase/database",GK="@firebase/database-compat",HK="@firebase/functions",KK="@firebase/functions-compat",QK="@firebase/installations",YK="@firebase/installations-compat",XK="@firebase/messaging",JK="@firebase/messaging-compat",ZK="@firebase/performance",e8="@firebase/performance-compat",t8="@firebase/remote-config",n8="@firebase/remote-config-compat",r8="@firebase/storage",i8="@firebase/storage-compat",s8="@firebase/firestore",o8="@firebase/vertexai-preview",a8="@firebase/firestore-compat",l8="firebase",u8="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]",c8={[Rd]:"fire-core",[LK]:"fire-core-compat",[UK]:"fire-analytics",[FK]:"fire-analytics-compat",[jK]:"fire-app-check",[BK]:"fire-app-check-compat",[zK]:"fire-auth",[qK]:"fire-auth-compat",[WK]:"fire-rtdb",[GK]:"fire-rtdb-compat",[HK]:"fire-fn",[KK]:"fire-fn-compat",[QK]:"fire-iid",[YK]:"fire-iid-compat",[XK]:"fire-fcm",[JK]:"fire-fcm-compat",[ZK]:"fire-perf",[e8]:"fire-perf-compat",[t8]:"fire-rc",[n8]:"fire-rc-compat",[r8]:"fire-gcs",[i8]:"fire-gcs-compat",[s8]:"fire-fst",[a8]:"fire-fst-compat",[o8]:"fire-vertex","fire-js":"fire-js",[l8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Map,fa=new Map,pa=new Map;function Ou(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function aP(t,e){t.container.addOrOverwriteComponent(e)}function Hs(t){const e=t.name;if(pa.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;pa.set(e,t);for(const n of Mi.values())Ou(n,t);for(const n of fa.values())Ou(n,t);return!0}function Rf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function h8(t,e,n=Ni){Rf(t,e).clearInstance(n)}function lP(t){return t.options!==void 0}function d8(t){return t.settings!==void 0}function f8(){pa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vn=new bf("app","Firebase",p8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uP=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8 extends uP{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Qn(Rd,xg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ky(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=u8;function Gy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ni,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(n||(n=JR()),!n)throw Vn.create("no-options");const s=Mi.get(i);if(s){if(ku(n,s.options)&&ku(r,s.config))return s;throw Vn.create("duplicate-app",{appName:i})}const o=new rP(i);for(const l of pa.values())o.addComponent(l);const a=new uP(n,r,o);return Mi.set(i,a),a}function g8(t,e){if(uK()&&!eP())throw Vn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;lP(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((h,d)=>Math.imul(31,h)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=fa.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new rP(s);for(const c of pa.values())a.addComponent(c);const l=new m8(n,e,s,a);return fa.set(s,l),l}function Hy(t=Ni){const e=Mi.get(t);if(!e&&t===Ni&&JR())return Gy();if(!e)throw Vn.create("no-app",{appName:t});return e}function v8(){return Array.from(Mi.values())}async function Ky(t){let e=!1;const n=t.name;Mi.has(n)?(e=!0,Mi.delete(n)):fa.has(n)&&t.decRefCount()<=0&&(fa.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Qn(t,e,n){var r;let i=(r=c8[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}Hs(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function cP(t,e){if(t!==null&&typeof t!="function")throw Vn.create("invalid-log-argument");IK(t,e)}function hP(t){SK(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="firebase-heartbeat-database",_8=1,Nu="firebase-heartbeat-store";let cm=null;function dP(){return cm||(cm=OK(y8,_8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vn.create("idb-open",{originalErrorMessage:t.message})})),cm}async function w8(t){try{const n=(await dP()).transaction(Nu),r=await n.objectStore(Nu).get(fP(t));return await n.done,r}catch(e){if(e instanceof Xi)qr.warn(e.message);else{const n=Vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}}async function HT(t,e){try{const r=(await dP()).transaction(Nu,"readwrite");await r.objectStore(Nu).put(e,fP(t)),await r.done}catch(n){if(n instanceof Xi)qr.warn(n.message);else{const r=Vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(r.message)}}}function fP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=1024,T8=30*24*60*60*1e3;class S8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=KT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=T8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=KT(),{heartbeatsToSend:r,unsentEntries:i}=I8(this._heartbeatsCache.heartbeats),s=Id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return qr.warn(n),""}}}function KT(){return new Date().toISOString().substring(0,10)}function I8(t,e=E8){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),QT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class A8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nP()?cK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QT(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){Hs(new zr("platform-logger",e=>new VK(e),"PRIVATE")),Hs(new zr("heartbeat",e=>new S8(e),"PRIVATE")),Qn(Rd,xg,t),Qn(Rd,xg,"esm2017"),Qn("fire-js","")}b8("");const R8=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Xi,SDK_VERSION:Pf,_DEFAULT_ENTRY_NAME:Ni,_addComponent:Ou,_addOrOverwriteComponent:aP,_apps:Mi,_clearComponents:f8,_components:pa,_getProvider:Rf,_isFirebaseApp:lP,_isFirebaseServerApp:d8,_registerComponent:Hs,_removeServiceInstance:h8,_serverApps:fa,deleteApp:Ky,getApp:Hy,getApps:v8,initializeApp:Gy,initializeServerApp:g8,onLog:cP,registerVersion:Qn,setLogLevel:hP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n){this._delegate=e,this.firebase=n,Ou(e,new zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ky(this._delegate)))}_getService(e,n=Ni){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ni){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ou(this._delegate,e)}_addOrOverwriteComponent(e){aP(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},YT=new bf("app-compat","Firebase",D8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Qn,setLogLevel:hP,onLog:cP,apps:null,SDK_VERSION:Pf,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:R8}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Ni,!jT(e,c))throw YT.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,h={}){const d=Gy(c,h);if(jT(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const h=c.name,d=h.replace("-compat","");if(Hs(c)&&c.type==="PUBLIC"){const f=(m=i())=>{if(typeof m[d]!="function")throw YT.create("invalid-app-argument",{appName:h});return m[d]()};c.serviceProps!==void 0&&Ad(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...m){return this._getService.bind(this,h).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){const t=C8(P8);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:pP,extendNamespace:e,createSubscribe:pK,ErrorFactory:bf,deepExtend:Ad});function e(n){Ad(t,n)}return t}const x8=pP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new qy("@firebase/app-compat"),k8="@firebase/app-compat",O8="0.2.41";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t){Qn(k8,O8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=YR();if(t.firebase!==void 0){XT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&XT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Df=x8;N8();var M8="firebase",V8="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Df.registerVersion(M8,V8,"app-compat");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,mP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function b(){}b.prototype=E.prototype,S.D=E.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(A,D,O){for(var C=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)C[Y-2]=arguments[Y];return E.prototype[D].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,b){b||(b=0);var A=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)A[D]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(D=0;16>D;++D)A[D]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=S.g[0],b=S.g[1],D=S.g[2];var O=S.g[3],C=E+(O^b&(D^O))+A[0]+3614090360&4294967295;E=b+(C<<7&4294967295|C>>>25),C=O+(D^E&(b^D))+A[1]+3905402710&4294967295,O=E+(C<<12&4294967295|C>>>20),C=D+(b^O&(E^b))+A[2]+606105819&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(E^D&(O^E))+A[3]+3250441966&4294967295,b=D+(C<<22&4294967295|C>>>10),C=E+(O^b&(D^O))+A[4]+4118548399&4294967295,E=b+(C<<7&4294967295|C>>>25),C=O+(D^E&(b^D))+A[5]+1200080426&4294967295,O=E+(C<<12&4294967295|C>>>20),C=D+(b^O&(E^b))+A[6]+2821735955&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(E^D&(O^E))+A[7]+4249261313&4294967295,b=D+(C<<22&4294967295|C>>>10),C=E+(O^b&(D^O))+A[8]+1770035416&4294967295,E=b+(C<<7&4294967295|C>>>25),C=O+(D^E&(b^D))+A[9]+2336552879&4294967295,O=E+(C<<12&4294967295|C>>>20),C=D+(b^O&(E^b))+A[10]+4294925233&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(E^D&(O^E))+A[11]+2304563134&4294967295,b=D+(C<<22&4294967295|C>>>10),C=E+(O^b&(D^O))+A[12]+1804603682&4294967295,E=b+(C<<7&4294967295|C>>>25),C=O+(D^E&(b^D))+A[13]+4254626195&4294967295,O=E+(C<<12&4294967295|C>>>20),C=D+(b^O&(E^b))+A[14]+2792965006&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(E^D&(O^E))+A[15]+1236535329&4294967295,b=D+(C<<22&4294967295|C>>>10),C=E+(D^O&(b^D))+A[1]+4129170786&4294967295,E=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(E^b))+A[6]+3225465664&4294967295,O=E+(C<<9&4294967295|C>>>23),C=D+(E^b&(O^E))+A[11]+643717713&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^E&(D^O))+A[0]+3921069994&4294967295,b=D+(C<<20&4294967295|C>>>12),C=E+(D^O&(b^D))+A[5]+3593408605&4294967295,E=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(E^b))+A[10]+38016083&4294967295,O=E+(C<<9&4294967295|C>>>23),C=D+(E^b&(O^E))+A[15]+3634488961&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^E&(D^O))+A[4]+3889429448&4294967295,b=D+(C<<20&4294967295|C>>>12),C=E+(D^O&(b^D))+A[9]+568446438&4294967295,E=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(E^b))+A[14]+3275163606&4294967295,O=E+(C<<9&4294967295|C>>>23),C=D+(E^b&(O^E))+A[3]+4107603335&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^E&(D^O))+A[8]+1163531501&4294967295,b=D+(C<<20&4294967295|C>>>12),C=E+(D^O&(b^D))+A[13]+2850285829&4294967295,E=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(E^b))+A[2]+4243563512&4294967295,O=E+(C<<9&4294967295|C>>>23),C=D+(E^b&(O^E))+A[7]+1735328473&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^E&(D^O))+A[12]+2368359562&4294967295,b=D+(C<<20&4294967295|C>>>12),C=E+(b^D^O)+A[5]+4294588738&4294967295,E=b+(C<<4&4294967295|C>>>28),C=O+(E^b^D)+A[8]+2272392833&4294967295,O=E+(C<<11&4294967295|C>>>21),C=D+(O^E^b)+A[11]+1839030562&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^E)+A[14]+4259657740&4294967295,b=D+(C<<23&4294967295|C>>>9),C=E+(b^D^O)+A[1]+2763975236&4294967295,E=b+(C<<4&4294967295|C>>>28),C=O+(E^b^D)+A[4]+1272893353&4294967295,O=E+(C<<11&4294967295|C>>>21),C=D+(O^E^b)+A[7]+4139469664&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^E)+A[10]+3200236656&4294967295,b=D+(C<<23&4294967295|C>>>9),C=E+(b^D^O)+A[13]+681279174&4294967295,E=b+(C<<4&4294967295|C>>>28),C=O+(E^b^D)+A[0]+3936430074&4294967295,O=E+(C<<11&4294967295|C>>>21),C=D+(O^E^b)+A[3]+3572445317&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^E)+A[6]+76029189&4294967295,b=D+(C<<23&4294967295|C>>>9),C=E+(b^D^O)+A[9]+3654602809&4294967295,E=b+(C<<4&4294967295|C>>>28),C=O+(E^b^D)+A[12]+3873151461&4294967295,O=E+(C<<11&4294967295|C>>>21),C=D+(O^E^b)+A[15]+530742520&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^E)+A[2]+3299628645&4294967295,b=D+(C<<23&4294967295|C>>>9),C=E+(D^(b|~O))+A[0]+4096336452&4294967295,E=b+(C<<6&4294967295|C>>>26),C=O+(b^(E|~D))+A[7]+1126891415&4294967295,O=E+(C<<10&4294967295|C>>>22),C=D+(E^(O|~b))+A[14]+2878612391&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~E))+A[5]+4237533241&4294967295,b=D+(C<<21&4294967295|C>>>11),C=E+(D^(b|~O))+A[12]+1700485571&4294967295,E=b+(C<<6&4294967295|C>>>26),C=O+(b^(E|~D))+A[3]+2399980690&4294967295,O=E+(C<<10&4294967295|C>>>22),C=D+(E^(O|~b))+A[10]+4293915773&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~E))+A[1]+2240044497&4294967295,b=D+(C<<21&4294967295|C>>>11),C=E+(D^(b|~O))+A[8]+1873313359&4294967295,E=b+(C<<6&4294967295|C>>>26),C=O+(b^(E|~D))+A[15]+4264355552&4294967295,O=E+(C<<10&4294967295|C>>>22),C=D+(E^(O|~b))+A[6]+2734768916&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~E))+A[13]+1309151649&4294967295,b=D+(C<<21&4294967295|C>>>11),C=E+(D^(b|~O))+A[4]+4149444226&4294967295,E=b+(C<<6&4294967295|C>>>26),C=O+(b^(E|~D))+A[11]+3174756917&4294967295,O=E+(C<<10&4294967295|C>>>22),C=D+(E^(O|~b))+A[2]+718787259&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~E))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var b=E-this.blockSize,A=this.B,D=this.h,O=0;O<E;){if(D==0)for(;O<=b;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<E;)if(A[D++]=S.charCodeAt(O++),D==this.blockSize){i(this,A),D=0;break}}else for(;O<E;)if(A[D++]=S[O++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var b=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=b&255,b/=256;for(this.u(S),S=Array(16),E=b=0;4>E;++E)for(var A=0;32>A;A+=8)S[b++]=this.g[E]>>>A&255;return S};function s(S,E){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=E(S)}function o(S,E){this.h=E;for(var b=[],A=!0,D=S.length-1;0<=D;D--){var O=S[D]|0;A&&O==E||(b[D]=O,A=!1)}this.g=b}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return I(c(-S));for(var E=[],b=1,A=0;S>=b;A++)E[A]=S/b|0,b*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return I(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(E,8)),A=d,D=0;D<S.length;D+=8){var O=Math.min(8,S.length-D),C=parseInt(S.substring(D,D+O),E);8>O?(O=c(Math.pow(E,O)),A=A.j(O).add(c(C))):(A=A.j(b),A=A.add(c(C)))}return A}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-I(this).m();for(var S=0,E=1,b=0;b<this.g.length;b++){var A=this.i(b);S+=(0<=A?A:4294967296+A)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+I(this).toString(S);for(var E=c(Math.pow(S,6)),b=this,A="";;){var D=P(b,E).g;b=w(b,D.j(E));var O=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=D,y(b))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:y(S)?0:1};function I(S){for(var E=S.g.length,b=[],A=0;A<E;A++)b[A]=~S.g[A];return new o(b,~S.h).add(f)}t.abs=function(){return v(this)?I(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],A=0,D=0;D<=E;D++){var O=A+(this.i(D)&65535)+(S.i(D)&65535),C=(O>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);A=C>>>16,O&=65535,C&=65535,b[D]=C<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,E){return S.add(I(E))}t.j=function(S){if(y(this)||y(S))return d;if(v(this))return v(S)?I(this).j(I(S)):I(I(this).j(S));if(v(S))return I(this.j(I(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,b=[],A=0;A<2*E;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<S.g.length;D++){var O=this.i(A)>>>16,C=this.i(A)&65535,Y=S.i(D)>>>16,W=S.i(D)&65535;b[2*A+2*D]+=C*W,_(b,2*A+2*D),b[2*A+2*D+1]+=O*W,_(b,2*A+2*D+1),b[2*A+2*D+1]+=C*Y,_(b,2*A+2*D+1),b[2*A+2*D+2]+=O*Y,_(b,2*A+2*D+2)}for(A=0;A<E;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=E;A<2*E;A++)b[A]=0;return new o(b,0)};function _(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function T(S,E){this.g=S,this.h=E}function P(S,E){if(y(E))throw Error("division by zero");if(y(S))return new T(d,d);if(v(S))return E=P(I(S),E),new T(I(E.g),I(E.h));if(v(E))return E=P(S,I(E)),new T(I(E.g),E.h);if(30<S.g.length){if(v(S)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var b=f,A=E;0>=A.l(S);)b=x(b),A=x(A);var D=k(b,1),O=k(A,1);for(A=k(A,2),b=k(b,2);!y(A);){var C=O.add(A);0>=C.l(S)&&(D=D.add(b),O=C),A=k(A,1),b=k(b,1)}return E=w(S,D.j(E)),new T(D,E)}for(D=d;0<=S.l(E);){for(b=Math.max(1,Math.floor(S.m()/E.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=c(b),C=O.j(E);v(C)||0<C.l(S);)b-=A,O=c(b),C=O.j(E);y(O)&&(O=f),D=D.add(O),S=w(S,C)}return new T(D,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],A=0;A<E;A++)b[A]=this.i(A)&S.i(A);return new o(b,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],A=0;A<E;A++)b[A]=this.i(A)|S.i(A);return new o(b,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],A=0;A<E;A++)b[A]=this.i(A)^S.i(A);return new o(b,this.h^S.h)};function x(S){for(var E=S.g.length+1,b=[],A=0;A<E;A++)b[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(b,S.h)}function k(S,E){var b=E>>5;E%=32;for(var A=S.g.length-b,D=[],O=0;O<A;O++)D[O]=0<E?S.i(O+b)>>>E|S.i(O+b+1)<<32-E:S.i(O+b);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ks=o}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gP,vP,Ml,yP,kh,kg,_P,wP,EP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in g))break e;g=g[M]}u=u[u.length-1],R=g[u],p=p(R),p!=R&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,R=!1,M={next:function(){if(!R&&g<u.length){var U=g++;return{value:p(U,u[U]),done:!1}}return R=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,R),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var R=g.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function y(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(R,M,U){for(var te=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)te[ke-2]=arguments[ke];return p.prototype[M].apply(R,te)}}function v(u){const p=u.length;if(0<p){const g=Array(p);for(let R=0;R<p;R++)g[R]=u[R];return g}return[]}function I(u,p){for(let g=1;g<arguments.length;g++){const R=arguments[g];if(l(R)){const M=u.length||0,U=R.length||0;u.length=M+U;for(let te=0;te<U;te++)u[M+te]=R[te]}else u.push(R)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var x=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function k(u,p,g){for(const R in u)p.call(g,u[R],R,u)}function S(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function E(u){const p={};for(const g in u)p[g]=u[g];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let g,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(g in R)u[g]=R[g];for(let U=0;U<b.length;U++)g=b[U],Object.prototype.hasOwnProperty.call(R,g)&&(u[g]=R[g])}}function D(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function C(){var u=G;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Y{constructor(){this.h=this.g=null}add(p,g){const R=W.get();R.set(p,g),this.h?this.h.next=R:this.g=R,this.h=R}}var W=new w(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,N=!1,G=new Y,X=()=>{const u=a.Promise.resolve(void 0);Q=()=>{u.then(se)}};var se=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){O(g)}var p=W;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}N=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function J(u,p){if(B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(x){e:{try{P(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ie[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&J.aa.h.call(this)}}y(J,B);var ie={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(u,p,g,R,M){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!R,this.ha=M,this.key=++me,this.da=this.fa=!1}function Ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,p,g,R,M){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var te=lt(u,p,R,M);return-1<te?(p=u[te],g||(p.fa=!1)):(p=new ge(p,this.src,U,!!R,M),p.fa=g,u.push(p)),p};function nt(u,p){var g=p.type;if(g in u.g){var R=u.g[g],M=Array.prototype.indexOf.call(R,p,void 0),U;(U=0<=M)&&Array.prototype.splice.call(R,M,1),U&&(Ee(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function lt(u,p,g,R){for(var M=0;M<u.length;++M){var U=u[M];if(!U.da&&U.listener==p&&U.capture==!!g&&U.ha==R)return M}return-1}var rn="closure_lm_"+(1e6*Math.random()|0),Ae={};function er(u,p,g,R,M){if(Array.isArray(p)){for(var U=0;U<p.length;U++)er(u,p[U],g,R,M);return null}return g=rs(g),u&&u[ce]?u.K(p,g,c(R)?!!R.capture:!!R,M):tr(u,p,g,!1,R,M)}function tr(u,p,g,R,M,U){if(!p)throw Error("Invalid event type");var te=c(M)?!!M.capture:!!M,ke=ei(u);if(ke||(u[rn]=ke=new xe(u)),g=ke.add(p,g,R,te,U),g.proxy)return g;if(R=Ja(),g.proxy=R,R.src=u,R.listener=g,u.addEventListener)q||(M=te),M===void 0&&(M=!1),u.addEventListener(p.toString(),R,M);else if(u.attachEvent)u.attachEvent(Tr(p.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ja(){function u(g){return p.call(u.src,u.listener,g)}const p=mo;return u}function po(u,p,g,R,M){if(Array.isArray(p))for(var U=0;U<p.length;U++)po(u,p[U],g,R,M);else R=c(R)?!!R.capture:!!R,g=rs(g),u&&u[ce]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],g=lt(U,g,R,M),-1<g&&(Ee(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=ei(u))&&(p=u.g[p.toString()],u=-1,p&&(u=lt(p,g,R,M)),(g=-1<u?p[u]:null)&&vn(g))}function vn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ce])nt(p.i,u);else{var g=u.type,R=u.proxy;p.removeEventListener?p.removeEventListener(g,R,u.capture):p.detachEvent?p.detachEvent(Tr(g),R):p.addListener&&p.removeListener&&p.removeListener(R),(g=ei(p))?(nt(g,u),g.h==0&&(g.src=null,p[rn]=null)):Ee(u)}}}function Tr(u){return u in Ae?Ae[u]:Ae[u]="on"+u}function mo(u,p){if(u.da)u=!0;else{p=new J(p,this);var g=u.listener,R=u.ha||u.src;u.fa&&vn(u),u=g.call(R,p)}return u}function ei(u){return u=u[rn],u instanceof xe?u:null}var nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function rs(u){return typeof u=="function"?u:(u[nr]||(u[nr]=function(p){return u.handleEvent(p)}),u[nr])}function he(){L.call(this),this.i=new xe(this),this.M=this,this.F=null}y(he,L),he.prototype[ce]=!0,he.prototype.removeEventListener=function(u,p,g,R){po(this,u,p,g,R)};function $e(u,p){var g,R=u.F;if(R)for(g=[];R;R=R.F)g.push(R);if(u=u.M,R=p.type||p,typeof p=="string")p=new B(p,u);else if(p instanceof B)p.target=p.target||u;else{var M=p;p=new B(R,u),A(p,M)}if(M=!0,g)for(var U=g.length-1;0<=U;U--){var te=p.g=g[U];M=rr(te,R,!0,p)&&M}if(te=p.g=u,M=rr(te,R,!0,p)&&M,M=rr(te,R,!1,p)&&M,g)for(U=0;U<g.length;U++)te=p.g=g[U],M=rr(te,R,!1,p)&&M}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],R=0;R<g.length;R++)Ee(g[R]);delete u.g[p],u.h--}}this.F=null},he.prototype.K=function(u,p,g,R){return this.i.add(String(u),p,!1,g,R)},he.prototype.L=function(u,p,g,R){return this.i.add(String(u),p,!0,g,R)};function rr(u,p,g,R){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,U=0;U<p.length;++U){var te=p[U];if(te&&!te.da&&te.capture==g){var ke=te.listener,bt=te.ha||te.src;te.fa&&nt(u.i,te),M=ke.call(bt,R)!==!1&&M}}return M&&!R.defaultPrevented}function ow(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function aw(u){u.g=ow(()=>{u.g=null,u.i&&(u.i=!1,aw(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class mx extends L{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:aw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(u){L.call(this),this.h=u,this.g={}}y(Za,L);var lw=[];function uw(u){k(u.g,function(p,g){this.g.hasOwnProperty(g)&&vn(p)},u),u.g={}}Za.prototype.N=function(){Za.aa.N.call(this),uw(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rp=a.JSON.stringify,gx=a.JSON.parse,vx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ip(){}ip.prototype.h=null;function cw(u){return u.h||(u.h=u.i())}function hw(){}var el={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sp(){B.call(this,"d")}y(sp,B);function op(){B.call(this,"c")}y(op,B);var is={},dw=null;function Sc(){return dw=dw||new he}is.La="serverreachability";function fw(u){B.call(this,is.La,u)}y(fw,B);function tl(u){const p=Sc();$e(p,new fw(p))}is.STAT_EVENT="statevent";function pw(u,p){B.call(this,is.STAT_EVENT,u),this.stat=p}y(pw,B);function jt(u){const p=Sc();$e(p,new pw(p,u))}is.Ma="timingevent";function mw(u,p){B.call(this,is.Ma,u),this.size=p}y(mw,B);function nl(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function rl(){this.g=!0}rl.prototype.xa=function(){this.g=!1};function yx(u,p,g,R,M,U){u.info(function(){if(u.g)if(U)for(var te="",ke=U.split("&"),bt=0;bt<ke.length;bt++){var be=ke[bt].split("=");if(1<be.length){var Ot=be[0];be=be[1];var Nt=Ot.split("_");te=2<=Nt.length&&Nt[1]=="type"?te+(Ot+"="+be+"&"):te+(Ot+"=redacted&")}}else te=null;else te=U;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+p+`
`+g+`
`+te})}function _x(u,p,g,R,M,U,te){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+p+`
`+g+`
`+U+" "+te})}function go(u,p,g,R){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ex(u,g)+(R?" "+R:"")})}function wx(u,p){u.info(function(){return"TIMEOUT: "+p})}rl.prototype.info=function(){};function Ex(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var R=g[u];if(!(2>R.length)){var M=R[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var te=1;te<M.length;te++)M[te]=""}}}}return rp(g)}catch{return p}}var Ic={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ap;function Ac(){}y(Ac,ip),Ac.prototype.g=function(){return new XMLHttpRequest},Ac.prototype.i=function(){return{}},ap=new Ac;function ti(u,p,g,R){this.j=u,this.i=p,this.l=g,this.R=R||1,this.U=new Za(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vw}function vw(){this.i=null,this.g="",this.h=!1}var yw={},lp={};function up(u,p,g){u.L=1,u.v=Dc(Sr(p)),u.m=g,u.P=!0,_w(u,null)}function _w(u,p){u.F=Date.now(),bc(u),u.A=Sr(u.v);var g=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Ow(g.i,"t",R),u.C=0,g=u.j.J,u.h=new vw,u.g=Xw(u.j,g?p:null,!u.m),0<u.O&&(u.M=new mx(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,R=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(lw[0]=M.toString()),M=lw);for(var U=0;U<M.length;U++){var te=er(g,M[U],R||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),tl(),yx(u.i,u.u,u.A,u.l,u.R,u.m)}ti.prototype.ca=function(u){u=u.target;const p=this.M;p&&Ir(u)==3?p.j():this.Y(u)},ti.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Ir(this.g);var p=this.g.Ba();const _o=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Uw(this.g)))){this.J||Nt!=4||p==7||(p==8||0>=_o?tl(3):tl(2)),cp(this);var g=this.g.Z();this.X=g;t:if(ww(this)){var R=Uw(this.g);u="";var M=R.length,U=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),il(this);var te="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(R[p],{stream:!(U&&p==M-1)});R.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=g==200,_x(this.i,this.u,this.A,this.l,this.R,Nt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,bt=this.g;if((ke=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ke)){var be=ke;break t}}be=null}if(g=be)go(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hp(this,g);else{this.o=!1,this.s=3,jt(12),ss(this),il(this);break e}}if(this.P){g=!0;let jn;for(;!this.J&&this.C<te.length;)if(jn=Tx(this,te),jn==lp){Nt==4&&(this.s=4,jt(14),g=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==yw){this.s=4,jt(15),go(this.i,this.l,te,"[Invalid Chunk]"),g=!1;break}else go(this.i,this.l,jn,null),hp(this,jn);if(ww(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||te.length!=0||this.h.h||(this.s=1,jt(16),g=!1),this.o=this.o&&g,!g)go(this.i,this.l,te,"[Invalid Chunked Response]"),ss(this),il(this);else if(0<te.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),vp(Ot),Ot.M=!0,jt(11))}}else go(this.i,this.l,te,null),hp(this,te);Nt==4&&ss(this),this.o&&!this.J&&(Nt==4?Hw(this.j,this):(this.o=!1,bc(this)))}else Fx(this.g),g==400&&0<te.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),ss(this),il(this)}}}catch{}finally{}};function ww(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Tx(u,p){var g=u.C,R=p.indexOf(`
`,g);return R==-1?lp:(g=Number(p.substring(g,R)),isNaN(g)?yw:(R+=1,R+g>p.length?lp:(p=p.slice(R,R+g),u.C=R+g,p)))}ti.prototype.cancel=function(){this.J=!0,ss(this)};function bc(u){u.S=Date.now()+u.I,Ew(u,u.I)}function Ew(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=nl(f(u.ba,u),p)}function cp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ti.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(wx(this.i,this.A),this.L!=2&&(tl(),jt(17)),ss(this),this.s=2,il(this)):Ew(this,this.S-u)};function il(u){u.j.G==0||u.J||Hw(u.j,u)}function ss(u){cp(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,uw(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function hp(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||dp(g.h,u))){if(!u.K&&dp(g.h,u)&&g.G==3){try{var R=g.Da.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Nc(g),kc(g);else break e;gp(g),jt(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=nl(f(g.Za,g),6e3));if(1>=Iw(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else as(g,11)}else if((u.K||g.g==u)&&Nc(g),!_(p))for(M=g.Da.g.parse(p),p=0;p<M.length;p++){let be=M[p];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const Ot=be[3];Ot!=null&&(g.la=Ot,g.j.info("VER="+g.la));const Nt=be[4];Nt!=null&&(g.Aa=Nt,g.j.info("SVER="+g.Aa));const _o=be[5];_o!=null&&typeof _o=="number"&&0<_o&&(R=1.5*_o,g.L=R,g.j.info("backChannelRequestTimeoutMs_="+R)),R=g;const jn=u.g;if(jn){const Vc=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vc){var U=R.h;U.g||Vc.indexOf("spdy")==-1&&Vc.indexOf("quic")==-1&&Vc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(fp(U,U.h),U.h=null))}if(R.D){const yp=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;yp&&(R.ya=yp,Le(R.I,R.D,yp))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),R=g;var te=u;if(R.qa=Yw(R,R.J?R.ia:null,R.W),te.K){Aw(R.h,te);var ke=te,bt=R.L;bt&&(ke.I=bt),ke.B&&(cp(ke),bc(ke)),R.g=te}else Ww(R);0<g.i.length&&Oc(g)}else be[0]!="stop"&&be[0]!="close"||as(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?as(g,7):mp(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}tl(4)}catch{}}var Sx=class{constructor(u,p){this.g=u,this.map=p}};function Tw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Iw(u){return u.h?1:u.g?u.g.size:0}function dp(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function fp(u,p){u.g?u.g.add(p):u.h=p}function Aw(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Tw.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return v(u.i)}function Ix(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,R=0;R<g;R++)p.push(u[R]);return p}p=[],g=0;for(R in u)p[g++]=u[R];return p}function Ax(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const R in u)p[g++]=R;return p}}}function Rw(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=Ax(u),R=Ix(u),M=R.length,U=0;U<M;U++)p.call(void 0,R[U],g&&g[U],u)}var Pw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bx(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var R=u[g].indexOf("="),M=null;if(0<=R){var U=u[g].substring(0,R);M=u[g].substring(R+1)}else U=u[g];p(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function os(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof os){this.h=u.h,Rc(this,u.j),this.o=u.o,this.g=u.g,Pc(this,u.s),this.l=u.l;var p=u.i,g=new al;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Dw(this,g),this.m=u.m}else u&&(p=String(u).match(Pw))?(this.h=!1,Rc(this,p[1]||"",!0),this.o=sl(p[2]||""),this.g=sl(p[3]||"",!0),Pc(this,p[4]),this.l=sl(p[5]||"",!0),Dw(this,p[6]||"",!0),this.m=sl(p[7]||"")):(this.h=!1,this.i=new al(null,this.h))}os.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ol(p,Cw,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ol(p,Cw,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ol(g,g.charAt(0)=="/"?Dx:Px,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ol(g,xx)),u.join("")};function Sr(u){return new os(u)}function Rc(u,p,g){u.j=g?sl(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Pc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Dw(u,p,g){p instanceof al?(u.i=p,kx(u.i,u.h)):(g||(p=ol(p,Cx)),u.i=new al(p,u.h))}function Le(u,p,g){u.i.set(p,g)}function Dc(u){return Le(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sl(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ol(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,Rx),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Rx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cw=/[#\/\?@]/g,Px=/[#\?:]/g,Dx=/[#\?]/g,Cx=/[#\?@]/g,xx=/#/g;function al(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ni(u){u.g||(u.g=new Map,u.h=0,u.i&&bx(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=al.prototype,t.add=function(u,p){ni(this),this.i=null,u=vo(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function xw(u,p){ni(u),p=vo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function kw(u,p){return ni(u),p=vo(u,p),u.g.has(p)}t.forEach=function(u,p){ni(this),this.g.forEach(function(g,R){g.forEach(function(M){u.call(p,M,R,this)},this)},this)},t.na=function(){ni(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let R=0;R<p.length;R++){const M=u[R];for(let U=0;U<M.length;U++)g.push(p[R])}return g},t.V=function(u){ni(this);let p=[];if(typeof u=="string")kw(this,u)&&(p=p.concat(this.g.get(vo(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return ni(this),this.i=null,u=vo(this,u),kw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ow(u,p,g){xw(u,p),0<g.length&&(u.i=null,u.g.set(vo(u,p),v(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var R=p[g];const U=encodeURIComponent(String(R)),te=this.V(R);for(R=0;R<te.length;R++){var M=U;te[R]!==""&&(M+="="+encodeURIComponent(String(te[R]))),u.push(M)}}return this.i=u.join("&")};function vo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function kx(u,p){p&&!u.j&&(ni(u),u.i=null,u.g.forEach(function(g,R){var M=R.toLowerCase();R!=M&&(xw(this,R),Ow(this,M,g))},u)),u.j=p}function Ox(u,p){const g=new rl;if(a.Image){const R=new Image;R.onload=m(ri,g,"TestLoadImage: loaded",!0,p,R),R.onerror=m(ri,g,"TestLoadImage: error",!1,p,R),R.onabort=m(ri,g,"TestLoadImage: abort",!1,p,R),R.ontimeout=m(ri,g,"TestLoadImage: timeout",!1,p,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else p(!1)}function Nx(u,p){const g=new rl,R=new AbortController,M=setTimeout(()=>{R.abort(),ri(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:R.signal}).then(U=>{clearTimeout(M),U.ok?ri(g,"TestPingServer: ok",!0,p):ri(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),ri(g,"TestPingServer: error",!1,p)})}function ri(u,p,g,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(g)}catch{}}function Mx(){this.g=new vx}function Vx(u,p,g){const R=g||"";try{Rw(u,function(M,U){let te=M;c(M)&&(te=rp(M)),p.push(R+U+"="+encodeURIComponent(te))})}catch(M){throw p.push(R+"type="+encodeURIComponent("_badmap")),M}}function ll(u){this.l=u.Ub||null,this.j=u.eb||!1}y(ll,ip),ll.prototype.g=function(){return new Cc(this.l,this.j)},ll.prototype.i=function(u){return function(){return u}}({});function Cc(u,p){he.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Cc,he),t=Cc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,cl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ul(this):cl(this),this.readyState==3&&Nw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ul(this))},t.Qa=function(u){this.g&&(this.response=u,ul(this))},t.ga=function(){this.g&&ul(this)};function ul(u){u.readyState=4,u.l=null,u.j=null,u.v=null,cl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function cl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mw(u){let p="";return k(u,function(g,R){p+=R,p+=":",p+=g,p+=`\r
`}),p}function pp(u,p,g){e:{for(R in g){var R=!1;break e}R=!0}R||(g=Mw(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Le(u,p,g))}function rt(u){he.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(rt,he);var $x=/^https?$/i,Lx=["POST","PUT"];t=rt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ap.g(),this.v=this.o?cw(this.o):cw(ap),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){Vw(this,U);return}if(u=g||"",g=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)g.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const U of R.keys())g.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Lx,p,void 0))||R||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,te]of g)this.g.setRequestHeader(U,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fw(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){Vw(this,U)}};function Vw(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,$w(u),xc(u)}function $w(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$e(this,"complete"),$e(this,"abort"),xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xc(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lw(this):this.bb())},t.bb=function(){Lw(this)};function Lw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ir(u)!=4||u.Z()!=2)){if(u.u&&Ir(u)==4)ow(u.Ea,0,u);else if($e(u,"readystatechange"),Ir(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var R;if(R=te===0){var M=String(u.D).match(Pw)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),R=!$x.test(M?M.toLowerCase():"")}g=R}if(g)$e(u,"complete"),$e(u,"success");else{u.m=6;try{var U=2<Ir(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",$w(u)}}finally{xc(u)}}}}function xc(u,p){if(u.g){Fw(u);const g=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||$e(u,"ready");try{g.onreadystatechange=R}catch{}}}function Fw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ir(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),gx(p)}};function Uw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(u){const p={};u=(u.g&&2<=Ir(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(_(u[R]))continue;var g=D(u[R]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=p[M]||[];p[M]=U,U.push(g)}S(p,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hl(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function Bw(u){this.Aa=0,this.i=[],this.j=new rl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hl("baseRetryDelayMs",5e3,u),this.cb=hl("retryDelaySeedMs",1e4,u),this.Wa=hl("forwardChannelMaxRetries",2,u),this.wa=hl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tw(u&&u.concurrentRequestLimit),this.Da=new Mx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bw.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,R){jt(0),this.W=u,this.H=p||{},g&&R!==void 0&&(this.H.OSID=g,this.H.OAID=R),this.F=this.X,this.I=Yw(this,null,this.W),Oc(this)};function mp(u){if(jw(u),u.G==3){var p=u.U++,g=Sr(u.I);if(Le(g,"SID",u.K),Le(g,"RID",p),Le(g,"TYPE","terminate"),dl(u,g),p=new ti(u,u.j,p),p.L=2,p.v=Dc(Sr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Xw(p.j,null),p.g.ea(p.v)),p.F=Date.now(),bc(p)}Qw(u)}function kc(u){u.g&&(vp(u),u.g.cancel(),u.g=null)}function jw(u){kc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Nc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Oc(u){if(!Sw(u.h)&&!u.s){u.s=!0;var p=u.Ga;Q||X(),N||(Q(),N=!0),G.add(p,u),u.B=0}}function Ux(u,p){return Iw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=nl(f(u.Ga,u,p),Kw(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new ti(this,this.j,u);let U=this.o;if(this.S&&(U?(U=E(U),A(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var R=this.i[g];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=qw(this,M,p),g=Sr(this.I),Le(g,"RID",u),Le(g,"CVER",22),this.D&&Le(g,"X-HTTP-Session-Id",this.D),dl(this,g),U&&(this.O?p="headers="+encodeURIComponent(String(Mw(U)))+"&"+p:this.m&&pp(g,this.m,U)),fp(this.h,M),this.Ua&&Le(g,"TYPE","init"),this.P?(Le(g,"$req",p),Le(g,"SID","null"),M.T=!0,up(M,g,null)):up(M,g,p),this.G=2}}else this.G==3&&(u?zw(this,u):this.i.length==0||Sw(this.h)||zw(this))};function zw(u,p){var g;p?g=p.l:g=u.U++;const R=Sr(u.I);Le(R,"SID",u.K),Le(R,"RID",g),Le(R,"AID",u.T),dl(u,R),u.m&&u.o&&pp(R,u.m,u.o),g=new ti(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=qw(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),fp(u.h,g),up(g,R,p)}function dl(u,p){u.H&&k(u.H,function(g,R){Le(p,R,g)}),u.l&&Rw({},function(g,R){Le(p,R,g)})}function qw(u,p,g){g=Math.min(u.i.length,g);var R=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let U=-1;for(;;){const te=["count="+g];U==-1?0<g?(U=M[0].g,te.push("ofs="+U)):U=0:te.push("ofs="+U);let ke=!0;for(let bt=0;bt<g;bt++){let be=M[bt].g;const Ot=M[bt].map;if(be-=U,0>be)U=Math.max(0,M[bt].g-100),ke=!1;else try{Vx(Ot,te,"req"+be+"_")}catch{R&&R(Ot)}}if(ke){R=te.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,R}function Ww(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Q||X(),N||(Q(),N=!0),G.add(p,u),u.v=0}}function gp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=nl(f(u.Fa,u),Kw(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Gw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=nl(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),kc(this),Gw(this))};function vp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Gw(u){u.g=new ti(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Sr(u.qa);Le(p,"RID","rpc"),Le(p,"SID",u.K),Le(p,"AID",u.T),Le(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Le(p,"TO",u.ja),Le(p,"TYPE","xmlhttp"),dl(u,p),u.m&&u.o&&pp(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Dc(Sr(p)),g.m=null,g.P=!0,_w(g,u)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),gp(this),jt(19))};function Nc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hw(u,p){var g=null;if(u.g==p){Nc(u),vp(u),u.g=null;var R=2}else if(dp(u.h,p))g=p.D,Aw(u.h,p),R=1;else return;if(u.G!=0){if(p.o)if(R==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;R=Sc(),$e(R,new mw(R,g)),Oc(u)}else Ww(u);else if(M=p.s,M==3||M==0&&0<p.X||!(R==1&&Ux(u,p)||R==2&&gp(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),M){case 1:as(u,5);break;case 4:as(u,10);break;case 3:as(u,6);break;default:as(u,2)}}}function Kw(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function as(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),R=u.Xa;const M=!R;R=new os(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rc(R,"https"),Dc(R),M?Ox(R.toString(),g):Nx(R.toString(),g)}else jt(2);u.G=0,u.l&&u.l.sa(p),Qw(u),jw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Qw(u){if(u.G=0,u.ka=[],u.l){const p=bw(u.h);(p.length!=0||u.i.length!=0)&&(I(u.ka,p),I(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Yw(u,p,g){var R=g instanceof os?Sr(g):new os(g);if(R.g!="")p&&(R.g=p+"."+R.g),Pc(R,R.s);else{var M=a.location;R=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var U=new os(null);R&&Rc(U,R),p&&(U.g=p),M&&Pc(U,M),g&&(U.l=g),R=U}return g=u.D,p=u.ya,g&&p&&Le(R,g,p),Le(R,"VER",u.la),dl(u,R),R}function Xw(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new rt(new ll({eb:g})):new rt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jw(){}t=Jw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mc(){}Mc.prototype.g=function(u,p){return new yn(u,p)};function yn(u,p){he.call(this),this.g=new Bw(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new yo(this)}y(yn,he),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){mp(this.g)},yn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=rp(u),u=g);p.i.push(new Sx(p.Ya++,u)),p.G==3&&Oc(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,mp(this.g),delete this.g,yn.aa.N.call(this)};function Zw(u){sp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(Zw,sp);function eE(){op.call(this),this.status=1}y(eE,op);function yo(u){this.g=u}y(yo,Jw),yo.prototype.ua=function(){$e(this.g,"a")},yo.prototype.ta=function(u){$e(this.g,new Zw(u))},yo.prototype.sa=function(u){$e(this.g,new eE)},yo.prototype.ra=function(){$e(this.g,"b")},Mc.prototype.createWebChannel=Mc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,EP=function(){return new Mc},wP=function(){return Sc()},_P=is,kg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ic.NO_ERROR=0,Ic.TIMEOUT=8,Ic.HTTP_ERROR=6,kh=Ic,gw.COMPLETE="complete",yP=gw,hw.EventType=el,el.OPEN="a",el.CLOSE="b",el.ERROR="c",el.MESSAGE="d",he.prototype.listen=he.prototype.K,Ml=hw,vP=ll,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,gP=rt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const ZT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="10.13.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new qy("@firebase/firestore");function Po(){return Vi.logLevel}function $8(t){Vi.setLogLevel(t)}function K(t,...e){if(Vi.logLevel<=we.DEBUG){const n=e.map(Qy);Vi.debug(`Firestore (${za}): ${t}`,...n)}}function ct(t,...e){if(Vi.logLevel<=we.ERROR){const n=e.map(Qy);Vi.error(`Firestore (${za}): ${t}`,...n)}}function Zn(t,...e){if(Vi.logLevel<=we.WARN){const n=e.map(Qy);Vi.warn(`Firestore (${za}): ${t}`,...n)}}function Qy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw ct(e),new Error(e)}function le(t,e){t||oe()}function L8(t,e){t||oe()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class U8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class B8{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new TP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new wt(e)}}class j8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new j8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new q8(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function ma(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function IP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Qe(0,0))}static max(){return new ue(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Mu{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const H8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends Mu{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return H8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(ye.fromString(e))}static fromName(e){return new ne(ye.fromString(e).popFirst(5))}static empty(){return new ne(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Og(t){return t.fields.find(e=>e.kind===2)}function ms(t){return t.fields.filter(e=>e.kind!==2)}Pd.UNKNOWN_ID=-1;class Oh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vu(0,bn.min())}}function AP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new bn(i,ne.empty(),e)}function bP(t){return new bn(t.readTime,t.key,-1)}class bn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bn(ue.min(),ne.empty(),-1)}static max(){return new bn(ue.max(),ne.empty(),-1)}}function Yy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==RP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Tt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Yl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Xy(r.target.error);this.V.reject(new Yl(e,i))}}static open(e,n,r,i){try{return new Cf(n,e.transaction(i,r))}catch(s){throw new Yl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(K("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Q8(n)}}class mr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,mr.S(bd())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return K("SimpleDb","Removing database:",e),ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nP())return!1;if(mr.v())return!0;const e=bd(),n=mr.S(e),r=0<n&&n<10,i=DP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(K("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Yl(e,o))},i.onupgradeneeded=s=>{K("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{K("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Cf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),$.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(K("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function DP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class K8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ys(this.B.delete())}}class Yl extends H{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Zi(t){return t.name==="IndexedDbTransactionError"}class Q8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(K("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ys(r)}add(e){return K("SimpleDb","ADD",this.store.name,e,e),ys(this.store.add(e))}get(e){return ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),K("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return K("SimpleDb","DELETE",this.store.name,e),ys(this.store.delete(e))}count(){return K("SimpleDb","COUNT",this.store.name),ys(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new $((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){K("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new $((r,i)=>{n.onerror=s=>{const o=Xy(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new K8(a),c=n(a.primaryKey,a.value,l);if(c instanceof $){const h=c.catch(d=>(l.done(),$.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ys(t){return new $((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Xy(r.target.error);n(i)}})}let e1=!1;function Xy(t){const e=mr.S(bd());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e1||(e1=!0,setTimeout(()=>{throw r},0)),r}}return t}class Y8{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){K("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{K("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Zi(n)?K("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ji(n)}await this.X(6e4)})}}class X8{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return $.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return K("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(K("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=bP(s);Yy(o,r)>0&&(r=o)}),new bn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ln.oe=-1;function cc(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function CP(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=t1(e)),e=J8(t.get(n),e);return t1(e)}function J8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function t1(t){return t+""}function ur(t){const e=t.length;if(le(e>=2),e===2)return le(t.charAt(0)===""&&t.charAt(1)===""),ye.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&oe(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:oe()}s=o+2}return new ye(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e){return[t,Yt(e)]}function xP(t,e,n){return[t,Yt(e),n]}const Z8={},e7=["prefixPath","collectionGroup","readTime","documentId"],t7=["prefixPath","collectionGroup","documentId"],n7=["collectionGroup","readTime","prefixPath","documentId"],r7=["canonicalId","targetId"],i7=["targetId","path"],s7=["path","targetId"],o7=["collectionId","parent"],a7=["indexId","uid"],l7=["uid","sequenceNumber"],u7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c7=["indexId","uid","orderedDocumentKey"],h7=["userId","collectionPath","documentId"],d7=["userId","collectionPath","largestBatchId"],f7=["userId","collectionGroup","largestBatchId"],kP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p7=[...kP,"documentOverlays"],OP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NP=OP,Jy=[...NP,"indexConfiguration","indexState","indexEntries"],m7=Jy,g7=[...Jy,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends PP{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function vt(t,e){const n=re(t);return mr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=i??Pt.EMPTY,this.right=s??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Pt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i1(this.data.getIterator())}getIteratorFrom(e){return new i1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class i1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function So(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new un([])}unionWith(e){let n=new Ce(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VP("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const y7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(le(!!t),typeof t=="string"){let e=0;const n=y7.exec(t);if(le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $i(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zy(t){const e=t.mapValue.fields.__previous_value__;return xf(e)?Zy(e):e}function Lu(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Li{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mh={nullValue:"NULL_VALUE"};function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xf(t)?4:$P(t)?9007199254740991:kf(t)?10:11:oe()}function _r(t,e){if(t===e)return!0;const n=Ks(t);if(n!==Ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),a=Wr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $i(i.bytesValue).isEqual($i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?$u(o)===$u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ma(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(r1(o)!==r1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_r(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Fu(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;const n=Ks(t),r=Ks(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=qe(s.integerValue||s.doubleValue),l=qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return s1(t.timestampValue,e.timestampValue);case 4:return s1(Lu(t),Lu(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,o){const a=$i(s),l=$i(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=de(a[c],l[c]);if(h!==0)return h}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(qe(s.latitude),qe(o.latitude));return a!==0?a:de(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return o1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=de(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:o1(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_i.mapValue&&o===_i.mapValue)return 0;if(s===_i.mapValue)return 1;if(o===_i.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=de(l[d],h[d]);if(f!==0)return f;const m=Fi(a[l[d]],c[h[d]]);if(m!==0)return m}return de(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function s1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Wr(t),r=Wr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function o1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fi(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function ga(t){return Mg(t)}function Mg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Mg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Mg(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function Qs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vg(t){return!!t&&"integerValue"in t}function Uu(t){return!!t&&"arrayValue"in t}function a1(t){return!!t&&"nullValue"in t}function l1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}function kf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const LP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function w7(t){return"nullValue"in t?Mh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qs(Li.empty(),ne.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?kf(t)?LP:{mapValue:{}}:oe()}function E7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qs(Li.empty(),ne.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?LP:"mapValue"in t?kf(t)?{mapValue:{}}:_i:oe()}function u1(t,e){const n=Fi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function c1(t,e){const n=Fi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dt(Xl(this.value))}}function FP(t){const e=[];return lo(t.fields,(n,r)=>{const i=new He([n]);if(Vh(r)){const s=FP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Be(e,0,ue.min(),ue.min(),ue.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new Be(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Be(e,2,n,ue.min(),ue.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Be(e,3,n,ue.min(),ue.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.position=e,this.inclusive=n}}function h1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=Fi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function d1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function T7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{}class _e extends UP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S7(e,n,r):n==="array-contains"?new b7(e,r):n==="in"?new GP(e,r):n==="not-in"?new R7(e,r):n==="array-contains-any"?new P7(e,r):new _e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I7(e,r):new A7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fi(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Re extends UP{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Re(e,n)}matches(e){return va(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function va(t){return t.op==="and"}function $g(t){return t.op==="or"}function e_(t){return BP(t)&&va(t)}function BP(t){for(const e of t.filters)if(e instanceof Re)return!1;return!0}function Lg(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+ga(t.value);if(e_(t))return t.filters.map(e=>Lg(e)).join(",");{const e=t.filters.map(n=>Lg(n)).join(",");return`${t.op}(${e})`}}function jP(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jP(o,i.filters[a]),!0):!1}(t,e):void oe()}function zP(t,e){const n=t.filters.concat(e);return Re.create(n,t.op)}function qP(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${ga(n.value)}`}(t):t instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(qP).join(" ,")+"}"}(t):"Filter"}class S7 extends _e{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class I7 extends _e{constructor(e,n){super(e,"in",n),this.keys=WP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A7 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=WP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class b7 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uu(n)&&Fu(n.arrayValue,this.value)}}class GP extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fu(this.value.arrayValue,n)}}class R7 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fu(this.value.arrayValue,n)}}class P7 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Fg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D7(t,e,n,r,i,s,o)}function Ys(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ga(r)).join(",")),e.ue=n}return e.ue}function hc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d1(t.startAt,e.startAt)&&d1(t.endAt,e.endAt)}function Dd(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cd(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function f1(t,e,n){let r=Mh,i=!0;for(const s of Cd(t,e)){let o=Mh,a=!0;switch(s.op){case"<":case"<=":o=w7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Mh}u1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];u1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function p1(t,e,n){let r=_i,i=!0;for(const s of Cd(t,e)){let o=_i,a=!0;switch(s.op){case">=":case">":o=E7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=_i}c1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];c1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HP(t,e,n,r,i,s,o,a){return new Yr(t,e,n,r,i,s,o,a)}function qa(t){return new Yr(t)}function m1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function t_(t){return t.collectionGroup!==null}function Xo(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ce(He.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Bu(s,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new Bu(He.keyField(),r))}return e.ce}function Xt(t){const e=re(t);return e.le||(e.le=C7(e,Xo(t))),e.le}function C7(t,e){if(t.limitType==="F")return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Bu(i.field,s)});const n=t.endAt?new Ui(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ui(t.startAt.position,t.startAt.inclusive):null;return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ug(t,e){const n=t.filters.concat([e]);return new Yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xd(t,e,n){return new Yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dc(t,e){return hc(Xt(t),Xt(e))&&t.limitType===e.limitType}function KP(t){return`${Ys(Xt(t))}|lt:${t.limitType}`}function Do(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qP(i)).join(", ")}]`),cc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ga(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ga(i)).join(",")),`Target(${r})`}(Xt(t))}; limitType=${t.limitType})`}function fc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=h1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xo(r),i)||r.endAt&&!function(o,a,l){const c=h1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xo(r),i))}(t,e)}function QP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YP(t){return(e,n)=>{let r=!1;for(const i of Xo(t)){const s=x7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function x7(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Fi(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return MP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=new Ve(ne.comparator);function cn(){return k7}const XP=new Ve(ne.comparator);function Vl(...t){let e=XP;for(const n of t)e=e.insert(n.key,n);return e}function JP(t){let e=XP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cr(){return Jl()}function ZP(){return Jl()}function Jl(){return new es(t=>t.toString(),(t,e)=>t.isEqual(e))}const O7=new Ve(ne.comparator),N7=new Ce(ne.comparator);function pe(...t){let e=N7;for(const n of t)e=e.add(n);return e}const M7=new Ce(de);function n_(){return M7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function eD(t){return{integerValue:""+t}}function tD(t,e){return CP(e)?eD(e):r_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function V7(t,e,n){return t instanceof ya?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xf(s)&&(s=Zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xs?rD(t,e):t instanceof Js?iD(t,e):function(i,s){const o=nD(i,s),a=g1(o)+g1(i.Pe);return Vg(o)&&Vg(i.Pe)?eD(a):r_(i.serializer,a)}(t,e)}function $7(t,e,n){return t instanceof Xs?rD(t,e):t instanceof Js?iD(t,e):n}function nD(t,e){return t instanceof _a?function(r){return Vg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ya extends Of{}class Xs extends Of{constructor(e){super(),this.elements=e}}function rD(t,e){const n=sD(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class Js extends Of{constructor(e){super(),this.elements=e}}function iD(t,e){let n=sD(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class _a extends Of{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function g1(t){return qe(t.integerValue||t.doubleValue)}function sD(t){return Uu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.field=e,this.transform=n}}function L7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xs&&i instanceof Xs||r instanceof Js&&i instanceof Js?ma(r.elements,i.elements,_r):r instanceof _a&&i instanceof _a?_r(r.Pe,i.Pe):r instanceof ya&&i instanceof ya}(t.transform,e.transform)}class F7{constructor(e,n){this.version=e,this.transformResults=n}}class Ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nf{}function oD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ga(t.key,Ke.none()):new Wa(t.key,t.data,Ke.none());{const n=t.data,r=Dt.empty();let i=new Ce(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xr(t.key,r,new un(i.toArray()),Ke.none())}}function U7(t,e,n){t instanceof Wa?function(i,s,o){const a=i.value.clone(),l=y1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(i,s,o){if(!$h(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=y1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(aD(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zl(t,e,n,r){return t instanceof Wa?function(s,o,a,l){if(!$h(s.precondition,o))return a;const c=s.value.clone(),h=_1(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xr?function(s,o,a,l){if(!$h(s.precondition,o))return a;const c=_1(s.fieldTransforms,l,o),h=o.data;return h.setAll(aD(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return $h(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function B7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nD(r.transform,i||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function v1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ma(r,i,(s,o)=>L7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wa extends Nf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xr extends Nf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function y1(t,e,n){const r=new Map;le(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$7(o,a,n[i]))}return r}function _1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,V7(s,o,e))}return r}class Ga extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i_ extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&U7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=oD(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(n,r)=>v1(n,r))&&ma(this.baseMutations,e.baseMutations,(n,r)=>v1(n,r))}}class o_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length);let i=function(){return O7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new o_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Te;function lD(t){switch(t){default:return oe();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function uD(t){if(t===void 0)return ct("GRPC error has no .code"),F.UNKNOWN;switch(t){case dt.OK:return F.OK;case dt.CANCELLED:return F.CANCELLED;case dt.UNKNOWN:return F.UNKNOWN;case dt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case dt.INTERNAL:return F.INTERNAL;case dt.UNAVAILABLE:return F.UNAVAILABLE;case dt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case dt.NOT_FOUND:return F.NOT_FOUND;case dt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case dt.ABORTED:return F.ABORTED;case dt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case dt.DATA_LOSS:return F.DATA_LOSS;default:return oe()}}(Te=dt||(dt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=new ks([4294967295,4294967295],0);function w1(t){const e=cD().encode(t),n=new mP;return n.update(e),new Uint8Array(n.digest())}function E1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ks([n,r],0),new ks([i,s],0)]}class l_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ks.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ks.fromNumber(r)));return i.compare(z7)===1&&(i=new ks([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=w1(e),[r,i]=E1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new l_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=w1(e),[r,i]=E1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mc(ue.min(),i,new Ve(de),cn(),pe())}}class gc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class hD{constructor(e,n){this.targetId=e,this.me=n}}class dD{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class T1{constructor(){this.fe=0,this.ge=I1(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new gc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=I1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q7{constructor(e){this.Le=e,this.Be=new Map,this.ke=cn(),this.qe=S1(),this.Qe=new Ve(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Dd(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,Be.newNoDocument(o,ue.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=$i(r).toUint8Array()}catch(l){if(l instanceof VP)return Zn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new l_(o,i,s)}catch(l){return Zn(l instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Dd(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Be.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mc(e,n,this.Qe,this.ke,r);return this.ke=cn(),this.qe=S1(),this.Qe=new Ve(de),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new T1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ce(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function S1(){return new Ve(ne.comparator)}function I1(){return new Ve(ne.comparator)}const W7={asc:"ASCENDING",desc:"DESCENDING"},G7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H7={and:"AND",or:"OR"};class K7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bg(t,e){return t.useProto3Json||cc(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q7(t,e){return wa(t,e.toTimestamp())}function ht(t){return le(!!t),ue.fromTimestamp(function(n){const r=Wr(n);return new Qe(r.seconds,r.nanos)}(t))}function u_(t,e){return jg(t,e).canonicalString()}function jg(t,e){const n=function(i){return new ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pD(t){const e=ye.fromString(t);return le(ID(e)),e}function ju(t,e){return u_(t.databaseId,e.path)}function gr(t,e){const n=pD(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(vD(n))}function mD(t,e){return u_(t.databaseId,e)}function gD(t){const e=pD(t);return e.length===4?ye.emptyPath():vD(e)}function zg(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vD(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function A1(t,e,n){return{name:ju(t,e),fields:n.value.mapValue.fields}}function yD(t,e,n){const r=gr(t,e.name),i=ht(e.updateTime),s=e.createTime?ht(e.createTime):ue.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Be.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Y7(t,e){return"found"in e?function(r,i){le(!!i.found),i.found.name,i.found.updateTime;const s=gr(r,i.found.name),o=ht(i.found.updateTime),a=i.found.createTime?ht(i.found.createTime):ue.min(),l=new Dt({mapValue:{fields:i.found.fields}});return Be.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){le(!!i.missing),le(!!i.readTime);const s=gr(r,i.missing),o=ht(i.readTime);return Be.newNoDocument(s,o)}(t,e):oe()}function X7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(le(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(le(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:uD(c.code);return new H(h,c.message||"")}(o);n=new dD(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gr(t,r.document.name),s=ht(r.document.updateTime),o=r.document.createTime?ht(r.document.createTime):ue.min(),a=new Dt({mapValue:{fields:r.document.fields}}),l=Be.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Lh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gr(t,r.document),s=r.readTime?ht(r.readTime):ue.min(),o=Be.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gr(t,r.document),s=r.removedTargetIds||[];n=new Lh([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new j7(i,s),a=r.targetId;n=new hD(a,o)}}return n}function zu(t,e){let n;if(e instanceof Wa)n={update:A1(t,e.key,e.value)};else if(e instanceof Ga)n={delete:ju(t,e.key)};else if(e instanceof Xr)n={update:A1(t,e.key,e.data),updateMask:rQ(e.fieldMask)};else{if(!(e instanceof i_))return oe();n={verify:ju(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ya)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _a)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Q7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function qg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ke.updateTime(ht(s.updateTime)):s.exists!==void 0?Ke.exists(s.exists):Ke.none()}(e.currentDocument):Ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME"),l=new ya;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Xs(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Js(h)}else"increment"in a?l=new _a(o,a.increment):oe();const c=He.fromServerFormat(a.fieldPath);return new pc(c,l)}(t,i)):[];if(e.update){e.update.name;const i=gr(t,e.update.name),s=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new un(c.map(h=>He.fromServerFormat(h)))}(e.updateMask);return new Xr(i,s,o,n,r)}return new Wa(i,s,n,r)}if(e.delete){const i=gr(t,e.delete);return new Ga(i,n)}if(e.verify){const i=gr(t,e.verify);return new i_(i,n)}return oe()}function J7(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ht(i.updateTime):ht(s);return o.isEqual(ue.min())&&(o=ht(s)),new F7(o,i.transformResults||[])}(n,e))):[]}function _D(t,e){return{documents:[mD(t,e.path)]}}function wD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mD(t,i);const s=function(c){if(c.length!==0)return SD(Re.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Co(f.field),direction:eQ(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function ED(t){let e=gD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){le(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=TD(d);return f instanceof Re&&e_(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Bu(xo(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,cc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Ui(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Ui(m,f)}(n.endAt)),HP(e,i,o,s,a,"F",l,c)}function Z7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xo(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xo(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xo(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xo(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(xo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(r=>TD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function eQ(t){return W7[t]}function tQ(t){return G7[t]}function nQ(t){return H7[t]}function Co(t){return{fieldPath:t.canonicalString()}}function xo(t){return He.fromServerFormat(t.fieldPath)}function SD(t){return t instanceof _e?function(n){if(n.op==="=="){if(l1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(a1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(a1(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:tQ(n.op),value:n.value}}}(t):t instanceof Re?function(n){const r=n.getFilters().map(i=>SD(i));return r.length===1?r[0]:{compositeFilter:{op:nQ(n.op),filters:r}}}(t):oe()}function rQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ID(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.ct=e}}function iQ(t,e){let n;if(e.document)n=yD(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ne.fromSegments(e.noDocument.path),i=eo(e.noDocument.readTime);n=Be.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{const r=ne.fromSegments(e.unknownDocument.path),i=eo(e.unknownDocument.version);n=Be.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Qe(i[0],i[1]);return ue.fromTimestamp(s)}(e.readTime)),n}function b1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ju(s,o.key),fields:o.data.value.mapValue.fields,updateTime:wa(s,o.version.toTimestamp()),createTime:wa(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zs(e.version)};else{if(!e.isUnknownDocument())return oe();r.unknownDocument={path:n.path.toArray(),version:Zs(e.version)}}return r}function kd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eo(t){const e=new Qe(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function _s(t,e){const n=(e.baseMutations||[]).map(s=>qg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>qg(t.ct,s)),i=Qe.fromMillis(e.localWriteTimeMs);return new s_(e.batchId,i,n,r)}function Ll(t){const e=eo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?eo(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return le(s.documents.length===1),Xt(qa(gD(s.documents[0])))}(t.query):function(s){return Xt(ED(s))}(t.query),new Nr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function bD(t,e){const n=Zs(e.snapshotVersion),r=Zs(e.lastLimboFreeSnapshotVersion);let i;i=Dd(e.target)?_D(t.ct,e.target):wD(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ys(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function c_(t){const e=ED({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xd(e,e.limit,"L"):e}function hm(t,e){return new a_(e.largestBatchId,qg(t.ct,e.overlayMutation))}function R1(t,e){const n=e.path.lastSegment();return[t,Yt(e.path.popLast()),n]}function P1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Zs(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{getBundleMetadata(e,n){return D1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:eo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return D1(e).put(function(i){return{bundleId:i.id,createTime:Zs(ht(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return C1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:c_(s.bundledQuery),readTime:eo(s.readTime)}}(r)})}saveNamedQuery(e,n){return C1(e).put(function(i){return{name:i.name,readTime:Zs(ht(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function D1(t){return vt(t,"bundles")}function C1(t){return vt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Mf(e,r)}getOverlay(e,n){return Il(e).get(R1(this.userId,n)).next(r=>r?hm(this.serializer,r):null)}getOverlays(e,n){const r=cr();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new a_(n,o);i.push(this.ht(e,a))}),$.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Yt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Il(e).j("collectionPathOverlayIndex",a))}),$.waitFor(s)}getOverlaysForCollection(e,n,r){const i=cr(),s=Yt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Il(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=hm(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=cr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Il(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const d=hm(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return Il(e).put(function(i,s,o){const[a,l,c]=R1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:zu(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Il(t){return vt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{Pt(e){return vt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(qe(e.integerValue));else if("doubleValue"in e){const r=qe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),$u(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Wr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt($i(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?$P(e)?this.dt(n,Number.MAX_SAFE_INTEGER):kf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):oe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(qe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ne.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ws.vt=new ws;function aQ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function x1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=aQ(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class lQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=x1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=x1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class uQ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class cQ{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Al{constructor(){this.jt=new lQ,this.Ht=new uQ(this.jt),this.Jt=new cQ(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Es(this.indexId,this.documentKey,this.arrayValue,r)}}function ai(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=k1(t.arrayValue,e.arrayValue),n!==0?n:(n=k1(t.directionalValue,e.directionalValue),n!==0?n:ne.comparator(t.documentKey,e.documentKey)))}function k1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.Xt=new Ce((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(le(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Og(e);if(n!==void 0&&!this.sn(n))return!1;const r=ms(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ce(He.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Oh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Oh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Oh(r.field,r.dir==="asc"?0:1)));return new Pd(Pd.UNKNOWN_ID,this.collectionId,n,Vu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){var e,n;if(le(t instanceof _e||t instanceof Re),t instanceof _e){if(t instanceof GP){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return Re.create(i,"or")}return t}const r=t.filters.map(i=>RD(i));return Re.create(r,t.op)}function hQ(t){if(t.getFilters().length===0)return[];const e=Hg(RD(t));return le(PD(e)),Wg(e)||Gg(e)?[e]:e.getFilters()}function Wg(t){return t instanceof _e}function Gg(t){return t instanceof Re&&e_(t)}function PD(t){return Wg(t)||Gg(t)||function(n){if(n instanceof Re&&$g(n)){for(const r of n.getFilters())if(!Wg(r)&&!Gg(r))return!1;return!0}return!1}(t)}function Hg(t){if(le(t instanceof _e||t instanceof Re),t instanceof _e)return t;if(t.filters.length===1)return Hg(t.filters[0]);const e=t.filters.map(r=>Hg(r));let n=Re.create(e,t.op);return n=Od(n),PD(n)?n:(le(n instanceof Re),le(va(n)),le(n.filters.length>1),n.filters.reduce((r,i)=>h_(r,i)))}function h_(t,e){let n;return le(t instanceof _e||t instanceof Re),le(e instanceof _e||e instanceof Re),n=t instanceof _e?e instanceof _e?function(i,s){return Re.create([i,s],"and")}(t,e):N1(t,e):e instanceof _e?N1(e,t):function(i,s){if(le(i.filters.length>0&&s.filters.length>0),va(i)&&va(s))return zP(i,s.getFilters());const o=$g(i)?i:s,a=$g(i)?s:i,l=o.filters.map(c=>h_(c,a));return Re.create(l,"or")}(t,e),Od(n)}function N1(t,e){if(va(e))return zP(e,t.getFilters());{const n=e.filters.map(r=>h_(t,r));return Re.create(n,"or")}}function Od(t){if(le(t instanceof _e||t instanceof Re),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Od(e[0]);if(BP(t))return t;const n=e.map(i=>Od(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Re&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(){this.un=new d_}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(bn.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(bn.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class d_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(ye.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Uint8Array(0);class fQ{constructor(e,n){this.databaseId=n,this.cn=new d_,this.ln=new es(r=>Ys(r),(r,i)=>hc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Yt(i)};return M1(e).put(s)}return $.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[IP(n),""],!1,!0);return M1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ur(o.parent))}return r})}addFieldIndex(e,n){const r=bl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ao(e);return s.next(a=>{o.put(P1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=bl(e),i=Ao(e),s=Io(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=bl(e),r=Io(e),i=Ao(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return $.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new O1(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Io(e);let i=!0;const s=new Map;return $.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe();const a=[];return $.forEach(s,(l,c)=>{K("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${Ys(n)}`);const h=function(T,P){const x=Og(P);if(x===void 0)return null;for(const k of Cd(T,x.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null}(c,l),d=function(T,P){const x=new Map;for(const k of ms(P))for(const S of Cd(T,k.fieldPath))switch(S.op){case"==":case"in":x.set(k.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return x.set(k.fieldPath.canonicalString(),S.value),Array.from(x.values())}return null}(c,l),f=function(T,P){const x=[];let k=!0;for(const S of ms(P)){const E=S.kind===0?f1(T,S.fieldPath,T.startAt):p1(T,S.fieldPath,T.startAt);x.push(E.value),k&&(k=E.inclusive)}return new Ui(x,k)}(c,l),m=function(T,P){const x=[];let k=!0;for(const S of ms(P)){const E=S.kind===0?p1(T,S.fieldPath,T.endAt):f1(T,S.fieldPath,T.endAt);x.push(E.value),k&&(k=E.inclusive)}return new Ui(x,k)}(c,l),y=this.In(l,c,f),v=this.In(l,c,m),I=this.Tn(l,c,d),w=this.En(l.indexId,h,y,f.inclusive,v,m.inclusive,I);return $.forEach(w,_=>r.G(_,n.limit).next(T=>{T.forEach(P=>{const x=ne.fromSegments(P.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return $.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=hQ(Re.create(e.filters,"and")).map(r=>Fg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.dn(n[d/c]):lh,m=this.An(e,f,r[d%c],i),y=this.Rn(e,f,s[d%c],o),v=a.map(I=>this.An(e,f,I,!0));h.push(...this.createRange(m,y,v))}return h}An(e,n,r,i){const s=new Es(e,ne.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Es(e,ne.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new O1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return $.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ce(He.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Al;for(const i of ms(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ws.vt.It(s,o)}return r.zt()}dn(e){const n=new Al;return ws.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Al;return ws.vt.It(Qs(this.databaseId,n),r.Yt(function(s){const o=ms(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Al);let s=0;for(const o of ms(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Uu(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);ws.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Al;l.seed(a.zt()),ws.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=bl(e),i=Ao(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return $.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const f=d?new Vu(d.sequenceNumber,new bn(eo(d.readTime),new ne(ur(d.documentKey)),d.largestBatchId)):Vu.empty(),m=h.fields.map(([y,v])=>new Oh(He.fromServerFormat(y),v));return new Pd(h.indexId,h.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:de(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=bl(e),s=Ao(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,l=>s.put(P1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),$.forEach(a,l=>this.wn(e,i,l).next(c=>{const h=this.Sn(s,l);return c.isEqual(h)?$.resolve():this.bn(e,s,l,c,h)}))))})}Dn(e,n,r,i){return Io(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Io(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Io(e);let s=new Ce(ai);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Es(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ce(ai);const i=this.Vn(n,e);if(i==null)return r;const s=Og(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Uu(o))for(const a of o.arrayValue.values||[])r=r.add(new Es(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Es(n.indexId,e.key,lh,i));return r}bn(e,n,r,i,s){K("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,h,d,f){const m=l.getIterator(),y=c.getIterator();let v=So(m),I=So(y);for(;v||I;){let w=!1,_=!1;if(v&&I){const T=h(v,I);T<0?_=!0:T>0&&(w=!0)}else v!=null?_=!0:w=!0;w?(d(I),I=So(y)):_?(f(v),v=So(m)):(v=So(m),I=So(y))}}(i,s,ai,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),$.waitFor(o)}yn(e){let n=1;return Ao(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ai(o,a)).filter((o,a,l)=>!a||ai(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ai(o,e),l=ai(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return ai(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(V1)}getMinOffset(e,n){return $.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||oe())).next(V1)}}function M1(t){return vt(t,"collectionParents")}function Io(t){return vt(t,"indexEntries")}function bl(t){return vt(t,"indexConfiguration")}function Ao(t){return vt(t,"indexState")}function V1(t){le(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Yy(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,d,f)=>(a++,f.delete()));s.push(l.next(()=>{le(a===1)}));const c=[];for(const h of n.mutations){const d=xP(e,h.key.path,n.batchId);s.push(i.delete(d)),c.push(h.key)}return $.waitFor(s).next(()=>c)}function Nd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Vf{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){le(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Vf(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ko(e),o=li(e);return o.add({}).next(a=>{le(typeof a=="number");const l=new s_(a,n,r,i),c=function(m,y,v){const I=v.baseMutations.map(_=>zu(m.ct,_)),w=v.mutations.map(_=>zu(m.ct,_));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:I,mutations:w}}(this.serializer,this.userId,l),h=[];let d=new Ce((f,m)=>de(f.canonicalString(),m.canonicalString()));for(const f of i){const m=xP(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),h.push(o.put(c)),h.push(s.put(m,Z8))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),$.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return li(e).get(n).next(r=>r?(le(r.userId===this.userId),_s(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?$.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return li(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(le(a.batchId>=r),s=_s(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return li(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).U("userMutationsIndex",n).next(r=>r.map(i=>_s(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Nh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ko(e).J({range:i},(o,a,l)=>{const[c,h,d]=o,f=ur(h);if(c===this.userId&&n.path.isEqual(f))return li(e).get(d).next(m=>{if(!m)throw oe();le(m.userId===this.userId),s.push(_s(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(de);const i=[];return n.forEach(s=>{const o=Nh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ko(e).J({range:a},(c,h,d)=>{const[f,m,y]=c,v=ur(m);f===this.userId&&s.path.isEqual(v)?r=r.add(y):d.done()});i.push(l)}),$.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Nh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ce(de);return ko(e).J({range:o},(l,c,h)=>{const[d,f,m]=l,y=ur(f);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(li(e).get(s).next(o=>{if(o===null)throw oe();le(o.userId===this.userId),r.push(_s(this.serializer,o))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return DD(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ko(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ur(s[1]);i.push(l)}else a.done()}).next(()=>{le(i.length===0)})})}containsKey(e,n){return CD(e,this.userId,n)}Nn(e){return xD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function CD(t,e,n){const r=Nh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ko(t).J({range:s,H:!0},(a,l,c)=>{const[h,d,f]=a;h===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function li(t){return vt(t,"mutations")}function ko(t){return vt(t,"documentMutations")}function xD(t){return vt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new to(0)}static kn(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new to(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ue.fromTimestamp(new Qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bo(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(le(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return bo(e).J((o,a)=>{const l=Ll(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>$.waitFor(s)).next(()=>i)}forEachTarget(e,n){return bo(e).J((r,i)=>{const s=Ll(i);n(s)})}qn(e){return L1(e).get("targetGlobalKey").next(n=>(le(n!==null),n))}Qn(e,n){return L1(e).put("targetGlobalKey",n)}Kn(e,n){return bo(e).put(bD(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ys(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return bo(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Ll(a);hc(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=pi(e);return n.forEach(o=>{const a=Yt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(i)}removeMatchingKeys(e,n,r){const i=pi(e);return $.forEach(n,s=>{const o=Yt(s.path);return $.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=pi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=pi(e);let s=pe();return i.J({range:r,H:!0},(o,a,l)=>{const c=ur(o[1]),h=new ne(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Yt(n.path),i=IDBKeyRange.bound([r],[IP(r)],!1,!0);let s=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return bo(e).get(n).next(r=>r?Ll(r):null)}}function bo(t){return vt(t,"targets")}function L1(t){return vt(t,"targetGlobal")}function pi(t){return vt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class mQ{constructor(e){this.Un=e,this.buffer=new Ce(F1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();F1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zi(n)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ji(n)}await this.Hn(3e5)})}}class vQ{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(ln.oe);const r=new mQ(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve($1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Po()<=we.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function yQ(t,e){return new vQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n){this.db=e,this.garbageCollector=yQ(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return uh(e,r)}removeReference(e,n,r){return uh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uh(e,n)}nr(e,n){return function(i,s){let o=!1;return xD(i).Y(a=>CD(i,a,s).next(l=>(l&&(o=!0),$.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),pi(e).delete(function(d){return[0,Yt(d.path)]}(o))))});i.push(l)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uh(e,n)}tr(e,n){const r=pi(e);let i,s=ln.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==ln.oe&&n(new ne(ur(i)),s),s=c,i=l):s=ln.oe}).next(()=>{s!==ln.oe&&n(new ne(ur(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uh(t,e){return pi(t).put(function(r,i){return{targetId:0,path:Yt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.changes=new es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ls(e).put(r)}removeEntry(e,n,r){return ls(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],kd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Be.newInvalidDocument(n);return ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rl(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Be.newInvalidDocument(n)};return ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rl(n))},(i,s)=>{r={document:this.ir(n,s),size:Nd(s)}}).next(()=>r)}getEntries(e,n){let r=cn();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=cn(),i=new Ve(ne.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Nd(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return $.resolve();let i=new Ce(j1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Rl(i.first()),Rl(i.last())),o=i.getIterator();let a=o.getNext();return ls(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const d=ne.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&j1(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(Rl(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),kd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ls(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=cn();for(const d of c){const f=this.ir(ne.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(fc(n,f)||i.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=cn();const o=B1(n,r),a=B1(n,bn.max());return ls(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const d=this.ir(ne.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new EQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return U1(e).get("remoteDocumentGlobalKey").next(n=>(le(!!n),n))}rr(e,n){return U1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=iQ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return Be.newInvalidDocument(e)}}function OD(t){return new wQ(t)}class EQ extends kD{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new es(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ce((s,o)=>de(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=b1(this.cr.serializer,o);i=i.add(s.path.popLast());const c=Nd(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=b1(this.cr.serializer,o.convertToNoDocument(ue.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function U1(t){return vt(t,"remoteDocumentGlobal")}function ls(t){return vt(t,"remoteDocumentsV14")}function Rl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function B1(t,e){const n=e.documentKey.path.toArray();return[t,kd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function j1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=de(n[s],r[s]),i)return i;return i=de(n.length,r.length),i||(i=de(n[n.length-2],r[r.length-2]),i||de(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zl(r.mutation,i,un.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=cr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=cn();const o=Jl(),a=function(){return Jl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Xr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Zl(h.mutation,c,h.mutation.getFieldMask(),Qe.now())):o.set(c.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new TQ(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Jl();let i=new Ve((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||un.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=ZP();h.forEach(f=>{if(!s.has(f)){const m=oD(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(cr());let a=-1,l=s;return o.next(c=>$.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pe())).next(h=>({batchId:a,changes:JP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Vl();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const c=function(d,f){return new Yr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Be.newInvalidDocument(h)))});let a=Vl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Zl(h.mutation,c,un.empty(),Qe.now()),fc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ht(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:c_(i.bundledQuery),readTime:ht(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(){this.overlays=new Ve(ne.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cr();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=cr(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=cr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=cr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return $.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new a_(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.Tr=new Ce(yt.Er),this.dr=new Ce(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new ye([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new ye([])),r=new yt(n,e),i=new yt(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ce(yt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(de);return n.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new yt(new ne(s),0);let a=new Ce(de);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),$.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),i=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(e){this.Mr=e,this.docs=function(){return new Ve(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(e,n){let r=cn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Be.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=cn();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Yy(bP(h),r)<=0||(i.has(h.key)||fc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PQ(this)}getSize(e){return $.resolve(this.size)}}class PQ extends kD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e){this.persistence=e,this.Nr=new es(n=>Ys(n),hc),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f_,this.targetCount=0,this.kr=to.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new to(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ln(0),this.Kr=!1,this.Kr=!0,this.$r=new AQ,this.referenceDelegate=e(this),this.Ur=new DQ(this),this.indexManager=new dQ,this.remoteDocumentCache=function(i){return new RQ(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new AD(n),this.Gr=new SQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bQ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new CQ(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CQ extends PP{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new f_,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=ne.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Cf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n1,{unique:!0}),l.createObjectStore("documentMutations")}(e),z1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),z1(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n1,{unique:!0});const d=c.store("mutations"),f=h.map(m=>d.put(m));return $.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:h7});c.createIndex("collectionPathOverlayIndex",d7,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",f7,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:e7});c.createIndex("documentKeyIndex",t7),c.createIndex("collectionGroupIndex",n7)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:a7}).createIndex("sequenceNumberIndex",l7,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:u7}).createIndex("documentKeyIndex",c7,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Nd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>$.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>$.forEach(a,l=>{le(l.userId===s.userId);const c=_s(this.serializer,l);return DD(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ye(o),c=function(d){return[0,Yt(d)]}(l);s.push(n.get(c).next(h=>h?$.resolve():(d=>n.put({targetId:0,path:Yt(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>$.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:o7});const r=n.store("collectionParents"),i=new d_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Yt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ye(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=ur(a);return s(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Ll(i),o=bD(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new ne(ye.fromString(d.document.name).popFirst(5)):d.noDocument?ne.fromSegments(d.noDocument.path):d.unknownDocument?ne.fromSegments(d.unknownDocument.path):oe()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>$.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=OD(this.serializer),s=new MD($f.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=(c=a.get(l.userId))!==null&&c!==void 0?c:pe();_s(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),$.forEach(a,(l,c)=>{const h=new wt(c),d=Mf.lt(this.serializer,h),f=s.getIndexManager(h),m=Vf.lt(h,this.serializer,f,s.referenceDelegate);return new ND(i,m,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Ng(n,ln.oe),l).next()})})}}function z1(t){t.createObjectStore("targetDocuments",{keyPath:i7}).createIndex("documentTargetsIndex",s7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",r7,{unique:!0}),t.createObjectStore("targetGlobal")}const dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class p_{constructor(e,n,r,i,s,o,a,l,c,h,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=h,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!p_.D())throw new H(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _Q(this,i),this.Ai=n+"main",this.serializer=new AD(l),this.Ri=new mr(this.Ai,this.hi,new xQ(this.serializer)),this.$r=new oQ,this.Ur=new pQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OD(this.serializer),this.Gr=new sQ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(F.FAILED_PRECONDITION,dm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ch(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Zi(e))return K("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Pl(e).get("owner").next(n=>$.resolve(this.vi(n)))}Ci(e){return ch(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=vt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return $.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):Pl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new H(F.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ch(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ng(e,ln.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ch(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Vf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Mf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?g7:l===16?m7:l===15?Jy:l===14?NP:l===13?OP:l===12?p7:l===11?kP:void oe()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Ng(a,this.Qr?this.Qr.next():ln.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new H(F.FAILED_PRECONDITION,RP);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Pl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(F.FAILED_PRECONDITION,dm)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pl(e).put("owner",n)}static D(){return mr.D()}bi(e){const n=Pl(e);return n.get("owner").next(r=>this.vi(r)?(K("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;tP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return K("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ct("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pl(t){return vt(t,"owner")}function ch(t){return vt(t,"clientMetadata")}function m_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new g_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tP()?8:DP(bd())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new kQ;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Po()<=we.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Do(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Po()<=we.DEBUG&&K("QueryEngine","Query:",Do(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Po()<=we.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Do(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):$.resolve())}Yi(e,n){if(m1(n))return $.resolve(null);let r=Xt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xd(n,null,"F"),r=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,xd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return m1(n)||i.isEqual(ue.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?$.resolve(null):(Po()<=we.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Do(n)),this.rs(e,o,n,AP(i,-1)).next(a=>a))})}ts(e,n){let r=new Ce(YP(e));return n.forEach((i,s)=>{fc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Po()<=we.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Do(n)),this.Ji.getDocumentsMatchingQuery(e,n,bn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ve(de),this._s=new es(s=>Ys(s),hc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ND(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $D(t,e,n,r){return new OQ(t,e,n,r)}async function LD(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function NQ(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=$.resolve();return f.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(v=>{const I=c.docVersions.get(y);le(I!==null),v.version.compareTo(I)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FD(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function MQ(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ot.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(v,I,w){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=cn(),c=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(UD(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function UD(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=cn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function VQ(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ea(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ta(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Zi(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Md(t,e,n){const r=re(t);let i=ue.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=re(l),f=d._s.get(h);return f!==void 0?$.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,Xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:pe())).next(a=>(zD(r,QP(e),a),{documents:a,Ts:s})))}function BD(t,e){const n=re(t),r=re(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function jD(t,e){const n=re(t),r=n.us.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,AP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zD(n,e,i),i))}function zD(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function $Q(t,e,n,r){const i=re(t);let s=pe(),o=cn();for(const c of n){const h=e.Es(c.metadata.name);c.document&&(s=s.add(h));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(h,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Ea(i,function(h){return Xt(qa(ye.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>UD(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.Ps,h.Is)).next(()=>h.Ps)))}async function LQ(t,e,n=pe()){const r=await Ea(t,Xt(c_(e.bundledQuery))),i=re(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ht(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(ot.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function q1(t,e){return`firestore_clients_${t}_${e}`}function W1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fm(t,e){return`firestore_targets_${t}_${e}`}class Vd{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new Vd(e,n,i.state,s):(ct("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new eu(e,r.state,i):(ct("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $d{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=n_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=CP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new $d(e,s):(ct("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class v_{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new v_(n.clientId,n.onlineState):(ct("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kg{constructor(){this.activeTargetIds=n_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pm{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ve(de),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=q1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Kg),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(q1(this.persistenceKey,r));if(i){const s=$d.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(fm(this.persistenceKey,e));if(i){const s=eu.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fm(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return K("SharedClientState","READ",e,n),n}setItem(e,n){K("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){K("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(K("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=ln.oe;if(s!=null)try{const a=JSON.parse(s);le(typeof a=="number"),o=a}catch(a){ct("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==ln.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Vd(this.currentUser,e,n,r),s=W1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=W1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=fm(this.persistenceKey,e),s=new eu(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return $d.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Vd.Rs(new wt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return eu.Rs(i,n)}Ls(e){return v_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);K("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=n_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class qD{constructor(){this.so=new Kg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function mm(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class jQ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=mm(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Zn("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=UQ[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=mm();return new Promise((o,a)=>{const l=new gP;l.setWithCredentials(!0),l.listenOnce(yP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kh.NO_ERROR:const h=l.getResponseJson();K(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case kh.TIMEOUT:K(Lt,`RPC '${e}' ${s} timed out`),a(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const d=l.getStatus();if(K(Lt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(m.status);a(new H(y,m.message))}else a(new H(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(F.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{K(Lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(Lt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=mm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EP(),a=wP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new vP({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(Lt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const y=new BQ({Io:I=>{m?K(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(f||(K(Lt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),K(Lt,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},To:()=>d.close()}),v=(I,w,_)=>{I.listen(w,T=>{try{_(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(d,Ml.EventType.OPEN,()=>{m||(K(Lt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(d,Ml.EventType.CLOSE,()=>{m||(m=!0,K(Lt,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(d,Ml.EventType.ERROR,I=>{m||(m=!0,Zn(Lt,`RPC '${e}' stream ${i} transport errored:`,I),y.So(new H(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ml.EventType.MESSAGE,I=>{var w;if(!m){const _=I.data[0];le(!!_);const T=_,P=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(P){K(Lt,`RPC '${e}' stream ${i} received error:`,P);const x=P.status;let k=function(b){const A=dt[b];if(A!==void 0)return uD(A)}(x),S=P.message;k===void 0&&(k=F.INTERNAL,S="Unknown error status: "+x+" with message "+P.message),m=!0,y.So(new H(k,S)),d.close()}else K(Lt,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),v(a,_P.STAT_EVENT,I=>{I.stat===kg.PROXY?K(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===kg.NOPROXY&&K(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){return typeof window<"u"?window:null}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){return new K7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new y_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zQ extends GD{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=X7(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?ht(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Dd(l)?{documents:_D(s,l)}:{query:wD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fD(s,o.resumeToken);const c=Bg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=wa(s,o.snapshotVersion.toTimestamp());const c=Bg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Z7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zg(this.serializer),n.removeTarget=e,this.a_(n)}}class qQ extends GD{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=J7(e.writeResults,e.commitTime),r=ht(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,jg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,jg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ct(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ts(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=re(l);c.L_.add(4),await Ha(c),c.q_.set("Unknown"),c.L_.delete(4),await yc(c)}(this))})}),this.q_=new GQ(r,i)}}async function yc(t){if(ts(t))for(const e of t.B_)await e(!0)}async function Ha(t){for(const e of t.B_)await e(!1)}function Lf(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),E_(n)?w_(n):Qa(n).r_()&&__(n,e))}function Sa(t,e){const n=re(t),r=Qa(n);n.N_.delete(e),r.r_()&&HD(n,e),n.N_.size===0&&(r.r_()?r.o_():ts(n)&&n.q_.set("Unknown"))}function __(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).A_(e)}function HD(t,e){t.Q_.xe(e),Qa(t).R_(e)}function w_(t){t.Q_=new q7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.q_.v_()}function E_(t){return ts(t)&&!Qa(t).n_()&&t.N_.size>0}function ts(t){return re(t).L_.size===0}function KD(t){t.Q_=void 0}async function KQ(t){t.q_.set("Online")}async function QQ(t){t.N_.forEach((e,n)=>{__(t,e)})}async function YQ(t,e){KD(t),E_(t)?(t.q_.M_(e),w_(t)):t.q_.set("Unknown")}async function XQ(t,e,n){if(t.q_.set("Online"),e instanceof dD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ld(t,r)}else if(e instanceof Lh?t.Q_.Ke(e):e instanceof hD?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await FD(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),HD(s,l);const d=new Nr(h.target,l,c,h.sequenceNumber);__(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ld(t,r)}}async function Ld(t,e,n){if(!Zi(e))throw e;t.L_.add(1),await Ha(t),t.q_.set("Offline"),n||(n=()=>FD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yc(t)})}function QD(t,e){return e().catch(n=>Ld(t,n,e))}async function Ka(t){const e=re(t),n=Bi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JQ(e);)try{const i=await VQ(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ZQ(e,i)}catch(i){await Ld(e,i)}YD(e)&&XD(e)}function JQ(t){return ts(t)&&t.O_.length<10}function ZQ(t,e){t.O_.push(e);const n=Bi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function YD(t){return ts(t)&&!Bi(t).n_()&&t.O_.length>0}function XD(t){Bi(t).start()}async function eY(t){Bi(t).p_()}async function tY(t){const e=Bi(t);for(const n of t.O_)e.m_(n.mutations)}async function nY(t,e,n){const r=t.O_.shift(),i=o_.from(r,e,n);await QD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ka(t)}async function rY(t,e){e&&Bi(t).V_&&await async function(r,i){if(function(o){return lD(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();Bi(r).s_(),await QD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ka(r)}}(t,e),YD(t)&&XD(t)}async function H1(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ts(n);n.L_.add(3),await Ha(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yc(n)}async function Qg(t,e){const n=re(t);e?(n.L_.delete(2),await yc(n)):e||(n.L_.add(2),await Ha(n),n.q_.set("Unknown"))}function Qa(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new zQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:KQ.bind(null,t),Ro:QQ.bind(null,t),mo:YQ.bind(null,t),d_:XQ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),E_(t)?w_(t):t.q_.set("Unknown")):(await t.K_.stop(),KD(t))})),t.K_}function Bi(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new qQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eY.bind(null,t),mo:rY.bind(null,t),f_:tY.bind(null,t),g_:nY.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ka(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new T_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ya(t,e){if(ct("AsyncQueue",`${e}: ${t}`),Zi(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Vl(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.W_=new Ve(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ia{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ia(e,n,Jo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sY{constructor(){this.queries=Q1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=Q1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function Q1(){return new es(t=>KP(t),dc)}async function S_(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new iY,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ya(o,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&A_(n)}async function I_(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oY(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&A_(n)}function aY(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function A_(t){t.Y_.forEach(e=>{e.next()})}var Yg,Y1;(Y1=Yg||(Yg={})).ea="default",Y1.Cache="cache";class b_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.serializer=e}Es(e){return gr(this.serializer,e)}ds(e){return e.metadata.exists?yD(this.serializer,e.document,!1):Be.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ht(e)}}class uY{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JD(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=ye.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new X1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||pe()).add(s);n.set(o,a)}}return n}async complete(){const e=await $Q(this.localStore,new X1(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await LQ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function JD(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.key=e}}class eC{constructor(e){this.key=e}}class tC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=YP(e),this.Ra=new Jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new K1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=fc(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),I=!0):this.ga(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return v(m)-v(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ia(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new K1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new eC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ZD(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hY{constructor(e){this.key=e,this.va=!1}}class dY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new es(a=>KP(a),dc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(ne.comparator),this.Na=new Map,this.La=new f_,this.Ba={},this.ka=new Map,this.qa=to.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fY(t,e,n=!0){const r=Ff(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await nC(r,e,n,!0),i}async function pY(t,e){const n=Ff(t);await nC(n,e,!0,!1)}async function nC(t,e,n,r){const i=await Ea(t.localStore,Xt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await R_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Lf(t.remoteStore,i),a}async function R_(t,e,n,r,i){t.Ka=(d,f,m)=>async function(v,I,w,_){let T=I.view.ma(w);T.ns&&(T=await Md(v.localStore,I.query,!1).then(({documents:S})=>I.view.ma(S,T)));const P=_&&_.targetChanges.get(I.targetId),x=_&&_.targetMismatches.get(I.targetId)!=null,k=I.view.applyChanges(T,v.isPrimaryClient,P,x);return Xg(v,I.targetId,k.wa),k.snapshot}(t,d,f,m);const s=await Md(t.localStore,e,!0),o=new tC(e,s.Ts),a=o.ma(s.documents),l=gc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Xg(t,n,c.wa);const h=new cY(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function mY(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!dc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ta(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sa(r.remoteStore,i.targetId),Aa(r,i.targetId)}).catch(Ji)):(Aa(r,i.targetId),await Ta(r.localStore,i.targetId,!0))}async function gY(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sa(n.remoteStore,r.targetId))}async function vY(t,e,n){const r=x_(t);try{const i=await function(o,a){const l=re(o),c=Qe.now(),h=a.reduce((m,y)=>m.add(y.key),pe());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=cn(),v=pe();return l.cs.getEntries(m,h).next(I=>{y=I,y.forEach((w,_)=>{_.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(I=>{d=I;const w=[];for(const _ of a){const T=B7(_,d.get(_.key).overlayedDocument);T!=null&&w.push(new Xr(_.key,T,FP(T.value.mapValue),Ke.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(I=>{f=I;const w=I.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,w)})}).then(()=>({batchId:f.batchId,changes:JP(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(de)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Jr(r,i.changes),await Ka(r.remoteStore)}catch(i){const s=Ya(i,"Failed to persist write");n.reject(s)}}async function rC(t,e){const n=re(t);try{const r=await MQ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?le(o.va):i.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Jr(n,r,e)}catch(r){await Ji(r)}}function J1(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&A_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yY(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ve(ne.comparator);o=o.insert(s,Be.newNoDocument(s,ue.min()));const a=pe().add(s),l=new mc(ue.min(),new Map,new Ve(de),o,a);await rC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),C_(r)}else await Ta(r.localStore,e,!1).then(()=>Aa(r,e,n)).catch(Ji)}async function _Y(t,e){const n=re(t),r=e.batch.batchId;try{const i=await NQ(n.localStore,e);D_(n,r,null),P_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jr(n,i)}catch(i){await Ji(i)}}async function wY(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(le(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);D_(r,e,n),P_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jr(r,i)}catch(i){await Ji(i)}}async function EY(t,e){const n=re(t);ts(n.remoteStore)||K("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Ya(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function P_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function D_(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||iC(t,r)})}function iC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),C_(t))}function Xg(t,e,n){for(const r of n)r instanceof ZD?(t.La.addReference(r.key,e),TY(t,r)):r instanceof eC?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||iC(t,r.key)):oe()}function TY(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),C_(t))}function C_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(ye.fromString(e)),r=t.qa.next();t.Na.set(r,new hY(n)),t.Oa=t.Oa.insert(n,r),Lf(t.remoteStore,new Nr(Xt(qa(n.path)),r,"TargetPurposeLimboResolution",ln.oe))}}async function Jr(t,e,n){const r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=g_.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,f=>$.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>$.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Zi(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(f,v)}}}(r.localStore,s))}async function SY(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await LD(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new H(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jr(n,r.hs)}}function IY(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function AY(t,e){const n=re(t),r=await Md(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Xg(n,e.targetId,i.wa),i}async function bY(t,e){const n=re(t);return jD(n.localStore,e).then(r=>Jr(n,r))}async function RY(t,e,n,r){const i=re(t),s=await function(a,l){const c=re(a),h=re(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.Mn(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):$.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Ka(i.remoteStore):n==="acknowledged"||n==="rejected"?(D_(i,e,r||null),P_(i,e),function(a,l){re(re(a).mutationQueue).On(l)}(i.localStore,e)):oe(),await Jr(i,s)):K("SyncEngine","Cannot apply mutation batch with id: "+e)}async function PY(t,e){const n=re(t);if(Ff(n),x_(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Z1(n,r.toArray());n.Qa=!0,await Qg(n.remoteStore,!0);for(const s of i)Lf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Aa(n,o),Ta(n.localStore,o,!0))),Sa(n.remoteStore,o)}),await i,await Z1(n,r),function(o){const a=re(o);a.Na.forEach((l,c)=>{Sa(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ve(ne.comparator)}(n),n.Qa=!1,await Qg(n.remoteStore,!1)}}async function Z1(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Ea(r.localStore,Xt(l[0]));for(const c of l){const h=r.Fa.get(c),d=await AY(r,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await BD(r.localStore,o);a=await Ea(r.localStore,c),await R_(r,sC(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function sC(t){return HP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DY(t){return function(n){return re(re(n).persistence).Qi()}(re(t).localStore)}async function CY(t,e,n,r){const i=re(t);if(i.Qa)return void K("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await jD(i.localStore,QP(s[0])),a=mc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);await Jr(i,o,a);break}case"rejected":await Ta(i.localStore,e,!0),Aa(i,e,r);break;default:oe()}}async function xY(t,e,n){const r=Ff(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){K("SyncEngine","Adding an already active target "+i);continue}const s=await BD(r.localStore,i),o=await Ea(r.localStore,s);await R_(r,sC(s),o.targetId,!1,o.resumeToken),Lf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Ta(r.localStore,i,!1).then(()=>{Sa(r.remoteStore,i),Aa(r,i)}).catch(Ji)}}function Ff(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yY.bind(null,e),e.Ca.d_=oY.bind(null,e.eventManager),e.Ca.$a=aY.bind(null,e.eventManager),e}function x_(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_Y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wY.bind(null,e),e}function kY(t,e,n){const r=re(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,y){const v=re(m),I=ht(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",w=>v.Gr.getBundleMetadata(w,y.id)).then(w=>!!w&&w.createTime.compareTo(I)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(JD(l));const c=new uY(l,s.localStore,o.serializer);let h=await o.Ua();for(;h;){const f=await c.la(h);f&&a._updateProgress(f),h=await o.Ua()}const d=await c.complete();return await Jr(s,d.Ia,void 0),await function(m,y){const v=re(m);return v.persistence.runTransaction("Save bundle","readwrite",I=>v.Gr.saveBundleMetadata(I,y))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return Zn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Jg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=vc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return $D(this.persistence,new VD,e.initialUser,this.serializer)}createPersistence(e){return new MD($f.Zr,this.serializer)}createSharedClientState(e){return new qD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class oC extends Jg{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Wa.initialize(this,e),await x_(this.Wa.syncEngine),await Ka(this.Wa.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return $D(this.persistence,new VD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new gQ(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new X8(n,this.persistence);return new Y8(e.asyncQueue,r)}createPersistence(e){const n=m_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new p_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,WD(),Fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new qD}}class OY extends oC{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Wa.syncEngine;this.sharedClientState instanceof pm&&(this.sharedClientState.syncEngine={no:RY.bind(null,n),ro:CY.bind(null,n),io:xY.bind(null,n),Qi:DY.bind(null,n),eo:bY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await PY(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=WD();if(!pm.D(n))throw new H(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=m_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class k_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SY.bind(null,this.syncEngine),await Qg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sY}()}createDatastore(e){const n=vc(e.databaseInfo.databaseId),r=function(s){return new jQ(s)}(e.databaseInfo);return function(s,o,a,l){return new WQ(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new HQ(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>J1(this.syncEngine,n,0),function(){return G1.D()?new G1:new FQ}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new dY(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ha(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Tt,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.Ja()}async Ja(){const e=await this.Ya();if(e===null)return null;const n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);const i=await this.Xa(r);return new lY(JSON.parse(i),e.length+r)}eu(){return this.buffer.findIndex(e=>e===123)}async Ya(){for(;this.eu()<0&&!await this.tu(););if(this.buffer.length===0)return null;const e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Xa(e){for(;this.buffer.length<e;)await this.tu()&&this.Za("Reached the end of bundle when more is expected.");const n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}async tu(){const e=await this.ja.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=re(i),a={documents:s.map(d=>ju(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ye.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=Y7(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());le(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ga(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ne.fromPath(r);this.mutations.push(new i_(i,this.precondition(i)))}),await async function(r,i){const s=re(r),o={writes:i.map(a=>zu(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,ye.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new H(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new H(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new y_(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(async()=>{const e=new MY(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})})}su(e){try{const n=this.updateFunction(e);return!cc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lD(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=SP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{K("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ya(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uh(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await LD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await O_(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>H1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>H1(e.remoteStore,i)),t._onlineComponents=e}function aC(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function O_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!aC(n))throw n;Zn("Error using user provided cache. Falling back to memory cache: "+n),await Uh(t,new Jg)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Uh(t,new Jg);return t._offlineComponents}async function Bf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Zg(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Zg(t,new k_))),t._onlineComponents}function lC(t){return O_(t).then(e=>e.persistence)}function N_(t){return O_(t).then(e=>e.localStore)}function uC(t){return Bf(t).then(e=>e.remoteStore)}function M_(t){return Bf(t).then(e=>e.syncEngine)}function LY(t){return Bf(t).then(e=>e.datastore)}async function ba(t){const e=await Bf(t),n=e.eventManager;return n.onListen=fY.bind(null,e.syncEngine),n.onUnlisten=mY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gY.bind(null,e.syncEngine),n}function FY(t){return t.asyncQueue.enqueue(async()=>{const e=await lC(t),n=await uC(t);return e.setNetworkEnabled(!0),function(i){const s=re(i);return s.L_.delete(0),yc(s)}(n)})}function UY(t){return t.asyncQueue.enqueue(async()=>{const e=await lC(t),n=await uC(t);return e.setNetworkEnabled(!1),async function(i){const s=re(i);s.L_.add(0),await Ha(s),s.q_.set("Offline")}(n)})}function BY(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,h){const d=re(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new H(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ya(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await N_(t),e,n)),n.promise}function cC(t,e,n={}){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Uf({next:f=>{o.enqueueAndForget(()=>I_(s,d));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b_(qa(a.path),h,{includeMetadataChanges:!0,_a:!0});return S_(s,d)}(await ba(t),t.asyncQueue,e,n,r)),r.promise}function jY(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Md(i,s,!0),l=new tC(s,a.Ts),c=l.ma(a.documents),h=l.applyChanges(c,!1);o.resolve(h.snapshot)}catch(a){const l=Ya(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await N_(t),e,n)),n.promise}function hC(t,e,n={}){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Uf({next:f=>{o.enqueueAndForget(()=>I_(s,d)),f.fromCache&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new b_(a,h,{includeMetadataChanges:!0,_a:!0});return S_(s,d)}(await ba(t),t.asyncQueue,e,n,r)),r.promise}function zY(t,e){const n=new Uf(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){re(i).Y_.add(s),s.next()}(await ba(t),n)),()=>{n.za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){re(i).Y_.delete(s)}(await ba(t),n))}}function qY(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?cD().encode(o):o,function(h,d){return new NY(h,d)}(function(h,d){if(h instanceof Uint8Array)return eS(h,d);if(h instanceof ArrayBuffer)return eS(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,vc(e));t.asyncQueue.enqueueAndForget(async()=>{kY(await M_(t),i,r)})}function WY(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=re(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await N_(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fC(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nS(t){if(!ne.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rS(t){if(ne.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jf(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pC(t,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F8;switch(r.type){case"firstParty":return new z8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tS.get(n);r&&(K("ComponentProvider","Removing Datastore"),tS.delete(n),r.terminate())}(this),Promise.resolve()}}function mC(t,e,n,r={}){var i;const s=(t=Ie(t,_c))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=ZR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(c)}t._authCredentials=new U8(new TP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class gC{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gC(this.firestore,e,this._query)}},Je=class vC{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vC(this.firestore,e,this._key)}},Di=class yC extends Jt{constructor(e,n,r){super(e,n,qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new ne(e))}withConverter(e){return new yC(this.firestore,e,this._path)}};function $_(t,e,...n){if(t=De(t),V_("collection","path",e),t instanceof _c){const r=ye.fromString(e,...n);return rS(r),new Di(t,null,r)}{if(!(t instanceof Je||t instanceof Di))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return rS(r),new Di(t.firestore,null,r)}}function GY(t,e){if(t=Ie(t,_c),V_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jt(t,null,function(r){return new Yr(ye.emptyPath(),r)}(e))}function Fd(t,e,...n){if(t=De(t),arguments.length===1&&(e=SP.newId()),V_("doc","path",e),t instanceof _c){const r=ye.fromString(e,...n);return nS(r),new Je(t,null,new ne(r))}{if(!(t instanceof Je||t instanceof Di))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return nS(r),new Je(t.firestore,t instanceof Di?t.converter:null,new ne(r))}}function _C(t,e){return t=De(t),e=De(e),(t instanceof Je||t instanceof Di)&&(e instanceof Je||e instanceof Di)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function wC(t,e){return t=De(t),e=De(e),t instanceof Jt&&e instanceof Jt&&t.firestore===e.firestore&&dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HY{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new y_(this,"async_queue_retry"),this.Eu=()=>{const n=Fh();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Fh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Tt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Zi(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=T_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&oe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function ev(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class KY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=-1;let at=class extends _c{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new HY}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||EC(this),this._firestoreClient.terminate()}};function YY(t,e){const n=typeof t=="object"?t:Hy(),r=typeof t=="string"?t:"(default)",i=Rf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XR("firestore");s&&mC(i,...s)}return i}function At(t){return t._firestoreClient||EC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function EC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new _7(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $Y(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function XY(t,e){SC(t=Ie(t,at));const n=At(t);if(n._uninitializedComponentsProvider)throw new H(F.FAILED_PRECONDITION,"SDK cache is already specified.");Zn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new k_;return TC(n,i,new oC(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function JY(t){SC(t=Ie(t,at));const e=At(t);if(e._uninitializedComponentsProvider)throw new H(F.FAILED_PRECONDITION,"SDK cache is already specified.");Zn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new k_;return TC(e,r,new OY(r,n.cacheSizeBytes))}function TC(t,e,n){const r=new Tt;return t.asyncQueue.enqueue(async()=>{try{await Uh(t,n),await Zg(t,e),r.resolve()}catch(i){const s=i;if(!aC(s))throw s;Zn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function ZY(t){if(t._initialized&&!t._terminated)throw new H(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!mr.D())return Promise.resolve();const i=r+"main";await mr.delete(i)}(m_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function eX(t){return function(n){const r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>EY(await M_(n),r)),r.promise}(At(t=Ie(t,at)))}function tX(t){return FY(At(t=Ie(t,at)))}function nX(t){return UY(At(t=Ie(t,at)))}function rX(t,e){const n=At(t=Ie(t,at)),r=new KY;return qY(n,t._databaseId,e,r),r}function iX(t,e){return WY(At(t=Ie(t,at)),e).then(n=>n?new Jt(t,null,n.query):null)}function SC(t){if(t._initialized||t._terminated)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wr(ot.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wr(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sX=/^__.*__$/;class oX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wa(e,this.data,n,this.fieldTransforms)}}class IC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class qf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ud(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(AC(this.wu)&&sX.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class aX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vc(e)}Nu(e,n,r,i=!1){return new qf({wu:e,methodName:n,Ou:r,path:He.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function co(t){const e=t._freezeSettings(),n=vc(t._databaseId);return new aX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wf(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);W_("Data must be an object, but it was:",o,r);const a=PC(r,o);let l,c;if(s.merge)l=new un(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=tv(e,d,n);if(!o.contains(f))throw new H(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);CC(h,f)||h.push(f)}l=new un(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new oX(new Dt(a),l,c)}class wc extends uo{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function bC(t,e,n){return new qf({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class F_ extends uo{_toFieldTransform(e){return new pc(e.path,new ya)}isEqual(e){return e instanceof F_}}class U_ extends uo{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=bC(this,e,!0),r=this.Lu.map(s=>ho(s,n)),i=new Xs(r);return new pc(e.path,i)}isEqual(e){return e instanceof U_&&ku(this.Lu,e.Lu)}}class B_ extends uo{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=bC(this,e,!0),r=this.Lu.map(s=>ho(s,n)),i=new Js(r);return new pc(e.path,i)}isEqual(e){return e instanceof B_&&ku(this.Lu,e.Lu)}}class j_ extends uo{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=new _a(e.serializer,tD(e.serializer,this.Bu));return new pc(e.path,n)}isEqual(e){return e instanceof j_&&this.Bu===e.Bu}}function z_(t,e,n,r){const i=t.Nu(1,e,n);W_("Data must be an object, but it was:",i,r);const s=[],o=Dt.empty();lo(r,(l,c)=>{const h=G_(e,l,n);c=De(c);const d=i.Cu(h);if(c instanceof wc)s.push(h);else{const f=ho(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new un(s);return new IC(o,a,i.fieldTransforms)}function q_(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[tv(e,r,n)],l=[i];if(s.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(tv(e,s[f])),l.push(s[f+1]);const c=[],h=Dt.empty();for(let f=a.length-1;f>=0;--f)if(!CC(c,a[f])){const m=a[f];let y=l[f];y=De(y);const v=o.Cu(m);if(y instanceof wc)c.push(m);else{const I=ho(y,v);I!=null&&(c.push(m),h.set(m,I))}}const d=new un(c);return new IC(h,d,o.fieldTransforms)}function RC(t,e,n,r=!1){return ho(n,t.Nu(r?4:3,e))}function ho(t,e){if(DC(t=De(t)))return W_("Unsupported field value:",e,t),PC(t,e);if(t instanceof uo)return function(r,i){if(!AC(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ho(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qe.fromDate(r);return{timestampValue:wa(i.serializer,s)}}if(r instanceof Qe){const s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wa(i.serializer,s)}}if(r instanceof zf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wr)return{bytesValue:fD(i.serializer,r._byteString)};if(r instanceof Je){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:u_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof L_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return r_(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${jf(r)}`)}(t,e)}function PC(t,e){const n={};return MP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,i)=>{const s=ho(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function DC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof zf||t instanceof wr||t instanceof Je||t instanceof uo||t instanceof L_)}function W_(t,e,n){if(!DC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=jf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function tv(t,e,n){if((e=De(e))instanceof ji)return e._internalPath;if(typeof e=="string")return G_(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const lX=new RegExp("[~\\*/\\[\\]]");function G_(t,e,n){if(e.search(lX)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ji(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(F.INVALID_ARGUMENT,a+t+l)}function CC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uX extends qu{data(){return super.data()}}function Gf(t,e){return typeof e=="string"?G_(t,e):e instanceof ji?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H_{}class Ec extends H_{}function Ar(t,e,...n){let r=[];e instanceof H_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof K_).length,a=s.filter(l=>l instanceof Hf).length;if(o>1||o>0&&a>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hf extends Ec{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=this._parse(e);return OC(e._query,n),new Jt(e.firestore,e.converter,Ug(e._query,n))}_parse(e){const n=co(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oS(d,h);const m=[];for(const y of d)m.push(sS(l,s,y));f={arrayValue:{values:m}}}else f=sS(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oS(d,h),f=RC(a,o,d,h==="in"||h==="not-in");return _e.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cX(t,e,n){const r=e,i=Gf("where",t);return Hf._create(i,r,n)}class K_ extends H_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new K_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Re.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)OC(o,l),o=Ug(o,l)}(e._query,n),new Jt(e.firestore,e.converter,Ug(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Q_ extends Ec{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Q_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(s,o)}(e._query,this._field,this._direction);return new Jt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Yr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function hX(t,e="asc"){const n=e,r=Gf("orderBy",t);return Q_._create(r,n)}class Kf extends Ec{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){return new Jt(e.firestore,e.converter,xd(e._query,this._limit,this._limitType))}}function dX(t){return pC("limit",t),Kf._create("limit",t,"F")}function fX(t){return pC("limitToLast",t),Kf._create("limitToLast",t,"L")}class Qf extends Ec{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Qf(e,n,r)}_apply(e){const n=kC(e,this.type,this._docOrFields,this._inclusive);return new Jt(e.firestore,e.converter,function(i,s){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function pX(...t){return Qf._create("startAt",t,!0)}function mX(...t){return Qf._create("startAfter",t,!1)}class Yf extends Ec{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Yf(e,n,r)}_apply(e){const n=kC(e,this.type,this._docOrFields,this._inclusive);return new Jt(e.firestore,e.converter,function(i,s){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function gX(...t){return Yf._create("endBefore",t,!1)}function vX(...t){return Yf._create("endAt",t,!0)}function kC(t,e,n,r){if(n[0]=De(n[0]),n[0]instanceof qu)return function(s,o,a,l,c){if(!l)throw new H(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Xo(s))if(d.field.isKeyField())h.push(Qs(o,l.key));else{const f=l.data.field(d.field);if(xf(f))throw new H(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new H(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(f)}return new Ui(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=co(t.firestore);return function(o,a,l,c,h,d){const f=o.explicitOrderBy;if(h.length>f.length)throw new H(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const v=h[y];if(f[y].field.isKeyField()){if(typeof v!="string")throw new H(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!t_(o)&&v.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const I=o.path.child(ye.fromString(v));if(!ne.isDocumentKey(I))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const w=new ne(I);m.push(Qs(a,w))}else{const I=RC(l,c,v);m.push(I)}}return new Ui(m,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function sS(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t_(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!ne.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qs(t,new ne(r))}if(n instanceof Je)return Qs(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(n)}.`)}function oS(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Y_{convertValue(e,n="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>qe(o.doubleValue));return new L_(s)}convertGeoPoint(e){return new zf(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);le(ID(r));const i=new Li(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class yX extends Y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Gr=class extends qu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},tu=class extends Gr{data(e={}){return super.data(e)}},zi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tu(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new tu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new tu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_X(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _X(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}function NC(t,e){return t instanceof Gr&&e instanceof Gr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zi&&e instanceof zi&&t._firestore===e._firestore&&wC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wX(t){t=Ie(t,Je);const e=Ie(t.firestore,at);return cC(At(e),t._key).then(n=>X_(e,t,n))}class fo extends Y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function EX(t){t=Ie(t,Je);const e=Ie(t.firestore,at),n=At(e),r=new fo(e);return BY(n,t._key).then(i=>new Gr(e,r,t._key,i,new bs(i!==null&&i.hasLocalMutations,!0),t.converter))}function TX(t){t=Ie(t,Je);const e=Ie(t.firestore,at);return cC(At(e),t._key,{source:"server"}).then(n=>X_(e,t,n))}function MC(t){t=Ie(t,Jt);const e=Ie(t.firestore,at),n=At(e),r=new fo(e);return xC(t._query),hC(n,t._query).then(i=>new zi(e,r,t,i))}function SX(t){t=Ie(t,Jt);const e=Ie(t.firestore,at),n=At(e),r=new fo(e);return jY(n,t._query).then(i=>new zi(e,r,t,i))}function IX(t){t=Ie(t,Jt);const e=Ie(t.firestore,at),n=At(e),r=new fo(e);return hC(n,t._query,{source:"server"}).then(i=>new zi(e,r,t,i))}function aS(t,e,n){t=Ie(t,Je);const r=Ie(t.firestore,at),i=Xf(t.converter,e,n);return Tc(r,[Wf(co(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ke.none())])}function lS(t,e,n,...r){t=Ie(t,Je);const i=Ie(t.firestore,at),s=co(i);let o;return o=typeof(e=De(e))=="string"||e instanceof ji?q_(s,"updateDoc",t._key,e,n,r):z_(s,"updateDoc",t._key,e),Tc(i,[o.toMutation(t._key,Ke.exists(!0))])}function AX(t){return Tc(Ie(t.firestore,at),[new Ga(t._key,Ke.none())])}function bX(t,e){const n=Ie(t.firestore,at),r=Fd(t),i=Xf(t.converter,e);return Tc(n,[Wf(co(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then(()=>r)}function VC(t,...e){var n,r,i;t=De(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ev(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ev(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof Je)c=Ie(t.firestore,at),h=qa(t._key.path),l={next:d=>{e[o]&&e[o](X_(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ie(t,Jt);c=Ie(d.firestore,at),h=d._query;const f=new fo(c);l={next:m=>{e[o]&&e[o](new zi(c,f,d,m))},error:e[o+1],complete:e[o+2]},xC(t._query)}return function(f,m,y,v){const I=new Uf(v),w=new b_(m,I,y);return f.asyncQueue.enqueueAndForget(async()=>S_(await ba(f),w)),()=>{I.za(),f.asyncQueue.enqueueAndForget(async()=>I_(await ba(f),w))}}(At(c),h,a,l)}function RX(t,e){return zY(At(t=Ie(t,at)),ev(e)?e:{next:e})}function Tc(t,e){return function(r,i){const s=new Tt;return r.asyncQueue.enqueueAndForget(async()=>vY(await M_(r),i,s)),s.promise}(At(t),e)}function X_(t,e,n){const r=n.docs.get(e._key),i=new fo(t);return new Gr(t,i,e._key,r,new bs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DX=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=co(e)}set(e,n,r){this._verifyNotCommitted();const i=mi(e,this._firestore),s=Xf(i.converter,n,r),o=Wf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ke.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=mi(e,this._firestore);let o;return o=typeof(n=De(n))=="string"||n instanceof ji?q_(this._dataReader,"WriteBatch.update",s._key,n,r,i):z_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mi(e,this._firestore);return this._mutations=this._mutations.concat(new Ga(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function mi(t,e){if((t=De(t)).firestore!==e)throw new H(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CX=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=co(n)}get(n){const r=mi(n,this._firestore),i=new yX(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return oe();const o=s[0];if(o.isFoundDocument())return new qu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new qu(this._firestore,i,r._key,null,r.converter);throw oe()})}set(n,r,i){const s=mi(n,this._firestore),o=Xf(s.converter,r,i),a=Wf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=mi(n,this._firestore);let a;return a=typeof(r=De(r))=="string"||r instanceof ji?q_(this._dataReader,"Transaction.update",o._key,r,i,s):z_(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=mi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=mi(e,this._firestore),r=new fo(this._firestore);return super.get(e).then(i=>new Gr(this._firestore,r,n._key,i._document,new bs(!1,!1),n.converter))}};function xX(t,e,n){t=Ie(t,at);const r=Object.assign(Object.assign({},PX),n);return function(s){if(s.maxAttempts<1)throw new H(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Tt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await LY(s);new VY(s.asyncQueue,c,a,o,l).ru()}),l.promise}(At(t),i=>e(new CX(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kX(){return new wc("deleteField")}function OX(){return new F_("serverTimestamp")}function NX(...t){return new U_("arrayUnion",t)}function MX(...t){return new B_("arrayRemove",t)}function VX(t){return new j_("increment",t)}(function(e,n=!0){(function(i){za=i})(Pf),Hs(new zr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new at(new B8(r.getProvider("auth-internal")),new W8(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qn(ZT,"4.7.2",e),Qn(ZT,"4.7.2","esm2017")})();const $X="@firebase/firestore-compat",LX="0.3.37";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function cS(){if(!v7())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}let $C=class nv{constructor(e){this._delegate=e}static fromBase64String(e){return cS(),new nv(wr.fromBase64String(e))}static fromUint8Array(e){return uS(),new nv(wr.fromUint8Array(e))}toBase64(){return cS(),this._delegate.toBase64()}toUint8Array(){return uS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t){return FX(t,["next","error","complete"])}function FX(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UX{enableIndexedDbPersistence(e,n){return XY(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return JY(e._delegate)}clearIndexedDbPersistence(e){return ZY(e._delegate)}}class LC{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Li||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){mC(this._delegate,e,n,r)}enableNetwork(){return tX(this._delegate)}disableNetwork(){return nX(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fC("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return eX(this._delegate)}onSnapshotsInSync(e){return RX(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ra(this,$_(this._delegate,e))}catch(n){throw Gt(n,"collection()","Firestore.collection()")}}doc(e){try{return new On(this,Fd(this._delegate,e))}catch(n){throw Gt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wt(this,GY(this._delegate,e))}catch(n){throw Gt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xX(this._delegate,n=>e(new FC(this,n)))}batch(){return At(this._delegate),new UC(new DX(this._delegate,e=>Tc(this._delegate,e)))}loadBundle(e){return rX(this._delegate,e)}namedQuery(e){return iX(this._delegate,e).then(n=>n?new Wt(this,n):null)}}class Jf extends Y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new $C(new wr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return On.forKey(n,this.firestore,null)}}function BX(t){$8(t)}class FC{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Jf(e)}get(e){const n=Rs(e);return this._delegate.get(n).then(r=>new Wu(this._firestore,new Gr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Rs(e);return r?(J_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Rs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Rs(e);return this._delegate.delete(n),this}}class UC{constructor(e){this._delegate=e}set(e,n,r){const i=Rs(e);return r?(J_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Rs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Rs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class no{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new tu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=no.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new no(e,new Jf(e),n),i.set(n,s)),s}}no.INSTANCES=new WeakMap;class On{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jf(e)}static forPath(e,n,r){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new On(n,new Je(n._delegate,r,new ne(e)))}static forKey(e,n,r){return new On(n,new Je(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ra(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ra(this.firestore,$_(this._delegate,e))}catch(n){throw Gt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=De(e),e instanceof Je?_C(this._delegate,e):!1}set(e,n){n=J_("DocumentReference.set",n);try{return n?aS(this._delegate,e,n):aS(this._delegate,e)}catch(r){throw Gt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?lS(this._delegate,e):lS(this._delegate,e,n,...r)}catch(i){throw Gt(i,"updateDoc()","DocumentReference.update()")}}delete(){return AX(this._delegate)}onSnapshot(...e){const n=BC(e),r=jC(e,i=>new Wu(this.firestore,new Gr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return VC(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=EX(this._delegate):(e==null?void 0:e.source)==="server"?n=TX(this._delegate):n=wX(this._delegate),n.then(r=>new Wu(this.firestore,new Gr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new On(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gt(t,e,n){return t.message=t.message.replace(e,n),t}function BC(t){for(const e of t)if(typeof e=="object"&&!rv(e))return e;return{}}function jC(t,e){var n,r;let i;return rv(t[0])?i=t[0]:rv(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Wu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new On(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return NC(this._delegate,e._delegate)}}class Gu extends Wu{data(e){const n=this._delegate.data(e);return this._delegate._converter||L8(n!==void 0),n}}class Wt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Jf(e)}where(e,n,r){try{return new Wt(this.firestore,Ar(this._delegate,cX(e,n,r)))}catch(i){throw Gt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Wt(this.firestore,Ar(this._delegate,hX(e,n)))}catch(r){throw Gt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wt(this.firestore,Ar(this._delegate,dX(e)))}catch(n){throw Gt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Wt(this.firestore,Ar(this._delegate,fX(e)))}catch(n){throw Gt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wt(this.firestore,Ar(this._delegate,pX(...e)))}catch(n){throw Gt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wt(this.firestore,Ar(this._delegate,mX(...e)))}catch(n){throw Gt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wt(this.firestore,Ar(this._delegate,gX(...e)))}catch(n){throw Gt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wt(this.firestore,Ar(this._delegate,vX(...e)))}catch(n){throw Gt(n,"endAt()","Query.endAt()")}}isEqual(e){return wC(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=SX(this._delegate):(e==null?void 0:e.source)==="server"?n=IX(this._delegate):n=MC(this._delegate),n.then(r=>new iv(this.firestore,new zi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=BC(e),r=jC(e,i=>new iv(this.firestore,new zi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return VC(this._delegate,n,r)}withConverter(e){return new Wt(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class jX{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Gu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Wt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new jX(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Gu(this._firestore,r))})}isEqual(e){return NC(this._delegate,e._delegate)}}class Ra extends Wt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new On(this.firestore,e):null}doc(e){try{return e===void 0?new On(this.firestore,Fd(this._delegate)):new On(this.firestore,Fd(this._delegate,e))}catch(n){throw Gt(n,"doc()","CollectionReference.doc()")}}add(e){return bX(this._delegate,e).then(n=>new On(this.firestore,n))}isEqual(e){return _C(this._delegate,e._delegate)}withConverter(e){return new Ra(this.firestore,e?this._delegate.withConverter(no.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rs(t){return Ie(t,Je)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(...e){this._delegate=new ji(...e)}static documentId(){return new Z_(He.keyField().canonicalString())}isEqual(e){return e=De(e),e instanceof ji?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._delegate=e}static serverTimestamp(){const e=OX();return e._methodName="FieldValue.serverTimestamp",new Ts(e)}static delete(){const e=kX();return e._methodName="FieldValue.delete",new Ts(e)}static arrayUnion(...e){const n=NX(...e);return n._methodName="FieldValue.arrayUnion",new Ts(n)}static arrayRemove(...e){const n=MX(...e);return n._methodName="FieldValue.arrayRemove",new Ts(n)}static increment(e){const n=VX(e);return n._methodName="FieldValue.increment",new Ts(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zX={Firestore:LC,GeoPoint:zf,Timestamp:Qe,Blob:$C,Transaction:FC,WriteBatch:UC,DocumentReference:On,DocumentSnapshot:Wu,Query:Wt,QueryDocumentSnapshot:Gu,QuerySnapshot:iv,CollectionReference:Ra,FieldPath:Z_,FieldValue:Ts,setLogLevel:BX,CACHE_SIZE_UNLIMITED:QY};function qX(t,e){t.INTERNAL.registerComponent(new zr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zX)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WX(t){qX(t,(e,n)=>new LC(e,n,new UX)),t.registerVersion($X,LX)}WX(Df);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="firebasestorage.googleapis.com",qC="storageBucket",GX=2*60*1e3,HX=10*60*1e3,KX=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Xi{constructor(e,n,r=0){super(gm(e),`Firebase Storage: ${n} (${gm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ze||(ze={}));function gm(t){return"storage/"+t}function ew(){const t="An unknown error occurred, please check the error payload for server response.";return new tt(ze.UNKNOWN,t)}function QX(t){return new tt(ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YX(t){return new tt(ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XX(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(ze.UNAUTHENTICATED,t)}function JX(){return new tt(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZX(t){return new tt(ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WC(){return new tt(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GC(){return new tt(ze.CANCELED,"User canceled the upload/download.")}function eJ(t){return new tt(ze.INVALID_URL,"Invalid URL '"+t+"'.")}function tJ(t){return new tt(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nJ(){return new tt(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qC+"' property when initializing the app?")}function HC(){return new tt(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rJ(){return new tt(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function iJ(){return new tt(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sJ(t){return new tt(ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zo(t){return new tt(ze.INVALID_ARGUMENT,t)}function KC(){return new tt(ze.APP_DELETED,"The Firebase app was deleted.")}function QC(t){return new tt(ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(t,e){return new tt(ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dl(t){throw new tt(ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ut.makeFromUrl(e,n)}catch{return new Ut(e,"")}if(r.path==="")return r;throw tJ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},v=n===zC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",w=new RegExp(`^https?://${v}/${i}/${I}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<T.length;P++){const x=T[P],k=x.regex.exec(e);if(k){const S=k[x.indices.bucket];let E=k[x.indices.path];E||(E=""),r=new Ut(S,E),x.postModify(r);break}}if(r==null)throw eJ(e);return r}}class oJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...I){c||(c=!0,e.apply(null,I))}function d(I){i=setTimeout(()=>{i=null,t(m,l())},I)}function f(){s&&clearTimeout(s)}function m(I,...w){if(c){f();return}if(I){f(),h.call(null,I,...w);return}if(l()||o){f(),h.call(null,I,...w);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let y=!1;function v(I){y||(y=!0,f(),!c&&(i!==null?(I||(a=2),clearTimeout(i),d(0)):I||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function lJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(t){return t!==void 0}function cJ(t){return typeof t=="function"}function hJ(t){return typeof t=="object"&&!Array.isArray(t)}function Zf(t){return typeof t=="string"||t instanceof String}function hS(t){return tw()&&t instanceof Blob}function tw(){return typeof Blob<"u"}function sv(t,e,n,r){if(r<e)throw Zo(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zo(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Os;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Os||(Os={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e,n,r,i,s,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new dh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Os.NO_ERROR,l=s.getStatus();if(!a||XC(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Os.ABORT;r(!1,new dh(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new dh(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());uJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=ew();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?KC():GC();o(l)}else{const l=WC();o(l)}};this.canceled_?n(!1,new dh(!1,null,!0)):this.backoffId_=aJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vJ(t,e,n,r,i,s,o=!0){const a=YC(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return mJ(c,e),fJ(c,n),pJ(c,s),gJ(c,r),new dJ(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _J(...t){const e=yJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(tw())return new Blob(t);throw new tt(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){if(typeof atob>"u")throw sJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vm{constructor(e,n){this.data=e,this.contentType=n||null}}function JC(t,e){switch(t){case Nn.RAW:return new vm(ZC(e));case Nn.BASE64:case Nn.BASE64URL:return new vm(ex(t,e));case Nn.DATA_URL:return new vm(SJ(e),IJ(e))}throw ew()}function ZC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function TJ(t){let e;try{e=decodeURIComponent(t)}catch{throw nu(Nn.DATA_URL,"Malformed data URL.")}return ZC(e)}function ex(t,e){switch(t){case Nn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw nu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Nn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw nu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EJ(e)}catch(i){throw i.message.includes("polyfill")?i:nu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class tx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(Nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=AJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function SJ(t){const e=new tx(t);return e.base64?ex(Nn.BASE64,e.rest):TJ(e.rest)}function IJ(t){return new tx(t).contentType}function AJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){let r=0,i="";hS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(hS(this.data_)){const r=this.data_,i=wJ(r,e,n);return i===null?null:new Cr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cr(r,!0)}}static getBlob(...e){if(tw()){const n=e.map(r=>r instanceof Cr?r.data_:r);return new Cr(_J.apply(null,n))}else{const n=e.map(o=>Zf(o)?JC(Nn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Cr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){let e;try{e=JSON.parse(t)}catch{return null}return hJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function nx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PJ(t,e){return e}class zt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||PJ}}let fh=null;function DJ(t){return!Zf(t)||t.length<2?t:nx(t)}function ep(){if(fh)return fh;const t=[];t.push(new zt("bucket")),t.push(new zt("generation")),t.push(new zt("metageneration")),t.push(new zt("name","fullPath",!0));function e(s,o){return DJ(o)}const n=new zt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new zt("size");return i.xform=r,t.push(i),t.push(new zt("timeCreated")),t.push(new zt("updated")),t.push(new zt("md5Hash",null,!0)),t.push(new zt("cacheControl",null,!0)),t.push(new zt("contentDisposition",null,!0)),t.push(new zt("contentEncoding",null,!0)),t.push(new zt("contentLanguage",null,!0)),t.push(new zt("contentType",null,!0)),t.push(new zt("metadata","customMetadata",!0)),fh=t,fh}function CJ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ut(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function xJ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return CJ(r,t),r}function rx(t,e,n){const r=nw(e);return r===null?null:xJ(t,r,n)}function kJ(t,e,n,r){const i=nw(e);if(i===null||!Zf(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=ns(f,n,r),y=YC({alt:"media",token:c});return m+y})[0]}function rw(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="prefixes",fS="items";function OJ(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[dS])for(const i of n[dS]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Ut(e,s));r.prefixes.push(o)}if(n[fS])for(const i of n[fS]){const s=t._makeStorageReference(new Ut(e,i.name));r.items.push(s)}return r}function NJ(t,e,n){const r=nw(n);return r===null?null:OJ(t,e,r)}class Zr{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){if(!t)throw ew()}function tp(t,e){function n(r,i){const s=rx(t,i,e);return vr(s!==null),s}return n}function MJ(t,e){function n(r,i){const s=NJ(t,e,i);return vr(s!==null),s}return n}function VJ(t,e){function n(r,i){const s=rx(t,i,e);return vr(s!==null),kJ(s,i,t.host,t._protocol)}return n}function Xa(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=JX():i=XX():n.getStatus()===402?i=YX(t.bucket):n.getStatus()===403?i=ZX(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function np(t){const e=Xa(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=QX(t.path)),s.serverResponse=i.serverResponse,s}return n}function ix(t,e,n){const r=e.fullServerUrl(),i=ns(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Zr(i,s,tp(t,n),o);return a.errorHandler=np(e),a}function $J(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ns(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Zr(a,l,MJ(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Xa(e),h}function LJ(t,e,n){const r=e.fullServerUrl(),i=ns(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Zr(i,s,VJ(t,n),o);return a.errorHandler=np(e),a}function FJ(t,e,n,r){const i=e.fullServerUrl(),s=ns(i,t.host,t._protocol),o="PATCH",a=rw(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Zr(s,o,tp(t,r),c);return h.headers=l,h.body=a,h.errorHandler=np(e),h}function UJ(t,e){const n=e.fullServerUrl(),r=ns(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Zr(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=np(e),a}function BJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function sx(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=BJ(null,e)),r}function jJ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let P=0;P<2;P++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=sx(e,r,i),h=rw(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Cr.getBlob(d,r,f);if(m===null)throw HC();const y={name:c.fullPath},v=ns(s,t.host,t._protocol),I="POST",w=t.maxUploadRetryTime,_=new Zr(v,I,tp(t,n),w);return _.urlParams=y,_.headers=o,_.body=m.uploadData(),_.errorHandler=Xa(e),_}class Bd{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function iw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{vr(!1)}return vr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zJ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=sx(e,r,i),a={name:o.fullPath},l=ns(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=rw(o,n),f=t.maxUploadRetryTime;function m(v){iw(v);let I;try{I=v.getResponseHeader("X-Goog-Upload-URL")}catch{vr(!1)}return vr(Zf(I)),I}const y=new Zr(l,c,m,f);return y.urlParams=a,y.headers=h,y.body=d,y.errorHandler=Xa(e),y}function qJ(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=iw(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vr(!1)}d||vr(!1);const f=Number(d);return vr(!isNaN(f)),new Bd(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Zr(n,o,s,a);return l.headers=i,l.errorHandler=Xa(e),l}const pS=256*1024;function WJ(t,e,n,r,i,s,o,a){const l=new Bd(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw rJ();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,f=d+h;let m="";h===0?m="finalize":c===h?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},v=r.slice(d,f);if(v===null)throw HC();function I(P,x){const k=iw(P,["active","final"]),S=l.current+h,E=r.size();let b;return k==="final"?b=tp(e,s)(P,x):b=null,new Bd(S,E,k==="final",b)}const w="POST",_=e.maxUploadRetryTime,T=new Zr(n,w,I,_);return T.headers=y,T.body=v.uploadData(),T.progressCallback=a||null,T.errorHandler=Xa(t),T}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJ={STATE_CHANGED:"state_changed"},Ht={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ym(t){switch(t){case"running":case"pausing":case"canceling":return Ht.RUNNING;case"paused":return Ht.PAUSED;case"success":return Ht.SUCCESS;case"canceled":return Ht.CANCELED;case"error":return Ht.ERROR;default:return Ht.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(e,n,r){if(cJ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class KJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Os.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Os.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Os.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class QJ extends KJ{initXhr(){this.xhr_.responseType="text"}}function lr(){return new QJ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=ep(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(XC(i.status,[]))if(s)i=WC();else{this.sleepTime=Math.max(this.sleepTime*2,KX),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=zJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=qJ(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,lr,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=pS*this._chunkMultiplier,n=new Bd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=WJ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,lr,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){pS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=ix(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,lr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=jJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=GC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ym(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new HJ(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ym(this._state)){case Ht.SUCCESS:Ro(this._resolve.bind(null,this.snapshot))();break;case Ht.CANCELED:case Ht.ERROR:const n=this._reject;Ro(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ym(this._state)){case Ht.RUNNING:case Ht.PAUSED:e.next&&Ro(e.next.bind(e,this.snapshot))();break;case Ht.SUCCESS:e.complete&&Ro(e.complete.bind(e))();break;case Ht.CANCELED:case Ht.ERROR:e.error&&Ro(e.error.bind(e,this._error))();break;default:e.error&&Ro(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this._service=e,n instanceof Ut?this._location=n:this._location=Ut.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ro(e,n)}get root(){const e=new Ut(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nx(this._location.path)}get storage(){return this._service}get parent(){const e=bJ(this._location.path);if(e===null)return null;const n=new Ut(this._location.bucket,e);return new ro(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw QC(e)}}function YJ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ox(t,new Cr(e),n)}function XJ(t){const e={prefixes:[],items:[]};return ax(t,e).then(()=>e)}async function ax(t,e,n){const i=await lx(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await ax(t,e,i.nextPageToken)}function lx(t,e){e!=null&&typeof e.maxResults=="number"&&sv("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=$J(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,lr)}function JJ(t){t._throwIfRoot("getMetadata");const e=ix(t.storage,t._location,ep());return t.storage.makeRequestWithTokens(e,lr)}function ZJ(t,e){t._throwIfRoot("updateMetadata");const n=FJ(t.storage,t._location,e,ep());return t.storage.makeRequestWithTokens(n,lr)}function eZ(t){t._throwIfRoot("getDownloadURL");const e=LJ(t.storage,t._location,ep());return t.storage.makeRequestWithTokens(e,lr).then(n=>{if(n===null)throw iJ();return n})}function tZ(t){t._throwIfRoot("deleteObject");const e=UJ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lr)}function ux(t,e){const n=RJ(t._location.path,e),r=new Ut(t._location.bucket,n);return new ro(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZ(t){return/^[A-Za-z]+:\/\//.test(t)}function rZ(t,e){return new ro(t,e)}function cx(t,e){if(t instanceof sw){const n=t;if(n._bucket==null)throw nJ();const r=new ro(n,n._bucket);return e!=null?cx(r,e):r}else return e!==void 0?ux(t,e):t}function iZ(t,e){if(e&&nZ(e)){if(t instanceof sw)return rZ(t,e);throw Zo("To use ref(service, url), the first argument must be a Storage instance.")}else return cx(t,e)}function mS(t,e){const n=e==null?void 0:e[qC];return n==null?null:Ut.makeFromBucketSpec(n,t)}function sZ(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ZR(i,t.app.options.projectId))}class sw{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GX,this._maxUploadRetryTime=HX,this._requests=new Set,i!=null?this._bucket=Ut.makeFromBucketSpec(i,this._host):this._bucket=mS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ut.makeFromBucketSpec(this._url,e):this._bucket=mS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ro(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new oJ(KC());{const o=vJ(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const gS="@firebase/storage",vS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="storage";function oZ(t,e,n){return t=De(t),YJ(t,e,n)}function aZ(t){return t=De(t),JJ(t)}function lZ(t,e){return t=De(t),ZJ(t,e)}function uZ(t,e){return t=De(t),lx(t,e)}function cZ(t){return t=De(t),XJ(t)}function hZ(t){return t=De(t),eZ(t)}function dZ(t){return t=De(t),tZ(t)}function yS(t,e){return t=De(t),iZ(t,e)}function fZ(t,e){return ux(t,e)}function pZ(t=Hy(),e){t=De(t);const r=Rf(t,hx).getImmediate({identifier:e}),i=XR("storage");return i&&dx(r,...i),r}function dx(t,e,n,r={}){sZ(t,e,n,r)}function mZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new sw(n,r,i,e,Pf)}function gZ(){Hs(new zr(hx,mZ,"PUBLIC").setMultipleInstances(!0)),Qn(gS,vS,""),Qn(gS,vS,"esm2017")}gZ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ph(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new ph(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new ph(o,this,this._ref)):s={next:n.next?o=>n.next(new ph(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class wS{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Vr(e,this._service))}get items(){return this._delegate.items.map(e=>new Vr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=fZ(this._delegate,e);return new Vr(n,this.storage)}get root(){return new Vr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Vr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new _S(oZ(this._delegate,e,n),this)}putString(e,n=Nn.RAW,r){this._throwIfRoot("putString");const i=JC(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new _S(new ox(this._delegate,new Cr(i.data,!0),s),this)}listAll(){return cZ(this._delegate).then(e=>new wS(e,this.storage))}list(e){return uZ(this._delegate,e||void 0).then(n=>new wS(n,this.storage))}getMetadata(){return aZ(this._delegate)}updateMetadata(e){return lZ(this._delegate,e)}getDownloadURL(){return hZ(this._delegate)}delete(){return this._throwIfRoot("delete"),dZ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw QC(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ES(e))throw Zo("ref() expected a child path but got a URL, use refFromURL instead.");return new Vr(yS(this._delegate,e),this)}refFromURL(e){if(!ES(e))throw Zo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ut.makeFromUrl(e,this._delegate.host)}catch{throw Zo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vr(yS(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){dx(this._delegate,e,n,r)}}function ES(t){return/^[A-Za-z]+:\/\//.test(t)}const vZ="@firebase/storage-compat",yZ="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Z="storage-compat";function wZ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new fx(n,r)}function EZ(t){const e={TaskState:Ht,TaskEvent:GJ,StringFormat:Nn,Storage:fx,Reference:Vr};t.INTERNAL.registerComponent(new zr(_Z,wZ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(vZ,yZ)}EZ(Df);const px=Df.initializeApp({apiKey:"AIzaSyCjqookaK8rIjkwvFhLp4mLULO_BQ6-GBM",authDomain:"realcontrol-31b06.firebaseapp.com",projectId:"realcontrol-31b06",storageBucket:"realcontrol-31b06.appspot.com",messagingSenderId:"630118428029",appId:"1:630118428029:web:c27e90db601c10cb54b014"}),TZ=YY(px);pZ(px);const SZ=YH(HR);HR.locale("es");function IZ(){const[t,e]=j.useState(!1),n=()=>{e(!1)},r=()=>e(!0),[i,s]=j.useState([]),o=Ar($_(TZ,"RealControlCustomers")),[a,l]=j.useState(!0);j.useEffect(()=>{MC(o).then(v=>{v.size===0&&console.log("No results!");const I=v.docs.map(w=>({id:w.id,...w.data()}));s(I)}).catch(v=>{console.log("Error searching items",v)})},[a]);let c=[];i.forEach((v,I)=>{v.proximoServicio!==void 0&&c.push({title:v.nombreCliente,start:new Date(v.proximoServicio),end:new Date(v.proximoServicio)})}),console.log(c);const h={allDay:"Todo el día",previous:"Anterior",next:"Siguiente",today:"Hoy",month:"Mes",week:"Semana",day:"Día",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"Sin eventos"},d={event:v=>fe.jsx("div",{className:"events",onClick:()=>{r(),localStorage.customerName=v.title},children:fe.jsx("span",{children:v.title.slice(0,12)})})},[f,m]=j.useState(),y=v=>{m(v.title),console.info(v.title)};return fe.jsxs(fe.Fragment,{children:[fe.jsx("h1",{children:"Calendario"}),fe.jsx("div",{style:{height:"90vh",width:"90vw",marginLeft:"5vw"},children:fe.jsx(qH,{localizer:SZ,events:c,startAccessor:"start",endAccessor:"end",onSelectEvent:y,views:["month","week","day","agenda"],toolbar:!0,messages:h,components:d})}),fe.jsxs(nh,{show:t,onHide:n,centered:!0,children:[fe.jsx(nh.Header,{closeButton:!0,children:fe.jsx(nh.Title,{children:"Cliente: "})}),fe.jsx(nh.Body,{children:localStorage.customerName})]})]})}MA(document.getElementById("root")).render(fe.jsx(j.StrictMode,{children:fe.jsx(IZ,{})}));
